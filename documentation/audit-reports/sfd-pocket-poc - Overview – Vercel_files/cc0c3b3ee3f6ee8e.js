;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5a3254e3-04d3-9a91-58bd-298dc1dd972d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3496168,9615462,9287821,6569351,e=>{"use strict";let t=function(e,t,r,l){for(var n=e.length,a=r+(l?1:-1);l?a--:++a<n;)if(t(e[a],a,e))return a;return -1};e.s(["default",0,t],9615462);let r=function(e){return e!=e},l=function(e,t,r){for(var l=r-1,n=e.length;++l<n;)if(e[l]===t)return l;return -1},n=function(e,n,a){return n==n?l(e,n,a):t(e,r,a)};e.s(["default",0,n],9287821),e.s(["default",0,function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}],3496168),e.s(["default",0,function(e,t,r){for(var l=-1,n=null==e?0:e.length;++l<n;)if(r(t,e[l]))return!0;return!1}],6569351)},7750206,e=>{"use strict";var t=e.i(5826876),r=e.i(3496168),l=e.i(6569351),n=e.i(720992),a=e.i(5974768),i=e.i(9879515),o=e.i(2395639),s=a.default&&1/(0,o.default)(new a.default([,-0]))[1]==1/0?function(e){return new a.default(e)}:i.default;e.s(["default",0,function(e,a,i){var u=-1,d=r.default,c=e.length,f=!0,m=[],p=m;if(i)f=!1,d=l.default;else if(c>=200){var v=a?null:s(e);if(v)return(0,o.default)(v);f=!1,d=n.default,p=new t.default}else p=a?[]:m;e:for(;++u<c;){var g=e[u],h=a?a(g):g;if(g=i||0!==g?g:0,f&&h==h){for(var x=p.length;x--;)if(p[x]===h)continue e;a&&p.push(h),m.push(g)}else d(p,h,i)||(p!==m&&p.push(h),m.push(g))}return m}],7750206)},969721,e=>{"use strict";var t=e.i(4670771),r=e.i(7750206);e.s(["default",0,function(e,l){return e&&e.length?(0,r.default)(e,(0,t.default)(l,2)):[]}])},7189115,e=>{"use strict";var t=e.i(969721);e.s(["uniqBy",()=>t.default])},7605984,e=>{"use strict";var t=/[\\\/_+.#"@\[\(\{&]/,r=/[\\\/_+.#"@\[\(\{&]/g,l=/[\s-]/,n=/[\s-]/g;function a(e){return e.toLowerCase().replace(n," ")}var i=e.i(5766185),o=e.i(8660982),s=e.i(1738411),u=e.i(7713123),d=e.i(2205978),c='[cmdk-group=""]',f='[cmdk-group-items=""]',m='[cmdk-item=""]',p=`${m}:not([aria-disabled="true"])`,v="cmdk-item-select",g="data-value",h=(e,i,o)=>{var s;return s=e,function e(a,i,o,s,u,d,c){if(d===i.length)return u===a.length?1:.99;var f=`${u},${d}`;if(void 0!==c[f])return c[f];for(var m,p,v,g,h=s.charAt(d),x=o.indexOf(h,u),b=0;x>=0;)(m=e(a,i,o,s,x+1,d+1,c))>b&&(x===u?m*=1:t.test(a.charAt(x-1))?(m*=.8,(v=a.slice(u,x-1).match(r))&&u>0&&(m*=Math.pow(.999,v.length))):l.test(a.charAt(x-1))?(m*=.9,(g=a.slice(u,x-1).match(n))&&u>0&&(m*=Math.pow(.999,g.length))):(m*=.17,u>0&&(m*=Math.pow(.999,x-u))),a.charAt(x)!==i.charAt(d)&&(m*=.9999)),(m<.1&&o.charAt(x-1)===s.charAt(d+1)||s.charAt(d+1)===s.charAt(d)&&o.charAt(x-1)!==s.charAt(d))&&.1*(p=e(a,i,o,s,x+1,d+2,c))>m&&(m=.1*p),m>b&&(b=m),x=o.indexOf(h,x+1);return c[f]=b,b}(s=o&&o.length>0?`${s+" "+o.join(" ")}`:s,i,a(s),a(i),0,0,{})},x=o.createContext(void 0),b=o.createContext(void 0),y=o.createContext(void 0),w=o.forwardRef((e,t)=>{let r=O(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=O(()=>new Set),n=O(()=>new Map),a=O(()=>new Map),i=O(()=>new Set),d=A(e),{label:y,children:w,value:C,onValueChange:j,filter:S,shouldFilter:k,loop:N,disablePointerSelection:E=!1,vimBindings:V=!0,...R}=e,P=(0,u.useId)(),L=(0,u.useId)(),D=(0,u.useId)(),$=o.useRef(null),z=F();I(()=>{if(void 0!==C){let e=C.trim();r.current.value=e,T.emit()}},[C]),I(()=>{z(6,J)},[]);let T=o.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>r.current,setState:(e,t,l)=>{var n,a,i,o;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)G(),U(),z(1,H);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(D);e?e.focus():null==(n=document.getElementById(P))||n.focus()}if(z(7,()=>{var e;r.current.selectedItemId=null==(e=Z())?void 0:e.id,T.emit()}),l||z(5,J),(null==(a=d.current)?void 0:a.value)!==void 0){null==(o=(i=d.current).onValueChange)||o.call(i,null!=t?t:"");return}}T.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),K=o.useMemo(()=>({value:(e,t,l)=>{var n;t!==(null==(n=a.current.get(e))?void 0:n.value)&&(a.current.set(e,{value:t,keywords:l}),r.current.filtered.items.set(e,q(t,l)),z(2,()=>{U(),T.emit()}))},item:(e,t)=>(l.current.add(e),t&&(n.current.has(t)?n.current.get(t).add(e):n.current.set(t,new Set([e]))),z(3,()=>{G(),U(),r.current.value||H(),T.emit()}),()=>{a.current.delete(e),l.current.delete(e),r.current.filtered.items.delete(e);let t=Z();z(4,()=>{G(),(null==t?void 0:t.getAttribute("id"))===e&&H(),T.emit()})}),group:e=>(n.current.has(e)||n.current.set(e,new Set),()=>{a.current.delete(e),n.current.delete(e)}),filter:()=>d.current.shouldFilter,label:y||e["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:P,inputId:D,labelId:L,listInnerRef:$}),[]);function q(e,t){var l,n;let a=null!=(n=null==(l=d.current)?void 0:l.filter)?n:h;return e?a(e,r.current.search,t):0}function U(){if(!r.current.search||!1===d.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let l=n.current.get(r),a=0;l.forEach(t=>{a=Math.max(e.get(t),a)}),t.push([r,a])});let l=$.current;_().sort((t,r)=>{var l,n;let a=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(l=e.get(i))?l:0)-(null!=(n=e.get(a))?n:0)}).forEach(e=>{let t=e.closest(f);t?t.appendChild(e.parentElement===t?e:e.closest(`${f} > *`)):l.appendChild(e.parentElement===l?e:e.closest(`${f} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=$.current)?void 0:t.querySelector(`${c}[${g}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function H(){let e=_().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(g);T.setState("value",t||void 0)}function G(){var e,t,i,o;if(!r.current.search||!1===d.current.shouldFilter){r.current.filtered.count=l.current.size;return}r.current.filtered.groups=new Set;let s=0;for(let n of l.current){let l=q(null!=(t=null==(e=a.current.get(n))?void 0:e.value)?t:"",null!=(o=null==(i=a.current.get(n))?void 0:i.keywords)?o:[]);r.current.filtered.items.set(n,l),l>0&&s++}for(let[e,t]of n.current)for(let l of t)if(r.current.filtered.items.get(l)>0){r.current.filtered.groups.add(e);break}r.current.filtered.count=s}function J(){var e,t,r;let l=Z();l&&((null==(e=l.parentElement)?void 0:e.firstChild)===l&&(null==(r=null==(t=l.closest(c))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),l.scrollIntoView({block:"nearest"}))}function Z(){var e;return null==(e=$.current)?void 0:e.querySelector(`${m}[aria-selected="true"]`)}function _(){var e;return Array.from((null==(e=$.current)?void 0:e.querySelectorAll(p))||[])}function W(e){let t=_()[e];t&&T.setState("value",t.getAttribute(g))}function Q(e){var t;let r=Z(),l=_(),n=l.findIndex(e=>e===r),a=l[n+e];null!=(t=d.current)&&t.loop&&(a=n+e<0?l[l.length-1]:n+e===l.length?l[0]:l[n+e]),a&&T.setState("value",a.getAttribute(g))}function X(e){let t=Z(),r=null==t?void 0:t.closest(c),l;for(;r&&!l;)l=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,c):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,c))?void 0:r.querySelector(p);l?T.setState("value",l.getAttribute(g)):Q(e)}let Y=()=>W(_().length-1),ee=e=>{e.preventDefault(),e.metaKey?Y():e.altKey?X(1):Q(1)},et=e=>{e.preventDefault(),e.metaKey?W(0):e.altKey?X(-1):Q(-1)};return o.createElement(s.Primitive.div,{ref:t,tabIndex:-1,...R,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=R.onKeyDown)||t.call(R,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":V&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":V&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),W(0);break;case"End":e.preventDefault(),Y();break;case"Enter":{e.preventDefault();let t=Z();if(t){let e=new Event(v);t.dispatchEvent(e)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:K.inputId,id:K.labelId,style:B},y),M(e,e=>o.createElement(b.Provider,{value:T},o.createElement(x.Provider,{value:K},e))))}),C=o.forwardRef((e,t)=>{var r,l;let n=(0,u.useId)(),a=o.useRef(null),i=o.useContext(y),c=o.useContext(x),f=A(e),m=null!=(l=null==(r=f.current)?void 0:r.forceMount)?l:null==i?void 0:i.forceMount;I(()=>{if(!m)return c.item(n,null==i?void 0:i.id)},[m]);let p=P(n,a,[e.value,e.children,a],e.keywords),g=o.useContext(b),h=R(e=>e.value&&e.value===p.current),w=R(e=>!!m||!1===c.filter()||!e.search||e.filtered.items.get(n)>0);function C(){var e,t;j(),null==(t=(e=f.current).onSelect)||t.call(e,p.current)}function j(){g.setState("value",p.current,!0)}if(o.useEffect(()=>{let t=a.current;if(!(!t||e.disabled))return t.addEventListener(v,C),()=>t.removeEventListener(v,C)},[w,e.onSelect,e.disabled]),!w)return null;let{disabled:S,value:k,onSelect:N,forceMount:E,keywords:V,...O}=e;return o.createElement(s.Primitive.div,{ref:(0,d.composeRefs)(a,t),...O,id:n,"cmdk-item":"",role:"option","aria-disabled":!!S,"aria-selected":!!h,"data-disabled":!!S,"data-selected":!!h,onPointerMove:S||c.getDisablePointerSelection()?void 0:j,onClick:S?void 0:C},e.children)}),j=o.forwardRef((e,t)=>{let{heading:r,children:l,forceMount:n,...a}=e,i=(0,u.useId)(),c=o.useRef(null),f=o.useRef(null),m=(0,u.useId)(),p=o.useContext(x),v=R(e=>!!n||!1===p.filter()||!e.search||e.filtered.groups.has(i));I(()=>p.group(i),[]),P(i,c,[e.value,e.heading,f]);let g=o.useMemo(()=>({id:i,forceMount:n}),[n]);return o.createElement(s.Primitive.div,{ref:(0,d.composeRefs)(c,t),...a,"cmdk-group":"",role:"presentation",hidden:!v||void 0},r&&o.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:m},r),M(e,e=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?m:void 0},o.createElement(y.Provider,{value:g},e))))}),S=o.forwardRef((e,t)=>{let{alwaysRender:r,...l}=e,n=o.useRef(null),a=R(e=>!e.search);return r||a?o.createElement(s.Primitive.div,{ref:(0,d.composeRefs)(n,t),...l,"cmdk-separator":"",role:"separator"}):null}),k=o.forwardRef((e,t)=>{let{onValueChange:r,...l}=e,n=null!=e.value,a=o.useContext(b),i=R(e=>e.search),u=R(e=>e.selectedItemId),d=o.useContext(x);return o.useEffect(()=>{null!=e.value&&a.setState("search",e.value)},[e.value]),o.createElement(s.Primitive.input,{ref:t,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":u,id:d.inputId,type:"text",value:n?e.value:i,onChange:e=>{n||a.setState("search",e.target.value),null==r||r(e.target.value)}})}),N=o.forwardRef((e,t)=>{let{children:r,label:l="Suggestions",...n}=e,a=o.useRef(null),i=o.useRef(null),u=R(e=>e.selectedItemId),c=o.useContext(x);return o.useEffect(()=>{if(i.current&&a.current){let e=i.current,t=a.current,r,l=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return l.observe(e),()=>{cancelAnimationFrame(r),l.unobserve(e)}}},[]),o.createElement(s.Primitive.div,{ref:(0,d.composeRefs)(a,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":l,id:c.listId},M(e,e=>o.createElement("div",{ref:(0,d.composeRefs)(i,c.listInnerRef),"cmdk-list-sizer":""},e)))}),E=o.forwardRef((e,t)=>{let{open:r,onOpenChange:l,overlayClassName:n,contentClassName:a,container:s,...u}=e;return o.createElement(i.Root,{open:r,onOpenChange:l},o.createElement(i.Portal,{container:s},o.createElement(i.Overlay,{"cmdk-overlay":"",className:n}),o.createElement(i.Content,{"aria-label":e.label,"cmdk-dialog":"",className:a},o.createElement(w,{ref:t,...u}))))}),V=Object.assign(w,{List:N,Item:C,Input:k,Group:j,Separator:S,Dialog:E,Empty:o.forwardRef((e,t)=>R(e=>0===e.filtered.count)?o.createElement(s.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:o.forwardRef((e,t)=>{let{progress:r,children:l,label:n="Loading...",...a}=e;return o.createElement(s.Primitive.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},M(e,e=>o.createElement("div",{"aria-hidden":!0},e)))})});function A(e){let t=o.useRef(e);return I(()=>{t.current=e}),t}var I="u"<typeof window?o.useEffect:o.useLayoutEffect;function O(e){let t=o.useRef();return void 0===t.current&&(t.current=e()),t}function R(e){let t=o.useContext(b),r=()=>e(t.snapshot());return o.useSyncExternalStore(t.subscribe,r,r)}function P(e,t,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=o.useRef(),a=o.useContext(x);return I(()=>{var i;let o=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():n.current}})(),s=l.map(e=>e.trim());a.value(e,o,s),null==(i=t.current)||i.setAttribute(g,o),n.current=o}),n}var F=()=>{let[e,t]=o.useState(),r=O(()=>new Map);return I(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,l)=>{r.current.set(e,l),t({})}};function M(e,t){let r,{asChild:l,children:n}=e;return l&&o.isValidElement(n)?o.cloneElement("function"==typeof(r=n.type)?r(n.props):"render"in r?r.render(n.props):n,{ref:n.ref},t(n.props.children)):t(n)}var B={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};e.s(["Command",0,V],7605984)},1971436,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M12.8721 5.48633L12.6855 5.66992L9.875 8.43457V12.876H8.2998L8.13672 12.7598L6.38672 11.5088L6.125 11.3213V8.43457L3.31152 5.66992L3.125 5.48633V3.125H12.8721V5.48633ZM4.375 4.96094L7.18848 7.72754L7.375 7.91113V10.6777L8.625 11.5713V7.91113L8.81152 7.72754L11.6221 4.96191V4.375H4.375V4.96094Z" fill="currentColor"/>');e.s(["FilterSmall",0,t])},9192216,e=>{"use strict";var t=e.i(4205214),r=e.i(4004502),l=e.i(7605984),n=e.i(9689002),a=e.i(5255926),i=e.i(8735244),o=e.i(5883567),s=e.i(6143247),u=e.i(8660982);function d(e){let{heading:r,items:n,setSearch:a,renderItem:i,getId:o,getValue:u,onChange:d,addBorder:c}=e;return n.length?(0,t.jsx)(l.Command.Group,{className:(0,s.cn)("h-full p-1.5  [&>[cmdk-group-heading]]:px-2 [&>[cmdk-group-heading]]:pb-1 [&>[cmdk-group-heading]]:pt-0.5 [&>[cmdk-group-heading]]:text-xs [&>[cmdk-group-heading]]:text-gray-800",c&&"border-b"),heading:r,children:n.map(e=>(0,t.jsx)(l.Command.Item,{className:"w-full cursor-pointer rounded-md text-sm *:aria-selected:rounded  *:aria-selected:bg-gray-100 focus-visible:bg-gray-100 active:bg-gray-100",onSelect:()=>{d(e),a("")},value:u(e),children:i(e)},o(e)))}):null}function c(e){let{search:r,onAddNew:n,addLabel:a,allowEmptyAdd:i,label:s}=e,u=r.length>0?`${a} "${r}"`:i?`${a} new ${s}`:"",d=r.length>0?r:"new-item";return(0,t.jsx)(l.Command.Group,{className:"sticky bottom-0 z-10 rounded-b-lg border-t outline-none -mt-px",children:(0,t.jsx)(l.Command.Item,{"aria-label":u,className:"flex w-full cursor-pointer bg-white items-center p-1 text-gray-900 *:aria-selected:rounded *:aria-selected:bg-gray-100 focus-visible:bg-gray-100 active:bg-gray-100",onSelect:()=>n(r||""),value:d,children:(0,t.jsxs)("div",{className:"flex w-full items-center gap-2 p-1.5",children:[(0,t.jsx)(o.PlusCircle,{size:14}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:u})]})})})}e.s(["CommandMenu",0,function(e){let{label:o,options:f,isLoading:m,isSelected:p,onChange:v,onSearch:g,parseNewValue:h,getId:x,getValue:b,value:y,open:w,reverse:C,allowEmptyAdd:j=!1,addLabel:S="Add",...k}=e,[N,E]=(0,u.useState)(""),[V,A]=(0,u.useState)(!1),[I,O]=(0,u.useState)(!1),R=(0,u.useRef)(null),P=(0,u.useRef)(null),F=(0,u.useRef)(0);(0,u.useEffect)(()=>{y&&w&&setTimeout(()=>{let e=P.current?.querySelector(`[data-value="${b(y)}"]`);e?.scrollIntoView({block:"start"})},50)},[w]);let M=(0,u.useMemo)(()=>f?.length?`Find ${o}...`:`Enter ${o}`,[f,o]),{selected:B,groups:L}=(0,u.useMemo)(()=>{let e={selected:[],groups:{}};for(let t of f??[])if(p?.(t))e.selected.push(t);else{let r=t.group??"";r in e.groups||(e.groups[r]=[]),e.groups[r].push(t)}return e},[f,p]),D=(0,u.useMemo)(()=>h&&(N.length>0?(f??[]).every(e=>x(e)!==N):j),[N,f,x,h,j]),$=(0,u.useCallback)(e=>{if(h){let t=h(e);null===t?A(!0):(v(t),E(""),R.current?.focus())}},[v,h]),z=(0,u.useCallback)(e=>{E(e),A(!1),clearTimeout(F.current),g&&(F.current=setTimeout(()=>{O(!0),g(e).finally(()=>O(!1))},250))},[g]),T=(0,u.useCallback)(e=>{if("Tab"===e.key)e.key=e.shiftKey?"ArrowUp":"ArrowDown";else if(" "===e.key&&0===N.trim().length){e.preventDefault();let t=P.current?.querySelector('[aria-selected="true"] input[type="checkbox"]');t?.click()}},[N]);return(0,t.jsxs)(l.Command,{className:(0,s.cn)("w-100 rounded-lg border-gray-alpha-400 bg-background-100 shadow-menu flex",C?"flex-col-reverse":"flex-col"),loop:!0,onKeyDown:T,children:[(0,t.jsxs)("div",{className:(0,s.cn)("flex w-full items-center justify-between px-4 py-3",f?.length!==0&&"border-b"),children:[(0,t.jsx)(l.Command.Input,{className:(0,s.cn)("w-full border-none bg-transparent text-sm outline-none",V&&"text-[--geist-error]"),onValueChange:z,placeholder:M,ref:R,value:N}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-[14px] flex justify-center",children:I&&(0,t.jsx)(i.Spinner,{size:14})}),(0,t.jsx)(n.Kbd,{small:!0,children:"Esc"})]})]}),(0,t.jsxs)(l.Command.List,{className:"flex max-h-[288px] w-full flex-col overflow-y-auto",ref:P,children:[f&&!m?(0,t.jsxs)(t.Fragment,{children:[B.length?(0,t.jsx)(d,{addBorder:!0,getId:x,getValue:b,items:B,onChange:v,setSearch:E,...k}):null,Object.entries(L).map(e=>{let[r,l]=e;return(0,t.jsx)(d,{getId:x,getValue:b,heading:r,items:l,onChange:v,setSearch:E,...k},r)})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 p-2","data-testid":(0,r.tid)("command-menu","loading"),children:[(0,t.jsx)(a.Skeleton,{className:"h-4",width:"100%"}),(0,t.jsx)(a.Skeleton,{className:"h-4",width:"100%"}),(0,t.jsx)(a.Skeleton,{className:"h-4",width:"100%"})]}),!m&&!I&&f&&(0,t.jsxs)(l.Command.Empty,{className:"px-4 py-3 text-center text-sm text-gray-900",children:["No matching ",o.toLowerCase()]}),D?(0,t.jsx)(c,{onAddNew:$,search:N,addLabel:S,allowEmptyAdd:j,label:o}):null]})]})}])},5376857,8569407,e=>{"use strict";let t=(0,e.i(8660982).createContext)(null);t.displayName="FilterBarContext",e.s(["FilterBarContext",0,t],5376857);var r=e.i(4205214),l=e.i(2504781),n=e.i(1971436),a=e.i(6143247);e.s(["AddFilter",0,function(e){let{iconOnly:t,...i}=e;return(0,r.jsx)(l.Button,{"aria-label":"Add filter",prefix:t?void 0:(0,r.jsx)(n.FilterSmall,{}),shape:t?"square":void 0,size:"small",...i,className:(0,a.cn)("!text-gray-900 hover:!text-gray-1000 data-[state='open']:!bg-gray-100",!t&&"!pl-2",i.className),type:"tertiary",typeName:"button",children:t?(0,r.jsx)(n.FilterSmall,{}):"Add filter"})}],8569407)},1482596,6564233,8815885,2789287,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),l=e.i(5376857),n=e.i(8569407),a=e.i(2504781),i=e.i(9096446),o=e.i(6143247),s=e.i(4004502),u=e.i(1473216),d=e.i(9722978),c=e.i(3869281),f=e.i(5468328),m=e.i(3306538),p=e.i(9192216),v=e.i(5778089);let g=e=>{let{label:t,id:r}=e;return`${r}${t?`
${t}`:""}`};function h(e){let{values:l,options:n,label:i,rounded:o=!1,size:s="small",onOpenChange:f,onChange:h,onSearch:b,open:y,className:w,parseNewValue:C,children:j,disabled:S,availableOperators:k}=e,N=(0,v.getValueLabel)(l,i),E=(0,r.useCallback)(e=>l.some(t=>{let{id:r}=t;return r===e.id}),[l]),V=(0,r.useCallback)(e=>{let r="string"==typeof e.label&&e.label.length>0,l=r?e.label:e.id;return(0,t.jsx)(x,{text:e.tooltip,children:(0,t.jsxs)("div",{className:(0,d.clsx)("flex w-full items-center gap-2 px-2 py-1.5",e.disabled&&"cursor-not-allowed opacity-75"),onClick:t=>{let r=document.getSelection();if(r?.isCollapsed===!1){t.preventDefault(),t.stopPropagation();return}t.target.closest("label")&&(t.preventDefault(),t.stopPropagation(),h(e,!0))},children:[!k||k.some(e=>"multiple"===e.type||"array"===e.type)?(0,t.jsx)(c.Checkbox,{checked:E(e),disabled:e.disabled,onChange:()=>void 0,tabIndex:-1}):null,(0,t.jsx)("div",{className:"flex min-w-0 flex-1 max-w-[min(32rem,75vw)] flex-col items-start",children:r&&e.label!==e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"w-full truncate font-medium leading-tight",title:e.label,children:e.label}),(0,t.jsx)("span",{className:"w-full truncate text-sm text-gray-800 leading-tight",title:e.id,children:e.id})]}):""===l?(0,t.jsx)("span",{className:"text-sm text-gray-800",children:v.emptyStringReplacement}):(0,t.jsx)("span",{className:"w-full truncate",title:l,children:l})}),e.badge?(0,t.jsx)("div",{className:"ml-2 shrink-0",children:(0,t.jsx)(x,{text:e.badge.tooltip,children:(0,t.jsx)(m.Badge,{size:"sm",...e.badge})})}):null]})})},[h,E,k]);return(0,t.jsxs)(u.Root,{modal:!0,onOpenChange:f,open:y,children:[(0,t.jsx)(u.Anchor,{className:"flex",children:(0,t.jsx)(u.Trigger,{asChild:!0,children:j??(0,t.jsx)(a.Button,{className:(0,d.clsx)("!ring-1 ring-gray-400 focus:z-10 focus:ring-gray-500",!o&&"rounded-[0!important]","left"===o&&"rounded-r-[0!important]","right"===o&&"rounded-l-[0!important]",S&&"bg-[var(--themed-bg)!important]",w),disabled:S,size:s,title:N.display!==N.full?N.full:void 0,type:"secondary",typeName:"button",children:N.display})})}),(0,t.jsx)(u.Portal,{children:(0,t.jsx)(u.Content,{align:"start",className:"tailwind-preflight",onCloseAutoFocus:()=>f(!1),sideOffset:8,children:(0,t.jsx)(p.CommandMenu,{getId:v.getValueId,getValue:g,isSelected:E,label:i,onChange:h,onSearch:b,options:n,parseNewValue:C,renderItem:V})})})]})}function x(e){let{text:r,children:l}=e;return r?(0,t.jsx)(f.Tooltip,{className:"w-full",text:r,children:l}):l}e.s(["MultiFilterPopoverBox",0,h],6564233);var b=e.i(6198010);let y=e=>{let{id:t}=e;return t},w=e=>{let{label:t,group:r}=e;return`${t}${r?` ${r}`:""}`},C=e=>(0,t.jsxs)("div",{className:"flex w-full items-center gap-2 rounded px-2 py-1.5",children:["icon"in e&&e.icon?(0,t.jsx)(e.icon,{className:"size-4"}):null,e.label]});function j(e){let{label:r,value:l,options:n,onOpenChange:i,open:o,onChange:s,isLoading:c,rounded:f=!1,size:m="small",className:v,children:g,disabled:h,prefix:x,suffix:j,id:S}=e;return(0,t.jsxs)(u.Root,{modal:!0,onOpenChange:i,open:o,children:[(0,t.jsx)(u.Anchor,{className:"flex",children:(0,t.jsx)(u.Trigger,{asChild:!0,children:g||(0,t.jsx)(a.Button,{id:S,"aria-label":`Select ${r}`,className:(0,d.clsx)("!px-1",!f&&"rounded-[0!important]","left"===f&&"rounded-r-[0!important]","right"===f&&"rounded-l-[0!important]",h&&"bg-[var(--themed-bg)!important]",v),disabled:h,prefix:l&&"icon"in l&&l.icon?(0,t.jsx)(l.icon,{className:"size-4"}):x,size:m,suffix:j,type:"secondary",typeName:"button",children:l?l.label:(0,t.jsx)(b.Plus,{"aria-label":`Select ${r}`})})})}),(0,t.jsx)(u.Portal,{children:(0,t.jsx)(u.Content,{align:"start",className:"tailwind-preflight",sideOffset:8,children:(0,t.jsx)(p.CommandMenu,{getId:y,getValue:w,isLoading:c,label:r,onChange:s,open:o,options:n,renderItem:C,value:l})})})]})}e.s(["SingleFilterPopoverBox",0,j],8815885);var S=e.i(7883293);function k(e){let t=(0,r.useContext)(l.FilterBarContext);if(!t)throw Error("Missing FilterBarContext.Provider in the React tree");return(0,S.useStore)(t,e)}function N(e){let{value:{value:l}={id:"",value:""},onChange:n,onToggle:a,disabled:i,ref:o}=e,[s,u]=(0,r.useState)(l);return(0,t.jsx)("div",{className:"focus:border-rounded -my-px flex items-center border bg-background-100 px-2",children:(0,t.jsx)("input",{"aria-label":"input value",className:(0,d.clsx)("block w-full bg-background-100 focus:outline-none focus:ring-transparent @sm-page:text-sm",i&&"bg-[--themed-bg] text-gray-700"),disabled:i,onBlur:()=>{s!==l&&n((0,v.toValueObj)(s)),a(!1)},onChange:e=>u(e.target.value),onFocus:()=>a(!0),ref:o,type:"text",value:s.toString()})})}function E(e){let{index:l}=e,n=k(e=>e.filters),u=k(e=>e.removeFilter),d=k(e=>e.chooseValue),c=k(e=>e.chooseOperator),f=k(e=>e.searchValues),m=k(e=>e.toggleFilter),p=k(e=>e.edited),g=k(e=>e.config.dimensions),x=k(e=>e.disabled),b=(0,r.useRef)(null),{open:y,dimension:w,values:C,operator:S,availableValues:E,availableOperators:V,parseValue:A}=(0,r.useMemo)(()=>({open:null,availableValues:void 0,availableOperators:void 0,parseValue:void 0,values:n[l]?.values??[],operator:n[l]?.operator,...p?.index===l?p:{},dimension:g.find(e=>{let{id:t}=e;return t===n[l]?.dimension})??g[0]}),[p,n,l,g]),I=(0,r.useCallback)(e=>{e&&"value"===y||m(e?"value":null,l)},[l,m,y]),O=(0,r.useCallback)(e=>void m(e?"operator":null,l),[l,m]);return(0,r.useEffect)(()=>{"match"===S.type&&"value"===y&&setTimeout(()=>b.current?.focus(),100)},[y,S.type]),(0,t.jsxs)("div",{className:"max-w-full m-px flex h-8 items-stretch","data-testid":(0,s.tid)("filter-bar","cascading-filter"),children:[(0,t.jsx)("div",{className:"overflow-hidden rounded-l-md bg-background-100 px-2 py-1.5 text-sm font-normal ring-1 ring-gray-400",children:(0,v.renderItem)(w,!0)}),(0,t.jsx)(j,{className:"!font-normal !ring-1 ring-gray-400 focus:ring-gray-500",disabled:x,label:"operator",onChange:c,onOpenChange:O,open:"operator"===y,options:V,value:S}),"match"===S.type&&(0,t.jsx)(N,{disabled:x,onChange:d,onToggle:I,ref:b,value:C[0]}),"match"!==S.type&&"valueless"!==S.type&&(0,t.jsx)(h,{disabled:x,label:w.label,onChange:d,onOpenChange:I,onSearch:f,open:"value"===y,options:E,parseNewValue:A,values:C,availableOperators:V}),(0,t.jsx)(a.Button,{"aria-label":"Remove filter",className:(0,o.cn)("!px-0.5 !ring-1 ring-gray-400 hover:!text-gray-1000 focus:ring-gray-500",x?"bg-[var(--themed-bg)!important]":"!text-gray-900"),disabled:x,onClick:()=>u(l),size:"small",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},svgOnly:!0,type:"secondary",typeName:"button",children:(0,t.jsx)(i.CrossSmall,{size:"small"})})]})}function V(){let{dimension:e,operator:r,availableValues:l,availableOperators:a,values:i,parseValue:o}=k(e=>e.edited??{dimension:null,operator:null,availableValues:[],availableOperators:[],values:[],parseValue:void 0}),s=k(e=>e.config.dimensions),u=k(e=>e.edited?.index===null?e.edited.open:null),d=k(e=>e.startNewFilter),c=k(e=>e.chooseDimension),f=k(e=>e.chooseOperator),m=k(e=>e.chooseValue),p=k(e=>e.searchValues),v=k(e=>e.disabled);return e?r?(0,t.jsx)(h,{label:e.label,onChange:m,onOpenChange:d,onSearch:p,open:"value"===u,options:l,parseNewValue:o,values:i,availableOperators:a,children:(0,t.jsx)(n.AddFilter,{disabled:v})}):(0,t.jsx)(j,{label:"operator",onChange:f,onOpenChange:d,open:"value"===u,options:a,children:(0,t.jsx)(n.AddFilter,{disabled:v})}):(0,t.jsx)(j,{label:"dimension",onChange:e=>void c(e),onOpenChange:d,open:"operator"===u,options:s,children:(0,t.jsx)(n.AddFilter,{disabled:v})})}function A(e){let{renderFilter:l,addFilter:n}=e,a=k(e=>e.filters);return(0,t.jsxs)("div",{className:"items-top tailwind-preflight flex flex-wrap gap-2",children:[a.map((e,n)=>(0,t.jsx)(r.Fragment,{children:(l||(e=>e))((0,t.jsx)(E,{index:n}),e,n)},n)),n||(0,t.jsx)(V,{})]})}e.s(["useStore",0,k],2789287);var I=e.i(687902);function O(e,t,r){let{edited:l}=r();t({edited:l?.index===e?null:l})}function R(e,t,r,l){let{filters:n,edited:a,onChange:i}=l(),o=t?.operator?.type==="valueless",s=void 0===t||o||t.values?.length?[...n.slice(0,e),t?{...n[e],...t}:void 0,...n.slice(e+1)].filter(e=>void 0!==e):n;r({filters:s,edited:t&&a?{...a,operator:t.operator??a.operator,values:t.values??a.values}:null}),i(s)}function P(e,t){let{dimensions:r}=t;return r.find(t=>{let{id:r}=t;return e?.dimension===r})}function F(e,t,r,l){let{valuesByDimension:n,edited:a}=l(),i=[...n[e.id]??[]],o=new Set(i.map(e=>{let{id:t}=e;return t})),s=!(e.id in n);for(let e of t)o.has(e.id)||(o.add(e.id),i.push(e),s=!0);s&&(a?.dimension?.id===e.id&&r({edited:{...a,availableValues:i}}),r({valuesByDimension:{...n,[e.id]:i}}))}function M(e){return"stringArray"===e.type?e=>{let{type:t}=e;return"array"===t||"valueless"===t}:"boolean"===e.type?e=>{let{type:t}=e;return"single"===t||"valueless"===t}:"number"===e.type?e=>{let{type:t}=e;return"multiple"===t||"single"===t||"numerical"===t||"valueless"===t}:e=>{let{type:t}=e;return"multiple"===t||"single"===t||"match"===t||"valueless"===t}}async function B(e,t){let{filters:r,config:l}=t(),n=new Set;for(let e of r){let r=P(e,l);!r||r.id in t().valuesByDimension||n.add(r)}for(let a of(await Promise.allSettled([...n].map(async r=>{F(r,await L({dimension:r},l.resolveValues),e,t)})),r)){let r=P(a,l);"match"!==a.operator.type&&r&&F(r,a.values,e,t)}e({filters:r.map(e=>({dimension:P(e,l)?.id,operator:function(e,t){let{operators:r}=t;return r.find(t=>{let{id:r}=t;return e?.operator.id===r})}(e,l),values:e.values.map(r=>t().valuesByDimension[e.dimension]?.find(e=>e.id===r.id)??r)})).filter(e=>void 0!==e.dimension&&void 0!==e.operator)})}async function L(e,t){let r=t?.(e);return r instanceof Object&&"then"in r?await r??[]:r??[]}function D(e,t){return JSON.stringify(e)===JSON.stringify(t)}e.s(["FilterBar",0,function(e){let{renderFilter:n,addFilter:a,...i}=e,o=(0,r.useRef)((0,I.createStore)()((e,t)=>({config:{dimensions:[],operators:[]},filters:[],onChange:()=>void 0,disabled:!1,operatorUponCreation:!1,autoSelectSingleDimension:!1,edited:null,valuesByDimension:{},setProps:async r=>{let{onChange:l,disabled:n,config:a,filters:i,operatorUponCreation:o,autoSelectSingleDimension:s}=r,u=t();n!==u.disabled&&e({disabled:n}),l!==u.onChange&&e({onChange:l}),o!==u.operatorUponCreation&&e({operatorUponCreation:o}),s!==u.autoSelectSingleDimension&&e({autoSelectSingleDimension:s});let d=!1;if(!D(u.config,a)){e({config:a,filters:i,edited:null});let t=i.filter(e=>{let{dimension:t}=e;return a.dimensions.some(e=>{let{id:r}=e;return r===t})});D(i,t)||(e({filters:t}),l(t)),d=!0}(a.resolveValues!==u.config.resolveValues||a.createValue!==u.config.createValue||a.resolveOperators!==u.config.resolveOperators)&&(e({config:a}),d=!0),D(u.filters,i)||(e({filters:i}),d=!0),d&&await B(e,t)},toggleFilter:async(r,l)=>{let{config:n,disabled:a,edited:i,filters:o,valuesByDimension:s}=t(),u=o[l],d=P(u,n);!a&&u&&d&&(r||i?.index===null||i?.values.length!==0||R(i.index,void 0,e,t),e({edited:r?{index:l,operator:u.operator,values:u.values,open:r,dimension:d,availableOperators:n.operators.filter(M(d)),availableValues:s[d.id],parseValue:(0,v.makeParseValue)(d)}:null}),F(d,await L({dimension:d},n.resolveValues),e,t))},startNewFilter:r=>{let{config:l,disabled:n,edited:a,filters:i,operatorUponCreation:o,autoSelectSingleDimension:s,valuesByDimension:u}=t();if(!n){if(r&&s&&1===l.dimensions.length){let r=l.dimensions[0],n="stringArray"===r.type?l.defaultArrayOperator:l.defaultSingleOperator;e({edited:{index:null,open:"value",dimension:r,operator:o?void 0:n,values:[],availableOperators:l.operators.filter(M(r)),availableValues:u[r.id],parseValue:(0,v.makeParseValue)(r)}}),L({dimension:r},l.resolveValues).then(l=>F(r,l,e,t));return}if(e({edited:r?{index:null,open:"operator",operator:o?void 0:l.defaultSingleOperator,values:[],availableOperators:l.operators}:null}),a?.dimension&&(a.operator?.type==="multiple"||a.operator?.type==="array")){let{values:r,operator:l,dimension:{id:n}}=a;r.length&&R(i.length,{values:r,operator:l,dimension:n},e,t)}}},chooseDimension:async r=>{let{config:l,edited:n,valuesByDimension:a,operatorUponCreation:i}=t();if(!n)return;let o="stringArray"===r.type?l.defaultArrayOperator:l.defaultSingleOperator;e({edited:{...n,open:"value",dimension:r,operator:i?void 0:o,parseValue:(0,v.makeParseValue)(r),availableValues:a[r.id],availableOperators:l.operators.filter(M(r))}}),F(r,await L({dimension:r},l.resolveValues),e,t)},chooseOperator:async r=>{let{edited:l,filters:n}=t();if(!l)return;if(null===l.index)return void("valueless"===r.type&&l.dimension?(e({edited:null}),R(n.length,{dimension:l.dimension.id,operator:r,values:[]},e,t)):e({edited:{...l,open:"value",operator:r}}));if(l.operator?.type==="valueless"&&"valueless"!==r.type){let t={...l,operator:r,open:null};return e({edited:t}),await new Promise(e=>{setTimeout(e,50)}),e({edited:{...t,open:"value"}})}let a=l.values;"multiple"!==r.type&&l.values.length>1&&(a=l.values.slice(0,1)),"valueless"===r.type&&(a=[]),R(l.index,{...n[l.index],operator:r,values:a},e,t),O(l.index,e,t)},chooseValue:(r,l)=>{let{config:n,filters:a,edited:i}=t();if(!i||!i.dimension||!i.operator)return;let{dimension:o,operator:s,values:u}=i;if(function(e,t){let{value:r}=e;return"number"===t.type&&("number"!=typeof r||Number.isNaN(r))||"boolean"===t.type&&!0!==r&&!1!==r}(r,o))return;let d={values:u,operator:s},c=!1;"match"===s.type?d.values=[r]:(u.every(e=>{let{id:t}=e;return t!==r.id})?(F(o,[r],e,t),"multiple"===s.type||"array"===s.type?d.values=[...u,r]:l?(d.values=[...u,r],d.operator=n.defaultMultiOperator):d.values=[r]):(d.values=u.filter(e=>{let{id:t}=e;return t!==r.id}),l&&"multiple"===s.type&&d.values.length<2&&!n.preserveOperatorOnValueChange&&(d.operator=n.defaultSingleOperator)),c=!l),null===i.index?l?e({edited:{...i,...d}}):(d.values.length&&R(a.length,{dimension:i.dimension.id,...d},e,t),e({edited:null})):(0===d.values.length&&c?R(i.index,void 0,e,t):R(i.index,d,e,t),c&&O(i.index,e,t))},searchValues:async r=>{let{config:l,edited:n}=t();if(!n?.dimension)return;let{dimension:a}=n,i=await L({dimension:a,text:r},l.resolveValues);F(a,i,e,t)},removeFilter:r=>{let{disabled:l,filters:n}=t();!l&&n[r]&&R(r,void 0,e,t)},resetOperator:()=>{let{disabled:r,edited:l}=t();!r&&l&&l.dimension&&e({edited:{...l,operator:void 0,values:[],open:"operator"}})},resetDimension:()=>{let{disabled:r,edited:l,config:n}=t();!r&&l&&e({edited:{index:null,values:[],open:"operator",availableOperators:n.operators}})}}))),s=(0,r.useMemo)(()=>i,[i]);return(0,r.useEffect)(()=>{o.current.getState().setProps(s)},[s]),(0,t.jsx)(l.FilterBarContext.Provider,{value:o.current,children:(0,t.jsx)(A,{renderFilter:n,addFilter:a})})}],1482596)}]);

//# debugId=5a3254e3-04d3-9a91-58bd-298dc1dd972d
//# sourceMappingURL=8a6c911eea78e4bd.js.map