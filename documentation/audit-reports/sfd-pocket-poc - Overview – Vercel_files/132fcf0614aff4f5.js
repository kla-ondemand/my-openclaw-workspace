;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e7078ae9-4098-d492-51b0-ef66e62b258d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6307619,e=>{e.v({afterName:"deploy-step-module__kdfw_G__afterName",age:"deploy-step-module__kdfw_G__age",content:"deploy-step-module__kdfw_G__content",contentClose:"deploy-step-module__kdfw_G__contentClose",contentFadeIn:"deploy-step-module__kdfw_G__contentFadeIn",contentFadeOut:"deploy-step-module__kdfw_G__contentFadeOut",contentOpen:"deploy-step-module__kdfw_G__contentOpen",contentWrapperPaddingBoth:"deploy-step-module__kdfw_G__contentWrapperPaddingBoth",contentWrapperPaddingVertical:"deploy-step-module__kdfw_G__contentWrapperPaddingVertical",contentWrapperPaddingVerticalBottom:"deploy-step-module__kdfw_G__contentWrapperPaddingVerticalBottom",header:"deploy-step-module__kdfw_G__header",icon:"deploy-step-module__kdfw_G__icon",item:"deploy-step-module__kdfw_G__item",name:"deploy-step-module__kdfw_G__name",trigger:"deploy-step-module__kdfw_G__trigger",triggerContent:"deploy-step-module__kdfw_G__triggerContent",triggerIcon:"deploy-step-module__kdfw_G__triggerIcon"})},9286433,e=>{e.v({creationFlow:"index-module__958Mra__creationFlow",logPreviewText:"index-module__958Mra__logPreviewText",mask:"index-module__958Mra__mask"})},7921739,e=>{e.v({accordion:"deploy-steps-module__0qoykW__accordion",afterNameContainer:"deploy-steps-module__0qoykW__afterNameContainer",cacheBadgeName:"deploy-steps-module__0qoykW__cacheBadgeName",cacheBadgeTooltipContainer:"deploy-steps-module__0qoykW__cacheBadgeTooltipContainer",checksFilter:"deploy-steps-module__0qoykW__checksFilter",checksStatus:"deploy-steps-module__0qoykW__checksStatus",connectionCircle:"deploy-steps-module__0qoykW__connectionCircle",connectionIcon:"deploy-steps-module__0qoykW__connectionIcon",filterMessage:"deploy-steps-module__0qoykW__filterMessage",linkText:"deploy-steps-module__0qoykW__linkText",noData:"deploy-steps-module__0qoykW__noData"})},4080109,e=>{e.v({action:"domain-row-module__MaxPfa__action",domain:"domain-row-module__MaxPfa__domain",domainContainer:"domain-row-module__MaxPfa__domainContainer",header:"domain-row-module__MaxPfa__header",heading:"domain-row-module__MaxPfa__heading",separator:"domain-row-module__MaxPfa__separator",wrapper:"domain-row-module__MaxPfa__wrapper"})},7784834,e=>{e.v({loadMore:"domain-step-module__nlP40W__loadMore",stepMessage:"domain-step-module__nlP40W__stepMessage"})},4303122,e=>{e.v({closedAll:"switcher-module__0BRQ2W__closedAll",collapsedBadgeName:"switcher-module__0BRQ2W__collapsedBadgeName",collapsedBadgesWrapper:"switcher-module__0BRQ2W__collapsedBadgesWrapper",iconLabel:"switcher-module__0BRQ2W__iconLabel",tooltip:"switcher-module__0BRQ2W__tooltip"})},9907554,e=>{e.v({active:"log-row-module__w74U9q__active",badge:"log-row-module__w74U9q__badge",badgesWrapper:"log-row-module__w74U9q__badgesWrapper",content:"log-row-module__w74U9q__content",contentClose:"log-row-module__w74U9q__contentClose",contentOpen:"log-row-module__w74U9q__contentOpen",downloadButton:"log-row-module__w74U9q__downloadButton",frameworkWrapper:"log-row-module__w74U9q__frameworkWrapper",header:"log-row-module__w74U9q__header",iconWrapper:"log-row-module__w74U9q__iconWrapper",isrIconWrapper:"log-row-module__w74U9q__isrIconWrapper",link:"log-row-module__w74U9q__link",middlewareList:"log-row-module__w74U9q__middlewareList",radixTrigger:"log-row-module__w74U9q__radixTrigger",scroller:"log-row-module__w74U9q__scroller",title:"log-row-module__w74U9q__title",trigger:"log-row-module__w74U9q__trigger",wrapper:"log-row-module__w74U9q__wrapper"})},1160917,e=>{e.v({active:"badge-module__2RpGha__active",badge:"badge-module__2RpGha__badge",badgeContent:"badge-module__2RpGha__badgeContent",enabled:"badge-module__2RpGha__enabled"})},2608999,e=>{e.v({allPathsMiddlewareRow:"artefacts-list-module__PbE2WW__allPathsMiddlewareRow",arrowColumn:"artefacts-list-module__PbE2WW__arrowColumn",button:"artefacts-list-module__PbE2WW__button",copyFlagIcon:"artefacts-list-module__PbE2WW__copyFlagIcon",copyFlagIconWrapper:"artefacts-list-module__PbE2WW__copyFlagIconWrapper",copyIcon:"artefacts-list-module__PbE2WW__copyIcon",copyIconContainer:"artefacts-list-module__PbE2WW__copyIconContainer",copyIconWrapper:"artefacts-list-module__PbE2WW__copyIconWrapper",cronJobItem:"artefacts-list-module__PbE2WW__cronJobItem",cronJobItemAsterisk:"artefacts-list-module__PbE2WW__cronJobItemAsterisk",destinationColumn:"artefacts-list-module__PbE2WW__destinationColumn",hasTrigger:"artefacts-list-module__PbE2WW__hasTrigger",headerContent:"artefacts-list-module__PbE2WW__headerContent",isrFunctionRow:"artefacts-list-module__PbE2WW__isrFunctionRow",item:"artefacts-list-module__PbE2WW__item",list:"artefacts-list-module__PbE2WW__list",middlewareInfoIcon:"artefacts-list-module__PbE2WW__middlewareInfoIcon",pathWrapper:"artefacts-list-module__PbE2WW__pathWrapper",regionBadge:"artefacts-list-module__PbE2WW__regionBadge",regionBadgeContainer:"artefacts-list-module__PbE2WW__regionBadgeContainer",singleDigit:"artefacts-list-module__PbE2WW__singleDigit",size:"artefacts-list-module__PbE2WW__size",sourceColumn:"artefacts-list-module__PbE2WW__sourceColumn",staticAssetGrid:"artefacts-list-module__PbE2WW__staticAssetGrid",staticRoute:"artefacts-list-module__PbE2WW__staticRoute",staticRouteButton:"artefacts-list-module__PbE2WW__staticRouteButton",staticRoutesContainer:"artefacts-list-module__PbE2WW__staticRoutesContainer",trigger:"artefacts-list-module__PbE2WW__trigger",truncate:"artefacts-list-module__PbE2WW__truncate",typeBadge:"artefacts-list-module__PbE2WW__typeBadge",typeBadgeContainer:"artefacts-list-module__PbE2WW__typeBadgeContainer",typeIcon:"artefacts-list-module__PbE2WW__typeIcon",variantItemGrid:"artefacts-list-module__PbE2WW__variantItemGrid",variantItemUpstream:"artefacts-list-module__PbE2WW__variantItemUpstream",virtualListAtBottom:"artefacts-list-module__PbE2WW__virtualListAtBottom",virtualListAtTop:"artefacts-list-module__PbE2WW__virtualListAtTop"})},6618181,e=>{e.v({header:"header-module__W7AuxW__header",headerStatContainer:"header-module__W7AuxW__headerStatContainer",headerStatMetric:"header-module__W7AuxW__headerStatMetric",headerStatTitle:"header-module__W7AuxW__headerStatTitle",headerStats:"header-module__W7AuxW__headerStats",headerTitle:"header-module__W7AuxW__headerTitle",headerTitleContainer:"header-module__W7AuxW__headerTitleContainer"})},2438968,e=>{e.v({sidebar:"sidebar-module__m58S2q__sidebar",sidebarDivider:"sidebar-module__m58S2q__sidebarDivider",sidebarFooter:"sidebar-module__m58S2q__sidebarFooter",sidebarTaskContainer:"sidebar-module__m58S2q__sidebarTaskContainer",sidebarTitle:"sidebar-module__m58S2q__sidebarTitle"})},5224197,458149,4989041,3622411,1367170,7442785,855127,e=>{"use strict";var t,s,a,n=e.i(4205214),i=e.i(1553931),r=e.i(8660982),l=e.i(9722978),o=e.i(4756166),c=e.i(8668470),d=e.i(8522580),u=e.i(246968),m=e.i(4597921),p=e.i(57106),h=e.i(7450862),x=e.i(8568511),g=e.i(1717203),f=e.i(7557283),y=e.i(2504781),j=e.i(8674454),v=e.i(6694387),b=e.i(4991687),C=e.i(8459493),_=e.i(8923565),k=e.i(5468328),w=e.i(5761705),N=e.i(7749365),S=e.i(6226725),I=e.i(109803),A=e.i(992159),R=e.i(7957251),T=e.i(8646538),P=e.i(6401841),E=e.i(762945),L=e.i(7674801),W=e.i(5677444),M=e.i(6159310),B=e.i(1282571),D=e.i(8525850),F=e.i(100247),V=e.i(4844919),O=e.i(3758860);e.i(6887680);var H=e.i(6810699),U=e.i(7743427),z=e.i(4443312),$=e.i(847180),q=e.i(4641028);let G="Running Checks",Y="Marketplace Checks",Z="Deployment Checks",J="Assigning Domains",K="Deployment Summary",Q=["Build Logs",K,J];var X=e.i(9334638);let ee=(0,X.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.53033 4.46967L5 3.93934L3.93934 5L4.46967 5.53033L10.4697 11.5303L11 12.0607L12.0607 11L11.5303 10.4697L5.53033 4.46967Z" fill="currentColor"/>');var et=e.i(8761240),es=e.i(9386557),ea=e.i(9584456),en=e.i(9429910),ei=e.i(5756088),er=e.i(5255926),el=e.i(8735244),eo=e.i(2560270),ec=e.i(361349),ed=e.i(85019),eu=e.i(6307619),em=((t={}).Building="BUILDING",t.FetchingSourceCode="FETCHING_SOURCE_CODE",t.PopulatingBuildCache="POPULATING_BUILD_CACHE",t.PreparingBuildEnv="PREPARING_BUILD_ENV",t.RestoringBuildCache="RESTORING_BUILD_CACHE",t.UploadingBuildOutputs="UPLOADING_BUILD_OUTPUTS",t),ep=((s={}).Delimiter="delimiter",s.Stdout="stdout",s.Stderr="stderr",s),eh=((a={}).Canceled="cancelled",a.Complete="complete",a.Error="error",a.Warning="warning",a.InProgress="in-progress",a.Pending="pending",a.Skipped="skipped",a.NoData="no-data",a.Partial="partial",a.MissingPermissions="missing-permissions",a);let ex={both:eu.default.contentWrapperPaddingBoth,vertical:eu.default.contentWrapperPaddingVertical,"vertical-bottom":eu.default.contentWrapperPaddingVerticalBottom,none:void 0};function eg(e){let{id:t,name:s}=e,a="string"==typeof s?`${s.length}ch`:"200px";return(0,n.jsx)(i.Item,{className:eu.default.item,disabled:!0,value:t,children:(0,n.jsx)(i.Header,{asChild:!0,className:eu.default.header,children:(0,n.jsx)("h2",{children:(0,n.jsx)(i.Trigger,{asChild:!0,className:eu.default.triggerContent,children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(er.Skeleton,{height:16,style:{width:a,fontSize:"14px"}}),(0,n.jsx)(er.Skeleton,{className:eu.default.icon,height:20,rounded:!0,width:20})]})})})})})}function ef(e){let{action:t,children:s,disabled:a,finishedAt:o,id:c,customDuration:d,name:u,paddingType:m="vertical",skeleton:p,startedAt:h,status:x,afterName:g,showDurationWhenSkipped:f}=e,[y,j]=r.useState(null),v=r.useMemo(()=>{switch(x){case"cancelled":case"pending":return(0,n.jsx)(N.Clock,{color:"gray-500",size:20});case"skipped":case"partial":return(0,n.jsx)(ee,{color:"gray-500",size:20});case"complete":return(0,n.jsx)(et.CheckCircleFill,{color:"blue-700",size:20});case"warning":return(0,n.jsx)(es.WarningFill,{color:"amber-700",size:20});case"error":return(0,n.jsx)(ea.StopFill,{color:"red-700",size:20});case"no-data":return(0,n.jsx)(en.InformationFill,{color:"gray-700",size:20});case"missing-permissions":return(0,n.jsx)(ei.LockClosed,{color:"gray-700",size:20});default:return(0,n.jsx)(el.Spinner,{size:20})}},[x]);(0,ec.useInterval)(()=>{h&&j(Date.now()-h)},o?null:1e3,!0),r.useEffect(()=>{null===y&&h&&o&&j(o-h)},[y,o,h]);let b="skipped"===x;return(0,n.jsxs)(i.Item,{className:eu.default.item,"data-status":x,disabled:a,value:c,children:[(0,n.jsx)(i.Header,{asChild:!0,className:eu.default.header,children:(0,n.jsx)("h2",{children:(0,n.jsx)(i.Trigger,{asChild:!0,className:(0,l.clsx)(eu.default.triggerContent,{"flex-nowrap":c===em.Building}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(eo.ChevronDown,{className:eu.default.triggerIcon,color:a?"gray-800":"gray-900"}),(0,n.jsx)("span",{className:`text-[14px] leading-[20px] font-medium ${eu.default.name}`,children:u}),g?(0,n.jsx)("span",{className:`text-copy-14 ${eu.default.afterName}`,children:g}):null,t,p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:eu.default.age}),(0,n.jsx)(er.Skeleton,{className:eu.default.icon,height:20,rounded:!0,width:20})]}):(0,n.jsxs)(n.Fragment,{children:[(!b||f)&&(d||y)&&c!==K?(0,n.jsx)("span",{className:"text-label-14 flex-none text-gray-900 tabular-nums",children:(0,ed.age)(d||y||void 0,{includeSeconds:!0})}):null,b?(0,n.jsx)("span",{className:"text-label-14 flex-none text-gray-900",children:"Skipped"}):null,(0,n.jsx)("div",{className:eu.default.icon,children:v})]})]})})})}),(0,n.jsx)(i.Content,{className:eu.default.content,children:(0,n.jsx)("div",{className:`${ex[m]??""} tailwind`,children:s})})]})}var ey=e.i(472117),ej=e.i(5838262),ev=e.i(277234),eb=e.i(8042625);function eC(e){let{checkId:t,deploymentId:s,teamSlug:a,onSuccess:i,disabled:l=!1,checksConclusion:o}=e,[c,d]=(0,r.useTransition)(),[u,m]=(0,r.useState)(0);(0,r.useEffect)(()=>()=>{u&&clearTimeout(u)},[u]);let p=async()=>{await (0,ev.fetchAPI)(`/v1/deployments/${s}/checks/${t}/rerequest${(0,eb.encode)({teamId:a,autoUpdate:!0})}`,{method:"POST"}),await i?.(),u&&clearTimeout(u);let e=window.setTimeout(()=>{m(0)},5e3);m(e)};return(0,n.jsx)(y.Button,{onClick:()=>d(p),size:"small",type:"secondary",disabled:l||c||"skipped"===o||!!u,loading:c,children:"Rerun"})}function e_(){let e=(0,W.useSearchParams)(),t=(0,W.usePathname)(),s=(0,W.useRouter)(),a=new Set(["all","failed","succeeded","running","queued"]),n=e?.get("promotion-requirements");return{activeFilter:a.has(n)?n??"all":"all",handleFilterChange:a=>{let n=new URLSearchParams(e?.toString());"all"===a?n.delete("promotion-requirements"):n.set("promotion-requirements",a),s.replace(`${t}?${n.toString()}`,{scroll:!1})},hasFilter:!!n}}function ek(e){let{deployment:t,teamSlug:s,expandedSteps:a,onExpandedStepsChange:i}=e,l=(0,ey.useCiChecksAndPoliciesFlagV2)(),{data:o}=(0,z.useProjectCheckRuns)({deploymentId:t.id,enableCiChecksAndPolicies:l}),{areChecksRunning:c}=(0,F.getDeploymentStatus)(t),{checks:d,mutate:u}=(0,q.default)({deploymentId:t.id,teamId:s},{refreshInterval:c?z.CHECK_RUNS_REFRESH_INTERVAL:0}),{ciChecks:m,checksV1ById:p}=(0,r.useMemo)(()=>({ciChecks:[...o?.runs??[],...d.map(e=>{let s;return s="registered"===e.status?"queued":e.status,{id:e.id,name:e.name,checkId:e.id,status:s,conclusion:e.conclusion,source:{kind:"integration",integrationId:e.integrationId,integrationConfigurationId:e.integrationId,externalResourceId:e.externalId},externalUrl:e.externalUrl,externalId:e.externalId,createdAt:e.createdAt,startedAt:e.startedAt,completedAt:e.completedAt,updatedAt:e.updatedAt,ownerId:t.team?.id||t.ownerId||"",projectId:t.projectId,deploymentId:t.id,output:e.output}})],checksV1ById:new Map(d.map(e=>[e.id,e]))}),[o,d,t]),h=(0,r.useRef)(!1),{hasFilter:x}=e_();(0,r.useEffect)(()=>{h.current||!x||a.includes(Z)||i([...a,Z]),m.length&&(h.current=!0)},[x,a,i,m]);let g=eh.Pending;0===m.length?eh.Pending:m.some(e=>"failed"===e.conclusion)?g=eh.Error:m.some(e=>"running"===e.status)?g=eh.InProgress:m.every(e=>"succeeded"===e.conclusion)&&(g=eh.Complete);let f=a.includes(Z),y="production"===t.target;return(0,n.jsx)(ew,{isProduction:y,isExpanded:f,combinedStatus:g,ciChecks:m,teamSlug:s,deployment:t,expandedSteps:a,checksV1ById:p,mutateChecksV1:u})}function ew(e){let{isProduction:t,combinedStatus:s,ciChecks:a,teamSlug:i,deployment:l,expandedSteps:o,checksV1ById:c,mutateChecksV1:d}=e,{activeFilter:u}=e_(),{can:m}=(0,g.default)(),p=(0,r.useMemo)(()=>m(f.Action.All,f.Resource.DeploymentCheck),[m]),h=(0,r.useMemo)(()=>"all"===u?a:a.filter(e=>{switch(u){case"failed":return"failed"===e.conclusion||"timeout"===e.conclusion||"skipped"===e.conclusion;case"running":return"running"===e.status;case"queued":return"queued"===e.status;case"succeeded":return"succeeded"===e.conclusion;default:return!0}}),[a,u]),x=(0,H.useResourceList)({resourceIds:h.flatMap(e=>"integration"===e.source.kind&&e.source.resourceId?[e.source.resourceId]:[])}),y=(0,r.useMemo)(()=>{let e=new Map;return x.data?.stores?.forEach(t=>{"integration"===t.type&&e.set(t.id,t)}),e},[x.data?.stores]);return 0===a.length?(0,n.jsx)(ef,{id:Z,name:Z,status:eh.Pending,children:(0,n.jsx)(ej.EmptyChecksCard,{})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ef,{action:(0,n.jsx)(eS,{isProduction:t,ciChecks:a,expandedSteps:o}),id:Z,name:Z,paddingType:"none",status:s,children:0===h.length?(0,n.jsx)(eP,{size:"sm",children:(0,n.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial ml-5",children:(0,n.jsx)("p",{className:"text-label-14 font-medium text-gray-900",children:"No requirements match this filter."})})}):h.sort((e,t)=>{let s=e=>"failed"===e.conclusion?0:"canceled"===e.conclusion?9:"running"===e.status?1:"queued"===e.status?2:"succeeded"===e.conclusion?8:"skipped"===e.conclusion?9:10,a=s(e),n=s(t);return a!==n?a-n:e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}).map(e=>{let t="resourceId"in e.source&&e.source.resourceId?y.get(e.source.resourceId):void 0;return(0,n.jsx)(eR,{check:e,resource:t,teamSlug:i,deployment:l,canUpdateDeploymentRequirements:p,checkV1:c.get(e.id),mutateChecksV1:d},e.name)})})})}function eN(e){let{ciChecks:t,expandedSteps:s}=e,a=(0,r.useMemo)(()=>({all:t.length,failed:t.filter(e=>"failed"===e.conclusion).length,running:t.filter(e=>"running"===e.status).length,registered:t.filter(e=>"queued"===e.status).length,succeeded:t.filter(e=>"succeeded"===e.conclusion).length,skipped:t.filter(e=>"skipped"===e.conclusion||"canceled"===e.conclusion).length}),[t]),{activeFilter:i,handleFilterChange:o}=e_(),c=[{value:"all",icon:(0,n.jsx)("span",{children:"All"}),count:a.all},{value:"failed",icon:(0,n.jsx)(eT,{check:{status:"completed",conclusion:"failed"}}),count:a.failed},{value:"succeeded",icon:(0,n.jsx)(eT,{check:{status:"completed",conclusion:"succeeded"}}),count:a.succeeded},{value:"running",icon:(0,n.jsx)(eT,{check:{status:"running",conclusion:"neutral"}}),count:a.running},{value:"queued",icon:(0,n.jsx)(eT,{check:{status:"queued",conclusion:"neutral"}}),count:a.registered}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,l.clsx)("transition-opacity duration-200",s.includes(Z)?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,n.jsx)(_.Switch,{size:"small",onClick:e=>e.stopPropagation(),className:"hidden [@media(min-width:750px)]:flex",children:c.map(e=>{let{value:t,icon:s,count:a}=e;return(0,n.jsx)(_.Switch.Control,{checked:t===i,label:(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s," ",(0,n.jsx)("span",{className:"all"===t?"ml-[2px]":"",children:a})]}),onChange:()=>{o(t)},value:t},t)})})}),(0,n.jsxs)(b.MenuContainer,{children:[(0,n.jsx)(v.MenuButton,{size:"small",shape:"square",svgOnly:!0,"aria-label":"Filter Deployment Checks",type:"secondary",className:"block w-[23px] !p-0 text-sm font-normal [@media(min-width:750px)]:hidden",children:(0,n.jsx)(A.Filter,{size:16,color:"gray-900"})}),(0,n.jsx)(j.Menu,{className:"font-normal [@media(min-width:750px)]:hidden",children:c.map(e=>{let{value:t,icon:s,count:a}=e;return(0,n.jsx)(C.MenuItem,{onClick:e=>{e.stopPropagation(),o(t)},children:(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:["all"!==t?s:void 0," ",(0,n.jsxs)("span",{children:[(0,V.default)(t)," (",a,")"]})]})},t)})})]})]})}function eS(e){let{isProduction:t,ciChecks:s,expandedSteps:a}=e,i=(0,ey.useChecksSettingsFlag)(),r=(0,ey.useCiChecksAndPoliciesFlagV2)();return t&&r?(0,n.jsxs)(n.Fragment,{children:[s.length>0&&(0,n.jsx)(eN,{ciChecks:s,expandedSteps:a}),i&&(0,n.jsx)(M.DashboardButtonLink,{route:"/[teamSlug]/[project]/settings/build-and-deployment",hash:"#deployment-checks",size:"small",type:"secondary",prefix:(0,n.jsx)(I.External,{color:"gray-900"}),target:"_blank",children:"Manage"})]}):null}function eI(e){let{check:t,integration:s,checkV1:a}=e,i=(0,r.useMemo)(()=>a?a.externalUrl||a.detailsUrl:t.externalUrl?s&&"integration"===t.source.kind?(0,O.getIntegrationAbsoluteOrSsoLink)(t.externalUrl,{teamIdOrSlug:t.ownerId,integrationConfigurationId:t.source.integrationConfigurationId,externalResourceId:t.source.externalResourceId,projectId:t.projectId,checkId:t.id}):t.externalUrl:"integration"===t.source.kind?(0,O.getIntegrationDeepLink)({teamIdOrSlug:t.ownerId,integrationConfigurationId:t.source.integrationConfigurationId,externalResourceId:t.source.externalResourceId,projectId:t.projectId,checkId:t.id}):null,[t,s,a]),{name:l,status:o,conclusion:c}=t,d=(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:l}),u=(0,n.jsx)(eT,{check:{conclusion:c,status:o}});return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial min-w-0",children:[u,(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial min-w-0",children:[(0,n.jsx)(eA,{check:t,integration:s}),(0,n.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:i?(0,n.jsx)(p.Link,{external:!0,href:i,children:d}):d}),t.conclusionText&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-copy-14 text-gray-900 flex-shrink-0",children:"·"}),(0,n.jsx)(k.Tooltip,{as:"div",className:"flex-1 min-w-0",text:t.conclusionText,children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("p",{className:"text-copy-14 text-gray-900 truncate whitespace-nowrap overflow-hidden text-ellipsis",children:t.conclusionText})})})]})]})]})]})}function eA(e){let{check:t,integration:s}=e;return s?(0,n.jsx)(B.MarketplaceIntegrationCardIcon,{size:20,icon:s.icon,name:s.name}):"git-provider"===t.source.kind?(0,n.jsx)(L.LogoGithub,{size:20}):null}function eR(e){let{check:t,resource:s,teamSlug:a,deployment:i,canUpdateDeploymentRequirements:r,checkV1:o,mutateChecksV1:c}=e,{status:d,conclusion:u,source:m}=t,{data:h}=(0,U.useIntegration)("integration"===t.source.kind?t.source.integrationId:void 0),{mutate:x}=(0,z.useProjectCheckRuns)({deploymentId:i.id,enableCiChecksAndPolicies:!0}),g=(0,$.useSkipCheckRun)({teamId:i.team?.id,deploymentId:i.id,checkRunId:t.id,onSuccess:()=>{x()}}),f=(0,$.useSkipCheckV1)({teamId:a,deploymentId:i.id,checkId:t.id,onSuccess:()=>{c?.(),x()}}),j=async()=>{c?.(),await x()},v=()=>(0,l.clsx)("hover:bg-[var(--ds-gray-100)]"),b=s&&a&&(0,D.getResourceDetailsPath)(s,a),C=async()=>{o?await f.trigger():await g.trigger()},_="git-provider"===m.kind,w=r&&!_&&("running"===d||"queued"===d||"completed"===d&&"failed"===u),N=r&&"failed"===u&&!!o;return(0,n.jsxs)(eP,{className:v(),size:"sm","data-check-status":"failed"===u?"failed":d,children:["queued"===d?(0,n.jsx)(k.Tooltip,{text:"This requirement is expected to run, but has not provided a status yet.",children:(0,n.jsx)(eI,{check:t,integration:h,checkV1:o})}):(0,n.jsx)(eI,{check:t,integration:h,checkV1:o}),(0,n.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:[b?(0,n.jsx)(p.Link,{className:(0,l.clsx)(v(),"hidden flex-row items-center gap-2 bg-transparent text-gray-900 @md-page:flex"),external:!0,href:b,children:(0,n.jsx)("p",{className:`text-copy-14 ${(0,l.clsx)(v(),"flex-row items-center gap-2 bg-transparent text-gray-900 flex")}`,children:s.name})}):null,N&&(0,n.jsx)(eC,{checkId:t.id,deploymentId:i.id,teamSlug:a,onSuccess:j,checksConclusion:i.checksConclusion}),w&&(0,n.jsx)(k.Tooltip,{text:"Skip this check",children:(0,n.jsx)(y.Button,{size:"small",type:"secondary",onClick:C,disabled:g.isMutating||f.isMutating,"aria-label":"Skip check",children:g.isMutating||f.isMutating?"Skipping…":"Skip"})})]})]})}function eT(e){let{check:t}=e;return t?.status==="running"?(0,n.jsx)(T.StatusBordered,{size:16,color:"amber-600"}):t?.status==="completed"&&"succeeded"===t.conclusion?(0,n.jsx)(w.CheckCircle,{size:16,color:"green-700"}):t?.status==="completed"&&"failed"===t.conclusion?(0,n.jsx)(P.Stop,{size:16,color:"red-700"}):t?.status==="completed"&&"neutral"===t.conclusion?(0,n.jsx)(E.Warning,{size:16,color:"amber-700"}):t?.status==="completed"&&"skipped"===t.conclusion||t?.status==="completed"&&"canceled"===t.conclusion||t?.status==="completed"&&"neutral"===t.conclusion||t?.status==="completed"&&"neutral"===t.conclusion?(0,n.jsx)(R.MinusCircle,{color:"gray-500",size:16}):t?.status==="queued"?(0,n.jsx)(N.Clock,{size:16}):(0,n.jsx)(S.CrossCircle,{color:"gray-500",size:16})}function eP(e){let{children:t,className:s,onClick:a,size:i="lg"}=e;return(0,n.jsx)("div",{onClick:a,className:`flex flex-row items-stretch justify-between gap-2 flex-initial ${(0,l.clsx)("hsla(var(--ds-gray-200-value),1) px-3 @sm-page:px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===i},{"py-[var(--geist-space-gap-half)]":"sm"===i},s)}`,children:t})}var eE=e.i(9031150),eL=e.i(6352514),eW=e.i(1853611),eM=e.i(4670733),eB=e.i(7780974);class eD extends TransformStream{#e="";#t=!1;#s=!1;#a=e=>e;constructor(e){super({transform:(e,t)=>this.#n(e,t),flush:e=>this.#n("\r\n",e)}),this.#t=e?.allowCR??!1,this.#s=e?.returnEmptyLines??!1,this.#a=e?.mapperFun??this.#a}#n(e,t){for(e=this.#e+e;;){let s=e.indexOf("\n");if(this.#t){let a=e.indexOf("\r");if(-1!==a&&a!==e.length-1&&(-1===s||s-1>a)){let s=this.#a(e.slice(0,crOrLfIndex));(this.#s||s)&&t.enqueue(s),e=e.slice(a+1);continue}}if(-1!==s){let a=s;"\r"===e[s-1]&&a--;let n=this.#a(e.slice(0,a));(this.#s||n)&&t.enqueue(n),e=e.slice(s+1);continue}break}this.#e=e}}var eF=e.i(5802506),eV=e.i(4244280),eO=e.i(6549540);let eH=e=>e.type===ep.Delimiter,eU=e=>{let{url:t,onLog:s,onResponse:a,signal:n,since:i,deploymentRef:r}=e,l={builds:1,since:i,direction:"forward",follow:(0,eO.default)(r.current)?void 0:1},o=i??0;return fetch(`${t}${(0,eb.encode)(l)}`,{signal:n}).then(async e=>{if(a?.(e),e.status<200||e.status>=300){let t=await e.text();throw Error(`Failed to fetch log stream: ${e.status} ${t}`)}if(1!==l.follow){for(let t of(await e.json()))s(t);return}let i=e.body?.pipeThrough(new TextDecoderStream,{signal:n}).pipeThrough(new eD({mapperFun:e=>{try{return JSON.parse(e)}catch{return null}}}),{signal:n}).getReader();if(i){for(;;){let{value:e,done:t}=await i.read();if(n.aborted)return;if(t||!e)break;e.created&&(o=e.created+1,s(e))}if((await new Promise(e=>{setTimeout(e,1e3)}),!n.aborted)&&!(0,eO.default)(r.current))return eU({url:t,signal:n,deploymentRef:r,since:o,onLog:s,onResponse:a})}})};var ez=e.i(4470704),e$=e.i(6891161),eq=e.i(9318197),eG=e.i(455575);let eY=e=>{let{active:t,deployment:s,onClose:a,mutateDeployment:i}=e,[l,o]=(0,r.useState)(!1),c=(0,eG.useToasts)(),d=async()=>{o(!0);let{error:e}=await (0,ev.fetchAPI)(`/v1/deployments/${s?.id}/checks/skip${(0,eb.encode)({teamId:s.team?.id})}`,{method:"POST"});e&&c.error({text:e.message||"An error occurred while skipping checks"}),o(!1),a(),i?.()};return(0,n.jsxs)(e$.Modal.Modal,{active:t,onClickOutside:a,width:"500px",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center flex-initial",children:[(0,n.jsx)(eq.Spacer,{y:1}),(0,n.jsx)("h3",{className:"text-copy-24",children:"Skip Checks"})]}),(0,n.jsx)(e$.Modal.Body,{children:(0,n.jsx)("p",{className:"text-copy-14 text-center",children:"Are you sure you want to continue?"})}),(0,n.jsxs)(e$.Modal.Actions,{children:[(0,n.jsx)(e$.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,n.jsx)(e$.Modal.Action,{disabled:l,loading:l,onClick:d,children:"Skip Checks"})]})]})};var eZ=e.i(850302),eJ=e.i(9668517);function eK(e){let{meta:t={}}=e??{};return"githubCommitRef"in t?{refType:"github",refValue:t.githubCommitRef??void 0}:"gitlabCommitRef"in t?{refType:"gitlab",refValue:t.gitlabCommitRef??void 0}:"bitbucketCommitRef"in t?{refType:"bitbucket",refValue:t.bitbucketCommitRef??void 0}:{}}var eQ=e.i(3001456),eX=e.i(7710663),e0=e.i(1116271);let e1=e=>(0,r.useEffect)(e,[]);var e5=e.i(4469437),e2=e.i(1265647),e4=e.i(2323372),e9=e.i(8320377),e3=e.i(9286433);function e7(e){let{label:t,latestLog:s,creationFlow:a,afterLabel:i}=e,[o,c]=(0,r.useState)(void 0),[d,u]=(0,r.useState)(!0),m=(0,r.useRef)((0,e4.throttle)(e=>{c(e)},250,{trailing:!0}));return(0,r.useEffect)(()=>{d||s?.text===""||(s?.text===void 0?c(void 0):m.current(s.text))},[d,s?.text]),(0,r.useEffect)(()=>{let e=m.current;return()=>{e.cancel()}},[]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},1e3);return()=>{clearInterval(e)}},[]),(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-3 w-full",children:[(0,n.jsx)("span",{children:t}),i,(0,n.jsx)(e5.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:o?(0,n.jsx)("div",{className:e3.default.mask,id:"deploy-log-preview",children:(0,n.jsx)(e5.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:(0,n.jsx)(e2.motion.div,{animate:{y:0},className:(0,l.clsx)(e3.default.logPreviewText,{[e3.default.creationFlow]:a}),exit:{y:-24},initial:{y:24},style:{color:"var(--ds-gray-900)"},transition:{type:"tween",duration:.225},children:(0,n.jsx)("span",{className:"text-copy-14-mono text-gray-900",children:(0,n.jsx)(e9.Ansi,{disableColors:!0,children:o})})},o)})}):null})]})}var e8=e.i(8529990),e6=e.i(1474855),te=e.i(3322724),tt=e.i(2455417),ts=e.i(6143247),ta=e.i(9307292),tn=e.i(5883567);function ti(e){let{children:t}=e;return(0,n.jsx)("span",{className:"bg-background-100",children:t})}function tr(e){let{annotation:t}=e;if(!t)return null;let s={type:"tertiary",className:"!w-fit !px-3 font-sans font-normal *:flex *:gap-2 *:items-center *:!p-0 hover:!bg-transparent hover:!shadow-none hover:underline",prefix:t.icon};return"link"===t.type?(0,n.jsx)(ti,{children:(0,n.jsx)(p.ButtonLink,{href:t.href,...s,children:t.label})}):(0,n.jsx)(ti,{children:(0,n.jsx)(y.Button,{onClick:t.onClick,...s,children:t.label})})}var tl=e.i(1120768),to=e.i(1136434),tc=e.i(1230902);let td=/^L(?<start>[0-9]+)(?:-L(?<end>[0-9]+))?/;function tu(e){return e?`L${e.from+1}${e.from!==e.to?`-L${e.to+1}`:""}`:""}function tm(e){let t=td.exec(e);return t?.groups?{from:Number(t.groups.start)-1,to:Number(t.groups.end||t.groups.start)-1}:null}function tp(e,t){return(0,tc.format)(e,t?"HH:mm:ss":"HH:mm:ss.SSS")}function th(e){return null===e?{index:"LAST"}:{index:"number"==typeof e?e:e.from,offset:-96}}function tx(e,t){let s=[],a=null;for(let[n,i]of e.entries())i.level===t?a?a.to=n:(a={from:n,to:n},s.push(a)):a=null;return s}function tg(e){let{logs:t,className:s}=e,{hash:a,setHash:i}=(0,h.useHash)(),[l,o]=(0,r.useState)(null),c=(0,r.useMemo)(()=>({warning:tx(t,"warning"),error:tx(t,"error")}),[t]),[d,u]=(0,r.useState)(null),m=(0,r.useCallback)(e=>{if(l===e){u(null),o(null),i(null);return}o(e),u(0),i(tu(c[e]?.[0]))},[l,c,i]),p=(0,r.useCallback)(e=>{let t=l?c[l]:null,s=t?.length;if(void 0===s)return;let a=(((d??0)+("next"===e?1:-1))%s+s)%s;u(a),i(tu(t?.[a]??null))},[d,c,l,i]);return(0,r.useEffect)(()=>{let e=tm(a);function t(t){let s=e?c[t]?.findIndex(t=>{let{from:s,to:a}=t;return s===e.from&&a===e.to}):-1;return -1!==s&&(o(t),u(s),!0)}t("error")||t("warning")||(u(null),o(null))},[a,c]),(0,n.jsxs)("div",{className:(0,ts.cn)("flex items-center gap-2",s),children:[(0,n.jsx)(tf,{kind:"error",level:l,total:c.error.length,current:d,onSelect:m,onNavigation:p}),(0,n.jsx)(tf,{kind:"warning",level:l,total:c.warning.length,current:d,onSelect:m,onNavigation:p})]})}function tf(e){let{level:t,kind:s,total:a,current:i,onSelect:r,onNavigation:l}=e,o=Array.from({length:a.toString().length-((i??0)+1).toString().length},(e,t)=>(0,n.jsx)("span",{className:"opacity-0",children:"0"},t)),c="error"===s?(0,n.jsx)(S.CrossCircle,{color:t===s?"red-700":void 0}):(0,n.jsx)(E.Warning,{color:t===s?"amber-700":void 0}),d=t===s;return 0===a?null:(0,n.jsxs)("div",{className:(0,ts.cn)("inline-flex items-center rounded-full px-0 text-sm font-medium transition-all","border border-solid border-transparent",d?"!border border-solid border-gray-300 !bg-background-100":null!==t?"opacity-50":void 0),children:[(0,n.jsxs)(y.Button,{className:(0,ts.cn)("[&>*]:!px-2 [&>*]:!py-1.5 [&>*]:gap-1.5 [&>*]:flex [&>*]:items-center flex items-center hover:opacity-80 p-0 rounded-full text-sm",d?"hover:bg-transparent":"hover:bg-gray-200"),variant:"unstyled",onClick:()=>r(s),"aria-label":`${s} count: ${t===s?`${(i??0)+1} of ${a}`:a}`,children:[c,(0,n.jsxs)("div",{className:"tabular-nums flex items-center",children:[(0,n.jsx)("span",{children:t===s?(0,n.jsxs)(n.Fragment,{children:[o,(i??0)+1]}):a}),(0,n.jsx)(e5.AnimatePresence,{children:d&&(0,n.jsxs)(e2.motion.span,{className:"text-gray-800",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.18},children:["/",a]})})]})]}),(0,n.jsx)(e5.AnimatePresence,{children:d&&(0,n.jsx)(e2.motion.div,{className:"flex items-center overflow-hidden",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.18},children:(0,n.jsxs)(e2.motion.div,{className:"flex items-center p-1",initial:{scale:.7},animate:{scale:1},exit:{scale:.7},transition:{duration:.15,delay:.05},children:[(0,n.jsx)("div",{className:"border-l h-3 mr-1 border-gray-400"}),(0,n.jsx)(y.Button,{className:"[&>*]:!p-1 hover:bg-gray-200 rounded-full text-gray-900 hover:text-gray-800 active:bg-gray-300",variant:"unstyled",svgOnly:!0,onClick:()=>l("next"),"aria-label":`find next ${s}`,children:(0,n.jsx)(to.ChevronDownSmall,{size:16})}),(0,n.jsx)(y.Button,{className:"[&>*]:!p-1 hover:bg-gray-200 rounded-full text-gray-900 hover:text-gray-800 active:bg-gray-300",variant:"unstyled",svgOnly:!0,onClick:()=>l("previous"),"aria-label":`find previous ${s}`,children:(0,n.jsx)(tl.ChevronUpSmall,{size:16})})]})})})]})}function ty(e){let{logs:t,className:s,onClick:a}=e,{setHash:i}=(0,h.useHash)(),l=(0,r.useMemo)(()=>({warning:tx(t,"warning"),error:tx(t,"error")}),[t]),o=(0,r.useCallback)(e=>{l[e]?.length&&(i(tu(l[e][0])),a?.())},[l,i,a]);return(0,n.jsxs)("div",{className:(0,ts.cn)("flex items-center gap-2 text-sm font-normal",s),children:[l.error?.length?(0,n.jsx)(y.Button,{shape:"rounded",size:"small",type:"secondary",onClick:()=>o("error"),prefix:(0,n.jsx)(S.CrossCircle,{color:"red-700"}),children:(0,n.jsx)("span",{className:"inline-block -mx-1",children:l.error.length})}):null,l.warning?.length?(0,n.jsx)(y.Button,{shape:"rounded",size:"small",type:"secondary",onClick:()=>o("warning"),prefix:(0,n.jsx)(E.Warning,{color:"amber-700"}),children:(0,n.jsx)("span",{className:"inline-block -mx-1",children:l.warning.length})}):null]})}var tj=e.i(9130958);function tv(e){let{log:t,text:s}=e;if(!t.annotation)return(0,n.jsx)(e9.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:s});let a=s.indexOf(t.annotation.match);if(-1===a)return(0,n.jsx)(e9.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:s});let i=s.slice(0,a),r=s.slice(a,a+t.annotation.match.length),l=s.slice(a+t.annotation.match.length);return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(e9.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:i}),(0,n.jsx)("span",{className:"underline decoration-wavy underline-offset-2 font-medium",children:(0,n.jsx)(e9.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:r})}),l&&(0,n.jsx)(e9.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:l})]})}function tb(e){let{children:t,className:s}=e;return(0,n.jsx)("span",{className:(0,ts.cn)("inline-block whitespace-pre py-0.5 pr-3 @md-page:pr-6",s),children:t})}let tC=(0,r.memo)(function(e){let{log:t,searchPosition:s,className:a}=e;if(!t.text)return null;if(!s)return(0,n.jsx)(tb,{className:a,children:(0,n.jsx)(tv,{log:t,text:t.text})});let i=(0,tj.highlightString)(t.text,s.text),r=0;return(0,n.jsx)(tb,{className:a,children:i.map(e=>e.highlighted?(0,n.jsx)("mark",{className:s.line===t.index&&s.column===r++?"bg-amber-800 dark:text-background-100":"bg-amber-400 dark:text-gray-1000",children:(0,n.jsx)(tv,{log:t,text:e.text})},e.id):(0,n.jsx)(tv,{log:t,text:e.text},e.id))})});var t_=e.i(7921976),tk=e.i(6357175),tw=e.i(9689002),tN=e.i(8835183),tS=e.i(3285452),tI=e.i(1663964),tA=e.i(6942035);let tR=(0,r.forwardRef)(function(e,t){let{logs:s,onNavigate:a,onClear:i}=e,l=(0,r.useRef)(null),[o,c]=(0,r.useState)(),[d,u]=(0,r.useState)(0),[m,p]=(0,r.useState)(),h=(0,tk.useDebouncedValue)(o,300),[x,g]=(0,r.useState)(),f=(0,r.useCallback)(()=>{c(""),p(void 0),i?.()},[i]),j=(0,r.useCallback)(e=>{u(0);let t=e.target.value;t?c(t):f()},[f]),v=(0,r.useCallback)(()=>{if(m?.count){let e=(d+1)%m.count;u(e),a?.(m.positions[e])}},[m,d,a]),b=(0,r.useCallback)(()=>{if(m?.count){let e=(0===d?m.count:d)-1;u(e),a?.(m.positions[e])}},[m,d,a]),C=(0,r.useCallback)(e=>{"Enter"===e.key&&(e.shiftKey?b():v())},[v,b]);if((0,r.useImperativeHandle)(t,()=>({clear:f}),[f]),h!==x){g(h);let e=function(e,t){if(!e||!t.length)return;let s=e.toLowerCase(),a={count:0,positions:[]};for(let n of t){let t=n.text.toLowerCase().split(s);if(t.length>1){let s=t.length-1;a.count+=s,a.positions.push(...Array.from({length:s},(t,s)=>({line:n.index,column:s,text:e})))}}return a}(o,s);p(e),e?.count?a?.(e.positions[d]):a?.(void 0)}return(0,r.useEffect)(()=>{function e(e){let t=document.activeElement?.tagName;(0,t_.isModifierPressed)(e)&&"f"===e.key&&l.current&&function(e){let{top:t,left:s,bottom:a,right:n}=e.getBoundingClientRect();return t>=10&&s>=0&&a<=window.innerHeight&&n<=window.innerWidth}(l.current)&&(document.activeElement===document.body||"INPUT"!==t&&"TEXTAREA"!==t)&&(e.preventDefault(),l.current.select(),l.current.focus())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,n.jsx)(tN.SearchInput,{clearable:!1,onChange:j,onKeyDown:C,placeholder:"Find in logs",ref:l,size:"small",suffix:(0,n.jsx)(e5.AnimatePresence,{children:(o?.length??0)>0?(0,n.jsxs)(e2.motion.div,{animate:{marginTop:0,opacity:1},className:"-mr-1 flex items-center gap-1 whitespace-nowrap",exit:{marginTop:-10,opacity:0},initial:{marginTop:-10,opacity:0},transition:{duration:.1},children:[m?.count===0&&"No results",m?.count?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"pr-1 text-xs",children:[d+1,"/",m.count]}),(0,n.jsx)(y.Button,{"aria-label":"find next occurence",onClick:v,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,n.jsx)(tS.ArrowDown,{})}),(0,n.jsx)(y.Button,{"aria-label":"find previous occurence",onClick:b,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,n.jsx)(tI.ArrowUp,{})})]}):null,(0,n.jsx)(y.Button,{"aria-label":"clear results",onClick:f,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,n.jsx)(tA.Cross,{className:"text-gray-900"})})]}):(0,n.jsx)(tw.Kbd,{className:"-mr-1",meta:!0,children:"F"})}),suffixStyling:!1,value:o,width:"270px"})});var tT=e.i(5356862);function tP(e){let{selectedRange:t,logs:s}=e,a=null!==t,i=a?t.to-t.from+1:0,r=t?s[t.to].created-s[t.from].created:0,l=a?s[t.from].level:null,o=s.filter(e=>"error"===e.level).length,c=s.filter(e=>"warning"===e.level).length;return(0,n.jsx)("div",{className:"flex items-center flex-1 whitespace-nowrap text-sm text-gray-900",children:a?(0,n.jsx)(n.Fragment,{children:"error"===l?`${o} error ${1===o?"line":"lines"}`:"warning"===l?`${c} warning ${1===c?"line":"lines"}`:(0,n.jsxs)(n.Fragment,{children:[i," ",1===i?"line":"lines"," ","selected",r>0?` (${(0,tT.formatDuration)(s[t.to].created-s[t.from].created)})`:""]})}):`${s.length} lines`})}var tE=e.i(6420219);let tL=()=>{let[e,t]=(0,tE.useQueryState)("environment-variable-details-open",tE.parseAsString);return{missingEnvVarKey:e,setMissingEnvVarKey:t}};e.s(["useOpenMissingEnvVar",0,tL],458149);var tW=e.i(8225664);function tM(e){let{selectedRange:t,logs:s}=e,a=null!==t,i=a?t.to-t.from+1:0,r=a?s[t.from].level:null,l="error"===r||"warning"===r,o=l?s.filter(e=>e.level===r):a?s.slice(t.from,t.to+1):s,c=l?o.length:i||"all",d=l?`${c} ${r} ${1===o.length?"line":"lines"}`:`${c} ${1===i?"line":"lines"}`,u=l?`Copy all ${r} lines to the clipboard`:`Copy ${a?"selected":"all"} lines to the clipboard`;return(0,n.jsx)(tW.CopyButton,{label:d,size:"small",textToCopy:o.map(e=>{let{created:t,text:s}=e;return`${tp(t)} ${s}`}).join("\n"),title:u,type:"tertiary"})}function tB(e){let{logs:t,enableLineHighlighting:s,startedAt:a,status:i,isLoading:l,context:o}=e,c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null),p=(0,r.useRef)(t.length),x=(0,te.useIsMobile)(),[g,f]=(0,r.useState)(null),[y,j]=(0,r.useState)(),[v,b]=(0,r.useState)(!0),[C,_]=(0,r.useState)(!0),[k,w]=(0,r.useState)(),[N,S]=(0,r.useState)(s),{hash:I,setHash:A}=(0,h.useHash)(),[R,T]=(0,r.useState)(!1),P=(0,W.useParams)(),{setMissingEnvVarKey:E}=tL(),L=(0,r.useMemo)(()=>t.map((e,t)=>{let s={...e,index:t};return s.annotation=((e,t,s,a)=>{if(null===t)return null;let{teamSlug:i,project:r}=t,l=(e=>{for(let{regex:t,groupIndex:s}of[{regex:/Error:\s*Environment variable\s*"(.+?)"\s*is required but was not specified\./i,groupIndex:1},{regex:/process\.env\.([A-Z0-9_]+)\s+is undefined/i,groupIndex:1},{regex:/(NEXT_PUBLIC_[A-Z0-9_]+)\s+is not defined/i,groupIndex:1},{regex:/process\.env\.([A-Z0-9_]+)\s+is not defined/i,groupIndex:1},{regex:/Error:\s*Missing environment variable:\s*([A-Z0-9_]+)\s*\(check your project settings\)/i,groupIndex:1},{regex:/The\s+([A-Z0-9_]+)\s+environment variable is missing or empty/i,groupIndex:1},{regex:/Error:\s*The\s+([A-Z0-9_]+)\s+environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI\(\{ apiKey: '.*?' \}\)\./i,groupIndex:1}]){let a=t.exec(e.text);if(a&&s&&a[s])return{name:a[s]}}return null})(e);return l?"deployment-details"===s?{type:"link",href:`/${i}/${r}/settings/environment-variables?new=${l.name}`,match:l.name,label:"Add Environment Variable",icon:(0,n.jsx)(tn.PlusCircle,{})}:{type:"button",onClick:()=>a?.addNewVariable(l.name)||(()=>{}),match:l.name,label:"Add Environment Variable",icon:(0,n.jsx)(tn.PlusCircle,{})}:null})(s,P,o,{addNewVariable:E}),s}),[t,P,o,E]);(0,r.useEffect)(()=>{L.length!==p.current&&"complete"!==i&&C&&setTimeout(()=>u.current?.scrollTo(0,u.current.scrollHeight),0),p.current=L.length},[L,i,C]),(0,r.useEffect)(()=>{if(!s)return;let e=tm(I);e!==g&&(e?.from!==g?.from||e?.to!==g?.to)&&(f(e),R&&T(!1),e&&!R&&c.current?.scrollToIndex(th(e)))},[s,g,I,R]);let M=(0,r.useCallback)(e=>{e instanceof Window||(u.current=e)},[]);e1(()=>{s&&tm(I)&&m.current&&m.current.scrollIntoView({behavior:"smooth",block:"start"})});let B=(0,r.useCallback)((e,t)=>{let s=null;t&&g?s=e<g.from?{from:e,to:g.to}:{from:g.from,to:e}:g?.from!==e&&(s={from:e,to:e}),T(!0),A(s?tu(s):null)},[g,A]),D=(0,r.useCallback)(e=>{w(e),e&&c.current?.scrollToIndex(th(e.line))},[]),F=(0,r.useCallback)(e=>{let{item:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{"aria-hidden":!0,className:(0,ts.cn)("relative pl-1 py-0.5 @md-page:pl-4 [&>*]:cursor-default text-gray-800",!N&&"select-none"),"data-timestamp":!0,children:[(0,n.jsx)(e6.TimestampTooltip,{content:{timestamp:t.created,startTimestamp:t.index>0?a:void 0,previousTimestamp:t.index>0?L[t.index-1].created:void 0},showRelativeToNow:!0,children:tp(t.created,x)}),(0,n.jsx)("span",{children:" "})]}),(0,n.jsxs)("div",{className:"inline-flex flex-col flex-1",children:[(0,n.jsx)(tC,{className:"pl-1 @md-page:pl-3",log:t,searchPosition:k}),(0,n.jsx)(tr,{annotation:t.annotation})]})]})},[x,L,k,a,N]);return(0,n.jsx)("div",{className:"relative bg-background-200",ref:m,children:L.length&&!l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:(0,ts.cn)(v&&"border-b-transparent","flex flex-wrap min-h-11 w-full border-b p-2 items-start gap-1 @md-page:items-center @md-page:gap-2"),children:[(0,n.jsx)(tM,{logs:L,selectedRange:g}),(0,n.jsx)(tP,{logs:L,selectedRange:g}),(0,n.jsx)(tg,{logs:L}),x?null:(0,n.jsx)(tR,{logs:L,onClear:()=>w(void 0),onNavigate:D,ref:d})]}),(0,n.jsx)("div",{className:(0,ts.cn)("relative","overflow-hidden","before:content-['']","before:absolute","before:h-5","before:w-full","before:top-0","before:left-0","before:right-4","before:z-10","before:pointer-events-none","before:translate-y-0","before:bg-gradient-to-b","before:from-background-200","after:content-['']","after:absolute","after:h-5","after:w-full","after:bottom-0","after:left-0","after:right-4","after:z-10","after:pointer-events-none","after:translate-y-0","after:bg-gradient-to-t","after:from-background-200",v?"before:!-translate-y-5":null,C?"after:!translate-y-5":null),children:(0,n.jsx)(ta.Virtuoso,{atBottomStateChange:_,atBottomThreshold:48,atTopStateChange:b,components:{List:tD,Item:tF,Footer:tV},context:{selectedRange:g,handleLineClicked:B,canSelect:s,setTimestampSelectable:S},data:L,defaultItemHeight:24,initialTopMostItemIndex:th(tm(I)),itemContent:(e,t)=>F({item:t,data:L,index:e}),ref:c,scrollerRef:M,style:{height:"60vh",maxHeight:y},totalListHeightChanged:j})})]}):(0,n.jsx)("div",{className:"p-4 text-center",children:l?(0,n.jsx)("span",{className:"flex items-center justify-center gap-2 text-gray-900",children:(0,n.jsx)(tt.LoadingDots,{size:4,children:"Loading"})}):(0,n.jsx)("span",{children:"No logs to show"})})})}function tD(e){let{context:t,...s}=e;return(0,n.jsx)("div",{className:"inline-flex min-w-full flex-col",...s})}function tF(e){var t;let{item:{index:s,level:a},context:i,style:l,...o}=e,c=(0,r.useCallback)(e=>{if(!(!i?.canSelect||!i?.handleLineClicked||window.getSelection()?.toString())&&!e.target.closest("a"))return window.getSelection()?.removeAllRanges(),e.stopPropagation(),e.preventDefault(),i.handleLineClicked?.(s,e.shiftKey),!1},[i,s]),d=(0,r.useCallback)(e=>{let t=!!e.target.dataset.timestamp||!!e.target.parentElement?.dataset.timestamp;i?.setTimestampSelectable((i?.canSelect&&t)??!1)},[i]),u=!!(t=i?.selectedRange)&&s>=t.from&&s<=t.to,m="error"===a,p="warning"===a;return(0,n.jsx)("div",{className:(0,ts.cn)("cursor-default inline-flex w-full text-pretty align-top font-mono text-xs hover:bg-gray-300 @md-page:text-sm border-l-2 border-l-transparent",u&&"border-l-black bg-gray-100",m&&"bg-red-200 text-red-900",p&&"bg-amber-200 text-amber-900",u&&m&&"bg-red-400",u&&p&&"bg-amber-400"),style:{...l,whiteSpace:"nowrap",userSelect:"text"},onMouseDown:d,onClick:c,...o})}function tV(){return(0,n.jsx)("span",{className:"inline-block"})}var tO=e.i(7921739),tH=e.i(5338940),tU=e.i(7808943),tz=e.i(1991452),t$=e.i(4450569),tq=e.i(4080109);function tG(e){let{type:t}=e;switch(t){case"warning":return(0,n.jsx)(t$.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,n.jsx)(P.Stop,{})});case"error":return(0,n.jsx)(t$.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,n.jsx)(es.WarningFill,{})});case"success":return(0,n.jsx)(t$.default,{className:"text-gray-900",noWrap:!0,row:!0,vcenter:!0,children:(0,n.jsx)(et.CheckCircleFill,{className:"size-5",color:"green-700"})});case"spinner":case"loading":return(0,n.jsx)(t$.default,{row:!0,style:{color:"var(--geist-secondary)"},vcenter:!0,children:(0,n.jsx)(el.Spinner,{size:18})});default:return null}}function tY(e){let{domain:t,type:s,status:a,note:i}=e,r=(0,tz.useRouter)(),l={automatic:{name:"Learn More",href:"/docs/deployments/generated-urls"},custom:{name:"Manage",href:`/${r.query.teamSlug}/${r.query.project}/settings/domains`},user:{name:"Learn More",href:"/docs/domains/add-a-domain"}}[s];return(0,n.jsx)("div",{className:tq.default.wrapper,children:(0,n.jsxs)("div",{className:tq.default.header,children:[(0,n.jsx)(tG,{type:a}),(0,n.jsxs)("div",{className:tq.default.heading,children:[(0,n.jsxs)("div",{className:"flex flex-col @lg-page:flex-row items-start @md-page:items-center justify-start gap-0 @md-page:gap-2 flex-initial overflow-hidden",children:[(0,n.jsx)("div",{className:tq.default.domainContainer,children:(0,n.jsx)(p.Link,{as:"a",className:tq.default.domain,external:!0,href:`http://${t.name}`,variant:"highlight",children:(0,n.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-blue-900 truncate",children:t.name})})}),(0,n.jsx)("span",{className:`text-copy-14 text-gray-900 ${tq.default.separator}`,children:"·"}),(0,n.jsx)("p",{className:"text-copy-14 text-gray-900 truncate",children:i||({automatic:"Automatic URL",custom:"Custom Domain",user:"Custom Domain"})[s]})]}),(0,n.jsx)(p.Link,{className:tq.default.action,external:!0,href:l.href,variant:"secondary",children:l.name})]})]})})}var tZ=e.i(7784834),tJ=e.i(8091742);function tK(e){let t,{id:s,name:a,deployment:i,disabled:l,skeleton:o,status:c,onComplete:d,startedAt:u,finishedAt:m}=e;(0,r.useEffect)(()=>{d&&(c===eh.Complete||c===eh.Skipped)&&d()},[c,d]);let{team:h}=(0,tH.useTeam)(),x=function(e,t,s){let a=(0,tJ.filterAutoAssignedDomains)(e,s.automaticAliases??[]).map(e=>({name:e,type:"automatic"})),n=t.filter(e=>void 0===a.find(t=>t.name===e)).map(e=>({name:e,type:"custom"})),i=[];if(i=i.concat(...n),"production"===s.target){let e=s.userAliases||[];i.concat(e.map(e=>({name:e,type:"user"})))}return i}(h,i.alias.filter(e=>!(i.automaticAliases||[]).includes(e)),i);function g(){return i.checks?.["deployment-alias"]?.state??null}function f(e){return"pending"===g()?"running checks":"failed"===g()?"failed checks":c===eh.Pending||c===eh.InProgress?"loading":c===eh.Error||c===eh.Warning?i.aliasWarning&&i.aliasWarning.message.includes(e.name)?"warning":i.aliasError&&i.aliasError.message.includes(e.name)?"error":"success":c===eh.Complete?"success":"loading"}function y(e){return i.aliasWarning&&i.aliasWarning.message.includes(e.name)?i.aliasWarning.message:i.aliasError&&i.aliasError.message.includes(e.name)?i.aliasError.message:void 0}let j=c===eh.Skipped,v="failed"===g()||"pending"===g();return(0,n.jsx)(ef,{disabled:l,finishedAt:"succeeded"!==g()?void 0:m,id:s,name:a,skeleton:o,startedAt:"succeeded"!==g()?void 0:u,status:(t=g(),v&&"PROMOTED"===i.readySubstate?eh.Warning:"pending"===t?eh.Pending:"failed"===t?eh.Error:c),children:v&&"PROMOTED"===i.readySubstate?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:tZ.default.stepMessage,children:"The deployment was force promoted, bypassing Deployment Checks."}),x.map(e=>(0,n.jsx)(tY,{domain:e,note:y(e),status:f(e),type:e.type},e.name))]}):v?(0,n.jsxs)("div",{className:tZ.default.stepMessage,children:["Aliasing to custom domains is blocked by"," ",g()," deployment checks."]}):j?(0,n.jsxs)("div",{className:tZ.default.stepMessage,children:["No custom domains have been assigned. This will happen if there are none defined in Project Settings or a Vercel CLI deploy was made with"," ",(0,n.jsx)(tU.default,{children:"vercel deploy --skip-domain"}),"."," ",(0,n.jsx)(p.Link,{external:!0,href:"https://vercel.com/docs/domains/add-a-domain",variant:"highlight",children:"Learn More"})]}):(0,n.jsx)(n.Fragment,{children:x.map(e=>(0,n.jsx)(tY,{domain:e,note:y(e),status:f(e),type:e.type},e.name))})})}var tQ=e.i(4303122),tX=e.i(3993360),t0=e.i(6280036),t1=e.i(4585051),t5=e.i(1727580),t2=e.i(9907554),t4=e.i(1448582),t9=e.i(261950),t3=e.i(7807066),t7=e.i(787358),t8=e.i(4333930),t6=e.i(2259462),se=e.i(3487134),st=e.i(7087273),ss=e.i(8557031),sa=e.i(1160917);function sn(e){let{children:t,onClick:s,active:a,enabled:i=!0}=e;return(0,n.jsx)("button",{className:(0,l.clsx)(sa.default.badge,"invert-theme",{[sa.default.active]:a,[sa.default.enabled]:i}),onClick:s,type:"button",children:(0,n.jsx)("p",{className:`text-[12px] leading-[16px] font-medium ${sa.default.badgeContent}`,children:t})})}var si=e.i(9822914),sr=e.i(1201436),sl=e.i(1438473),so=e.i(9645681);let sc=(0,X.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00736 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83579 1.5 1.5 1.83579 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00736 16 0 14.9926 0 13.75V2.25ZM9.24618 5C8.41986 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40882 12.5 4.75439 12.5H4.00439V11H4.75439C5.58039 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 11.875C11.5 11.6679 11.6679 11.5 11.875 11.5H15.25H16V10H15.25H11.875C10.8395 10 10 10.8395 10 11.875C10 12.2971 10.1395 12.6866 10.3749 13C10.1395 13.3134 10 13.7029 10 14.125C10 15.1605 10.8395 16 11.875 16H15.25H16V14.5H15.25H11.875C11.6679 14.5 11.5 14.3321 11.5 14.125C11.5 13.9179 11.6679 13.75 11.875 13.75H14.25H15V12.25H14.25H11.875C11.6679 12.25 11.5 12.0821 11.5 11.875Z" fill="var(--ds-purple-700)"/>
  `);var sd=e.i(4830423);let su=(0,X.withNewIcon)(`<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
`);e.s(["FunctionGo",0,su],4989041);let sm=(0,X.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>`);e.s(["FunctionRuby",0,sm],3622411);var sp=e.i(6307178),sh=e.i(9655125),sx=e.i(559696),sg=e.i(1502273),sf=e.i(9568268),sy=e.i(6676443),sj=e.i(3306538),sv=e.i(2988836),sb=e.i(1637579),sC=e.i(5166685),s_=e.i(1319302),sk=e.i(545405),sw=e.i(4006531),sN=e.i(2608999);let sS=["^/.*$","/:path*"],sI="All paths";function sA(e){let{asset:t}=e;return(0,n.jsx)("div",{style:{paddingLeft:34},title:t.matcher,children:(0,n.jsx)("p",{className:`font-mono text-[14px] leading-[20px] font-medium text-gray-900 ${(0,l.clsx)(sN.default.staticAssetGrid,sN.default.copyIconWrapper)}`,children:t.matcher!==sI?(0,n.jsxs)("button",{className:sN.default.pathWrapper,onClick:()=>{(0,sk.copyToClipboard)(t.matcher),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)("span",{children:t.matcher}),(0,n.jsx)("span",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]}):(0,n.jsx)("div",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.allPathsMiddlewareRow),children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,n.jsx)("span",{className:"text-copy-14",children:t.matcher}),(0,n.jsx)(k.Tooltip,{text:(0,n.jsxs)(n.Fragment,{children:["Middleware is invoked on every path. This behavior can be modified by"," ",(0,n.jsx)(p.Link,{external:!0,href:"/docs/edge-middleware/middleware-api#match-paths-based-on-custom-matcher-config",type:"highlight",children:"configuring a matcher"}),"."]}),children:(0,n.jsx)(sv.InformationFillSmall,{className:sN.default.middlewareInfoIcon})})]})})})})}function sR(e){let{asset:t}=e;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",title:`${t.source} → ${t.destination}`,children:[(0,n.jsx)("div",{className:"w-2/5 @md-page:w-[45%] truncate",children:(0,n.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper,"w-full"),onClick:()=>{(0,sk.copyToClipboard)(t.source),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)("p",{className:"text-copy-14-mono truncate max-w-[90%]",children:t.source}),(0,n.jsx)("span",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]})}),(0,n.jsxs)("div",{className:"w-1/5 @md-page:w-[10%] flex items-center justify-center gap-4",children:[(0,n.jsx)(sl.ArrowRight,{}),(0,n.jsx)(sj.Badge,{className:"cursor-default",variant:"gray-subtle",children:t.statusCode??(t.permanent?308:301)})]}),(0,n.jsx)("div",{className:"w-2/5 @md-page:w-[45%] truncate",children:(0,n.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper,"w-full"),onClick:()=>{(0,sk.copyToClipboard)(t.destination),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)("p",{className:"text-copy-14-mono truncate max-w-[90%]",children:t.destination}),(0,n.jsx)("span",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]})})]})}function sT(e){let{asset:t}=e;return(0,n.jsx)("div",{title:t.key,children:(0,n.jsx)("p",{className:`text-copy-14-mono ${(0,l.clsx)(sN.default.variantItemGrid,sN.default.copyIconWrapper)}`,children:"string"==typeof t.origin?(0,n.jsx)(p.Link,{as:"a",className:sN.default.variantItemUpstream,external:!0,href:t.origin,rel:"noopener noreferrer",target:"_blank",children:t.key}):t.key})})}function sP(e){let{asset:t}=e,s=(0,si.toString)(t.schedule);return(0,n.jsx)("div",{className:(0,l.clsx)(sN.default.copyIconWrapper),style:{paddingLeft:36},children:(0,n.jsxs)("p",{className:`text-copy-14-mono ${(0,l.clsx)(sN.default.cronJobItem)}`,children:[(0,n.jsx)("div",{title:t.path,children:t.path}),(0,n.jsx)("div",{title:t.schedule,children:t.schedule.split(" ").map(e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,l.clsx)({[sN.default.cronJobItemAsterisk]:"*"===e,[sN.default.singleDigit]:1===e.length&&"*"!==e}),children:e})," "]}))}),(0,n.jsx)("div",{title:s,children:s})]})},`${t.path}/${t.schedule}`)}function sE(e){let{asset:t}=e,s=(0,sw.sizeFormatter)(t.size),a=s.split(" ");return(0,n.jsx)("div",{style:{paddingLeft:34},title:t.path,children:(0,n.jsxs)("p",{className:`font-mono text-[14px] leading-[20px] font-medium text-gray-900 ${(0,l.clsx)(sN.default.staticAssetGrid,sN.default.copyIconWrapper)}`,children:[(0,n.jsxs)("button",{className:sN.default.pathWrapper,onClick:()=>{(0,sk.copyToClipboard)(t.path),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)("span",{children:t.path}),(0,n.jsx)("div",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]}),(0,n.jsx)("span",{style:{whiteSpace:"nowrap",textAlign:"right",minWidth:60,fontWeight:400},children:1===a[1].length?(0,n.jsxs)(n.Fragment,{children:[`${a[0]} ${a[1]}`," "]}):s})]})})}function sL(e){let{type:t}=e;switch(t){case"ISR":return(0,n.jsx)(sp.AcronymIsr,{className:sN.default.typeIcon});case"PPR":return(0,n.jsx)(sh.AcronymPpr,{className:sN.default.typeIcon});case"API":case"Serverless":return(0,n.jsx)(sg.AcronymApi,{className:sN.default.typeIcon});case"Page":return(0,n.jsx)(sx.AcronymPage,{className:sN.default.typeIcon});default:return(0,n.jsx)("div",{className:sN.default.typeBadgeContainer})}}function sW(e){let{asset:t}=e,s="size"in t&&"Meta"!==t.type?(0,sw.sizeFormatter)(t.size,"long",1):"-";return(0,n.jsx)("div",{className:sN.default.copyIconWrapper,title:t.path,children:(0,n.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:4},children:[(0,n.jsx)("div",{className:"w-6",children:(0,n.jsx)(sL,{type:t.type})}),(0,n.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper),onClick:()=>{(0,sk.copyToClipboard)(t.path),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)(s_.RouteHighlighter,{className:"!overflow-visible",route:t.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),(0,n.jsx)("div",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]}),(0,n.jsx)(sF,{runtime:"runtime"in t?t.runtime:void 0,runtimeLanguage:"runtimeLanguage"in t?t.runtimeLanguage:void 0}),(0,n.jsx)("span",{className:sN.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",marginLeft:4,fontWeight:400},children:s}),t.timeout?(0,n.jsx)(k.Tooltip,{text:"Maximum duration",children:(0,n.jsxs)("span",{className:"text-gray-900",style:{flexShrink:0,whiteSpace:"nowrap",width:"6ch",textAlign:"right",marginLeft:8},children:["≤",t.timeout,"s"]})}):null,(0,n.jsx)("div",{className:(0,l.clsx)("flex flex-row items-center justify-start flex-initial",sN.default.regionBadgeContainer),children:(0,n.jsx)(sO,{passiveRegions:Array.isArray(t.passiveRegions)?t.passiveRegions:void 0!==t.passiveRegions?[t.passiveRegions]:void 0,regions:t.regions})})]})})}function sM(e){let{asset:t}=e;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",title:t.path,children:[(0,n.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:4},children:[(0,n.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper),onClick:()=>{(0,sk.copyToClipboard)(t.path),eG.toasts.message("Copied to clipboard")},style:{flexBasis:"fit-content",flexGrow:0},type:"button",children:[(0,n.jsx)(s_.RouteHighlighter,{className:"!overflow-visible",route:t.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),"/*"===t.path?(0,n.jsx)("p",{className:"text-copy-14 ml-4 italic",children:"(this application serves any path not matched below)"}):null,(0,n.jsx)("div",{className:sN.default.copyIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]}),t.flag?(0,n.jsx)("div",{title:t.flag,className:(0,l.clsx)("flex flex-row items-stretch justify-start gap-2 flex-initial text-right whitespace-nowrap shrink-0 h-5 font-normal",sN.default.copyFlagIconWrapper),children:(0,n.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper),onClick:()=>{t.flag&&((0,sk.copyToClipboard)(t.flag),eG.toasts.message("Copied to clipboard"))},type:"button",children:[(0,n.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:(0,n.jsx)(k.Tooltip,{text:(0,n.jsxs)("p",{className:"text-copy-14",children:["requires flag"," ",(0,n.jsx)("span",{className:"text-copy-14-mono",children:t.flag})]}),children:(0,n.jsx)(sj.Badge,{size:"sm",style:{textTransform:"none"},variant:"purple-subtle",children:t.flag})})}),(0,n.jsx)("div",{className:sN.default.copyFlagIcon,children:(0,n.jsx)(sr.Copy,{size:20})})]})}):null]}),t.appName?(0,n.jsx)(sj.Badge,{className:"mr-2 normal-case",size:"sm",variant:"gray-subtle",children:t.appName}):null]})}function sB(e){let{isrFunction:t,accordionValue:s,setAccordionValue:a}=e,r="size"in t?(0,sw.sizeFormatter)(t.size,"long",1):"-",o=t.staticRoutes.length>0,c=`ISR-${t.type}-${t.path}`,d=s.includes(c);return(0,n.jsxs)(i.Item,{className:sN.default.isrFunctionRow,disabled:!o,value:c,children:[(0,n.jsx)(i.Header,{children:(0,n.jsxs)("div",{className:(0,l.clsx)("flex flex-row items-stretch justify-start flex-initial",sN.default.headerContent,{[sN.default.hasTrigger]:o}),children:[o?(0,n.jsx)(i.Trigger,{className:sN.default.trigger,children:(0,n.jsx)("div",{style:{transform:d?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,n.jsx)(t3.ChevronRight,{})})}):null,(0,n.jsx)("button",{className:sN.default.button,onClick:e=>{!e.defaultPrevented&&o&&(s.includes(c)?a(s.filter(e=>e!==c)):a([...s,c]))},style:{paddingLeft:o?5:void 0},type:"button",children:(0,n.jsx)("div",{className:sN.default.copyIconWrapper,title:t.path,children:(0,n.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("span",{className:(0,l.clsx)(sN.default.pathWrapper),children:(0,n.jsx)("span",{children:t.path})}),(0,n.jsx)(sF,{runtime:"runtime"in t?t.runtime:void 0,runtimeLanguage:"runtimeLanguage"in t?t.runtimeLanguage:void 0}),(0,n.jsx)("span",{className:sN.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",fontWeight:400},children:r}),(0,n.jsx)("div",{className:(0,l.clsx)("flex flex-row items-center justify-start flex-initial",sN.default.regionBadgeContainer),children:(0,n.jsx)(sO,{passiveRegions:Array.isArray(t.passiveRegions)?t.passiveRegions:void 0!==t.passiveRegions?[t.passiveRegions]:void 0,regions:t.regions})})]})})})]})}),(0,n.jsx)(e5.AnimatePresence,{children:d?(0,n.jsx)(i.Content,{forceMount:!0,children:(0,n.jsx)(t4.m.div,{animate:{height:"auto",opacity:1},className:sN.default.staticRoutesContainer,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:t.staticRoutes.map(e=>(0,n.jsxs)("button",{className:sN.default.staticRouteButton,onClick:()=>{(0,sk.copyToClipboard)(e.path),eG.toasts.message("Copied to clipboard")},type:"button",children:[(0,n.jsx)("span",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.staticRoute),children:(0,n.jsx)("span",{children:e.path})}),(0,n.jsx)("div",{className:sN.default.copyIconContainer,children:(0,n.jsx)(sr.Copy,{})})]},e.path))})}):null})]})}let sD={nodejs:{logo:(0,n.jsx)(so.FunctionNode,{}),label:"Node.js"},bun:{logo:(0,n.jsx)(sf.FunctionBun,{}),label:"Bun"},ruby:{logo:(0,n.jsx)(sm,{}),label:"Ruby"},go:{logo:(0,n.jsx)(su,{}),label:"Go"},python:{logo:(0,n.jsx)(sd.FunctionPython,{}),label:"Python"},rust:{logo:(0,n.jsx)(sy.FunctionRust,{}),label:"Rust"}};function sF(e){var t;let{runtime:s,runtimeLanguage:a}=e,[i,r]=(t=s||"",[/[a-zA-Z]+/.exec(t)?.[0]||"",/\d+(?<version>\.\w+)?/.exec(t)?.[0]||""]),l="executable"===s&&a?a:i,o=l in sD?sD[l]:void 0;return(0,n.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial text-right shrink-0 whitespace-nowrap font-normal h-5",children:(0,n.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{children:[o?.label||i," ",r]}),(0,n.jsx)("span",{style:{color:"var(--gray-1000)"},children:o?.logo})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Edge"}),(0,n.jsx)("span",{children:(0,n.jsx)(sc,{color:"gray-100",size:16})})]})})})}function sV(e){let{prefix:t,items:s,totalCount:a}=e,[o,c]=(0,r.useState)(!0),[u,m]=(0,r.useState)(!0),p=(0,r.useRef)(null),[h,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{p.current?.scrollToIndex({index:0})},[s]);let g=26.5*s.length,f=Math.min(530,g),y=(0,t5.isISRFunction)(s[0]),j=(0,r.useMemo)(()=>y&&0!==h.length?Math.min(20*s.filter(e=>{let t=`ISR-ISR-${e.path}`;return h.includes(t)}).reduce((e,t)=>e+t.staticRoutes.length,0)+26.5*s.length+12+6,530):f,[h,y,s,f]),v=a&&a>s.length;return(0,n.jsxs)(i.Root,{onValueChange:x,type:"multiple",value:h,children:[t,(0,n.jsx)("div",{className:(0,l.clsx)(sN.default.list,{[sN.default.virtualListAtTop]:!(g<530)&&!o,[sN.default.virtualListAtBottom]:!(g<530)&&!u}),children:(0,n.jsx)(ta.Virtuoso,{atBottomStateChange:e=>m(e),atTopStateChange:e=>c(e),data:s,itemContent:(e,t)=>(0,t5.isVariant)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sT,{asset:t},t.key)}):(0,t5.isCronJob)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sP,{asset:t})}):(0,t5.isMiddleware)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sA,{asset:t},t.matcher)}):(0,t5.isMicrofrontendRoute)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sM,{asset:t},t.path)}):(0,t5.isBulkRedirect)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sR,{asset:t},`${t.source}-${t.destination}`)}):(0,t5.isStaticAsset)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sE,{asset:t},t.path)}):(0,t5.isISRFunction)(t)?(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sB,{accordionValue:h,isrFunction:t,setAccordionValue:x},t.path)}):(0,n.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,n.jsx)(sW,{asset:t},t.path)}),ref:p,style:{height:j}})}),v?(0,n.jsxs)(d.Note,{className:"flex items-center justify-center !border-transparent !text-gray-700",fill:!0,size:"small",children:["Showing the first ",s.length.toLocaleString()," results"]}):null]})}function sO(e){let{regions:t,passiveRegions:s}=e;if(!(t&&t.length>0))return(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:sN.default.regionBadge,children:"Global"})});let a=Array.isArray(t)?t:[t],i=void 0===s?void 0:s.length,r=void 0!==i&&i>0,l=r&&s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:["Function Failover Region",`${1===i?"":"s"}`]}),(0,n.jsx)("p",{className:"text-copy-14",children:`${(0,sC.toListSentence)(s.map(e=>e.toUpperCase()))}`})]}):void 0;return 1===a.length?(0,n.jsx)(k.Tooltip,{text:l,children:(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:sN.default.regionBadge,title:sb.FriendlyRegionNameMapping[a[0]],children:[a[0],r?` +${i}`:""]})})}):(0,n.jsx)(k.Tooltip,{text:`${(0,sC.toListSentence)(a.map(e=>e.toUpperCase()))}`,children:(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:sN.default.regionBadge,children:[a.length," Regions"]})})})}function sH(e,t,s){let a=e+t,n=0===a?0:Math.round(s/a*100);return{totalRedirects:a,usagePercentage:n,usageOverThreshold:n>95,usageOverLimit:n>=100,remainingRedirects:a-s}}var sU=e.i(6441512);function sz(e){let{className:t,onClick:s}=e,{data:a,isLoading:i}=(0,sU.useBulkRedirectsSettings)(),{usageOverThreshold:r,usageOverLimit:l}=sH(a?.freeAmount??0,a?.purchasedAmount??0,a?.redirectsUsedByProject??0);return i?null:l?(0,n.jsx)(y.Button,{className:t,shape:"rounded",size:"small",type:"secondary",svgOnly:!0,"aria-label":"View bulk redirects",onClick:s,children:(0,n.jsx)(S.CrossCircle,{color:"red-700"})}):r?(0,n.jsx)(y.Button,{className:t,shape:"rounded",size:"small",type:"secondary",svgOnly:!0,"aria-label":"View bulk redirects",onClick:s,children:(0,n.jsx)(E.Warning,{color:"amber-700"})}):null}function s$(e){return(0,n.jsx)(r.Suspense,{fallback:null,children:(0,n.jsx)(sz,{...e})})}var sq=e.i(2689376);function sG(e,t){return e?"error":t?"warning":"secondary"}function sY(e){let{stagingUsage:t=!1,redirectsUsed:s,redirectsUsedByProject:a,redirectsUsedByDeployment:i,freeAmount:r,purchasedAmount:l,teamSlug:o,project:c}=e,{usagePercentage:u,usageOverThreshold:m,usageOverLimit:h,remainingRedirects:x,totalRedirects:g}=sH(r,l,s),f=h?"You will not be able to create any more redirects until you purchase additional capacity.":m?`You have ${x.toLocaleString()} redirects remaining.  Purchase additional redirects to avoid hitting the limit.`:"",y=s>0&&a>0,j=s>0&&i>0;return(0,n.jsx)(d.Note,{label:!1,type:sG(h,m),fill:h||m,action:h||m?(0,n.jsx)(p.ButtonLink,{href:`/${o}/${c}/cdn/redirects/settings`,size:"small",type:sG(h,m),children:"Purchase"}):(0,n.jsx)("div",{className:"w-20 h-8 bg-transparent"}),children:(0,n.jsxs)("span",{className:"flex flex-row items-center gap-1.5 w-full",children:[(0,n.jsx)(sq.Gauge,{size:"tiny",value:u,colors:{0:"var(--ds-green-700)",95:"var(--ds-amber-700)",100:"var(--ds-red-700)"}}),(0,n.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[t?"Future":"Redirects"," usage:"," ",(0,n.jsx)("b",{children:s.toLocaleString()})," of",(0,n.jsx)("b",{children:g.toLocaleString()}),(0,n.jsx)(k.Tooltip,{disableTriggers:!(y||j),center:!1,delay:!1,text:(0,n.jsxs)("span",{className:"grid grid-cols-[auto_1fr] auto-rows-auto",children:[y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Redirects from project:"})," ",(0,n.jsx)("b",{className:"justify-self-end",children:a.toLocaleString()})]}):null,j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Redirects from deployment:"})," ",(0,n.jsx)("b",{className:"justify-self-end",children:i.toLocaleString()})]}):null,(0,n.jsx)("hr",{className:"col-span-2 border-gray-alpha-400 border-solid my-2"}),(0,n.jsx)("span",{children:"Total:"})," ",(0,n.jsx)("b",{className:"justify-self-end",children:s.toLocaleString()})]}),children:(0,n.jsx)(sv.InformationFillSmall,{})}),f]})]})})}function sZ(){return(0,n.jsx)(d.Note,{label:!1,type:"secondary",action:(0,n.jsx)("div",{className:"w-20 h-8 bg-transparent"}),children:(0,n.jsxs)("span",{className:"flex flex-row items-center gap-1.5 w-full",children:[(0,n.jsx)(sq.Gauge,{size:"tiny",value:0}),(0,n.jsx)("span",{children:"Redirects usage:"}),(0,n.jsx)(er.Skeleton,{width:150})]})})}function sJ(){let{data:e,isLoading:t}=(0,sU.useBulkRedirectsSettings)(),{teamSlug:s,project:a}=(0,W.useParams)()??{};return t?(0,n.jsx)(sZ,{}):(0,n.jsx)(sY,{redirectsUsed:e?.redirectsUsed??0,redirectsUsedByProject:e?.redirectsUsedByProject??0,redirectsUsedByDeployment:e?.redirectsUsedByDeployment??0,freeAmount:e?.freeAmount??0,purchasedAmount:e?.purchasedAmount??0,teamSlug:s??"",project:a??""})}function sK(){return(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)(sZ,{}),children:(0,n.jsx)(sJ,{})})}function sQ(e){switch(e){case t5.ArtefactTypes.StaticAssets:return{name:"Static Assets",icon:(0,n.jsx)(t6.File,{})};case t5.ArtefactTypes.ServerlessFunctions:return{name:"Functions",icon:(0,n.jsx)(t8.FunctionSquare,{})};case t5.ArtefactTypes.IncrementalStaticRegeneration:return{name:"ISR Functions",icon:(0,n.jsx)(sX,{children:"ISR"})};case t5.ArtefactTypes.PartialPrerender:return{name:"Partial Prerender Functions",icon:(0,n.jsx)(sX,{children:"PPR"})};case t5.ArtefactTypes.EdgeMiddleware:return{name:"Edge Middleware",icon:(0,n.jsx)(t7.FunctionMiddleware,{})};case t5.ArtefactTypes.Variant:return{name:"Variants",icon:(0,n.jsx)(t9.ToggleOff,{})};case t5.ArtefactTypes.CronJobs:return{name:"Cron Jobs",icon:(0,n.jsx)(N.Clock,{})};case t5.ArtefactTypes.MicrofrontendRoutes:return{name:"Microfrontend Routes",icon:(0,n.jsx)(se.Microfrontends,{})};case t5.ArtefactTypes.BulkRedirects:return{name:"Bulk Redirects",icon:(0,n.jsx)(ss.BulkRedirectsIcon,{})};default:return{name:"Unknown",icon:(0,n.jsx)(t6.File,{})}}}function sX(e){let{children:t}=e;return(0,n.jsx)("span",{className:`text-[10px] leading-[12px] font-bold text-inherit ${t2.default.badge}`,children:t})}function s0(e){let{type:t,artefacts:s,count:a,isOpen:o,open:c,toggleOpen:d}=e,[u,m]=(0,r.useState)("all"),{name:p,icon:h}=sQ(t),x=0===s.length,g=function(e,t,s){if(0===e.length)return[];if((0,t5.isMiddleware)(e[0]))return[{type:"Custom Matcher",count:`${e.length} Paths`}];if(t===t5.ArtefactTypes.MicrofrontendRoutes)return[...new Set(e.map(e=>(0,t5.isMicrofrontendRoute)(e)?e.appName:void 0))].filter(Boolean).toSorted().map(t=>({type:t,count:e.filter(e=>(0,t5.isMicrofrontendRoute)(e)&&e.appName===t).length}));if(t===t5.ArtefactTypes.BulkRedirects){let t=e.length>0&&(0,t5.isBulkRedirect)(e[0])?s??e.length:e.length,a=e.length;return[{type:"Redirects",count:t>a?`${a.toLocaleString()} of ${t.toLocaleString()}`:t.toLocaleString()}]}let a=e.reduce((e,t)=>((e[t.type]=e[t.type]||[]).push(t),e),{}),n=[],i=Object.keys(a);return t===t5.ArtefactTypes.StaticAssets&&(i=t5.STATIC_TYPES.filter(e=>e in a)),i.forEach((e,t)=>{n[t]={type:e,count:a[e].length}}),n}(s,t,a),f=(0,r.useMemo)(()=>{if("all"===u||t===t5.ArtefactTypes.EdgeMiddleware||t===t5.ArtefactTypes.BulkRedirects){if(s[0]&&(0,t5.isMiddleware)(s[0])){let e=new Set;for(let t of s)if(Array.isArray(t.rawMatchers)&&t.rawMatchers.length)for(let s of t.rawMatchers)e.add(s);else e.add(t.matcher);let t=Array.from(e).sort().map(e=>({matcher:e}));return 1===t.length&&sS.includes(t[0].matcher)?[{matcher:sI}]:t}return s}return t===t5.ArtefactTypes.MicrofrontendRoutes?s.filter(e=>"all"===u||(0,t5.isMicrofrontendRoute)(e)&&e.appName===u):s.filter(e=>e.type===u)},[u,s,t]);return(0,r.useEffect)(()=>{o||m("all")},[o]),(0,n.jsxs)(i.Item,{className:t2.default.wrapper,value:t,children:[(0,n.jsxs)(i.Header,{className:t2.default.header,children:[x?null:(0,n.jsx)(i.Trigger,{className:t2.default.radixTrigger}),(0,n.jsxs)("div",{className:(0,l.clsx)(t2.default.trigger,!x&&t2.default.active),onClick:e=>{e.defaultPrevented||x||d()},children:[(0,n.jsxs)(t$.default,{flex:"0 0 auto",row:!0,vcenter:!0,children:[x?(0,n.jsx)("div",{style:{width:19}}):(0,n.jsx)("div",{style:{transform:o?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,n.jsx)(t3.ChevronRight,{})}),(0,n.jsx)("div",{className:(0,l.clsx)(t2.default.iconWrapper,{[t2.default.isrIconWrapper]:t===t5.ArtefactTypes.PartialPrerender||t===t5.ArtefactTypes.PartialPrerenderDynamicContent}),children:h}),(0,n.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:p})]}),t===t5.ArtefactTypes.BulkRedirects?(0,n.jsx)(s$,{onClick:c,className:o?"invisible":"visible"}):null,x?(0,n.jsx)("div",{className:t2.default.badgesWrapper,children:(0,n.jsx)(sn,{enabled:!1,active:!1,onClick:()=>{},children:"0"})}):0===f.length?null:(0,n.jsx)(st.Scroller,{gradient:"var(--ds-background-200) 0, transparent 20px",overlayClassName:t2.default.scroller,children:(0,n.jsxs)("div",{className:t2.default.badgesWrapper,children:[g.length>=1&&(0,n.jsxs)(sn,{active:"all"===u&&o,onClick:e=>{e.preventDefault(),m("all"),c(),e.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:["All (",a??s.length.toLocaleString(),")"]}),g.length>1&&g.map(e=>(0,n.jsxs)(sn,{active:e.type===u||1===g.length&&o,onClick:t=>{t.preventDefault(),m(e.type),c(),t.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:[e.type," (",e.count.toLocaleString(),")"]},e.type))]})})]})]}),(0,n.jsx)(e5.AnimatePresence,{initial:!1,children:o?(0,n.jsx)(i.Content,{forceMount:!0,children:(0,n.jsx)(t4.m.div,{animate:{height:"auto",opacity:1},className:t2.default.content,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:(0,n.jsx)(sV,{prefix:t===t5.ArtefactTypes.BulkRedirects&&o?(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsx)(sK,{})}):null,items:f,totalCount:a})})}):null})]})}function s1(e){let{resolvedTheme:t}=(0,t0.useTheme)(),{selectedArtefacts:s,artefactGroups:a,filterArtefactsBy:r,setSelectedArtefacts:o,deployment:c,framework:d}=e;return(0,n.jsxs)(i.Root,{defaultValue:[],onValueChange:e=>{o(e)},type:"multiple",value:s,children:[r?null:(0,n.jsxs)("div",{className:(0,l.clsx)(t2.default.wrapper,t2.default.frameworkWrapper),style:{display:"flex",alignItems:"center",gap:5},children:[d?(0,n.jsxs)(n.Fragment,{children:[d.logo?(0,n.jsx)(t1.Avatar,{size:20,src:"dark"===t?d.darkModeLogo:d.logo,title:d.name}):null,(0,n.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:d.name}),d.version?(0,n.jsxs)("p",{className:"text-[14px] font-medium leading-[14px]",children:["(",d.version,")"]}):null]}):(0,n.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:"No framework detected"}),(0,n.jsx)(k.Tooltip,{desktopOnly:!0,maxWidth:400,style:{marginLeft:"auto"},text:"Download Deployment Data",children:(0,n.jsx)(y.Button,{"aria-label":"Download Deployment Data",className:t2.default.downloadButton,onClick:()=>{(e=>{let{artefactGroups:t,filename:s}=e,a=`path_name,size
`,n=encodeURI(`data:text/csv;charset=utf-8,${a}${t.flatMap(e=>e.artefacts.map(e=>(0,t5.isVariant)(e)||(0,t5.isCronJob)(e)||(0,t5.isMiddleware)(e)||(0,t5.isMicrofrontendRoute)(e)||(0,t5.isBulkRedirect)(e)?null:(0,t5.isStaticAsset)(e)||(0,t5.isServerlessFunction)(e)?`${e.path},${e.size}`:`${e.path},${Array.isArray(e.regions)?e.regions.join(","):e.regions||""}`)).join("\n")}`),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",s),document.body.appendChild(i),i.click(),document.body.removeChild(i)})({artefactGroups:a,filename:`${c.host.replace("-","_").replace(/\./g,"_")}_logs`})},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,n.jsx)(tX.Download,{})})}),(0,n.jsx)(k.Tooltip,{desktopOnly:!0,maxWidth:400,text:"Copy Deployment Data",children:(0,n.jsx)(tW.CopyButton,{label:"Copy Deployment Data",size:"small",textToCopy:JSON.stringify(a,null,2),type:"tertiary"})})]}),a.map(e=>{let{type:t,artefacts:a,count:i}=e;return(0,n.jsx)(s0,{artefacts:a,count:i,isOpen:s.includes(t),open:()=>{s.includes(t)||o([...s,t])},toggleOpen:()=>{s.includes(t)?o(s.filter(e=>e!==t)):o([...s,t])},type:t},t)})]})}var s5=e.i(1475672);function s2(e){let{active:t,onChange:s,items:a,open:i}=e;return(0,n.jsx)("div",{className:(0,l.clsx)(tQ.default.collapsedBadgesWrapper,{[tQ.default.closed]:!i}),children:(0,n.jsx)(s5.default,{active:t,className:tQ.default.switcher,items:[...a.map(e=>{let{name:t,value:s,tooltip:a,buttonProps:i}=e;return{name:a?(0,n.jsx)(k.Tooltip,{className:tQ.default.tooltip,text:a,children:t}):t,value:s,buttonProps:i}})],onChange:(e,t)=>{s(e,t)},size:"small"})})}var s4=e.i(1918911),s9=e.i(3277920),s3=e.i(7432042),s7=e.i(1594052),s8=e.i(6618181);function s6(e){let{title:t,metric:s}=e;return(0,n.jsxs)("div",{className:s8.default.headerStatContainer,children:[(0,n.jsx)("div",{className:s8.default.headerStatTitle,children:t}),(0,n.jsx)("div",{className:s8.default.headerStatMetric,children:s})]})}function ae(e){let{cachedTasks:t,totalTasks:s,timeSaved:a,totalDuration:i}=e;return(0,n.jsxs)("header",{className:s8.default.header,children:[(0,n.jsxs)("div",{className:s8.default.headerTitle,children:[(0,n.jsx)(s7.LogoTurborepo,{size:44}),(0,n.jsx)("div",{className:s8.default.headerTitleContainer,children:(0,n.jsx)("h1",{children:"Turborepo Run Summary"})})]}),(0,n.jsxs)("div",{className:s8.default.headerStats,children:[void 0!==t&&void 0!==s&&(0,n.jsx)(s6,{metric:`${t}/${s}`,title:"Cached Tasks"}),void 0!==a&&a>0&&(0,n.jsx)(s6,{metric:(0,s3.default)(a),title:"Time Saved"}),void 0!==i&&(0,n.jsx)(s6,{metric:(0,s3.default)(i),title:"Duration"})]})]})}var at=e.i(6912485);function as(e){let{cached:t,total:s}=e;return void 0!==t&&void 0!==s?(0,n.jsx)(at.Progress,{className:"m-0 border border-solid border-gray-700 !bg-background-100",max:s,value:t,colors:{0:"linear-gradient(to right, #0096ff, #ff1e56)"},width:"50%"}):null}var aa=e.i(6881349);function an(e){let{isCached:t}=e,s=t?et.CheckCircleFill:R.MinusCircle;return(0,n.jsx)("span",{className:(0,l.clsx)({"text-turbo-blue":t,"text-turbo-red":!t}),children:(0,n.jsx)(s,{})})}function ai(e){let{taskId:t}=e,s=t.split("#");return 1===s.length?(0,n.jsx)("span",{children:t}):(0,n.jsxs)("span",{children:[s[0],(0,n.jsxs)("span",{className:"text-gray-900",children:["#",s[1]]})]})}function ar(e){let{taskId:t,isGlobal:s}=e;return s?'"globalCacheInputs": {':t?`"taskId": "${t}"`:void 0}function al(e){let{onScrollToLine:t,taskId:s,taskStats:a}=e;return(0,n.jsx)(y.Button,{align:"flex-grow",className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{t(ar({taskId:s})),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},prefix:(0,n.jsx)(an,{isCached:a.isCached}),size:"small",title:`${s} - cache ${a.isCached?"hit":"miss"} ${a.cacheSource?`(${a.cacheSource.toLowerCase()})`:""}`,type:"tertiary",children:(0,n.jsxs)("span",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"w-3/4 overflow-hidden truncate text-left",children:(0,n.jsx)(ai,{taskId:s})}),void 0!==a.duration?(0,n.jsx)("span",{children:(0,s3.default)(a.duration)}):void 0]})})}function ao(e){let{taskId:t,taskStats:s}=e;return(0,n.jsx)(aa.Combobox.Option,{prefix:(0,n.jsx)(an,{isCached:s.isCached}),suffix:void 0!==s.duration?(0,n.jsx)("span",{children:(0,s3.default)(s.duration)}):void 0,value:t,children:(0,n.jsx)(ai,{taskId:t})},t)}function ac(e){let{onScrollToLine:t}=e;return(0,n.jsx)(y.Button,{className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{t(ar({isGlobal:!0})),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},size:"small",type:"tertiary",children:"Global Hash Summary"})}var ad=e.i(2438968);function au(e){let{onScrollToLine:t,stats:s}=e,{summary:a,tasks:i={}}=s||{};return(0,n.jsxs)("aside",{className:ad.default.sidebar,children:[(0,n.jsxs)("div",{className:(0,l.clsx)(ad.default.sidebarTitle,"mb-2"),children:["Cache Analysis"," ",a?.cachedTasks!==void 0&&void 0!==a.totalTasks?`(${a.cachedTasks}/${a.totalTasks})`:void 0,(0,n.jsx)(as,{cached:a?.cachedTasks,total:a?.totalTasks})]}),(0,n.jsx)(ac,{onScrollToLine:t}),(0,n.jsx)("hr",{className:ad.default.sidebarDivider}),(0,n.jsx)("div",{className:ad.default.sidebarTaskContainer,children:Object.keys(i).map(e=>(0,n.jsx)(al,{onScrollToLine:t,taskId:e,taskStats:i[e]},e))}),(0,n.jsx)("div",{className:ad.default.sidebarFooter,children:(0,n.jsx)(p.Link,{external:!0,href:"/docs/monorepos/turborepo#debug-turborepo-cache-misses",variant:"highlight",children:"Learn More"})})]})}let am=(0,X.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.25H11C11.4142 4.25 11.75 4.58579 11.75 5V11C11.75 11.4142 11.4142 11.75 11 11.75H5C4.58579 11.75 4.25 11.4142 4.25 11V5C4.25 4.58579 4.58579 4.25 5 4.25ZM3 5C3 3.89543 3.89543 3 5 3H11C12.1046 3 13 3.89543 13 5V11C13 12.1046 12.1046 13 11 13H5C3.89543 13 3 12.1046 3 11V5ZM7.375 10.375V9.75V8.625H6.25H5.625V7.375H6.25H7.375V6.25V5.625H8.625V6.25V7.375H9.75H10.375V8.625H9.75H8.625V9.75V10.375H7.375Z" fill="currentColor"/>');var ap=e.i(3500331);function ah(e){var t,s;let{summary:a}=e,{isReady:i,team:r}=(0,tH.useTeam)();return(0,n.jsx)(y.Button,{Component:"a",disabled:!i,download:`turborepo_summary_${a.source.id}.json`,href:(t=a.source.id,(s=r?new URLSearchParams({teamId:r.id}):void 0)?`/api/v6/deployments/${t}/files/turborepo-summary?${s.toString()}`:`/api/v6/deployments/${t}/files/turborepo-summary`),onClick:()=>eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_DOWNLOAD),size:"small",suffix:(0,n.jsx)(tX.Download,{}),target:"_blank",type:"secondary",children:"Download"},"download")}function ax(e){let{summaryData:t,isComparing:s,onCompare:a,onScrollToLine:i,hasPreviousSummary:o,onComparePrevious:c,stats:d}=e,[u,m]=(0,r.useState)(null),{summary:p,tasks:h={}}=d||{};return(0,n.jsxs)("div",{className:(0,l.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 @lg-page:px-6","bg-background-100"),children:[(0,n.jsxs)("div",{className:"flex flex-col @lg-page:hidden",children:[(0,n.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,n.jsx)("span",{children:"Cache Analysis"}),(0,n.jsx)(as,{cached:p?.cachedTasks,total:p?.totalTasks})]}),(0,n.jsxs)(aa.Combobox,{clearable:!1,onChange:e=>{e&&(m(e),i(ar({taskId:e})),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK))},placeholder:"Jump to task",value:u,children:[(0,n.jsx)(aa.Combobox.Input,{}),(0,n.jsx)(aa.Combobox.List,{children:Object.keys(h).map(e=>(0,n.jsx)(ao,{taskId:e,taskStats:h[e]},e))})]})]}),(0,n.jsx)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:(0,n.jsx)("span",{children:"Cache Inputs"})}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 @max-md-page:flex-wrap",children:[(0,n.jsx)("div",{className:"grow",children:(0,n.jsx)(ap.Input,{"aria-labelledby":"Label",disabled:!0,prefix:"This deployment",value:t.source.id})}),s?void 0:(0,n.jsx)(y.Button,{className:"@max-md-page:w-full",onClick:o?c:a,suffix:(0,n.jsx)(am,{}),children:o?"Compare to Previous":"Compare"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between @max-lg-page:hidden",children:[(0,n.jsxs)("div",{className:"font-mono text-sm font-normal leading-4",children:["turbo@",t.summary.turboVersion]}),(0,n.jsx)(ah,{summary:t})]})]})}var ag=e.i(6318858),af=e.i(7749291),ay=e.i(7218483),aj=e.i(6625227),av=e.i(8216525);function ab(e){let{item:t,isMainDeployment:s,isPrevDeployment:a,isComparisonDeployment:i,status:r,createdAt:l}=e,o=(0,ay.useAgo)(l,{justNowLabel:"just now"});return s?o="CURRENT":a&&(o="PREVIOUS"),(0,n.jsx)(aa.Combobox.Option,{className:"font-mono",disabled:s||i,prefix:(0,n.jsx)(av.DeploymentStatus,{deployment:{readyState:r??"INITIALIZING",createdAt:l??0}}),suffix:(0,n.jsx)("span",{className:"text-xs text-gray-900",children:o}),value:t.source.id,children:(0,n.jsxs)("span",{className:"flex gap-1 text-xs text-foreground",children:[t.source.id,i?(0,n.jsx)(ag.Check,{}):void 0]})},t.source.id)}function aC(e){let{comparisons:t,comparisonsLoading:s,searchLoading:a,summaryData:i,deployment:r,onSelectCompare:o,onRemoveCompare:c,onSearch:d,prevDeploymentId:u}=e,{data:m}=(0,aj.default)(i?.source.id);return(0,n.jsxs)("div",{className:(0,l.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 @lg-page:px-6","border-0 border-l border-solid border-gray-200 bg-background-200","@max-lg-page:border-l-0 @max-lg-page:border-t","@max-sm-page:w-screen"),children:[(0,n.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-mono text-sm text-red-500",children:"-"}),(0,n.jsx)("span",{className:"ml-1 mr-2 font-mono text-sm text-green-500",children:"+"}),"Comparing with:"]}),(0,n.jsx)(y.Button,{"aria-label":"Remove Comparison",onClick:c,size:"small",svgOnly:!0,type:"tertiary",children:(0,n.jsx)(tA.Cross,{})})]}),(0,n.jsxs)(aa.Combobox,{clearable:!1,disabled:s,onChange:o,placeholder:i?i.source.id:"Select a deployment",value:i?.source.id,children:[(0,n.jsx)(aa.Combobox.Input,{loading:s||a,onChange:e=>{""===e.target.value?d(void 0):d(e.target.value)}}),(0,n.jsx)(aa.Combobox.List,{emptyMessage:a?"Searching":"No previous deployments found",children:t.map((e,t)=>(0,n.jsx)(ab,{createdAt:e.source.meta.createdAt,isComparisonDeployment:e.source.id===i?.source.id,isMainDeployment:e.source.id===r.id,isPrevDeployment:e.source.id===u,item:e,status:e.source.meta.status},a?e.source.id:`${e.source.id}-${t}`))})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between @max-lg-page:hidden",children:[(0,n.jsx)("div",{className:"font-mono text-sm font-normal leading-4",children:i?`turbo@${i.summary.turboVersion}`:void 0}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[m?.inspectorUrl?(0,n.jsx)(y.Button,{Component:"a","aria-label":`Open deployment with ID ${m.id} in a new tab`,href:m.inspectorUrl,onClick:()=>eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_VIEW_DEPLOYMENT),size:"small",svgOnly:!0,target:"_blank",type:"secondary",children:(0,n.jsx)(af.ExternalSmall,{})}):void 0,i?(0,n.jsx)(ah,{summary:i}):void 0]})]})]})}function a_(e){let{deployment:t,showCompareHeader:s,hasPreviousSummary:a,isComparing:i,stats:r,onScrollToLine:l,onCompareRemove:o,onComparePrevious:c,onCompare:d,onCompareSelect:u,onCompareSearch:m,baseline:p,comparison:h,comparisons:x,comparisonsLoading:g,searchLoading:f,prevDeploymentId:y}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ax,{hasPreviousSummary:a,isComparing:i,onCompare:d,onComparePrevious:c,onScrollToLine:l,stats:r,summaryData:p}),s?(0,n.jsx)(aC,{comparisons:x,comparisonsLoading:g,deployment:t,onRemoveCompare:o,onSearch:m,onSelectCompare:u,prevDeploymentId:y,searchLoading:f,summaryData:h}):null]})}var ak=e.i(3218771),aw=e.i(6440337);function aN(e){let{className:t="",isEnabled:s,onClick:a,mobileBreakpoint:i=600}=e,r=(0,te.useMediaQuery)(i);return s?(0,n.jsx)(y.Button,{"aria-label":"Turborepo Run Summary",className:t,onClick:a,prefix:r?void 0:(0,n.jsx)(s7.LogoTurborepo,{size:20}),shape:r?"square":void 0,size:"small",svgOnly:r||void 0,type:"secondary",children:r?(0,n.jsx)(s7.LogoTurborepo,{size:20}):(0,n.jsx)("span",{children:"Run Summary"})}):null}function aS(e){return(0,n.jsxs)("span",{className:ak.default.codeFoldMessage,children:[(0,n.jsx)(s4.ChevronUpDown,{className:"text-sm"}),"Expand ",e," Lines"]})}function aI(e){let{size:t}=e;return(0,n.jsxs)("svg",{height:t,style:{color:"currentcolor",stroke:"currentcolor"},viewBox:"0 0 24 24",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:"Reset Folding"}),(0,n.jsx)("path",{d:"M17 3L12 8.517L9.5 5.7585L7 3M7 20.997L12 15.48L17 20.997",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}function aA(e){let{onView:t}=e;return(0,n.jsxs)("div",{className:ak.default.noDifference,children:[(0,n.jsx)(et.CheckCircleFill,{size:54}),(0,n.jsx)("span",{children:"No Difference"}),(0,n.jsx)(y.Button,{onClick:t,size:"small",type:"secondary",children:"View"})]})}function aR(e){let t,{active:s,deployment:a,baseline:i,comparison:l,previous:o,initialLine:c,onClose:d}=e,[m,p]=(0,u.useQueryState)("line"),[h,g]=(0,u.useQueryState)("comparisonId",u.queryTypes.string.withDefault(l?.source.id??"")),{expandedBlocks:f,resetCodeBlocks:j,virtualizer:v,getIndex:b,items:C}=(0,x.useCodeCompare)(),_=(0,te.useMediaQuery)(1024),k=(0,s9.useMounted)(),w=(0,r.useRef)(null),[N,S]=(0,r.useState)([]),[I,A]=(0,r.useState)(!c),[R,T]=(0,r.useState)(void 0),P=(0,tk.useDebouncedValue)(R,400),[E,L]=(0,r.useState)(l),[W,M]=(0,r.useState)(!0),[B,D]=(0,r.useState)(!1),[F,V]=(0,r.useState)(!1),[O,H]=(0,r.useState)(!!c),[U,z]=(0,r.useState)(),{resolvedTheme:$}=(0,t0.useTheme)(),{data:q,isLoading:G}=function(e){let{since:t,projectId:s,deploymentId:a,refType:n,refValue:i}=e,r=(0,eJ.useTeamSlug)();return(0,eZ.default)(()=>r&&a&&s?`/api/turborepo/run-summary/comparisons${(0,eb.encode)({deploymentId:a,projectId:s,since:t,teamId:r,refType:n,refValue:i})}`:null,e=>(0,ev.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:0,revalidateOnFocus:!1})}({since:a.createdAt,projectId:a.projectId,deploymentId:a.id,...eK(a)}),{data:Y,isLoading:Z}=function(e){let{search:t}=e,s=(0,eJ.useTeamSlug)();return(0,eZ.default)(()=>s&&t?`/api/turborepo/run-summary/query${(0,eb.encode)({search:t,teamId:s})}`:null,e=>(0,ev.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1})}({search:P}),J=async()=>{await d(),await p(null),await g(null)},K=e=>{if(e){let t=N.find(t=>t.source.id===e);t&&(L(t),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_SELECT_COMPARISON,{comparisonId:t.source.id,comparisonType:t.source.type}))}},Q=()=>{D(!1),L(void 0),M(!1),H(!1),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_REMOVE_COMPARISON)},X=(0,r.useCallback)(e=>{e>=0&&(v?.scrollToIndex(e,{align:"center"}),z(void 0))},[z,v]),ee=()=>{o?.source.id!==E?.source.id&&(L(o),M(!0),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COMPARE_PREVIOUS))},et=e=>{if(e){let t=b(e);t<0?(V(!1),z(e)):X(t)}};(0,r.useEffect)(()=>{if(k&&!I&&c&&E?.summary){let[e,t]=c.split("-"),s=C.find(s=>"skipped"!==s.type&&s.data.line["L"===e?"left":"right"]?.lineNumber===Number(t));if(void 0!==s&&"skipped"!==s.type){let{index:e}=s.data;X(e),A(!0)}}},[I,c,k,E,C,X]),(0,r.useEffect)(()=>{!G&&q?.length&&S(q)},[G]),(0,r.useEffect)(()=>{if(!Z&&Y?.result!==void 0){let e=Y.result;N.find(t=>t.source.id===e.source.id)||S(t=>[e,...t])}},[Z,N]),(0,r.useEffect)(()=>{g(E?.source.id?E.source.id:null),E?.summary&&!c?V(!0):V(!1)},[E,g,c]),(0,r.useEffect)(()=>{!F&&U&&X(b(U))},[U,F,X,b]),(0,r.useEffect)(()=>{E?.summary&&!_?M(!0):M(!1)},[_,E]),(0,r.useEffect)(()=>{E?.summary&&H(!1)},[E]);let es=!!o,{totalTasks:ea,cachedTasks:en,totalDuration:ei,timeSaved:er}=i.stats.summary,el=JSON.stringify(E?.summary)===JSON.stringify(i.summary),eo=el&&!O;return(0,n.jsxs)(e$.Modal,{active:!!s,drawerClassname:ak.default.drawerStyles,drawerHeight:"max",drawerVerticalScroll:!1,onClickOutside:J,style:{width:E?.summary||B||_?"90vw":"80vw",maxWidth:"1600px",height:"80vh"},children:[(0,n.jsx)(ae,{cachedTasks:en,timeSaved:er,totalDuration:ei,totalTasks:ea}),(0,n.jsxs)("div",{className:ak.default.body,children:[(0,n.jsx)(au,{onScrollToLine:et,stats:i.stats}),(0,n.jsxs)("div",{className:ak.default.content,children:[(0,n.jsx)("div",{className:ak.default.contentHeader,children:(0,n.jsx)(a_,{baseline:i,comparison:E,comparisons:N,comparisonsLoading:G,deployment:a,hasPreviousSummary:es,isComparing:!!E?.summary||B,onCompare:()=>D(!0),onComparePrevious:ee,onCompareRemove:Q,onCompareSearch:T,onCompareSelect:K,onScrollToLine:et,prevDeploymentId:o?.source.id,searchLoading:Z,showCompareHeader:!!(E?.summary||B),stats:i.stats})}),(0,n.jsxs)("div",{className:ak.default.diffViewer,id:"DiffViewer",ref:w,children:[(0,n.jsx)("div",{className:ak.default.contentHeaderMobile,children:(0,n.jsx)(a_,{baseline:i,comparison:E,comparisons:N,comparisonsLoading:G,deployment:a,hasPreviousSummary:es,isComparing:!!E?.summary||B,onCompare:()=>D(!0),onComparePrevious:ee,onCompareRemove:Q,onCompareSearch:T,onCompareSelect:K,onScrollToLine:et,prevDeploymentId:o?.source.id,searchLoading:Z,showCompareHeader:!!(E?.summary||B),stats:i.stats})}),eo?(0,n.jsx)(aA,{onView:()=>{V(!1),H(!0)}}):void 0,k&&!eo?(0,n.jsx)(x.ComparisonView,{codeFoldMessageRenderer:aS,compareMethod:x.DiffMethod.WORDS_WITH_SPACE,hideLineNumbers:!E?.summary,highlightLines:m?[m]:[],newValue:JSON.stringify(E?.summary?E.summary:i.summary,null,2),oldValue:JSON.stringify(i.summary,null,2),onLineNumberClick:(e,t)=>{m===e?p(null):p(e)},parentRef:w,renderContent:e=>(0,aw.SyntaxHighlighter)(e,i.stats.tasks),showDiffOnly:F,splitView:W,styles:(t="dark"===$?"dark":"light",E?.summary?W?(0,aw.splitViewStyles)({theme:t}):(0,aw.unifiedViewStyles)({theme:t}):(0,aw.noComparisonStyles)()),useDarkTheme:"dark"===$,useVirtual:!0,virtualizerOptions:{estimateSize:()=>20,overscan:15,scrollPaddingStart:_?-300:0},xSpacer:!0}):void 0,(0,n.jsx)(aw.SyntaxHighlightingStyles,{})]}),E?.summary&&!eo?(0,n.jsxs)("div",{className:ak.default.diffViewerBackground,children:[(0,n.jsx)("div",{className:ak.default.diffViewerBackgroundLeft}),(0,n.jsx)("div",{className:ak.default.diffViewerBackgroundRight})]}):null]}),!el&&f.length>0&&E?.summary||!el&&!F&&E?.summary?(0,n.jsx)(y.Button,{className:ak.default.resetFoldingButton,onClick:()=>{j(),V(!0),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COLLAPSE_LINES)},size:"small",type:"secondary",children:(0,n.jsxs)("span",{className:ak.default.resetCodeFold,children:[(0,n.jsx)(aI,{size:14}),"Collapse Lines"]})}):void 0]})]})}function aT(e){let{shimmer:t=!1}=e;return(0,n.jsx)(n.Fragment,{children:Q.map(e=>{let s=e,a=e;return(e!==J||t||(a="Assigning Domains",s="Assigning Custom Domains"),t)?(0,n.jsx)(eg,{id:a,name:s},a):(0,n.jsx)(ef,{disabled:!0,id:a,name:s,status:eh.Pending},a)})})}e.s(["DeployStepsSkeleton",0,aT],1367170);var aP=e.i(5779481),aE=e.i(6838069);function aL(e){let{resource:t,team:s}=e,{data:a}=(0,aP.useResourceItem)({resourceId:t.resourceId,skipMetadata:!0}),i=a?.store,r=i?(0,aE.getResourceDashboardLink)(i,{teamSlug:s.slug}):"";return(0,n.jsx)("div",{children:(0,n.jsxs)(p.Link,{className:"flex flex-row items-center justify-start gap-4 flex-initial",href:r,children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[t.icon?(0,n.jsx)(t1.Avatar,{hash:t.icon,size:20,className:"top-px"}):null,t.name]}),(0,n.jsx)(aW,{className:"relative top-px",status:t.status})]})})}function aW(e){let{className:t,status:s}=e;return(0,n.jsx)(k.Tooltip,{className:t,text:function(e){if(!e)return"Resource status is unknown";switch(e){case"ready":case"resumed":return"Resource is ready";case"pending":return"Resource is initializing";case"error":return"Resource has errors";case"skipped":return"Resource has been skipped or not configured";case"suspended":return"Resource has been suspended";case"uninstalled":return"Resource has been uninstalled";case"timeout":return"Resource provisioning timed out"}return null}(s),children:(0,n.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-secondary)";switch(e){case"ready":case"resumed":return"var(--geist-success)";case"pending":return"var(--geist-warning)";case"timeout":case"error":case"suspended":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(s)}})})}function aM(e){let{action:t,deployment:s,team:a}=e;return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[t.resource?(0,n.jsx)(aB,{action:t,deployment:s,resource:t.resource,team:a}):(0,n.jsx)(aD,{action:t,deployment:s,team:a}),t.startedAt?(0,n.jsx)(aF,{action:t}):null,(0,n.jsx)(aV,{status:t.status}),(0,n.jsx)("p",{className:"text-copy-14",children:t.statusText})]})}function aB(e){let{action:t,resource:s,deployment:a,team:i}=e,{data:r}=(0,aP.useResourceItem)({resourceId:s.resourceId,skipMetadata:!0}),l=r?.store,o=t.statusUrl?(0,O.getIntegrationAbsoluteOrSsoLink)(t.statusUrl,{teamIdOrSlug:i.id,integrationConfigurationId:t.integrationConfigurationId,externalResourceId:s.externalResourceId,projectId:a.projectId,action:t.slug}):l?(0,aE.getResourceDashboardLink)(l,{teamSlug:i.slug,path:"projects"}):"";return(0,n.jsx)(p.Link,{external:!0,href:o,children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[t.icon?(0,n.jsx)(t1.Avatar,{hash:t.icon,size:20}):null,s.name,": ",t.name]})})}function aD(e){let{action:t,deployment:s,team:a}=e,i=t.statusUrl?(0,O.getIntegrationAbsoluteOrSsoLink)(t.statusUrl,{teamIdOrSlug:a.id,integrationConfigurationId:t.integrationConfigurationId,projectId:s.projectId,action:t.slug}):`/${a.slug}/~/integrations/${t.integrationConfigurationId}`;return(0,n.jsx)(p.Link,{external:!0,href:i,children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[t.icon?(0,n.jsx)(t1.Avatar,{hash:t.icon,size:20}):null,t.name]})})}function aF(e){let{action:t}=e,{startedAt:s,completedAt:a}=t,[i,l]=(0,r.useState)(null);return((0,ec.useInterval)(()=>{s&&l(Date.now()-s)},a?null:1e3,!0),(0,r.useEffect)(()=>{null===i&&s&&a&&l(a-s)},[i,a,s]),i)?(0,n.jsx)("span",{className:"text-copy-14 text-gray-900",children:(0,ed.age)(i||0,{includeSeconds:!0})}):null}function aV(e){let{status:t}=e;return(0,n.jsx)(k.Tooltip,{text:function(e){if(!e)return"Action has not started yet";switch(e){case"succeeded":return"Action has completed";case"running":return"Action is running";case"failed":return"Action has completed with errors";case"skipped":return"Action has been skipped or not configured";case"uninstalled":return"Action or resource have been uninstalled";case"timeout":return"Action has timed out"}return null}(t),children:(0,n.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-warning)";switch(e){case"succeeded":return"var(--geist-success)";case"running":return"var(--geist-warning)";case"timeout":case"failed":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(t)}})})}function aO(e){let{deployment:t}=e,{team:s}=(0,tH.useTeam)(),a=t.integrations;return s&&a?(0,n.jsx)(ef,{action:(0,n.jsx)(aU,{deployment:t}),finishedAt:a.completedAt,id:"Integrations",name:"Provisioning Integrations",paddingType:"vertical",showDurationWhenSkipped:!0,startedAt:a.startedAt,status:function(e){if(!e)return eh.NoData;switch(e){case"pending":return eh.InProgress;case"ready":return eh.Complete;case"error":case"timeout":return eh.Error;case"skipped":return eh.Skipped}return eh.NoData}(a.status),children:(0,n.jsx)(aH,{deployment:t,team:s})}):null}function aH(e){let{team:t,deployment:s}=e,{data:a}=(0,eZ.default)(`/api/v13/deployments/${s.id}/integrations?teamId=${s.ownerId}`,ev.fetchAPI);return(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial px-6",children:a?(0,n.jsxs)(n.Fragment,{children:[a.resources?.map(e=>(0,n.jsx)(aL,{resource:e,team:t},e.resourceId)),a.actions?.map(e=>(0,n.jsx)(aM,{action:e,deployment:s,team:t},`${e.integrationConfigurationId}:${e.slug}`))]}):(0,n.jsx)("p",{className:"text-copy-14",children:"Loading…"})})}function aU(e){let{deployment:t}=e,s=t.integrations;return s?.status!=="pending"?null:(0,n.jsx)(y.Button,{onClick:()=>{(0,ev.fetchAPI)(`/api/v13/deployments/${t.id}/integrations/skip`,{method:"POST",throwOnHTTPError:!0,body:{}})},size:"small",type:"secondary",children:"Skip"})}var az=e.i(1288475),a$=e.i(1000921);function aq(e){let{check:t}=e;return t?.status==="running"?(0,n.jsx)(az.Status,{size:16,color:"amber-700"}):t?.status==="completed"&&"succeeded"===t.conclusion?(0,n.jsx)(ag.Check,{size:16,color:"green-700"}):t?.status==="completed"&&"failed"===t.conclusion?(0,n.jsx)(tA.Cross,{size:16,color:"red-700"}):t?.status==="completed"&&"neutral"===t.conclusion?(0,n.jsx)(E.Warning,{size:16,color:"amber-700"}):t?.status==="completed"&&"canceled"===t.conclusion?(0,n.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 20 20",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_3889:22791)",children:[(0,n.jsx)("path",{d:"M9.99984 18.3338C14.6022 18.3338 18.3332 14.6028 18.3332 10.0004C18.3332 5.39807 14.6022 1.66711 9.99984 1.66711C5.39746 1.66711 1.6665 5.39807 1.6665 10.0004C1.6665 14.6028 5.39746 18.3338 9.99984 18.3338Z",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,n.jsx)("path",{d:"M12.5 7.50049H7.5V12.5005H12.5V7.50049Z",fill:"#999999",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_3889:22791",children:(0,n.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.000488281)",width:"20"})})})]}):t?.status==="completed"&&"skipped"===t.conclusion?(0,n.jsx)(a$.ArrowCircleRight,{color:"gray-500",size:20}):t?.status==="completed"&&"stale"===t.conclusion?(0,n.jsx)(R.MinusCircle,{color:"gray-500",size:20}):(0,n.jsx)(S.CrossCircle,{color:"gray-500",size:20})}function aG(e){let{checks:t,isExpanded:s,filterChecksBy:a,onChange:i}=e,r=t.filter(e=>"succeeded"===e.conclusion).length,o=t.filter(e=>"running"===e.status).length,c=t.filter(e=>"failed"===e.conclusion).length,d=[{name:(0,n.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-gray-900",children:"All"}),value:"all"},r?{name:(0,n.jsx)(aY,{count:r,type:"succeeded"}),value:"succeeded"}:void 0,o?{name:(0,n.jsx)(aY,{count:o,type:"running"}),value:"running"}:void 0,c?{name:(0,n.jsx)(aY,{count:c,type:"failed"}),value:"failed"}:void 0].filter(Boolean);return d.length>2?(0,n.jsx)(_.Switch,{name:"ci-checks-filter",onClick:e=>{s&&e.stopPropagation()},size:"small",children:d.map(e=>(0,n.jsx)(_.Switch.Control,{checked:a===e.value,className:(0,l.clsx)({"[&>div]:px-0":"all"!==e.value},{"[&>div]:px-2":"all"===e.value}),label:e.name,onChange:()=>{i(e.value)},value:e.value},e.value))}):(0,n.jsxs)("span",{children:[r?(0,n.jsx)(aY,{count:r,suffix:"completed",type:"succeeded"}):null,o?(0,n.jsx)(aY,{count:o,suffix:"running",type:"neutral"}):null,c?(0,n.jsx)(aY,{count:c,suffix:"failed",type:"failed"}):null]})}function aY(e){let{count:t,suffix:s,type:a}=e;return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1 flex-initial px-1.5",children:[(0,n.jsx)(aq,{check:{conclusion:a,status:"running"===a?"running":"completed"}}),(0,n.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium text-gray-900",children:[t,s?` ${s}`:""]})]})}var aZ=e.i(8159863);function aJ(e){let{checks:t,filterChecksBy:s,teamSlug:a,mutate:i}=e,{data:r}=(0,aZ.useCurrentDashboardDeploymentInterval)(),{can:l,isLoading:o}=(0,g.default)(),c=!o&&l(f.Action.Update,null===r.target?f.Resource.DeploymentCheckPreview:f.Resource.DeploymentCheck),d=t.filter(e=>"failed"===e.conclusion),u=t.filter(e=>"succeeded"===e.conclusion),m=t.filter(e=>"running"===e.status);return(0,n.jsxs)(n.Fragment,{children:[("all"===s||"failed"===s)&&d.length>0?(0,n.jsx)(aQ,{checks:d,expanded:"failed"===s,type:"failed",canUpdateDeploymentCheck:c,teamSlug:a,onRerunSuccess:async()=>{await i()}}):null,("all"===s||"running"===s)&&m.length>0?(0,n.jsx)(aQ,{checks:m,expanded:"running"===s,type:"running"}):null,("all"===s||"succeeded"===s)&&u.length>0?(0,n.jsx)(aQ,{checks:u,expanded:"succeeded"===s,type:"succeeded"}):null]})}function aK(e){let{children:t,className:s,onClick:a,size:i="lg"}=e;return(0,n.jsx)("div",{onClick:a,className:(0,l.clsx)("flex flex-row items-stretch justify-between gap-2 flex-initial hsla(var(--ds-gray-200-value),1) px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===i},{"py-[var(--geist-space-gap-half)]":"sm"===i},s),children:t})}function aQ(e){let{checks:t,type:s,expanded:a,canUpdateDeploymentCheck:i,teamSlug:o,onRerunSuccess:c}=e,[d,u]=(0,r.useState)(a);return(0,n.jsxs)("div",{className:(0,l.clsx)("flex flex-col items-stretch justify-start flex-initial",{"[&:not(:last-child)]:border-b ":d}),children:[(0,n.jsx)(aK,{className:(0,l.clsx)("cursor-pointer",{"border-b":!d},{"border-none":d}),onClick:()=>u(e=>!e),children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial pl-2",children:[(0,n.jsx)(t3.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:d?"rotate(90deg)":"rotate(0deg)"}}),(0,n.jsx)(aq,{check:{conclusion:s,status:"running"===s?"running":"completed"}}),"failed"===s?(0,n.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Failing"]}):null,"running"===s?(0,n.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Running"]}):null,"succeeded"===s?(0,n.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Successful"]}):null]})}),(0,n.jsx)("div",{className:(0,l.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial max-h-0 overflow-hidden transition-all duration-300",{"overflow-y-scroll max-h-96":d}),children:t.map(e=>(0,n.jsx)(aX,{...e,canUpdateDeploymentCheck:i,teamSlug:o,onRerunSuccess:c},e.id))})]})}function aX(e){let{name:t,status:s,conclusion:a,detailsUrl:i,externalUrl:r,integrationId:l,canUpdateDeploymentCheck:o,teamSlug:c,onRerunSuccess:d,id:u}=e,{data:m,isLoading:h}=(0,U.useIntegration)(l),{data:x}=(0,aZ.useCurrentDashboardDeploymentInterval)(),g=r||i;return(0,n.jsxs)(aK,{className:"hover:bg-[var(--ds-gray-100)]",size:"sm",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial pl-5 ml-4",children:[(0,n.jsx)(aq,{check:{conclusion:a,status:s}}),m?.icon?(0,n.jsx)(t1.Avatar,{hash:m.icon,size:18}):h?(0,n.jsx)("div",{className:"size-[16px]"}):(0,n.jsx)(L.LogoGithub,{}),(0,n.jsx)("span",{className:"text-label-14 font-medium",children:t})]}),(0,n.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:[m&&"failed"===a&&o?(0,n.jsx)(eC,{checkId:u,deploymentId:x.id,teamSlug:c,onSuccess:d,checksConclusion:x.checksConclusion}):null,g?(0,n.jsx)(p.Link,{className:"flex flex-row items-center gap-2 text-gray-900",external:!0,href:g,children:(0,n.jsx)("p",{className:"text-copy-14 text-gray-900",children:"View details"})}):null]})]})}function a0(e){let{expandedSteps:t,deployment:s,checks:a,mutateDeployment:i,teamSlug:l,mutate:o}=e,[c,d]=(0,r.useState)("all"),u=(0,m.useServerFlag)("enable-deployment-checks-empty-state",!1),p=eh.Pending;0===a.length?eh.Pending:a.some(e=>"failed"===e.conclusion)?p=eh.Error:a.some(e=>"running"===e.status)?p=eh.InProgress:a.every(e=>"succeeded"===e.conclusion)&&(p=eh.Complete);let h=t.includes("CI Checks"),{areChecksRunning:x}=(0,F.getDeploymentStatus)(s),{can:y,isLoading:j}=(0,g.default)(),[v,b]=(0,r.useState)(!1),C=!j&&y(f.Action.Update,null===s.target?f.Resource.DeploymentCheckPreview:f.Resource.DeploymentCheck),_="failed"===s.checksConclusion||x,k="READY"!==s.readyState,w=!!s.checksState,{checksFinishedAt:N,checksStartedAt:S}=(0,tT.getChecksTimes)(a,s);return w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a1,{canSkipChecks:_,canUpdateDeploymentCheck:C,onSkip:()=>{_&&b(!0)},filterChecksBy:c,isExpanded:h,handleChecksFilterChange:e=>{d(e)},checksStartedAt:S,checksFinishedAt:N,isChecksDisabled:k,combinedStatus:p,checks:a,teamSlug:l,mutate:o}),_?(0,n.jsx)(eY,{active:v,deployment:s,mutateDeployment:i,onClose:()=>b(!1)}):null]}):u?(0,n.jsx)(ef,{id:Y,name:Y,status:eh.Pending,children:(0,n.jsx)(ej.EmptyChecksCard,{})}):null}function a1(e){let{canSkipChecks:t,canUpdateDeploymentCheck:s,onSkip:a,filterChecksBy:i,isExpanded:r,handleChecksFilterChange:l,checksStartedAt:o,checksFinishedAt:c,isChecksDisabled:d,combinedStatus:u,checks:m,teamSlug:p,mutate:h}=e;return(0,n.jsx)(ef,{action:(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsx)(k.Tooltip,{forceHide:s,text:s?null:"Missing required permission to skip checks",children:(0,n.jsx)(y.Button,{disabled:!s,onClick:a,size:"small",type:"secondary",children:"Skip"})}):null,(0,n.jsx)(aG,{checks:m,filterChecksBy:i,isExpanded:r,onChange:l})]}),id:Y,startedAt:o,finishedAt:c,disabled:d,name:Y,paddingType:"none",status:u,children:(0,n.jsx)(aJ,{checks:m,filterChecksBy:i,teamSlug:p,mutate:h})})}var a5=e.i(3850869),a2=e.i(8783592),a4=e.i(4628083),a9=e.i(3131132);let a3=e=>e===em.Building?"Build Logs":"Unknown",a7=(e,t)=>{let s="finishedAt"in e?e.finishedAt:null,a=t.errorStep??null,n="CANCELED"===t.readyState,i="READY"===t.readyState,r="ERROR"===t.readyState;return"placeholder"in e&&!(n||i||r)?eh.Pending:s&&i?eh.Complete:s&&r||e.name===a?eh.Error:n?eh.Canceled:eh.InProgress},a8=[em.Building],a6=[em.Building,G,K,J,Z];e.s(["DeploySteps",0,function(e){let{creationFlow:t,deployment:s,teamSlug:a,mutateDeployment:y,onComplete:j,onExpandedStepsChange:v,expandedSteps:b,enableLineHighlighting:C,context:_}=e,{can:k,isLoading:w,accessInfo:N}=(0,g.default)(),S=(0,W.useSearchParams)(),[I,A]=(0,u.useQueryState)("turboRunSummary",u.queryTypes.boolean),[R,T]=(0,r.useState)({}),[P,E]=(0,r.useState)([]),L=(0,eM.useFeedbackVariantsDeployStep)(),B=(0,ey.useChecksPrivateBetaFlag)(),D=(0,ey.useCiChecksAndPoliciesFlagV2)(),V=(0,m.useServerFlag)("enable-deployment-resources-page",!1),O=(0,m.useServerFlag)("project-agent-build-fix",!1),H=(0,e8.getGitInfoFromDeployment)(s),{steps:z,loading:$}=function(e){let[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),i=(0,r.useRef)(void 0),l=(0,r.useRef)([]),o=(0,r.useRef)(void 0),c=(0,r.useRef)(void 0);c.current=e;let d=e?.createdAt,u=e?.id,m=(0,r.useCallback)(e=>{let t=[...l.current,e];1e4===t.length&&(t[0].level="warning",t[0].text="Warning: You're seeing the last 10000 lines of logs. Any lines before that were automatically truncated."),l.current=t,s(l.current)},[]),p=u?(0,eV.API_DEPLOYMENT_EVENTS)(u):"";return(0,r.useEffect)(()=>{if(!u){s([]),l.current=[];return}n(!0),d!==i.current&&(i.current=d,s([]),l.current=[]);let e=new AbortController,t=e.signal;return o.current&&(o.current.abort(),s([]),l.current=[]),o.current=e,eU({url:p,onLog:m,onResponse:()=>n(!1),signal:t,deploymentRef:c}).catch(e=>{n(!1),e instanceof Error&&"AbortError"===e.name||(0,eF.captureError)(e,{attributes:{"extras.type":"Log Stream"}})}),()=>e.abort()},[m,d,u,p,e?.readyState]),{steps:(0,r.useMemo)(()=>{let s=[];for(let a of t)if(!eH(a)){s[0]||s.push({finishedAt:null,logs:[],name:em.Building,startedAt:e?.buildingAt??a.created});let t=s[0];switch(t.logs.push(a),e?.readyState){case"READY":case"ERROR":t.finishedAt=("readyStateAt"in e?e.readyStateAt:e.ready)??null;break;default:t.finishedAt=null}}return s},[e?.buildingAt,t,e,e?.ready,e?.readyStateAt,e?.readyState]),loading:a}}(s),Y=s?.id||s?.uid,Z=s?.readyState==="ERROR",{data:Q,isEnabled:X}=(0,a2.useVadeTasksByDeployment)(Y,Z),ee=(0,a4.getVercelAgentBuildFixCodeSuggestion)(Q),et=Q?.id,es=Z&&X&&!ee,[ea,en]=(0,r.useState)(!1),[ei,er]=(0,r.useState)(""),{data:el}=function(e,t){let{since:s,projectId:a,deploymentId:n,comparisonId:i,refType:r,refValue:l}=e,o=(0,eJ.useTeamSlug)();return(0,eZ.default)(()=>o&&n&&a?`/api/turborepo/run-summary${(0,eb.encode)({deploymentId:n,projectId:a,comparisonId:i,since:s,teamId:o,refType:r,refValue:l})}`:null,e=>(0,ev.fetchAPI)(e,{throwOnHTTPError:!0}),t)}({since:s?.createdAt,projectId:s?.projectId,deploymentId:s?.id,comparisonId:R.comparisonId,...eK(s)},{keepPreviousData:!0});(0,r.useEffect)(()=>{S&&T({comparisonId:S.get("comparisonId")??void 0,selectedLine:S.get("line")??void 0})},[S]);let{data:eo,isLoading:ec}=(0,eQ.useDeployLogs)({deployment:s,throwOnHTTPError:!s?.public}),{data:ed}=(0,e0.useMicrofrontendsConfig)({deploymentId:s?.microfrontends?s?.id:void 0}),{data:eu}=(0,eX.useFrameworks)(),ep=function(e,t){if(!t?.framework)return;let s=e?.find(e=>e.slug===t.framework),a=s?.name||t.framework,n=s?.slug||void 0,i=s?.logo,r=s?.darkModeLogo;return{name:a,slug:n,logo:i||r,darkModeLogo:r||i,version:t.frameworkVersion}}(eu,eo||null),ex=z.length>=1;(0,r.useEffect)(()=>{y&&s&&["INITIALIZING","QUEUED"].includes(s?.readyState)&&ex&&y({...s,readyState:"BUILDING"})},[y,s,ex]);let{areChecksRunning:eg}=(0,F.getDeploymentStatus)(s),{checks:ej,mutate:eC}=(0,q.default)({deploymentId:s?.id,teamId:a},{refreshInterval:2e3*!!eg}),e_=ej.length>0,ew=((e,t)=>{if(t&&"running"===t.checksState||t?.checksState==="registered"&&t?.readyState==="READY")return eh.InProgress;if(t&&"checksConclusion"in t)switch(t.checksConclusion){case"succeeded":case"skipped":return eh.Complete;case"failed":return eh.Error;default:return eh.Pending}return t?.readyState==="READY"?e?eh.Complete:eh.Skipped:eh.Pending})(e_,s),eN=(e=>{if(!e)return eh.Pending;if(e.aliasError)return eh.Error;if(e.aliasWarning)return eh.Warning;if("READY"!==e.readyState||"running"===e.checksState||"registered"===e.checksState)return eh.Pending;if(0===e.alias.filter(t=>!(e.automaticAliases||[]).includes(t)).length)return eh.Skipped;if(e&&"checksConclusion"in e)switch(e.checksConclusion){case"succeeded":case"skipped":return eh.Complete;default:return eh.Pending}return e?.aliasAssigned?eh.Complete:eh.InProgress})(s),{checksFinishedAt:eS}=(0,tT.getChecksTimes)(ej,s),eI=!s?.buildingAt,eA=s?.readyState==="READY",eR=s?.readyState==="ERROR",eT=(0,ez.getFinishedState)(s),eP=!!s?.buildSkipped,eD=!eA,eO=ew!==eh.Pending&&ew!==eh.Skipped&&ew!==eh.Complete||s?.readyState!=="READY"||eg,e$=s&&("failed"===s.checksConclusion||eg),eq=k(f.Action.Read,f.Resource.Logs),eG=s?.flags,e5=s?.crons;(0,r.useEffect)(()=>{0===ej.length||Promise.all([...new Set(ej.map(e=>e.integrationId))].map(U.prefetchIntegration)).catch(console.error)},[ej,s?.id]);let e2=(0,r.useMemo)(()=>ed?.config&&"applications"in ed.config?ed.config.applications:{},[ed]),e4=Object.values(e2).find(e=>e.projectId===s?.projectId),e9=(0,r.useMemo)(()=>eo?(0,tT.mapTechnicalPrimitivesToPlatformPrimitives)(Object.entries(eo).filter(e=>{let[t,s]=e;return Array.isArray(s)&&s.length>0}).map(e=>{let[t,s]=e;return{type:t,artefacts:s}}),L?eG:void 0,e5,e4,e2,eo.bulkRedirectsMetadata):[],[eo,eG,L,e5,e4,e2]),e3=(0,r.useMemo)(()=>{let e=e9;return ei&&(e=[e9.find(e=>{let{type:t}=e;return t===ei})]),e.map(e=>({...e,artefacts:e.artefacts.sort((e,t)=>{if((0,t5.isMicrofrontendRoute)(e)&&(0,t5.isMicrofrontendRoute)(t))return e.appName===t.appName?e.path.localeCompare(t.path):e.appName?t.appName?e.appName.localeCompare(t.appName):1:-1;let s=(0,t5.isVariant)(e)?e.key:(0,t5.isMiddleware)(e)?e.rawMatchers?.[0]||e.matcher:(0,t5.isBulkRedirect)(e)?e.source:e.path,a=(0,t5.isVariant)(t)?t.key:(0,t5.isMiddleware)(t)?t.rawMatchers?.[0]||t.matcher:(0,t5.isBulkRedirect)(t)?t.source:t.path;return!s.includes("_next")&&a.includes("_next")?-1:s.includes("_next")&&!a.includes("_next")?1:s.localeCompare(a)})}))},[ei,e9]);(0,r.useEffect)(()=>{if(!b.includes(K)){let e=setTimeout(()=>{er("")},100);return()=>clearTimeout(e)}},[b]);let e6=z.find(e=>e.name===em.Building),te=void 0!==eo&&e3.length>0;(0,r.useEffect)(()=>{(async()=>{await eC()})().catch(e=>console.error(e))},[s?.readyState,eC]);let tt=(0,r.useMemo)(()=>(e=>{let{deployStep:t,deployment:s,hasDeployData:a,hasFinished:n,logs:i,isLoading:r}=e;return s?.buildSkipped?eh.Canceled:s?.readyState==="READY"?eh.Complete:r?eh.InProgress:t?s&&(!i||"error"in i)&&n&&a7(t,s)===eh.Complete?eh.NoData:s&&!a?a7(t,s)===eh.Complete?(0,ez.getFinishedState)(s)?eh.Complete:eh.InProgress:eh.Pending:eh.Complete:eh.Pending})({hasDeployData:te,hasFinished:eT,logs:eo||null,deployment:s,deployStep:e6,isLoading:ec}),[te,e6,s,eo,eT,ec]),{hash:ts}=(0,h.useHash)();e1(()=>{C&&td.test(ts)&&!b.includes(a6[0])&&v([a6[0],...b])});let ta=(0,r.useCallback)(()=>{v([a6[0],...b])},[b,v]),tn=(0,r.useCallback)(()=>{v([K,...b])},[b,v]),ti=()=>{A(!0),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_OPEN)},tr=async()=>{await A(null),eW.analytics.track(eL.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_CLOSE)},tl=!eT||tt===eh.Pending,to=(0,r.useMemo)(()=>b.filter(e=>e===K?!tl:e===G?!eD:e!==J||!eO),[eO,b,eD,tl]),tc=!w&&!eq;return(0,n.jsxs)(i.Root,{className:tO.default.accordion,defaultValue:[],disabled:eP,onValueChange:e=>{(0,eE.awaitPaint)().then(()=>{e.includes(G)&&!b.includes(G)&&eW.analytics.track(eL.AnalyticsEvent.DEPLOYMENT_CHECK_STEP_CLICKED,{source:t?"project creation flow":"deployment view"}),!e.includes(K)&&b.includes(K)&&E([]),e.includes(K)&&!b.includes(K)&&eW.analytics.track(eB.VercelActivityAction.DeploymentOverviewSummaryClick,{},{send_to:{data_warehouse_legacy:!0}}),v(e)})},type:"multiple",value:to,children:[eI?(0,n.jsx)(aT,{shimmer:!t}):(0,n.jsxs)(n.Fragment,{children:[s.integrations?(0,n.jsx)(aO,{deployment:s}):null,z.map(e=>{let a=a7(e,s),i=e.logs,r=a===eh.InProgress?i.at(-1):void 0;return(0,n.jsx)(ef,{action:(0,n.jsxs)(n.Fragment,{children:[b.includes(e.name)?null:(0,n.jsx)(ty,{logs:i,className:"pr-2",onClick:ta}),(0,n.jsx)(aN,{className:"flex-none",isEnabled:!!el?.baseline,onClick:ti})]}),finishedAt:eo?.deployStepStart||!ec?((e,t)=>{if(e.finishedAt)return e.finishedAt;let s="CANCELED"===t.readyState||"ERROR"===t.readyState;if(e.logs.length&&s)return e.logs[e.logs.length-1].created})(e,s):void 0,id:e.name,name:e.name===em.Building?(0,n.jsx)(e7,{creationFlow:t,label:a3(e.name),latestLog:r}):a3(e.name),paddingType:"none",startedAt:ec?void 0:e.startedAt,status:a,children:tc?(0,n.jsx)(a5.AdditionalPermissionsRequired,{team:N?.team??null,resource:"build logs"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tB,{context:_,enableLineHighlighting:C,isLoading:$,logs:i,startedAt:Math.min(i.at(0)?.created||s.buildingAt||Date.now(),s.buildingAt||Date.now()),status:a}),O&&Z&&es&&(0,n.jsx)("aside",{className:"flex flex-row items-center gap-2 pb-4 px-4 relative z-50",children:(0,n.jsx)(d.Note,{type:"default",fill:!0,icon:(0,n.jsx)(a9.AgentIndicator,{animation:"fade",className:"inline"}),children:"Investigating the build failure…"})}),O&&Z&&ee&&et&&(0,n.jsx)("aside",{className:"flex flex-row items-center gap-2 pb-4 px-4 relative z-50",children:(0,n.jsx)(d.Note,{type:"success",fill:!0,icon:(0,n.jsx)(c.VercelAgent,{className:"inline"}),action:(0,n.jsx)(M.DashboardButtonLink,{route:"/[teamSlug]/~/agent/tasks/[taskId]",params:{taskId:et},size:"small",hash:`#suggestion-${ee.id}`,children:"View Suggestion"}),children:"There's a suggestion to fix this failed build."})})]})},e.name)}),!eR&&a8.slice(z.length).map(e=>{let t=a7({name:e,placeholder:!0},s);return(0,n.jsx)(ef,{id:e,name:a3(e),paddingType:"none",status:tc?eh.MissingPermissions:t,disabled:tc,children:tc?(0,n.jsx)(a5.AdditionalPermissionsRequired,{team:N?.team??null,resource:"build logs"}):(0,n.jsx)(tB,{context:_,isLoading:!0,logs:[],startedAt:s.createdAt,status:t})},e)}),(0,n.jsx)(ef,{action:te&&tt===eh.Complete?(0,n.jsxs)(n.Fragment,{children:[b.includes(K)?null:(0,n.jsx)(s$,{onClick:tn}),V?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.DashboardButtonLink,{className:"@md-page:hidden",route:"/[teamSlug]/[project]/[id]/resources",shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,n.jsx)(o.ListFilter,{color:"gray-900"})}),(0,n.jsx)(M.DashboardButtonLink,{className:"hidden @md-page:flex",prefix:(0,n.jsx)(o.ListFilter,{color:"gray-900"}),route:"/[teamSlug]/[project]/[id]/resources",size:"small",type:"secondary",children:"Resources"})]}):(0,n.jsx)(s2,{active:ei,items:[{name:(0,n.jsx)("span",{className:(0,l.clsx)(tQ.default.tooltip,{[tQ.default.closedAll]:!open}),children:"All"}),value:"",buttonProps:{"aria-label":"All"}},...e9.map(e=>{let{type:t,artefacts:s,count:a}=e,{icon:i,name:r}=sQ(t),l=[r,[t===t5.ArtefactTypes.IncrementalStaticRegeneration?"ISR":void 0,t===t5.ArtefactTypes.PartialPrerender?"PPR":void 0,t===t5.ArtefactTypes.EdgeMiddleware?void 0:t===t5.ArtefactTypes.BulkRedirects&&s.length>0&&(0,t5.isBulkRedirect)(s[0])?a?.toLocaleString():void 0].filter(Boolean).join("")].filter(Boolean).join(" ");return{name:(0,n.jsxs)("span",{className:tQ.default.iconLabel,children:[i,t!==t5.ArtefactTypes.EdgeMiddleware&&(t===t5.ArtefactTypes.BulkRedirects&&s.length>0&&(0,t5.isBulkRedirect)(s[0])?a?.toLocaleString():void 0)]}),value:t,tooltip:r,buttonProps:{"aria-label":l}}})],onChange:(e,t)=>{b.includes(K)&&t.stopPropagation(),er(e),E([e])},open:b.includes(K)})]}):void 0,customDuration:eo?.deployStepTime,disabled:tl,id:K,name:K,paddingType:"none",status:tt,children:te?(0,n.jsx)(s1,{artefactGroups:e3,deployment:s,filterArtefactsBy:ei,framework:ep,selectedArtefacts:P,setSelectedArtefacts:E}):(0,n.jsx)("div",{className:tO.default.noData,children:(0,n.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,n.jsxs)(n.Fragment,{children:["This deployment does not have a deployment summary."," ",(0,n.jsx)(p.Link,{external:!0,href:"https://vercel.com/docs/deployments#deployment-summary",target:"_blank",type:"highlight",children:"Learn more"})]})})})}),H&&s?B||D?(0,n.jsx)(ek,{expandedSteps:b,deployment:s,teamSlug:a,onExpandedStepsChange:v}):(0,n.jsx)(a0,{expandedSteps:b,checks:ej,deployment:s,mutateDeployment:y,mutate:eC,teamSlug:a}):null,(0,n.jsx)(tK,{deployment:s,disabled:eO,finishedAt:eO?void 0:s.aliasAssignedAt,id:J,name:"Assigning Custom Domains",onComplete:j,startedAt:eO?void 0:e_&&eS?eS:e6?.finishedAt||void 0,status:eN})]}),s&&e$?(0,n.jsx)(eY,{active:ea,deployment:s,mutateDeployment:y,onClose:()=>en(!1)}):null,el&&s&&I?(0,n.jsx)(x.CodeCompareProvider,{children:(0,n.jsx)(aR,{active:I,baseline:el.baseline,comparison:el.other||el.previous,deployment:s,initialLine:R.selectedLine,onClose:tr,previous:el.previous})}):void 0]},s?.id)},"STEPS",0,a6],7442785),e.s([],5224197),e.s(["useExpandedSteps",0,function(e){let[t,s]=(0,r.useState)([]),a=e?.readyState==="ERROR",n=!!e?.buildSkipped;return(0,r.useEffect)(()=>{!n&&a&&(0,r.startTransition)(()=>{s([a6[0]])})},[a,n]),{expandedSteps:t,setExpandedSteps:s}}],855127)}]);

//# debugId=e7078ae9-4098-d492-51b0-ef66e62b258d
//# sourceMappingURL=e39ab41bb4c70563.js.map