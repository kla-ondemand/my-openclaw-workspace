;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d55c747e-92d8-e98e-1687-e155599c71d5")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3886311,e=>{"use strict";var t=e.i(8660982),r=e.i(9179929),n=e.i(6029070),l=e.i(2923544),i=e.i(1283928),s=e.i(5115727),a=e.i(4950960),o=e.i(8690335),c=e.i(9935315),u=e.i(2655172),d=e.i(5778089);function m(e){return e.replace(/[^a-zA-Z0-9\s]/g,"").trim().split(/\s+/).map((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}function f(e,t){let r=e[t];return null==r||""===r?d.emptyStringReplacement:String(r)}var p=e.i(5338940),g=e.i(1853611),x=e.i(6092370),b=e.i(6352514);let h={metric:"",aggregation:"sum",by:[],time:"1h",filter:""};e.s(["useExportSonarData",0,function(e){let{query:d,title:y,filteredProjects:v}=e,j=d??h,{team:w}=(0,p.useTeam)(),N=(0,s.useDefaultQueryTitle)(j),M=y??N,R=(0,t.useMemo)(()=>{if(!d)return;let{filter:e,...t}=(0,o.toSonarQuery)(d);return{...t,filter:v?.length?(0,x.andFilterStrings)(e||void 0,`projectId in (${v.map(e=>`'${e}'`).join(",")})`):e}},[d,v]),{data:C}=(0,c.useSonarQuery)(R),S=(0,t.useMemo)(()=>({meta:{timeseries:{by:j.by,lowGranularity:!0}}}),[j.by]),E=(0,r.useTableData)(C,S),{accessibleDimensions:k}=(0,n.useAccessibleDimensions)(j),{event:A,measure:T}=(0,t.useMemo)(()=>(0,o.splitEventAndMeasure)(j),[j]),I=i.AllMeasures[T],D=(0,l.labelForMeasure)(A,T),B=(0,t.useMemo)(()=>{let e=I?.unit??"count";return(0,o.getFormatter)(j.aggregation,e)},[I?.unit,j.aggregation]),O=a.aggregationMappings[j.aggregation].label,F=`${D} ${O}`,q=(0,t.useMemo)(()=>j.by.map(e=>o.labelColumnByColumn.get(e)??e),[j.by]),L=(0,t.useMemo)(()=>j.by.map(e=>{let t=k.find(t=>t.id===e);return t?.label??e}),[k,j.by]),P=j.by.length>0,$=!!E?.length,U=!!C?.data?.length;return{handleExport:(0,t.useCallback)(e=>{var t,r;let n,l,i,s,a;if(!C||!d)return;if(P){if(!E||0===E.length)return;"csv"===e?(n=function(e){let{rows:t,dimensionAccessors:r,dimensionLabels:n,valueHeader:l,measureFormatter:i}=e,s=[...n,l,`${l} (formatted)`],a=t.map(e=>{let t=r.map(t=>f(e,t)),n=e.value??null,l=null===n?"":i(n??0);return[...t,null===n?"":String(n),l]});return(0,u.csvFormatRows)([s,...a])}({rows:E,dimensionAccessors:q,dimensionLabels:L,valueHeader:F,measureFormatter:B}),l="text/csv",i="csv"):(n=function(e){let{rows:t,dimensionAccessors:r,dimensionLabels:n,valueHeader:l,measureFormatter:i}=e;return JSON.stringify(t.map(e=>{let t={};r.forEach((r,l)=>{t[m(n[l])]=f(e,r)});let s=e.value??null;return t[m(l)]=s,t[`${m(l)}Formatted`]=null===s?null:i(s??0),t}),null,2)}({rows:E,dimensionAccessors:q,dimensionLabels:L,valueHeader:F,measureFormatter:B}),l="application/json",i="json")}else{if(!C.data||0===C.data.length)return;if("csv"===e){let e,t,r;e=C.data||[],t=["timestamp",M,...d.by],r=e.map(e=>{let t=[e.timestamp.toISOString(),e.value?.toString()??""];for(let r of d.by){let n=e[r];t.push(n?.toString()??"")}return t}),n=(0,u.csvFormatRows)([t,...r]),l="text/csv",i="csv"}else n=JSON.stringify((C.data||[]).map(e=>{let{timestamp:t,value:r,...n}=e;return{timestamp:t.toISOString(),value:r??null,...n}}),null,2),l="application/json",i="json"}let o=function(e){let{title:t,results:r,extension:n}=e,l=r.data||[];if(0===l.length)return`${t}.${n}`;let i=[t,"-",new Date(Math.min(...l.map(e=>e.timestamp.getTime()))).toISOString().slice(0,10),"to",new Date(Math.max(...l.map(e=>e.timestamp.getTime()))).toISOString().slice(0,10)].filter(Boolean);return`${i.join(" ")}.${n}`}({title:M,results:C,extension:i});t=n,r=l,s=`data:${r},${encodeURIComponent(t)}`,(a=document.createElement("a")).setAttribute("href",s),a.setAttribute("download",o),document.body.appendChild(a),a.click(),document.body.removeChild(a),g.analytics.track(b.AnalyticsEvent.QUERY_BUILDER_EXPORTED,{teamId:w?.id,plan:w?.billing?.plan??"hobby",format:e,hasGroupBy:P})},[C,d,P,E,q,L,F,B,M,w?.id,w?.billing?.plan]),disabled:!d||(P?!$:!U)}}],3886311)},2863467,e=>{"use strict";var t=e.i(4205214),r=e.i(4998750),n=e.i(2749380),l=e.i(5287165),i=e.i(8119470),s=e.i(1794286),a=e.i(7432042);e.s(["DateRangeSelect",0,function(e){let{value:o,onChange:c,disabled:u,trackEvents:d,variables:m}=e,{start:f,end:p}=(0,n.fromTimeToRange)(o),g=(0,i.subDays)(new Date,90),x=(0,n.getTimeRangePresets)(!0,m?.time?{[r.TIME_VARIABLE]:{start:new Date,end:new Date,text:`Notebook (${(0,n.printTime)(m.time)})`}}:void 0),b=Object.keys(x).findIndex(e=>e===o);return(0,t.jsx)(s.Calendar,{allowClear:!1,compact:!0,minValue:g,disabled:u,onChange:(e,t)=>{let r=new Date(e.start),n=new Date(e.end),i=t||(0,a.default)(n.getTime()-r.getTime());d&&(0,l.track)("Query Builder Changed Date Range Period",{period:i}),t?c(t):c({from:r,to:n})},popoverAlignment:"center",presetIndex:b,presets:x,size:"small",value:{start:f,end:p},width:"210px"},"date-range-select-query-builder")}])},1135066,e=>{"use strict";var t=e.i(4205214),r=e.i(4597921),n=e.i(6092370),l=e.i(5467025),i=e.i(1482596),s=e.i(8815885),a=e.i(854682),o=e.i(4998750),c=e.i(2504781),u=e.i(3500331),d=e.i(5255926),m=e.i(8923565),f=e.i(5468328),p=e.i(1663964),g=e.i(244424),x=e.i(1918911),b=e.i(7749365),h=e.i(9096446),y=e.i(5169576),v=e.i(218692),j=e.i(4047087),w=e.i(3675495),N=e.i(2006677),M=e.i(6143247),R=e.i(8660982),C=e.i(2713400),S=e.i(2863467),E=e.i(1473216),k=e.i(9689002),A=e.i(7087273),T=e.i(2942788),I=e.i(3228096),D=e.i(4333930),B=e.i(4796642),O=e.i(787358),F=e.i(8004707),q=e.i(1898517),L=e.i(1379708),P=e.i(6401841),$=e.i(4141852),U=e.i(762945),z=e.i(7807066),Q=e.i(2712781),G=e.i(2923544),_=e.i(1813317);function Y(e){let[r,n]=function(){let[e,t]=(0,R.useState)({x:0,y:0});return(0,R.useEffect)(()=>{let e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),[e.x,e.y]}(),[l,i]=(0,R.useState)({button:null,container:null,metrics:null,firstMetric:null});(0,R.useEffect)(()=>{let t=()=>{if(!e.containerRef.current||!e.metricsRef.current)return void i({button:null,container:null,metrics:null,firstMetric:null});let t=e.metricsRef.current.querySelectorAll("button");0===t.length?i({button:null,container:null,metrics:null,firstMetric:null}):i({button:e.buttonRef.current?.getBoundingClientRect()||null,container:e.containerRef.current.getBoundingClientRect(),metrics:e.metricsRef.current.getBoundingClientRect(),firstMetric:t[0].getBoundingClientRect()})};t();let r=new ResizeObserver(t);return e.buttonRef.current&&r.observe(e.buttonRef.current),e.containerRef.current&&r.observe(e.containerRef.current),e.metricsRef.current&&r.observe(e.metricsRef.current),()=>r.disconnect()},[e.buttonRef,e.containerRef,e.metricsRef]);let[s,a]=(0,R.useState)({x:r,y:n});(0,R.useEffect)(()=>{let e=setTimeout(()=>{a({x:r,y:n})},16);return()=>clearTimeout(e)},[r,n]);let o=(0,R.useMemo)(()=>{if(!l.container||!l.metrics||!l.firstMetric)return null;let e=Math.min(l.metrics.bottom,l.container.bottom),t=s.x-l.container.left,r=l.button?l.button.right-l.container.left:260,n=Math.min(1,Math.max(0,(t-.5*r)/(.5*r))),i=s.y-l.container.top,a=Math.max(260,r),o=Math.max(l.button?l.button.left-l.container.left:0,Math.min(t-(8+18*n),a-10)),c=a-o,u=i;if(l.button){let e=l.button.top-l.container.top,t=l.button.bottom-l.container.top;if(i>=e-10&&i<=t+10){let t=Math.max(0,Math.min(l.button.height,i-e));u=e+t}}let d=l.firstMetric.top-l.container.top,m=e-l.container.top,f=Math.max(50,u),p=Math.min(f,Math.max(50,d)),g=m-p;if(g<=0||c<=0||!Number.isFinite(p)||!Number.isFinite(u)||!Number.isFinite(o))return null;let x=Math.max(0,Math.min(100,(f-p)/g*100));return{position:"absolute",left:`${o}px`,top:`${p}px`,width:`${c}px`,height:`${g}px`,clipPath:`polygon(0 ${x}%, 100% 0, 100% 100%, 0 ${x}%)`,pointerEvents:"auto",zIndex:1,cursor:"pointer"}},[s.x,s.y,l]);return o?(0,t.jsx)("div",{className:"group-hover:block hidden",style:o,onMouseEnter:e.onMouseEnter,onWheel:t=>{e.eventsScrollerRef.current&&(e.eventsScrollerRef.current.scrollTop+=t.deltaY)},onClick:e=>{let t=document.elementsFromPoint(e.clientX,e.clientY).find(t=>t!==e.currentTarget&&("BUTTON"===t.tagName||t.closest("button")));if(t){let e="BUTTON"===t.tagName?t:t.closest("button");e&&e.click()}}}):null}let V={incomingRequest:I.Globe,serverlessFunctionInvocation:D.FunctionSquare,edgeFunctionInvocation:B.FunctionEdge,middlewareInvocation:O.FunctionMiddleware,edgeMiddlewareInvocation:O.FunctionMiddleware,outgoingRequest:F.ArrowGlobe,imageTransformation:q.Image,imageTransformationFailure:q.Image,isrOperation:L.Isr,blockedConnection:P.Stop,firewallAction:$.FirewallFlame,botIdCheck:U.Warning,aiGatewayRequest:Q.Sparkles};function W(e){return V[e]||T.Database}let K=["count","durationMs","functionDurationMs","functionWallTimeMs","functionCpuTimeMs","functionDurationGbhr","ttfbMs","coldStartDurationMs","initDurationMs","fotInBytes","fotOutBytes","fotTotalBytes","isrReadBytes","isrWriteBytes","isrReadUnits","isrWriteUnits","vdcReadUnits","invokedMemoryMb","maxMemoryUsedMb","billedMemoryMb"];function J(e){return(0,_.getAggregableMeasures)(e).map(t=>({id:t,label:(0,G.labelForMeasure)(e,t)})).toSorted((e,t)=>{let r=K.indexOf(e.id),n=K.indexOf(t.id);return -1!==r&&-1!==n?r-n:-1!==r?-1:-1!==n?1:e.label.localeCompare(t.label)})}function H(e){let{disabled:r,selectedEventId:n,selectedMetricId:l,events:i,onSelect:s}=e,[a,o]=(0,R.useState)(!1),[u,d]=(0,R.useState)(""),[m,f]=(0,R.useState)(null),[p,g]=(0,R.useState)(null),[b,h]=(0,R.useState)(!1),[y,v]=(0,R.useState)(!1),[j,w]=(0,R.useState)("events"),[N,C]=(0,R.useState)(null),S=(0,R.useRef)(null),I=(0,R.useRef)(null),D=(0,R.useRef)(null),B=(0,R.useRef)(null),O=(0,R.useRef)(new Map),F=(0,R.useRef)(null),q=(0,R.useMemo)(()=>i.find(e=>e.id===n),[i,n]),L=(0,R.useMemo)(()=>{if(!u.trim())return{events:i,metrics:[],firstMatchingEventId:null};let e=u.toLowerCase(),t=new Set,r=null;return i.forEach(n=>{n.label.toLowerCase().includes(e)&&(t.add(n.id),r||(r=n.id))}),i.forEach(n=>{(0,_.getAggregableMeasures)(n.id).map(e=>({id:e,label:(0,G.labelForMeasure)(n.id,e)})).some(t=>t.label.toLowerCase().includes(e)||t.id.toLowerCase().includes(e))&&(t.add(n.id),r||(r=n.id))}),{events:i.filter(e=>t.has(e.id)),firstMatchingEventId:r}},[i,u]),P=y&&"metrics"===j&&N?N:m||(u.trim()&&L.firstMatchingEventId?L.firstMatchingEventId:n)||L.events[0]?.id,$=(0,R.useMemo)(()=>i.find(e=>e.id===P),[i,P]),U=(0,R.useMemo)(()=>P?J(P):[],[P]),Q=(0,R.useMemo)(()=>{if(!u.trim())return U;let e=u.toLowerCase(),t=U.filter(t=>t.label.toLowerCase().includes(e)||t.id.toLowerCase().includes(e));return 0===t.length&&P?U:t},[U,u,P]),V=(0,R.useMemo)(()=>{let e={};return L.events.forEach(t=>{let r=t.group||"Other";e[r]||(e[r]=[]),e[r].push(t)}),Object.entries(e).sort((e,t)=>{let[r]=e,[n]=t;return"Deprecated"===r&&"Deprecated"!==n?1:"Deprecated"!==r&&"Deprecated"===n?-1:0})},[L.events]),K=(0,R.useMemo)(()=>{let e=V.flatMap(e=>{let[,t]=e;return t});return m&&!e.some(e=>e.id===m),e},[V,m]),H=(0,R.useCallback)((e,t)=>{s(e,t),o(!1),d("")},[s]),X=(0,R.useCallback)(e=>{if(y)C(e),w("metrics");else{let t=J(e)[0];t&&H(e,t.id)}},[y,H]),Z=(0,R.useCallback)(e=>{let t=y&&N?N:P;t&&H(t,e)},[y,N,P,H]),ee=(0,R.useCallback)(e=>{if("ArrowDown"===e.key)if(e.preventDefault(),h(!0),m||p){if(m&&!p){let e=K.findIndex(e=>e.id===m);if(-1===e){let e=K[0];e&&f(e.id)}else{let t=K[e+1];t&&f(t.id)}}else if(p){let e=Q.findIndex(e=>e.id===p),t=Q[e+1];t&&g(t.id)}}else{let e=K[0];e&&f(e.id)}else if("ArrowUp"===e.key){if(e.preventDefault(),h(!0),m&&!p){let e=K.findIndex(e=>e.id===m);if(-1===e){let e=K[K.length-1];e&&f(e.id)}else e>0&&f(K[e-1].id)}else if(p){let e=Q.findIndex(e=>e.id===p);e>0?g(Q[e-1].id):g(null)}}else if("ArrowRight"===e.key)e.preventDefault(),h(!0),m&&Q.length>0&&g(Q[0].id);else if("ArrowLeft"===e.key)e.preventDefault(),h(!0),p&&g(null);else if("Enter"===e.key){if(m&&p)H(m,p);else if(m)if(u.trim()&&Q.length>0)H(m,Q[0].id);else{let e=i.find(e=>e.id===m);e&&X(e.id)}}else"Escape"===e.key&&o(!1)},[K,Q,m,p,H,i,X,u]);(0,R.useEffect)(()=>{a&&(f(null),g(null),n&&I.current&&setTimeout(()=>{let e=I.current?.querySelector(`[data-event-id="${n}"]`);e?.scrollIntoView({block:"nearest",behavior:"auto"})},50))},[a,n]),(0,R.useEffect)(()=>{!m||K.some(e=>e.id===m)||u.trim()&&m===L.firstMatchingEventId||f(null)},[m,K,u,L.firstMatchingEventId]),(0,R.useEffect)(()=>{u.trim()&&L.firstMatchingEventId&&!b?(f(L.firstMatchingEventId),i.some(e=>e.id===L.firstMatchingEventId&&e.label.toLowerCase().includes(u.toLowerCase()))||Q.length):u.trim()||n||f(null)},[u,L.firstMatchingEventId,Q.length,n,i,b]),(0,R.useEffect)(()=>{if(b&&m&&I.current){let e=I.current.querySelector(`[data-event-id="${m}"]`);e&&e.scrollIntoView({block:"center",behavior:"smooth"})}},[m,b]),(0,R.useEffect)(()=>{let e=()=>{v(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,R.useEffect)(()=>{a||(w("events"),C(null))},[a]);let et=(0,R.useMemo)(()=>(function(e,t){if(!t||!e)return null;let r=(0,_.getAggregableMeasures)(e).find(e=>e===t);return r?{id:r,label:(0,G.labelForMeasure)(e,r)}:null})(n,l),[n,l]),er=q&&et?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{children:[q.label," "]}),(0,t.jsx)("span",{className:"text-gray-900 inline-block ml-1",children:et.label})]}):"Select Metric";return(0,t.jsxs)(E.Root,{modal:!0,onOpenChange:o,open:a,children:[(0,t.jsx)(E.Anchor,{className:"flex",children:(0,t.jsx)(E.Trigger,{asChild:!0,children:(0,t.jsx)(c.Button,{"aria-label":"Select event and metric",className:(0,M.cn)("!px-2 !py-4",r&&"!bg-white"),disabled:r,prefix:q?R.default.createElement(W(q.id),{color:"gray-900"}):(0,t.jsx)(T.Database,{color:"gray-900"}),size:"small",suffix:(0,t.jsx)(x.ChevronUpDown,{color:"gray-800"}),type:"secondary",typeName:"button",children:er})})}),(0,t.jsx)(E.Portal,{children:(0,t.jsx)(E.Content,{align:"start",className:"tailwind-preflight",sideOffset:8,children:(0,t.jsxs)("div",{ref:B,className:(0,M.cn)("flex rounded-lg border-gray-alpha-400 bg-background-100 shadow-menu overflow-hidden font-sans relative isolate group",y?"w-[320px]":"w-[520px]"),children:[m&&!y&&(0,t.jsx)(Y,{buttonRef:m&&O.current.get(m)?{current:O.current.get(m)||null}:{current:null},containerRef:B,metricsRef:D,eventsScrollerRef:F,onMouseEnter:()=>{f(m)}}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col",children:[y&&"metrics"===j&&(0,t.jsx)("div",{className:"flex items-center border-b px-2 py-3",children:(0,t.jsxs)("button",{onClick:()=>w("events"),className:"flex items-center gap-1 bg-transparent text-sm text-gray-800 hover:text-gray-900",type:"button",children:[(0,t.jsx)(z.ChevronRight,{className:"size-3 rotate-180"}),"Back to Events"]})}),!(y&&"metrics"===j)&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[(0,t.jsx)("input",{className:"w-full border-none bg-transparent text-sm outline-none",onChange:e=>d(e.target.value),placeholder:"Find metric…",ref:S,value:u,onKeyDown:ee}),(0,t.jsx)(k.Kbd,{small:!0,style:{paddingRight:"0.5rem"},children:"Esc"})]}),(0,t.jsx)("div",{className:(0,M.cn)("flex h-[340px]",y&&"flex-col"),children:u.trim()&&0===L.events.length?(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-sm text-gray-800",children:[(0,t.jsx)("div",{className:"mb-2",children:"No events or metrics found"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Try adjusting your search terms"})]})}):(0,t.jsxs)(t.Fragment,{children:[(!y||"events"===j)&&(0,t.jsx)("div",{className:(0,M.cn)(y?"flex-1":"w-[260px] border-r"),children:(0,t.jsx)(A.Scroller,{className:"h-[340px]",overflow:"y",setContainerRef:e=>{F.current=e},children:(0,t.jsx)("div",{className:"px-2 py-2",ref:I,children:V.map(e=>{let[r,l]=e;return(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("p",{className:"text-copy-14 mb-1 px-2 text-xs text-gray-800",children:r}),l.map(e=>{let r=W(e.id),l=function(e){let{eventId:t,selectedEventId:r,activeEventId:n,activeMetricId:l,displayEventId:i}=e,s=t===r,a=t===i;return{isSelected:s,isActive:t===n,isDisplayed:a,showSelectedBg:s&&!n,isIndirectlyActive:a&&l}}({eventId:e.id,selectedEventId:n,activeEventId:m,activeMetricId:p,displayEventId:P});return(0,t.jsxs)("button",{ref:t=>{t?O.current.set(e.id,t):O.current.delete(e.id)},"data-event-id":e.id,className:(0,M.cn)("flex w-full items-center gap-2 rounded px-2 py-1.5 text-sm font-sans cursor-pointer","bg-white focus:bg-gray-100 focus:outline-none",!b&&"hover:bg-gray-100",(l.showSelectedBg||l.isIndirectlyActive)&&"bg-gray-100",l.isActive&&!p&&"bg-gray-100"),onMouseEnter:()=>{b||f(e.id)},onMouseMove:()=>h(!1),onFocus:()=>f(e.id),onClick:()=>X(e.id),type:"button",children:[(0,t.jsx)(r,{className:"size-4",color:"gray-900"}),(0,t.jsx)("span",{className:"flex-1 text-left",children:e.label}),(0,t.jsx)(z.ChevronRight,{className:(0,M.cn)("size-3 text-gray-800 ",l.isDisplayed?"opacity-100":"opacity-0")})]},e.id)})]},r)})})})}),(!y||"metrics"===j)&&(0,t.jsx)("div",{className:(0,M.cn)("flex-1"),ref:D,children:(0,t.jsx)(A.Scroller,{className:"h-[340px]",overflow:"y",children:(0,t.jsxs)("div",{className:"px-2 py-2",children:[$&&(0,t.jsxs)("p",{className:"text-copy-14 mb-1 px-2 text-xs text-gray-800",children:["Metrics for ",$.label]}),Q.length>0?Q.map((e,r)=>{let i=function(e){let{metricId:t,metricIndex:r,selectedMetricId:n,activeEventId:l,activeMetricId:i,displayEventId:s,selectedEventId:a,isMobile:o,mobileStep:c}=e,u=t===n&&s===a;return{isSelected:u,isActive:(!o||"metrics"!==c)&&t===i,isFirstAndActive:(!o||"metrics"!==c)&&0===r&&l&&!i&&!u,showSelectedBg:u&&!i}}({metricId:e.id,metricIndex:r,selectedMetricId:l,activeEventId:m,activeMetricId:p,displayEventId:P,selectedEventId:n,isMobile:y,mobileStep:j});return(0,t.jsx)("button",{className:(0,M.cn)("flex w-full items-center rounded px-2 py-1.5 text-sm font-sans cursor-pointer","bg-white focus:bg-gray-100 focus:outline-none",!b&&"hover:bg-gray-100",(i.isFirstAndActive||i.showSelectedBg)&&"bg-gray-100",i.isActive&&"bg-gray-100"),onMouseEnter:()=>{b||y&&"metrics"===j||g(e.id)},onMouseLeave:()=>{b||y&&"metrics"===j||g(null)},onMouseMove:()=>h(!1),onClick:()=>Z(e.id),type:"button",children:(0,t.jsx)("span",{className:"flex-1 text-left",children:e.label})},e.id)}):(0,t.jsx)("div",{className:"px-2 py-4 text-center text-sm text-gray-800",children:u?"No metrics match your search":"No metrics available"})]})})})]})})]})]})})})]})}var X=e.i(1553931),Z=e.i(455575),ee=e.i(8735244),et=e.i(2924363),er=e.i(4244280),en=e.i(7867910),el=e.i(1438473),ei=e.i(5338940),es=e.i(6352514),ea=e.i(1853611);function eo(e){let{onGeneratedQuery:r,query:n,disabled:l,className:i}=e,s=(0,Z.useToasts)(),{team:a}=(0,ei.useTeam)(),o=(0,R.useRef)(null),[d,m]=(0,R.useState)(!1),[f,p]=(0,R.useState)(""),{isGenerating:g,generate:x,error:b}=(e=>{let{onSuccess:t,query:r}=e,[n,l]=(0,R.useState)(!1),[i,s]=(0,R.useState)(null),{team:a}=(0,ei.useTeam)(),o=(0,Z.useToasts)();return{isGenerating:n,generate:(0,R.useCallback)(async e=>{if(!e.trim())return;l(!0);let n=new URLSearchParams({previousQuery:JSON.stringify(r),prompt:e}).toString();try{let e=await fetch(`${er.API_OBSERVABILITY_QUERY_GENERATION}?${n}`),r=await e.json(),l=r.rollups.value,i=(0,_.getGroupableDimensions)(r.event),a=r.groupBy?.filter(e=>i.includes(e))??[];s(null),t({metric:`${r.event}.${l.measure}`,by:a,filter:r.filter??"",aggregation:l.aggregation,time:r.range??{from:new Date(r.startTime),to:new Date(r.endTime)}})}catch{let e="Error generating query";o.error(e),s(e)}finally{l(!1),ea.analytics.track(es.AnalyticsEvent.QUERY_BUILDER_GENERATED_QUERY,{prompt:e,plan:a?.billing?.plan??"hobby"})}},[t,r,a,o]),error:i}})({query:n,onSuccess:e=>{r(e),o.current={query:JSON.stringify(e),prompt:f},p("")}}),h=(0,R.useRef)(null),[y,v]=(0,R.useState)(!1),j=y&&!g&&!b,w=async e=>{e.preventDefault(),f.trim()&&(v(!0),await x(f))},N="query-builder-input";return(0,en.useHotkey)(()=>{m(!0),setTimeout(()=>h.current?.focus(),0)},"/"),(0,t.jsx)(X.Root,{className:(0,M.cn)("border-t border-gray-400 px-4 bg-background-100",i),collapsible:!0,value:d?"query-assistant":"",type:"single",children:(0,t.jsxs)(X.Item,{value:"query-assistant",children:[(0,t.jsxs)(X.Trigger,{className:"group flex items-center w-full bg-transparent text-label-14 text-gray-800 font-medium p-0 py-3 gap-3 cursor-pointer",onClick:()=>{m(!d),d||setTimeout(()=>h.current?.focus(),0)},children:[(0,t.jsx)(z.ChevronRight,{className:"transition-transform group-[[data-state=open]]:rotate-90"}),(0,t.jsx)("span",{className:"mr-auto",children:"Query Assistant"}),(0,t.jsx)(k.Kbd,{className:(0,M.cn)("transition-opacity",0!==f.trim().length&&"hidden"),small:!0,children:"/"})]}),(0,t.jsx)(X.Content,{className:"pb-4",children:(0,t.jsxs)("form",{onSubmit:w,children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:N,children:"Prompt"}),(0,t.jsx)(u.Input,{className:"h-12 rounded-lg",id:N,innerWrapperClassName:(0,M.cn)("bg-background-100 shadow h-12 font-sans text-[14px] relative z-10 border-gray-200 focus:border-gray-600 rounded-lg overflow-hidden m-1","h-10 shadow-border rounded-md",{"bg-gray-100":g}),name:N,disabled:g||l,onChange:e=>{p(e.target.value),v(!1)},placeholder:"Show me requests by host…",prefix:(0,t.jsx)(Q.Sparkles,{size:14}),prefixStyling:!1,ref:h,suffix:(0,t.jsxs)("div",{className:"flex h-full gap-2 !pr-1",children:[j?(0,t.jsx)(c.Button,{"aria-label":"Not what I expected",className:"!px-0",size:"small",type:"secondary",onClickCapture:e=>{e.preventDefault()},onClick:()=>{v(!1),ea.analytics.track(es.AnalyticsEvent.QUERY_BUILDER_FEEDBACK,{feedback:"badly-generated-query",plan:a?.billing?.plan??"hobby",prompt:o.current?.prompt??"",generatedQuery:o.current?.query??""}),s.success("Thank you for the feedback!")},children:(0,t.jsxs)("div",{className:"flex items-center gap-0.5 px-0.5 @md-page:px-0",children:[(0,t.jsx)("span",{className:"hidden px-1.5 @md-page:block",children:"Not what I expected"}),(0,t.jsx)(et.ThumbDown,{})]})}):null,g&&(0,t.jsx)("div",{className:"flex items-center justify-center px-2",children:(0,t.jsx)(ee.Spinner,{size:14})}),(0,t.jsx)(c.Button,{"aria-label":"Build It",className:"!px-0 disabled:hidden",disabled:0===f.trim().length||g,size:"small",typeName:"submit",children:(0,t.jsxs)("div",{className:"flex items-center gap-0.5 px-0.5 @md-page:px-0",children:[(0,t.jsx)("span",{className:"hidden px-1.5 @md-page:block",children:"Generate Query"}),(0,t.jsx)(el.ArrowRight,{})]})})]}),suffixContainer:!1,suffixStyling:!1,typeName:"text",value:f})]})})]})})}var ec=e.i(962099),eu=e.i(6029070),ed=e.i(2749380),em=e.i(5627633),ef=e.i(268049);function ep(e){return{granularity:e,id:(0,ef.milliseconds)(e).toString(),label:(0,em.formatDuration)(e),type:"string"}}var eg=e.i(6190059),ex=e.i(1283928),eb=e.i(1717203),eh=e.i(9486194),ey=e.i(8690335),ev=e.i(9372366),ej=e.i(1111237),ew=e.i(6198010);let eN="!ring-1 ring-gray-400 outline-offset-2 outline-[var(--ds-focus-color)] outline-2 overflow-visible focus:outline";function eM(e){let{addButtonLabel:r,className:n,dimensions:l,values:i,onChange:a,isLoading:o,disabled:u,id:d}=e,[m,f]=(0,R.useReducer)(eC,{values:i,dimensions:l},eR);(0,R.useEffect)(()=>{f({type:"updateProps",dimensions:l,values:i})},[l,i]);let p=m.values.length>0;return(0,t.jsxs)("fieldset",{id:d,className:(0,M.cn)("flex flex-row flex-wrap items-center gap-2",n),children:[m.values.map((e,r)=>(0,t.jsxs)("span",{className:"flex flex-row",children:[(0,t.jsx)(s.SingleFilterPopoverBox,{className:(0,M.cn)("!p-1",eN,!u&&"!rounded-l"),disabled:u,label:"dimension",onChange:e=>f({type:"change",value:e,index:r,onChange:a}),onOpenChange:e=>f({type:"toggle",open:e,index:r}),open:m.open[r],options:m.remaining,rounded:u,value:e}),u?null:(0,t.jsx)(c.Button,{"aria-label":`Remove ${e.label}`,className:(0,M.cn)("!px-0.5 !text-gray-900 hover:!text-gray-1000",eN),onClick:()=>f({type:"remove",index:r,onChange:a}),size:"small",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},svgOnly:!0,type:"secondary",typeName:"button",children:(0,t.jsx)(h.CrossSmall,{size:"small"})})]},e.id)),(0,t.jsx)(s.SingleFilterPopoverBox,{className:"border !p-1",isLoading:o,label:"dimension",onChange:e=>f({type:"add",value:e,onChange:a}),onOpenChange:e=>f({type:"toggle",open:e}),open:m.openAdd,options:m.remaining,rounded:!0,children:(0,t.jsx)(c.Button,{"aria-label":"Add dimension",className:"!text-gray-900 data-[state='open']:!bg-gray-100 hover:!text-gray-1000",disabled:u,size:"small",type:"tertiary",...p?{shape:"square",svgOnly:!0,children:(0,t.jsx)(ew.Plus,{})}:{children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(ew.Plus,{}),r]})}})})]})}function eR(e){let{values:t,dimensions:r}=e;return{open:Array.from(t,()=>!1),openAdd:!1,values:t,remaining:eS(r,t),allDimensions:r}}function eC(e,t){switch(t.type){case"toggle":if(void 0===t.index)return{...e,openAdd:t.open};return t.index<0||t.index>=e.values.length?{...e}:{...e,open:[...e.open.slice(0,t.index),t.open,...e.open.slice(t.index+1)]};case"updateProps":{let{dimensions:r}=t,n=t.values.filter(e=>{let{id:t}=e;return r.some(e=>e.id===t)});return{...e,remaining:eS(r,n),values:n,allDimensions:r}}case"add":return{...e,...eE(e.allDimensions,[...e.values,t.value],t.onChange)};case"change":{let{index:r,value:n,onChange:l}=t;if(r<0||r>=e.values.length)return e;return{...e,...eE(e.allDimensions,[...e.values.slice(0,r),n,...e.values.slice(r+1)],l)}}case"remove":{let{index:r,onChange:n}=t;return{...e,...eE(e.allDimensions,[...e.values.slice(0,r),...e.values.slice(r+1)],n)}}default:return e}}function eS(e,t){return e.filter(e=>{let{id:r}=e;return!t.some(e=>e.id===r)})}function eE(e,t,r){return setTimeout(()=>r?.(t),0),{open:Array.from(t,()=>!1),openAdd:!1,values:t,remaining:eS(e,t)}}var ek=e.i(8522580),eA=e.i(6982071);e.i(6728635);var eT=e.i(2630141),eI=e.i(5348482);function eD(){let{team:e}=(0,ei.useTeam)(),r=(0,eT.useOpenEnableModal)(),[,n]=(0,eI.useQueryBuilderQueryState)(),l=e?.billing?.plan==="hobby"?"Upgrade to Pro":"Get Observability Plus";return(0,t.jsx)(ek.Note,{action:(0,t.jsx)(c.Button,{size:"small",onClick:()=>{ea.analytics.track(es.AnalyticsEvent.OBSERVE_FEATURE_SEPARATION,{plan:e?.billing?.plan??"hobby",page:"query-builder",type:"modal_opened"}),r({from:"observability",via:"query-builder",upgradeUseCase:"query-builder"}),n({builder:!1})},children:l}),variant:"contrast",fill:!0,icon:(0,t.jsx)(eA.LockClosedSmall,{}),type:"secondary",className:"!rounded-md !pr-1.5",size:"small",children:(0,t.jsxs)("p",{children:["Read-only mode."," ",(0,t.jsx)("span",{className:"font-medium",children:"Unlock custom queries"})," by upgrading to"," ",e?.billing?.plan==="hobby"?"Pro and Observability Plus":"Observability Plus","."]})})}function eB(e){let{query:r,setQuery:n,embedded:l}=e,{hasObservabilityPlusAccess:i,ready:s}=(0,a.useHasObservabilityPlus)(),o=(0,R.useMemo)(()=>(0,ey.toSonarQuery)(r),[r]);return!s||i?(0,t.jsx)(eo,{className:l?"bg-background-200 border-0 rounded-md":"rounded-b-md",onGeneratedQuery:n,query:o}):(0,t.jsx)("div",{className:l?"pl-2":"p-4 pt-0",children:(0,t.jsx)(eD,{})})}let eO="flex flex-col md:flex-row gap-3 align-center";function eF(e){let{disabled:n,embedded:l,query:a,setQuery:o,variables:c,className:u,hideProjectFilter:m=!1}=e,p=(0,r.useServerFlag)("query-builder-pick-operator-upon-creation",!1),[g,b]=(0,R.useState)(!1),{isReady:h,accessibleDimensions:v,by:j}=(0,eu.useAccessibleDimensions)(a),{accessibleEvents:w}=(()=>{let{can:e}=(0,eb.default)(),{team:t}=(0,ei.useTeam)();return t?{isReady:!0,accessibleEvents:eh.queryBuilderEvents.filter(r=>(0,_.canAccessEvent)({event:r,team:t,can:e})).map(e=>({id:e,label:"label"in ex.AllEvents[e]?ex.AllEvents[e].label:e,type:"string",group:(e=>{switch(e){case"serverlessFunctionInvocation":case"middlewareInvocation":case"outgoingRequest":return"Compute";case"incomingRequest":case"imageTransformation":case"isrOperation":return"Edge Network";case"blockedConnection":case"firewallAction":case"botIdCheck":return"Security";case"aiGatewayRequest":return"AI";case"edgeFunctionInvocation":return"Deprecated";default:return"Other"}})(e)})).toSorted((e,t)=>"Deprecated"===e.group&&"Deprecated"!==t.group?1:"Deprecated"!==e.group&&"Deprecated"===t.group?-1:0)}:{isReady:!1,accessibleEvents:[]}})(),{event:N,measure:E}=(0,ey.splitEventAndMeasure)(a),{accessibleAggregations:k,aggregation:A}=(0,ec.useAccessibleAggregations)(a),T=(0,ev.useValuesResolver)(a);((e,t)=>{let{event:r}=(0,ey.splitEventAndMeasure)(e),n=(0,R.useCallback)((e,t)=>{let r=(0,_.getGroupableDimensions)(e);return t.filter(e=>r.includes(e))},[]);(0,R.useEffect)(()=>{if(e.by.length>0){let l=n(r,e.by);l.length!==e.by.length&&t({by:l})}},[e.by,t,r,n])})(a,o);let I=(0,R.useMemo)(()=>v.toSorted((e,t)=>e.label.localeCompare(t.label)),[v]),D=(0,R.useMemo)(()=>({dimensions:I.filter(e=>{let{id:t}=e;return!m||"projectId"!==t}),operators:C.operators,resolveValues:T,defaultSingleOperator:C.defaultSingleOperator,defaultMultiOperator:C.defaultMultiOperator,defaultArrayOperator:C.defaultArrayOperator}),[I,T,m]),B=(0,R.useMemo)(()=>(0,ey.parseFilters)(a.filter),[a.filter]),O=0===B.length&&a.filter,F=(0,R.useCallback)(e=>o({filter:(0,ey.serializeFilters)(e)}),[o]),q=(0,R.useCallback)(e=>{let t=a.view;0===e.length&&t?.type==="table"?t={type:"big-number"}:e.length>0&&t?.type==="big-number"&&(t={type:"table"}),o({by:e.map(e=>{let{id:t}=e;return t}),view:t})},[o,a.view]);return(0,t.jsxs)("div",{className:(0,M.cn)("flex flex-col bg-background-100 mb-3",!l&&"shadow-border rounded-md",u),children:[(0,t.jsxs)("div",{className:(0,M.cn)("flex flex-col flex-1 gap-3",l?"p-2 pt-0 pb-4":"p-4 pb-3"),children:[(0,t.jsxs)("div",{className:eO,children:[(0,t.jsx)(eL,{htmlFor:"event-metric",className:eq,children:"Metric"}),(0,t.jsxs)("div",{className:"flex flex-col flex-wrap @md-page:flex-row gap-2 flex-1 [&>:nth-child(2)]:mr-auto",children:[(0,t.jsx)(H,{disabled:n,selectedEventId:N,selectedMetricId:E,events:w,onSelect:(e,t)=>{o({metric:`${e}.${t}`,aggregation:function(e){let t=ex.AllMeasures[e];if(!t)return"sum";let{unit:r,aggregations:n}=t;switch(r){case"count":case"bytes":return n.includes("sum")?"sum":n[0];case"milliseconds":case"seconds":case"megabytes":case"gigabyte_hour":case"ratio":case"percent":return n.includes("avg")?"avg":n[0];default:return n[0]}}(t)})}}),(0,t.jsx)(s.SingleFilterPopoverBox,{id:"aggregation",className:"!px-2 !py-4",disabled:n,label:"aggregation",onChange:e=>{o({aggregation:e.id}),b(!1)},onOpenChange:b,open:g,options:k,rounded:!0,suffix:(0,t.jsx)(x.ChevronUpDown,{color:"gray-800"}),value:A}),(0,t.jsx)(S.DateRangeSelect,{disabled:n,value:a.time,onChange:e=>o({time:e}),trackEvents:!0,variables:c})]})]}),(0,t.jsxs)("div",{className:eO,children:[(0,t.jsx)(eL,{htmlFor:"by",className:eq,children:"Group By"}),(0,t.jsx)("div",{className:"flex-1",children:h?(0,t.jsx)(eM,{addButtonLabel:"Add",id:"by",dimensions:I,disabled:n,isLoading:!h,onChange:q,values:j}):(0,t.jsx)(d.Skeleton,{height:32,width:100})})]}),O?(0,t.jsx)(eP,{setQuery:o,query:a}):(0,t.jsxs)("div",{className:eO,children:[(0,t.jsxs)(eL,{htmlFor:"filter",className:eq,children:["Filter",m?(0,t.jsx)(f.Tooltip,{text:(0,t.jsx)("p",{className:"text-copy-14",children:"This query is already filtered for your current project."}),children:(0,t.jsx)(y.Information,{color:"gray-900",className:"-mt-2"})}):null]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:h?(0,t.jsx)(i.FilterBar,{config:D,disabled:n,filters:B,onChange:F,operatorUponCreation:p}):(0,t.jsx)(d.Skeleton,{height:32,width:200})})]})]}),(0,t.jsx)(eB,{embedded:l,query:a,setQuery:o})]})}let eq="md:w-16 md:shrink-0 md:pt-1.5 inline-flex gap-1";function eL(e){let{children:r,className:n,htmlFor:l,...i}=e;return(0,t.jsx)("label",{className:(0,M.cn)("text-sm font-medium text-gray-800",n),htmlFor:l,...i,children:r})}function eP(e){let{setQuery:r,query:n}=e;return(0,t.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 py-2 col-span-2",children:[(0,t.jsx)(f.Tooltip,{text:"Invalid or unsupported filter saved",children:(0,t.jsx)(N.Question,{size:16})}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center",children:[(0,t.jsx)(f.Tooltip,{className:"w-full",text:n.filter,children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(u.Input,{"aria-label":"Invalid or unsupported filter saved",className:"w-full overflow-visible outline-2 outline-offset-2 outline-[var(--ds-focus-color)] !ring-1 ring-gray-400 focus:outline",disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0},value:n.filter})})}),(0,t.jsx)(c.Button,{"aria-label":"Clear filter",className:"overflow-visible !border-l-0 outline-2 outline-offset-2 outline-[var(--ds-focus-color)] !ring-1 ring-gray-400 focus:outline",onClick:()=>r({filter:""}),size:"medium",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},svgOnly:!0,type:"secondary",children:(0,t.jsx)(h.CrossSmall,{size:20})})]})]})}function e$(e){let r,n,l,i,{className:a,query:o,setQuery:c,disabled:u}=e,[d,m]=(0,R.useState)(!1),{accessibleGranularities:f,granularity:p}=(r=(0,R.useMemo)(()=>{let{start:e,end:t}=(0,ed.fromTimeToRange)(o.time);return Math.round(t.getTime()-e.getTime())},[o.time]),n=(0,R.useMemo)(()=>(0,ed.getGranularityFromDuration)(r),[r]),l=(0,R.useMemo)(()=>{let e=[],t=(0,ef.milliseconds)(n);for(let n of ed.preferredGranularities){let l=(0,ef.milliseconds)(n);l>=t&&l<=r&&e.push(ep(n))}return e},[n,r]),i=(0,R.useMemo)(()=>l.find(e=>{let{id:t}=e;return t===(0,ef.milliseconds)(o.granularity??{}).toString()})??ep(n),[n,l,o.granularity]),{accessibleGranularities:l,granularity:i});return(0,t.jsxs)("div",{className:(0,M.cn)("flex flex-wrap gap-2 items-center justify-end",a),children:[(0,t.jsx)(s.SingleFilterPopoverBox,{id:"granularity",disabled:u,label:"granularity",onChange:e=>{let{granularity:t}=e;c({granularity:t}),m(!1)},onOpenChange:m,open:d,options:f,prefix:(0,t.jsx)(b.Clock,{color:"gray-900"}),rounded:!0,suffix:(0,t.jsx)(x.ChevronUpDown,{color:"gray-800"}),value:p}),(0,t.jsx)(ez,{query:o,onChange:e=>c({view:e})})]})}let eU=[{type:"line",icon:(0,t.jsx)(v.LineChart,{})},{type:"area",icon:(0,t.jsx)(g.BarChart,{})},{type:"table",icon:(0,t.jsx)(j.MenuAlt,{}),isDisabled:e=>(e?.by.length??0)===0?"Add a Group By clause to view results in a Table.":null},{type:"big-number",icon:(0,t.jsx)(w.Percentage,{}),isDisabled:e=>(e?.by.length??0)>=1?"Remove your Group By clause to view results as a number.":null}];function ez(e){let{query:r,onChange:n}=e,l=eU.filter(e=>{let{isDisabled:t}=e;return!t?.(r)});return(0,t.jsx)(m.Switch,{name:"view",size:"small",children:l.map(e=>{let{type:l,icon:i}=e;return(0,t.jsx)(m.Switch.Control,{checked:(r?.view?.type??"line")===l,icon:i,value:l,onChange:()=>n({type:l})},l)})})}e.s(["QueryBuilder",0,function(e){let{query:r,setQuery:i,Actions:s,Title:u,variables:d,children:m,filteredProjects:f,embedded:g=!0}=e,[x,b]=(0,R.useState)(!1),{hasObservabilityPlusAccess:h}=(0,a.useHasObservabilityPlus)(),y=(0,R.useMemo)(()=>{let{filter:e,...t}=(0,o.replaceVariables)(r,d);return{...t,filter:f?.length?(0,n.andFilterStrings)(e||void 0,`projectId in (${f.map(e=>`'${e}'`).join(",")})`):e}},[r,d,f]),{isReady:v}=(0,eg.useAccessibleMetrics)(),j=!v||!h,w=!!f?.length,N=(0,R.useRef)(null),C=(0,R.useCallback)(()=>{N.current&&b(N.current.scrollTop>40)},[]),S=(0,R.useCallback)(()=>{N.current&&N.current.scrollTo({top:0,behavior:"smooth"})},[]);return(0,t.jsx)(l.ObservabilityChartContextProvider,{children:g?(0,t.jsxs)("div",{ref:N,className:"relative flex flex-1 flex-col overflow-y-auto m-4",onScroll:C,children:[(0,t.jsxs)("div",{className:"sticky left-0 top-0 z-10 pb-3 flex items-center justify-between gap-3 bg-background-100",children:[(0,t.jsx)("div",{className:"flex flex-1 items-center justify-start gap-2",children:u}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Button,{"aria-label":"Scroll to top",onClick:S,type:"tertiary",svgOnly:!0,"aria-hidden":!x,shape:"square",className:(0,M.cn)("transition-all duration-200",x?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"),tabIndex:x?0:-1,children:(0,t.jsx)(p.ArrowUp,{size:16})}),s]})]}),(0,t.jsx)(eF,{className:"sticky inset-x-0 pt-px",disabled:j,embedded:g,query:r,setQuery:i,variables:d,hideProjectFilter:w}),(0,t.jsx)(e$,{className:"p-px sticky inset-x-0",disabled:j,query:r,setQuery:i}),(0,t.jsx)(ej.ResultsChart,{query:y,readOnly:j,scrollerRef:g?N:void 0,setQuery:i,showTable:r.by.length>0,sticky:g,variant:"minimal"}),m]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF,{disabled:j,embedded:g,query:r,setQuery:i,variables:d,hideProjectFilter:w}),(0,t.jsxs)("div",{className:"p-4 flex flex-col gap-3 border-1 rounded-md shadow-border bg-background-100",children:[(0,t.jsx)(e$,{disabled:j,query:r,setQuery:i}),(0,t.jsx)(ej.ResultsChart,{query:y,readOnly:j,scrollerRef:g?N:void 0,setQuery:i,showTable:r.by.length>0,sticky:g,variant:"minimal"}),m]})]})})}],1135066)}]);

//# debugId=d55c747e-92d8-e98e-1687-e155599c71d5
//# sourceMappingURL=09876e0d42982efc.js.map