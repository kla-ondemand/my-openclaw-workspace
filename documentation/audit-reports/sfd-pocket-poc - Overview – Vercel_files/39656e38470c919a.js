;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7aa304f5-4490-7395-596c-b301e7e0daaf")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8818053,e=>{"use strict";var t=e.i(2144405),a=e.i(4205214),l=e.i(8660982),i=e.i(5255926),s=e.i(2504781),n=e.i(5468328),r=e.i(6352514),o=e.i(1853611),c=e.i(57106),d=e.i(4396019),u=e.i(6613731),m=e.i(1681029),x=e.i(9267266);let h=(0,l.memo)(e=>{let{project:h,hideOnMobile:p=!0,onClick:g,...f}=e,{domain:j,loaded:v,deployment:y}=(0,d.useProjectProductionDeployment)(h?.id),b=(0,x.useShouldVisitWithTheToolbar)(y),{onClick:w,...N}=(0,u.useWrappedToolbarAuthLinkHandler)({via:"project-overview-visit-button",deployment:y}),S=(0,l.useCallback)(e=>{o.analytics.track(r.AnalyticsEvent.PROJECT_OVERVIEW_CLICKED_VISIT_BUTTON,{projectId:h?.id}),g?.(e)},[h,g]),k=j?.name?(0,m.domainToUrl)(j.name):void 0;return v?k?b?(0,a.jsx)(x.VisitWithToolbarButton,{Component:c.ButtonLink,buttonProps:{className:p?"geist-hide-on-mobile":void 0,href:k,onClick:S,passthroughOnClick:w,tab:!0,width:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?void 0:70,...N,...f},className:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"-m-px [&>a]:!px-1 [&>button]:!px-0.5 [&>*]:!h-[34px] flex-1 [&>a]:flex-1":void 0,url:k,via:"project-overview-visit-button",children:"Visit"}):(0,a.jsx)(c.ButtonLink,{className:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"flex-1":p?"geist-hide-on-mobile":void 0,href:k,onClick:S,passthroughOnClick:w,tab:!0,width:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?void 0:110,...N,...f,children:"Visit"}):(0,a.jsx)(n.Tooltip,{delay:!1,text:"To deploy to production, push to the Repository Default branch.",children:(0,a.jsx)(s.Button,{className:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"flex-1":p?"geist-hide-on-mobile":void 0,disabled:!0,onClick:S,width:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?void 0:110,...f,children:"Visit"})}):(0,a.jsx)(i.Skeleton,{className:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"flex-1":void 0,height:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?32:40,width:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?void 0:110})});e.s(["default",0,h])},2766871,e=>{"use strict";var t=e.i(2144405),a=e.i(4205214),l=e.i(8660982),i=e.i(9722978),s=e.i(5756088),n=e.i(6401841),r=e.i(8893913),o=e.i(8876434),c=e.i(3306538),d=e.i(2504781),u=e.i(779588),m=e.i(6870754),x=e.i(8674454),h=e.i(6694387),p=e.i(4991687),g=e.i(8459493),f=e.i(8522580),j=e.i(5255926),v=e.i(9318197),y=e.i(5468328),b=e.i(455575),w=e.i(3254981),N=e.i(5677444),S=e.i(4004502),k=e.i(1853611),C=e.i(7780974),_=e.i(3322724),L=e.i(57106),E=e.i(8062867),T=e.i(8994597),R=e.i(4043190),I=e.i(5758916),D=e.i(6264863),P=e.i(369178),A=e.i(4450569),z=e.i(7808943);let B=e=>{let{branch:t,onClearBranch:l,isUsingActiveBranches:i}=e;return(0,a.jsxs)(P.default,{children:[(0,a.jsxs)(A.default,{center:!0,className:"empty-preview",hcenter:!0,vcenter:!0,children:[(0,a.jsx)("h3",{className:"jsx-c1a77c3a387314ef text-copy-16",children:i?"No Active Branches":"No Preview Deployments"}),(0,a.jsxs)(A.default,{flex:0,style:{color:"var(--accents-5)"},children:[(0,a.jsx)("p",{className:"jsx-c1a77c3a387314ef text-copy-14 m-0",children:t?(0,a.jsxs)(a.Fragment,{children:["Commit to the ",(0,a.jsx)(z.default,{children:t})," branch to deploy."]}):"Commit using our Git connections."}),!!t&&!!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Spacer,{}),(0,a.jsx)("p",{className:"jsx-c1a77c3a387314ef text-copy-14 m-0",children:(0,a.jsx)(L.Link,{onClick:l,style:{fontWeight:700},variant:"highlight",children:"View All Deployments"})})]})]})]}),(0,a.jsx)(D.default,{id:"c1a77c3a387314ef",children:".empty-preview{text-align:center;padding:var(--geist-gap-double);border:1px dashed var(--accents-2);border-radius:var(--geist-radius);min-height:calc(300px + var(--geist-gap-double)*1.5)}"})]})};var M=e.i(7137884),V=e.i(4245131),U=e.i(8517043),F=e.i(6850581),O=e.i(9334091),$=e.i(3496900),H=e.i(5883567),X=e.i(3115981),G=e.i(7218483),W=e.i(9375869),q=e.i(4904548),Z=e.i(6226725),Y=e.i(3959677),Q=e.i(5371931),K=e.i(9222994),J=e.i(8529990),ee=e.i(7417898),et=e.i(8216525);function ea(e){let{children:t,isPrevious:l,style:s}=e;return(0,a.jsx)("span",{className:(0,i.clsx)("truncate text-[var(--accents-3)]","[&>a]:inline-block","[&>a]:truncate","[&>a]:max-w-[250px]","[&>a]:align-top","[&>a]:no-underline","[&>a:hover]:underline","[&>a]:text-[var(--geist-foreground)]","max-[480px]:[&>a]:max-w-[120px]","[&>a.via-fork]:font-medium",l&&"text-[var(--accents-5)]"),style:{...s},children:t})}function el(e){let{message:t,commitUrl:l,style:s}=e;return(0,a.jsx)("a",{className:(0,i.clsx)("geist-ellipsis","text-[var(--accents-5)]","no-underline","inline-block","leading-6","hover:underline","max-[480px]:max-w-full"),href:l,style:s,target:"_blank",title:t,children:t})}let ei=l.default.memo(e=>{let{type:t,children:l,commitUrl:s,message:n,icon:o,isPrevious:c,deployment:d,isStale:u,style:m,noPadding:x=!1,showCommit:h}=e,p=(0,W.useDeploymentLink)(d);return u?(0,a.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-center justify-start gap-4 flex-initial rounded px-3 py-2",{"bg-gray-100":c}),style:m,children:[c?(0,a.jsx)(Z.CrossCircle,{color:"gray-900",style:{flexShrink:0}}):(0,a.jsx)(r.RotateCounterClockwise,{color:"gray-900",style:{flexShrink:0}}),(0,a.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial truncate",children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-1",children:[(0,a.jsx)("span",{className:"px-[3px]",children:(0,a.jsx)(et.DeploymentStatus,{deployment:d})}),(0,a.jsx)("p",{className:`${(0,i.clsx)("text-label-14 truncate",{"line-through":c})}`,children:(0,a.jsx)(L.Link,{className:(0,i.clsx)("flex items-center gap-2.5 text-inherit no-underline hover:underline",{"text-accents-5":c}),href:p,children:(0,a.jsx)("span",{children:d.url})})})]}),(0,a.jsx)(ee.DeploymentSourceLinks,{deployment:d,singleLine:!0,textStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textDecoration:c?"line-through":void 0}})]})]}):(0,a.jsxs)(A.default,{style:{padding:x?0:"12px 0",lineHeight:"24px"},children:[(0,a.jsxs)(A.default,{row:!0,vcenter:!0,children:[o?(0,a.jsxs)(a.Fragment,{children:[((e,t)=>{switch(e){case"github":return(0,a.jsx)(Y.default,{...t,style:{marginLeft:1}});case"gitlab":return(0,a.jsx)(Q.default,{...t,style:{marginLeft:1}});case"bitbucket":return(0,a.jsx)(K.default,{...t,style:{marginLeft:1}})}})(t),(0,a.jsx)(v.Spacer,{x:.25})]}):null,(0,a.jsx)(ea,{children:l})]}),h?(0,a.jsx)(el,{commitUrl:s,message:n}):null]})}),es=l.default.memo(e=>{let{deployment:t,icon:l,isStale:i,noPadding:s,isPrevious:n,style:r,showCommit:o,projectLink:c}=e,d=(0,J.getGitInfoFromDeployment)(t,c);return d?.type!=="github"?null:(0,a.jsx)(ei,{commitUrl:d.commitUrl,deployment:t,icon:l,isPrevious:n,isStale:i,message:d.commitMessage,noPadding:s,showCommit:o,style:r,type:"github",children:d.viaFork&&d.prId&&d.prUrl?(0,a.jsxs)(a.Fragment,{children:["( ",(0,a.jsx)("a",{href:d.commitUrl,target:"_blank",children:d.commitSha.slice(0,7)})," ","in ",(0,a.jsxs)("a",{href:d.prUrl,target:"_blank",children:["forked PR#",d.prId]}),")"]}):(0,a.jsx)("a",{href:d.refUrl,target:"_blank",title:d.commitRef,children:d.commitRef})})}),en=l.default.memo(e=>{let{deployment:t,icon:l,isStale:i,noPadding:s,isPrevious:n,showCommit:r,projectLink:o}=e,c=(0,J.getGitInfoFromDeployment)(t,o);return c?.type!=="gitlab"?null:(0,a.jsx)(ei,{commitUrl:c.commitUrl,deployment:t,icon:l,isPrevious:n,isStale:i,message:c.commitMessage,noPadding:s,showCommit:r,type:"gitlab",children:(0,a.jsx)("a",{href:c.refUrl,target:"_blank",title:c.commitRef,children:c.commitRef})})}),er=l.default.memo(e=>{let{deployment:t,icon:l,isStale:i,noPadding:s,isPrevious:n,showCommit:r,projectLink:o}=e,c=(0,J.getGitInfoFromDeployment)(t,o);return c?.type!=="bitbucket"?null:(0,a.jsx)(ei,{commitUrl:c.commitUrl,deployment:t,icon:l,isPrevious:n,isStale:i,message:c.commitMessage,noPadding:s,showCommit:r,type:"bitbucket",children:(0,a.jsx)("a",{href:c.refUrl,target:"_blank",title:c.commitRef,children:c.commitRef})})}),eo=l.default.memo(e=>{let{deployment:t,icon:l=!1,isStale:i=!1,noPadding:s,previousDeployment:n,showCommit:r=!0,projectLink:o}=e;return t?.meta?t.meta.githubDeployment?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(es,{deployment:t,icon:l,isStale:i,noPadding:s,projectLink:o,showCommit:r}),i&&n?(0,a.jsx)(es,{deployment:n,icon:l,isPrevious:!0,isStale:i,noPadding:s,projectLink:o,showCommit:r}):null]}):t.meta.gitlabDeployment?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(en,{deployment:t,icon:l,isStale:i,noPadding:s,projectLink:o,showCommit:r}),i&&n?(0,a.jsx)(en,{deployment:n,icon:l,isPrevious:!0,isStale:i,noPadding:s,projectLink:o,showCommit:r}):null]}):t.meta.bitbucketDeployment?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er,{deployment:t,icon:l,isStale:i,noPadding:s,projectLink:o,showCommit:r}),i&&n?(0,a.jsx)(er,{deployment:n,icon:l,isPrevious:!0,isStale:i,noPadding:s,projectLink:o,showCommit:r}):null]}):(0,a.jsx)("span",{style:{color:"var(--accents-3)",fontWeight:"normal",minHeight:72,lineHeight:"48px"},children:"-"}):null});var ec=e.i(3896684),ed=e.i(2457794),eu=e.i(2348990),em=e.i(1138941),ex=e.i(7010772),eh=e.i(7917902),ep=e.i(277234),eg=e.i(5269510);let ef=function(e){let{project:t,link:l=!0}=e,i=(0,em.useProjectUrl)(t),{isLoading:s,data:n}=(()=>{let{isTeam:e,team:t}=(0,eh.useAccount)(),{data:a,error:l,isLoading:i}=(0,ex.default)(`/api/v0/speed-insights/latest-scores?${(0,eg.stringify)({teamId:e?t?.id:void 0})}`,e=>(0,ep.fetchAPI)(e,{throwOnHTTPError:!0}));return{data:a,isLoading:i,isError:!!l}})(),r=n?.find(e=>{let{projectId:a}=e;return a===t?.id})?.value,o=s||!(0,eu.isSpeedInsightsEnabled)(t)||void 0===r?(0,a.jsx)(y.Tooltip,{delay:!1,text:"Get detailed performance metrics with Insights.",children:(0,a.jsx)(ed.default,{size:"small",children:(0,a.jsx)(ec.ChartActivity,{color:"gray-900"})})}):(0,a.jsx)(ed.default,{size:"small",value:r,children:r.toString()});return i&&l?(0,a.jsx)(L.Link,{href:`${i}/speed-insights`,style:{display:"flex"},children:o}):o};var ej=e.i(5143983),ev=e.i(5484396),ey=e.i(6613731),eb=e.i(9771394),ew=e.i(1303150),eN=e.i(4396019);function eS(e){let{project:t,...l}=e,{domain:i,deployment:s,loaded:n}=(0,eN.useProjectProductionDeployment)(t?.id),r=(0,eb.usePlaceholder)()??!s,o=t&&!s;return(0,a.jsx)(a.Fragment,{children:!n||r?(0,a.jsx)(j.Skeleton,{style:{paddingTop:"62.5%",minHeight:"100%"},width:"100%"}):(0,a.jsx)(ew.DeploymentPreview,{...l,deployment:s,empty:o,placeholder:!1,projectDomain:i})})}var ek=e.i(5566974),eC=e.i(145675),e_=e.i(6440096);function eL(){return(0,a.jsx)(eE,{})}function eE(){let{promise:e}=(0,eC.useApi)(e_.getProjectProductionDeployment),{promise:t}=(0,eC.useApi)(e_.getDashboardProject),i=(0,l.use)(e),s=(0,l.use)(t);return i?.deployment?(0,a.jsx)(ek.DeploymentConfiguration,{deployment:i.deployment,project:s??null}):(0,a.jsx)(ek.DeploymentConfigurationRoot,{disabled:!0})}var eT=e.i(4585051),eR=e.i(8651268);let eI=l.memo(function(){let{deployment:e,size:t=24}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?.creator?(0,a.jsx)(eR.PrincipalAvatar,{size:t,principalId:e.creator.uid,principal:{type:"user",uid:e.creator.uid,username:e.creator.username},showProviderIcon:!1,deploymentMeta:e.meta?.originalDeploymentId?void 0:e.meta}):(0,a.jsx)(eT.Avatar,{placeholder:!0,size:t})});var eD=e.i(2381001),eP=e.i(4040097),eA=e.i(1298796),ez=e.i(2982888),eB=e.i(1717203),eM=e.i(7557283),eV=e.i(8227242),eU=e.i(5802506),eF=e.i(930810),eO=e.i(1987826);e.i(3182268);var e$=e.i(7849855),eH=e.i(6565161),eX=e.i(5338940),eG=e.i(4244280),eW=e.i(8042625),eq=e.i(1173672),eZ=e.i(4597921),eY=e.i(5072965),eQ=e.i(8818053);let eK=(0,X.default)(()=>e.A(2124931).then(e=>e.UndoRollbackModal),{loadableGenerated:{modules:[5755381]}});function eJ(e){let{rollbackDescription:t,project:i,deploymentId:s}=e,[n,r]=(0,l.useState)(!1),[o,c]=(0,l.useState)(t.description),[u,m]=(0,l.useState)(!1),x=function(){let{mutate:e}=(0,eH.useSWRConfig)(),{team:t}=(0,eX.useTeam)();return async(a,l,i)=>{if(!t)throw Error("Team not found");let s=`${(0,eG.API_DEPLOYMENT_UPDATE_ROLLBACK_DESCRIPTION)(a.id,l)}${(0,eW.encode)({teamId:t.id})}`;await (0,ep.fetchAPI)(s,{method:"PATCH",body:JSON.stringify({description:i}),throwOnHTTPError:!0}),await e((0,eq.getProjectProductionDeploymentKey)({projectIdOrName:a.id,teamId:t.slug})),await e((0,eq.getProjectProductionDeploymentKey)({projectIdOrName:a.name,teamId:t.slug}))}}(),h=(0,b.useToasts)(),{can:p}=(0,eB.default)(),g=void 0!==i&&void 0!==s&&p(eM.Action.Create,eM.Resource.DeploymentRollback),f=async()=>{if(i&&s){m(!0);try{await x(i,s,o),r(!1)}catch(e){h.error({text:"Something went wrong updating rollback description.",key:"update-rollback-description"}),(0,eU.captureError)(e)}finally{m(!1)}}};if(n){let e=o.length>=eF.REASON_MAX_CHARACTER_LENGTH;return(0,a.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial mb-4 w-full rounded bg-gray-200 px-3 py-2",children:[(0,a.jsx)(O.Textarea,{autoFocus:!0,className:"min-h-20 text-sm",value:o,onChange:e=>c(e.target.value),placeholder:"Production is not behaving as expectedâ€¦",error:e?`Reason cannot be longer than ${eF.REASON_MAX_CHARACTER_LENGTH} characters.`:void 0}),(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-end gap-2 flex-initial",children:[(0,a.jsx)(d.Button,{onClick:()=>r(!1),type:"secondary",size:"small",children:"Cancel"}),(0,a.jsx)(d.Button,{onClick:f,loading:u,size:"small",disabled:e,children:"Update Reason"})]})]})}return(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial mb-4 w-full rounded bg-gray-100 px-3 py-2 break-words",children:[(0,a.jsx)("p",{className:"text-copy-14 flex-1 min-w-0",children:t.description.length>0?(0,a.jsx)(eV.LinkParser,{text:t.description}):"No reason provided."}),g?(0,a.jsx)("div",{className:"grid place-content-center",children:(0,a.jsx)(y.Tooltip,{className:"w-full @md-page:w-auto",desktopOnly:!0,text:"Update rollback reason",children:(0,a.jsx)(L.Link,{onClick:()=>{c(t.description),r(!0)},children:(0,a.jsx)($.PencilEdit,{color:"gray-900"})})})}):null]})}function e0(e){let{project:t,productionDeployment:l,productionAliases:i,isLoading:s}=e,n=(0,ey.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:l??void 0}),r=(0,G.useAgo)(l?.createdAt),o=(0,ez.getDeploymentCreatorUsername)({deployment:l}),c=(0,eZ.useServerFlag)("enable-is-backend-project",!1),d=l&&i&&!s;return(0,a.jsxs)("div",{className:"flex flex-col gap-[23px]",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start flex-none",children:[(0,a.jsx)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0 min-w-0",children:(0,a.jsx)(V.Description,{className:"[&>dd>span]:flex [&>dd>span]:overflow-hidden [&>dd>span_a]:inline-block [&>dd>span_a]:truncate",content:d?(0,a.jsx)(ev.default,{children:(0,a.jsx)(W.default,{deployment:l})}):(0,a.jsx)(j.Skeleton,{height:16,width:190}),title:"Deployment"})}),c?null:(0,a.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",style:{marginLeft:"8px",marginRight:"8px"},children:d?(0,a.jsx)(ef,{project:t}):(0,a.jsx)(j.Skeleton,{boxHeight:32,height:32,rounded:!0,width:32})})]}),(0,a.jsx)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0",children:(0,a.jsx)(V.Description,{content:d?(0,a.jsx)(ev.default,{children:(0,a.jsx)(q.default,{defaultRoute:l.defaultRoute,domains:i,linkProps:n})}):(0,a.jsx)(j.Skeleton,{boxHeight:20,height:16,width:220}),title:(0,a.jsx)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0",children:(0,a.jsx)(e2,{})})})}),(0,a.jsxs)("div",{className:"relative block min-w-px max-w-full flex-[0_1_auto] items-stretch justify-start @sm-page:flex @sm-page:flex-row @lg-page:flex-wrap",children:[(0,a.jsx)(V.Description,{content:d?(0,a.jsx)(ev.default,{children:(0,a.jsx)("div",{className:"relative flex h-[22px] min-w-px max-w-full flex-row items-center @lg-page:flex-wrap",children:(0,a.jsx)(et.DeploymentStatus,{deployment:l,label:!0,labelStyle:{fontWeight:500}})})}):(0,a.jsx)(j.Skeleton,{boxHeight:22,height:16,width:60}),title:"Status"}),(0,a.jsx)(v.Spacer,{x:1,y:.5}),(0,a.jsx)(V.Description,{content:d?(0,a.jsx)(ev.default,{children:(0,a.jsx)(F.RelativeTimeCard,{asChild:!0,date:l.createdAt,side:"top",children:(0,a.jsxs)("div",{className:"flex items-center gap-[0.4rem]",children:[(0,a.jsxs)("p",{className:"text-copy-14 inline-block truncate",children:[r,o?` by ${o}`:""]}),(0,a.jsx)(eI,{deployment:l,size:22})]})})}):(0,a.jsx)(j.Skeleton,{boxHeight:22,height:16,width:180}),title:"Created"})]}),(0,a.jsx)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0",children:(0,a.jsx)(V.Description,{content:d?(0,a.jsx)(ev.default,{children:(0,a.jsx)(ee.DeploymentSourceLinks,{deployment:l,className:"gap-0.5"})}):(0,a.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0.5 flex-initial",children:[(0,a.jsx)(j.Skeleton,{boxHeight:22,height:16,width:120}),(0,a.jsx)(j.Skeleton,{boxHeight:22,height:16,width:240})]}),title:"Source"})})]})}function e1(e){let{productionDeployment:t,productionAliases:l,isLoading:i}=e,s=t&&l&&!i,n=(0,ey.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:t??void 0}),{projectSlug:r,teamSlug:o}=(0,e$.useProjectAndTeamSlug)();return o&&r?(0,a.jsxs)("div",{className:"flex min-h-[258px] flex-col gap-[22px]",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Rolling release in progress"}),(0,a.jsx)(L.Link,{variant:"highlight",href:`/${o}/${r}/deployments/rolling-release`,children:"Manage"})]}),(0,a.jsx)(eO.RollingReleaseDetails,{variant:"overview",projectSlug:r,teamSlug:o})]}),(0,a.jsx)(V.Description,{content:s?(0,a.jsx)(q.default,{defaultRoute:t.defaultRoute,domains:l,linkProps:n}):(0,a.jsx)(j.Skeleton,{boxHeight:20,height:16,width:220}),title:(0,a.jsx)(e2,{})})]}):null}function e2(){let{projectSlug:e,teamSlug:t}=(0,e$.useProjectAndTeamSlug)();return(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:["Domains",(0,a.jsx)(L.Link,{href:`/${t}/${e}/settings/domains`,...(0,eY.createTrackingAttributes)({name:"add-new-domain"}),children:(0,a.jsx)(H.PlusCircle,{className:"cursor-pointer"})})]})}function e5(e){let{project:t,productionDeployment:l,previousDeployment:i,productionAliases:s,rollbackDescription:n,isLoading:r}=e,o=(0,ey.useWrappedToolbarAuthLinkHandler)({via:"project-dashboard-alias-list",deployment:l??void 0}),c=(0,G.useAgo)(n?.createdAt),d=l&&s&&!r;return(0,a.jsxs)("div",{className:"flex min-h-[258px] flex-col gap-[22px]",children:[(0,a.jsx)(V.Description,{content:d?(0,a.jsxs)(a.Fragment,{children:[n?(0,a.jsx)(eJ,{rollbackDescription:n,project:t,deploymentId:l.id}):null,(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(eo,{deployment:l,icon:!0,isStale:!0,noPadding:!0,previousDeployment:i})})]}):(0,a.jsxs)("div",{className:"mb-8 flex flex-col gap-2",children:[(0,a.jsx)(j.Skeleton,{autoSize:!0,className:"h-[58px] w-full"}),(0,a.jsx)(j.Skeleton,{autoSize:!0,className:"h-[58px] w-full"})]}),title:n?(0,a.jsxs)("div",{className:"flex items-center gap-1 normal-case",children:["Rolled back ",c,n.username?(0,a.jsxs)(a.Fragment,{children:[" ","by"," ",(0,a.jsx)(eR.PrincipalAvatar,{size:22,principalId:n.userId,principal:{type:"user",uid:n.userId,username:n.username}})," ",n.username]}):null]}):"Rolled back"}),(0,a.jsx)(V.Description,{content:d?(0,a.jsx)(q.default,{defaultRoute:l.defaultRoute,domains:s,linkProps:o}):(0,a.jsx)(j.Skeleton,{boxHeight:20,height:16,width:220}),title:(0,a.jsx)(e2,{})})]})}function e3(e){let{scope:s,project:n,productionAliases:o,productionDeployment:c,previousDeployment:m,upcomingDeployment:x,projectLink:h,isLoading:p,onCancelUpcomingDeployment:f,productionDeploymentIsStale:v,refreshPreviewImage:y,rollbackDescription:b,rollingReleaseResponse:w,canRollbackDeployment:S,openRollbackModal:k,headerActions:C,buildLogsHref:_,runtimeLogsHref:L}=e,E=(0,N.useRouter)(),T=!!(!p&&n&&!c),[R,I]=(0,l.useState)(!1),D=w?.rollingRelease,P=n&&D&&"ACTIVE"===D.state,A=(0,a.jsx)(ej.ProductionDeploymentBar,{aliasError:x?.aliasError,loading:p,onCancelUpcomingDeployment:f,previousDeployment:m,productionDeployment:c,productionDeploymentIsStale:v,project:n,projectLink:h&&"type"in h&&h.type?h:null,upcomingDeployment:x});return(0,a.jsx)("div",{className:"max-w-full mx-auto w-[var(--geist-page-width-with-margin)] px-[var(--geist-page-margin)]",children:(0,a.jsxs)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start",children:[T?(0,a.jsxs)(eA.DeploymentCardContainer,{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eP.ProductionDeploymentCardSkeleton,{visible:!1}),(0,a.jsx)(eD.NoDeploymentCard,{className:"rounded-md border-none shadow-[0_1px_0_0_rgba(0,0,0,0.08),0_2px_2px_rgba(0,0,0,0.04)]",project:n,scope:s,style:{position:"absolute",inset:0,zIndex:1,boxShadow:"none",height:"auto"}})]}),A]}):(0,a.jsxs)(eA.DeploymentCardContainer,{variant:(0,eA.getStatusBarVariant)({productionDeploymentIsStale:v,upcomingDeployment:x,isLoading:p}),children:[(0,a.jsxs)(U.Fieldset,{className:(0,i.clsx)("z-[1] border-none","!shadow-[0_1px_0_0_rgba(0,0,0,0.08),_0_2px_2px_rgba(0,0,0,0.04)]","!rounded-md","true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"":"[&>div:first-child]:p-4","dark:!shadow-[0_1px_0_0_var(--ds-gray-alpha-400)]","bg-clip-padding"),children:["true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 h-14 pl-4 pr-3 py-3 border-b border-gray-400",children:[(0,a.jsx)("h3",{className:"text-heading-14 font-medium",children:"Production Deployment"}),(0,a.jsx)("div",{className:"hidden @md-page:flex",children:C}),(0,a.jsx)("div",{className:"flex @md-page:hidden",children:(0,a.jsxs)(u.DotsMenu,{children:[_?(0,a.jsx)(g.MenuItem,{onClick:()=>E.push(_),children:"View Build Logs"}):null,L?(0,a.jsx)(g.MenuItem,{onClick:()=>E.push(L),children:"View Runtime Logs"}):null]})})]}):null,(0,a.jsx)(M.FieldsetContent,{className:"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"p-4":void 0,children:(0,a.jsxs)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start gap-6 @lg-page:flex-row @lg-page:flex-wrap",children:[(0,a.jsxs)("div",{className:"relative flex w-full min-w-px max-w-full flex-none flex-col items-stretch justify-start gap-3 @lg-page:max-w-[38%]",children:[(0,a.jsx)(eS,{project:n,refresh:y}),"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?(0,a.jsxs)("div",{className:"flex items-center gap-3 @md-page:hidden",children:[p?(0,a.jsx)(j.Skeleton,{className:"flex-1",height:32}):S&&k?(0,a.jsx)(d.Button,{onClick:k,size:"small",type:"secondary",typeName:"button",className:"flex-1",prefix:(0,a.jsx)(r.RotateCounterClockwise,{}),children:"Instant Rollback"}):null,(0,a.jsx)(eQ.default,{hideOnMobile:!1,project:n,size:"small"})]}):null]}),(0,a.jsx)("div",{className:"relative flex min-w-px max-w-full flex-1 flex-col items-stretch justify-start pt-2",children:(()=>{switch(P?"rollingRelease":v&&!p?"rollback":"deployment"){case"rollback":return(0,a.jsx)(e5,{project:n,previousDeployment:m,productionAliases:o,productionDeployment:c,rollbackDescription:b,isLoading:p});case"rollingRelease":return(0,a.jsx)(e1,{productionAliases:o,productionDeployment:c,isLoading:p});default:return(0,a.jsx)(e0,{productionAliases:o,productionDeployment:c,project:n,isLoading:p})}})()})]})}),(0,a.jsx)(eL,{})]}),A]}),(0,a.jsx)(l.Suspense,{children:R?(0,a.jsx)(eK,{open:R,setOpen:I}):null})]})})}var e4=e.i(9974972),e8=e.i(9584282),e9=e.i(6619197),e6=e.i(5129431),e7=e.i(2645806),te=e.i(4029500),tt=e.i(5598924),ta=e.i(6119682),tl=e.i(13501),ti=e.i(1903055),ts=e.i(2941917),tn=e.i(6625227),tr=e.i(100247);let to=function(e){let{project:t,productionDeployment:a,revalidateProject:i}=e,s=t?.targets?.production,n=(0,tn.default)(s?.url,{refreshInterval:3e3}),r=n.data,[o,c]=l.useState(r),{areChecksRunning:d,areDomainsAssigning:u}=(0,tr.getDeploymentStatus)(r);l.useEffect(()=>{(r!==o&&r?.readyState==="READY"&&i(),s)?r&&r!==o&&c(r):c(null)},[s,r,i,o]);let m=!!(!s||n.error||o),x=o&&a?o.createdAt>a.createdAt:o&&!a;return{mutate:n.mutate,isLoading:!m,data:x&&(["QUEUED","BUILDING","ERROR"].includes(r?.readyState??"")||d||r?.checksConclusion==="failed"||u)?r:null}};var tc=e.i(2652226),td=e.i(58194),tu=e.i(6516601),tm=e.i(4218798),tx=e.i(5442212),th=e.i(1122901),tp=e.i(5771992),tg=e.i(7401972),tf=e.i(5326905),tj=e.i(7448864),tv=e.i(1201436),ty=e.i(1991452),tb=e.i(7674801),tw=e.i(6015702),tN=e.i(6107899),tS=e.i(4345845),tk=e.i(8172029),tC=e.i(545405),t_=e.i(3907048),tL=e.i(5071474);let tE=(0,l.memo)(function(e){let{branch:t,redeploy:s,project:n,feedbackState:r}=e,{branch:o,deployment:c}=t,d=(0,l.useMemo)(()=>({...c,uid:c.id,readyState:c.readyState,ready:c.readyAt,created:c.createdAt,creator:{...c.creator,uid:c.creator?.uid??c.userId}}),[c]),m=(0,J.getGitInfoFromDeployment)(c),x=function(e){if(!(0,J.getGitInfoFromDeployment)(e))return;if(e.alias?.length===1)return e.alias[0];let t=`${e.name}-git-`,a=e.alias?.find(e=>e.startsWith(t));if(a)return a;let l=e.alias?.find(t=>{let a=t.indexOf("-git-");return -1!==a&&e.name.startsWith(t.substring(0,a))});return l||e.alias?.[e.alias.length-1]}(c)??c.url,h="ERROR"===c.readyState||"failed"===c.checksConclusion||c.aliasError,{latestSuccessfulDeployment:p}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=function(e){let{meta:t={}}=e??{};return"githubCommitRef"in t?{"meta-githubCommitRef":t.githubCommitRef}:"gitlabCommitRef"in t?{"meta-gitlabCommitRef":t.gitlabCommitRef}:"bitbucketCommitRef"in t?{"meta-bitbucketCommitRef":t.bitbucketCommitRef}:void 0}(t),l=t?.readyState==="READY",{data:i,isLoading:s}=(0,tp.default)({limit:l||!a?0:1,projectId:e,state:"READY",...a});if(l)return{latestSuccessfulDeployment:t,isLoading:!1};if(!a)return{isLoading:!1};let[n]=i?.deployments??[];return{latestSuccessfulDeployment:n,isLoading:s}}(n?.id,h?void 0:d),{query:g}=(0,ty.useRouter)(),f=(0,tk.getQueryParam)(g.teamSlug)??"",j=(0,tk.getQueryParam)(g.project)??"",v=`/${f}/${j}/deployments${(0,eW.encode)({filterBranch:o})}`,y=`/${f}/${j}/logs?branches=${o}`,b=(0,W.useDeploymentLink)(c),{can:w}=(0,eB.default)({projectIdOrName:n?.name}),N=null!==c.target?eM.Resource.Deployment:eM.Resource.DeploymentPreview,S=w(eM.Action.Update,N),k=w(eM.Action.Read,N),C=p?`https://${x}`:b,_=m?.prUrl??m?.refUrl??m?.commitUrl,E=t.meta?.number??m?.prId?`#${t.meta?.number??m?.prId}`:"Source",T=(0,G.useAgo)(c.createdAt),R=(0,ey.useWrappedToolbarAuthLinkHandler)({via:"active-branches",deployment:c});return(0,a.jsxs)("div",{className:(0,i.default)("group/branch-row relative grid grid-flow-row items-start gap-2 px-4 py-3","first:rounded-t last:rounded-b [&:has(.link-overlay:hover)]:bg-gray-100","@md-page:flex @md-page:flex-row @md-page:items-center @md-page:justify-between"),children:[(0,a.jsx)(L.Link,{className:"link-overlay absolute inset-0 z-[1]",href:C,...R}),(0,a.jsxs)("div",{className:"flex min-w-[110px] max-w-[230px] shrink items-center gap-x-2 @sm-page:max-w-max @md-page:max-w-[500px]",children:[(0,a.jsx)(tS.GitBranch,{className:"hidden @md-page:inline-block",color:"gray-900",size:16}),(0,a.jsx)("p",{className:"text-label-14-mono truncate text-gray-alpha-1000",children:o})]}),(0,a.jsxs)("div",{className:(0,i.default)("grid w-full shrink-0 auto-cols-fr grid-flow-col gap-x-4 @md-page:w-auto","@lg-page:grid-cols-[var(--first-column)_var(--base-columns)]","grid-cols-[70px_90px_70px]"),style:{"--first-column":"minmax(0, 72px)","--base-columns":"minmax(0, 87px) 75px minmax(0, 120px) 60px 24px","--comment-column":"38px"},children:[(0,a.jsx)(tT,{href:C,...R,icon:(0,a.jsx)(tN.PreviewEye,{size:12}),label:"Preview"}),r&&r.unresolved>0?(0,a.jsx)(tT,{className:(0,i.default)("hidden @md-page:flex"),"data-type":"comments",href:C,icon:(0,a.jsx)(tw.Message,{color:"gray-900",size:12}),label:r.unresolved.toString()}):null,(0,a.jsx)(tT,{className:"!gap-0.5",href:b,icon:(0,a.jsx)("div",{className:"flex items-center h-[10px]",children:(0,a.jsx)(et.DeploymentStatus,{deployment:d,className:"-my-0.5 pl-0.5"})}),label:(0,a.jsx)("span",{className:"font-mono",children:(0,tL.getDeploymentHash)(c)})}),_?(0,a.jsx)(tT,{href:_,icon:(0,a.jsx)(tb.LogoGithub,{size:12}),label:E}):null,(0,a.jsxs)("div",{className:"relative hidden items-center gap-x-2 @lg-page:flex",children:[(0,a.jsx)(t_.CreatorAvatar,{deployment:c,size:20}),(0,a.jsx)("p",{className:"text-label-14 text-gray-900 truncate",children:!c.meta?.originalDeploymentId&&m?.commitAuthorLogin?m.commitAuthorLogin:c.creator?.username})]}),(0,a.jsx)("div",{className:"text-label-14 z-[2] hidden self-center whitespace-nowrap text-right text-gray-900 @lg-page:block",children:(0,a.jsx)(F.RelativeTimeCard,{date:c.createdAt,ignoreCardPointerEvents:!0,side:"top",children:(0,a.jsx)("p",{className:"text-label-14 text-gray-900",children:T})})}),(0,a.jsx)(u.DotsMenu,{iconSize:14,menuButtonClassName:"z-[2] !h-full place-self-end",children:(0,a.jsx)(tR,{buildLogsUrl:b,canReadDeployment:k,canUpdateDeployment:S,deploymentsLink:v,gitAlias:x,redeploy:()=>{s?.(c)},runtimeLogsUrl:y})})]})]})}),tT=e=>{let{href:t,linkProps:l,label:s,icon:n,className:r}=e;return(0,a.jsxs)(L.Link,{className:(0,i.default)("flex items-center gap-1.5 bg-background-100","border border-solid border-gray-200 px-1.5 pr-2 py-1 rounded-full","text-gray-900 [&>p]:text-gray-900 z-[2] size-fit","hover:bg-gray-100 hover:border-gray-500","hover:text-gray-1000","group-has-[.link-overlay:hover]/branch-row:border-gray-500",r),href:t,...l,children:[n,(0,a.jsx)("p",{className:"text-label-12 !text-current",children:s})]})};function tR(e){let{canReadDeployment:t,canUpdateDeployment:l,deploymentsLink:i,gitAlias:s,redeploy:n,buildLogsUrl:r,runtimeLogsUrl:o}=e,c=(0,b.useToasts)();return(0,a.jsxs)(a.Fragment,{children:[l?(0,a.jsx)(g.MenuItem,{onClick:()=>{n(),k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentRedeployClicked,{},{send_to:{data_warehouse_legacy:!0}})},children:"Redeploy"}):null,t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.MenuItem,{href:i,isLink:!0,onClick:()=>k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewBuildLogsClicked,{},{send_to:{data_warehouse_legacy:!0}}),shouldOnClickWhenLink:!0,children:"View All Deployments"}),(0,a.jsx)(g.MenuItem,{href:r,isLink:!0,onClick:()=>k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewBuildLogsClicked,{},{send_to:{data_warehouse_legacy:!0}}),shouldOnClickWhenLink:!0,children:"View Build Logs"}),(0,a.jsx)(g.MenuItem,{href:o,isLink:!0,onClick:()=>k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentViewRuntimeLogsClicked,{},{send_to:{data_warehouse_legacy:!0}}),shouldOnClickWhenLink:!0,children:"View Runtime Logs"}),(0,a.jsx)(g.MenuItem,{onClick:()=>{(0,tC.copyToClipboard)(s),c.message("Copied deployment url to clipboard!"),k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesDeploymentCopyBranchUrlClicked,{},{send_to:{data_warehouse_legacy:!0}})},suffix:(0,a.jsx)(tv.Copy,{}),children:"Copy Branch URL"})]}):null,t&&l?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tf.MenuDivider,{}),l?null:(0,a.jsx)(tj.MenuItemLocked,{children:"Redeploy"}),t?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tj.MenuItemLocked,{children:"View Build Logs"}),(0,a.jsx)(tj.MenuItemLocked,{children:"View Runtime Logs"}),(0,a.jsx)(tj.MenuItemLocked,{children:"View Source"}),(0,a.jsx)(tj.MenuItemLocked,{children:"Copy Branch URL"})]})]})]})}var tI=e.i(4173901),tD=e.i(850302),tP=e.i(9365163),tA=e.i(424862),tz=e.i(1754766),tB=e.i(8610291),tM=e.i(4826121);function tV(e){let{widths:t=[50,15,10]}=e;return(0,a.jsxs)("div",{className:"relative flex flex-col justify-between gap-3 px-4 py-3.5 first:rounded-t-sm last:rounded-b-sm @md-page:flex-row @md-page:items-center @md-page:gap-2","data-testid":(0,S.tid)("deployments","deployment-entity","no-uid"),children:[(0,a.jsxs)("div",{className:"flex grow flex-col gap-2 @md-page:flex-row @md-page:items-center",children:[(0,a.jsx)(tS.GitBranch,{className:"hidden @md-page:inline-block",color:"gray-900",size:16}),(0,a.jsx)(j.Skeleton,{height:20,width:`${t[0]}%`})]}),(0,a.jsxs)("div",{className:"flex min-w-64 items-center gap-2",children:[(0,a.jsx)(j.Skeleton,{className:"rounded-full",height:20,width:73.2}),(0,a.jsx)(j.Skeleton,{className:"rounded-full",height:20,width:71.02}),(0,a.jsx)(j.Skeleton,{className:"rounded-full",height:20,width:90.08}),(0,a.jsx)("span",{className:"ml-auto",children:(0,a.jsx)(j.Skeleton,{height:20,width:24})})]})]})}function tU(){return(0,a.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial px-6 pt-9 pb-6 geist-wrapper",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start @lg-page:justify-between gap-3 flex-initial",children:[(0,a.jsx)(j.Skeleton,{height:26,width:245}),(0,a.jsxs)("div",{className:"flex flex-col @lg-page:flex-row items-stretch justify-start gap-2 flex-initial w-full",children:[(0,a.jsx)(j.Skeleton,{height:40,style:{flexGrow:0,flexShrink:1},width:"100%"}),(0,a.jsx)(j.Skeleton,{className:"!w-full @md-page:!w-[192px]",height:40})]})]}),(0,a.jsx)(E.EntityGroup,{children:(0,a.jsxs)("div",{className:"flex flex-col !divide-solid rounded-md bg-background-100 !divide-x-0 !divide-y !divide-gray-alpha-400",children:[(0,a.jsx)(tV,{widths:[50,15,8]}),(0,a.jsx)(tV,{widths:[60,20,6]}),(0,a.jsx)(tV,{widths:[40,25,10]}),(0,a.jsx)(tV,{widths:[30,20,8]}),(0,a.jsxs)("div",{className:"hidden !divide-solid !divide-x-0 !divide-y !divide-gray-alpha-400 @md-page:contents",children:[(0,a.jsx)(tV,{widths:[70,25,10]}),(0,a.jsx)(tV,{widths:[60,15,12]}),(0,a.jsx)(tV,{widths:[30,20,8]}),(0,a.jsx)(tV,{widths:[40,15,8]}),(0,a.jsx)(tV,{widths:[50,25,6]}),(0,a.jsx)(tV,{widths:[70,20,10]})]})]})})]})}var tF=e.i(762945),tO=e.i(4141852),t$=e.i(2375916),tH=e.i(3814652),tX=e.i(818351),tG=e.i(7712782),tW=e.i(4689018),tq=e.i(5481907),tZ=e.i(8114130),tY=e.i(8778858),tQ=e.i(9334638);let tK=(0,tQ.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 9.67054V23.8179c0 3.7199 2.0648 7.1323 5.3599 8.8583L20 36.0889l6.5151-3.4127c3.2951-1.726 5.3599-5.1384 5.3599-8.8583V9.67054c-.6207-.181-1.2899-.35565-2.002-.54153-.3642-.09504-.7396-.19301-1.1254-.29626-1.4625-.39131-3.0324-.84866-4.4687-1.47955-1.4334-.62958-2.8155-1.46629-3.844-2.66311-.1542-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0285 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0062 1.08824-4.4687 1.47955-.3858.10325-.7612.20122-1.1254.29626-.71213.18588-1.38133.36053-2.002.54153ZM18.75 0c0 1.31808-.4156 2.28639-1.0809 3.06066-.6904.80329-1.6991 1.4527-2.9534 2.00361-1.2512.54961-2.6657.96712-4.1095 1.35344-.344.09206-.69287.18307-1.0417.27408-1.07623.28078-2.15211.56146-3.08478.87236l-.85472.2849V23.8179c0 4.6498 2.58096 8.9154 6.6999 11.0729l7.0951 3.7165.58.3038.58-.3038 7.0951-3.7165c4.1189-2.1575 6.6999-6.4231 6.6999-11.0729V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236-.3488-.09101-.6977-.18202-1.0417-.27408-1.4438-.38632-2.8583-.80383-4.1095-1.35344-1.2543-.55091-2.263-1.20032-2.9534-2.00361C21.6656 2.28639 21.25 1.31808 21.25 0h-2.5Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),tJ=(0,tQ.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361Zm9.7773 14.07324.8839-.8839-1.7678-1.7678-.8839.8839-9.1161 9.1161-2.2411-2.2411-.8839-.8839-1.7678 1.7678.8839.8839 3.125 3.125c.4882.4881 1.2796.4881 1.7678 0l10-10Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),t0=(0,tQ.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.22355 7.04658 3.38991 2.27895l-.88994-.87778L.720093 3.15674l.889937.87778L36.1782 38.1306l.8899.8778 1.7799-1.7556-.89-.8778-5.6898-5.6122c1.3492-2.0194 2.1068-4.4257 2.1068-6.9449V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236l-.0002-.00005c-.3488-.09099-.6976-.18199-1.0416-.27403-1.4437-.38632-2.8582-.80383-4.1095-1.35344-1.2542-.55091-2.2629-1.20032-2.9533-2.00361C21.6655 2.28639 21.25 1.31808 21.25 0h-2.5c0 1.31808-.4156 2.28639-1.081 3.06066-.6903.80329-1.699 1.4527-2.9533 2.00361-1.2513.54961-2.6657.96712-4.1095 1.35344-.344.09204-.69277.18304-1.04153.27403l-.00019.00005c-.45054.11754-.901.23506-1.34093.35479Zm2.06775 2.03954L30.4474 28.967c.9176-1.5276 1.4276-3.3004 1.4276-5.1491V9.67054c-.6207-.181-1.2899-.35565-2.0021-.54153l-.0002-.00006c-.3641-.09502-.7394-.19297-1.1252-.2962-1.4624-.39131-3.0323-.84866-4.4687-1.47955-1.4333-.62958-2.8154-1.46629-3.8439-2.66311-.1543-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0286 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0063 1.08824-4.4687 1.47955-.3281.08779-.6486.17177-.9611.25337ZM5.62497 12.5712l2.5 2.4659v8.7808c0 3.7199 2.06473 7.1323 5.35993 8.8583L20 36.0889l6.1841-3.2393 1.8635 1.838c-.1227.0697-.2469.1374-.3725.2032L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165c-4.11897-2.1575-6.69993-6.4231-6.69993-11.0729V12.5712Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),t1=(0,tQ.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361ZM21.25 12.5l-.3125 10h-1.875l-.3125-10h2.5Zm0 13.75c0 .6904-.5596 1.25-1.25 1.25s-1.25-.5596-1.25-1.25S19.3096 25 20 25s1.25.5596 1.25 1.25Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),t2=(0,tQ.withNewIcon)(`
<mask id="a" fill="#fff">
  <path
    fill-rule="evenodd"
    d="M1.25 0C.56 0 0 .56 0 1.25v11c0 .69.56 1.25 1.25 1.25H4.5V12h-3V9.5H6v-4h10V1.25C16 .56 15.44 0 14.75 0zM4.5 8h-3V5.5h3zm-3-4h3V1.5h-3zM6 4V1.5h4V4zm5.5 0h3V1.5h-3zm1.73 8c-.03.815-.136 1.628-.318 2.428a3.25 3.25 0 0 0 1.8-2.428zm-1.425 2.736a3.3 3.3 0 0 1-.61 0A12.2 12.2 0 0 1 10.77 12h1.46a12.2 12.2 0 0 1-.425 2.736M13.23 11a13 13 0 0 0-.319-2.428 3.25 3.25 0 0 1 1.8 2.428zm-1.001 0a12.2 12.2 0 0 0-.425-2.736 3.3 3.3 0 0 0-.61 0A12.2 12.2 0 0 0 10.77 11zm-2.46 0c.03-.815.136-1.628.318-2.428A3.25 3.25 0 0 0 8.288 11zm.318 3.428c-.182-.8-.288-1.613-.319-2.428H8.29a3.25 3.25 0 0 0 1.799 2.428M11.5 16a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"
    clip-rule="evenodd"
  />
</mask>
<path
  fill="currentColor"
  fill-rule="evenodd"
  d="M1.25 0C.56 0 0 .56 0 1.25v11c0 .69.56 1.25 1.25 1.25H4.5V12h-3V9.5H6v-4h10V1.25C16 .56 15.44 0 14.75 0zM4.5 8h-3V5.5h3zm-3-4h3V1.5h-3zM6 4V1.5h4V4zm5.5 0h3V1.5h-3zm1.73 8c-.03.815-.136 1.628-.318 2.428a3.25 3.25 0 0 0 1.8-2.428zm-1.425 2.736a3.3 3.3 0 0 1-.61 0A12.2 12.2 0 0 1 10.77 12h1.46a12.2 12.2 0 0 1-.425 2.736M13.23 11a13 13 0 0 0-.319-2.428 3.25 3.25 0 0 1 1.8 2.428zm-1.001 0a12.2 12.2 0 0 0-.425-2.736 3.3 3.3 0 0 0-.61 0A12.2 12.2 0 0 0 10.77 11zm-2.46 0c.03-.815.136-1.628.318-2.428A3.25 3.25 0 0 0 8.288 11zm.318 3.428c-.182-.8-.288-1.613-.319-2.428H8.29a3.25 3.25 0 0 0 1.799 2.428M11.5 16a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"
  clip-rule="evenodd"
/>
<path
  fill="currentColor"
  d="M4.5 13.5V15L6 13.5zm0-1.5H6l-1.5-1.5zm-3 0H0l1.5 1.5zm0-2.5V8L0 9.5zm4.5 0V11l1.5-1.5zm0-4V4L4.5 5.5zm10 0V7l1.5-1.5zM1.5 8H0l1.5 1.5zm3 0v1.5L6 8zm-3-2.5V4L0 5.5zm3 0H6L4.5 4zm0-1.5v1.5L6 4zm-3 0H0l1.5 1.5zm3-2.5H6L4.5 0zm-3 0V0L0 1.5zm4.5 0V0L4.5 1.5zM6 4H4.5L6 5.5zm4-2.5h1.5L10 0zM10 4v1.5L11.5 4zm4.5 0v1.5L16 4zm-3 0H10l1.5 1.5zm3-2.5H16L14.5 0zm-3 0V0L10 1.5zM13.23 12v-1.5l-1.498 1.443zm-.318 2.428-1.463-.332 2.116 1.682zm1.8-2.428 1.482.229-1.482-1.729zm-2.907 2.736.139 1.494 1.307-1.098zm-.61 0-1.446.396 1.307 1.098zM10.77 12v-1.5l-1.499 1.561zm1.46 0 1.499.061L12.23 10.5zm.682-3.428.653-1.35-2.115 1.682zM13.231 11l-1.5.057 1.5 1.443zm1.48 0v1.5l1.483-1.729zm-2.481 0v1.5l1.499-1.561zm-.425-2.736 1.446-.396-1.307-1.097zm-.61 0-.139-1.493L9.75 7.868zM10.77 11l-1.499-.061L10.77 12.5zm-.682-2.428 1.463.332-2.116-1.682zM9.769 11v1.5l1.5-1.443zm-1.48 0-1.483-.229L8.288 12.5zm1.48 1 1.5-.057-1.5-1.443zm.319 2.428-.653 1.35 2.115-1.682zM8.288 12v-1.5l-1.482 1.729zM1.5 1.25a.25.25 0 0 1-.25.25v-3A2.75 2.75 0 0 0-1.5 1.25zm0 11v-11h-3v11zM1.25 12a.25.25 0 0 1 .25.25h-3A2.75 2.75 0 0 0 1.25 15zm3.25 0H1.25v3H4.5zM3 12v1.5h3V12zm-1.5 1.5h3v-3h-3zM0 9.5V12h3V9.5zM5.25 8H1.5v3h3.75zM6 8h-.75v3H6zm-1.5.75v.75h3v-.75zm0-3.25v3.25h3V5.5zM15.25 4H6v3h9.25zM16 4h-.75v3H16zm-1.5.75v.75h3v-.75zm0-3.5v3.5h3v-3.5zm.25.25a.25.25 0 0 1-.25-.25h3a2.75 2.75 0 0 0-2.75-2.75zm-13.5 0h13.5v-3H1.25zm.25 8h3v-3h-3zM0 5.5V8h3V5.5zM4.5 4h-3v3h3zM6 8V5.5H3V8zM4.5 2.5h-3v3h3zM3 1.5V4h3V1.5zM1.5 3h3V0h-3zM3 4V1.5H0V4zm1.5-2.5V4h3V1.5zM10 0H6v3h4zm1.5 4V1.5h-3V4zM6 5.5h4v-3H6zm8.5-3h-3v3h3zm-1.5-1V4h3V1.5zM11.5 3h3V0h-3zM13 4V1.5h-3V4zm-1.268 7.943a11.7 11.7 0 0 1-.282 2.153l2.925.664c.202-.891.32-1.796.355-2.703zm1.497-.172a1.75 1.75 0 0 1-.97 1.306l1.306 2.701a4.75 4.75 0 0 0 2.63-3.55zm.002 1.729h1.48v-3h-1.48zm-1.565-.258a2 2 0 0 1-.166.008v3q.224 0 .444-.02zm-.166.008a2 2 0 0 1-.166-.008l-.278 2.988q.22.02.444.02zm1.142 1.09a10.7 10.7 0 0 1-.373-2.401l-2.998.122a13.7 13.7 0 0 0 .478 3.072zm-1.872-.84h1.46v-3h-1.46zm2.481 1.633c.276-1.007.436-2.038.478-3.072l-2.998-.122a10.7 10.7 0 0 1-.373 2.4zm-1.801-6.23c.16.71.255 1.431.282 2.154l2.998-.114a14.7 14.7 0 0 0-.355-2.703zm4.744 1.868a4.75 4.75 0 0 0-2.629-3.55L12.26 9.924c.51.246.88.733.97 1.306zM13.231 12.5h1.48v-3h-1.48zm.498-1.561a13.7 13.7 0 0 0-.478-3.071l-2.893.793c.216.787.34 1.592.373 2.4zM11.944 6.77a5 5 0 0 0-.444-.021v3q.084 0 .166.008zm-.444-.02q-.224 0-.444.02l.278 2.988a2 2 0 0 1 .166-.008zM9.749 7.868a13.7 13.7 0 0 0-.478 3.07l2.998.123c.033-.808.157-1.613.373-2.4zM10.77 12.5h1.46v-3h-1.46zM8.625 8.24c-.202.891-.32 1.796-.355 2.703l2.998.114a12 12 0 0 1 .282-2.153zm1.145 2.99c.088-.573.458-1.06.97-1.306L9.434 7.222a4.75 4.75 0 0 0-2.63 3.55zM9.769 9.5H8.29v3h1.48zM8.27 12.057c.035.907.153 1.812.355 2.703l2.925-.664q-.24-1.067-.282-2.153zm.018 1.443H9.77v-3H8.29zm2.452-.423a1.75 1.75 0 0 1-.97-1.306l-2.964.458a4.75 4.75 0 0 0 2.629 3.55zM14.5 11.5a3 3 0 0 1-3 3v3a6 6 0 0 0 6-6zm-3-3a3 3 0 0 1 3 3h3a6 6 0 0 0-6-6zm-3 3a3 3 0 0 1 3-3v-3a6 6 0 0 0-6 6zm3 3a3 3 0 0 1-3-3h-3a6 6 0 0 0 6 6z"
  mask="url(#a)"
/>`);var t5=e.i(199192),t3=e.i(6143247),t4=e.i(5287165);function t8(e){let{allowOverflow:t=!1,children:l,className:i=""}=e;return(0,a.jsx)("div",{className:(0,t3.cn)("flex flex-col isolate shadow-sm rounded-md bg-background-100 h-[240px]",i,t?"overflow-visible z-[1]":"overflow-hidden"),children:l})}function t9(e){let{className:t,children:l,duration:i,badge:s,href:n,onClick:r,title:o,titleElement:c,buttonIcon:d}=e;return(0,a.jsxs)("header",{className:`group relative z-[1] flex justify-between gap-x-0.5 px-4 py-3 pr-3 ${t}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-1.5 py-0.5",children:[(0,a.jsx)("p",{className:"text-label-14 m-0",children:c||(0,a.jsx)("strong",{children:o})}),s||null,i?(0,a.jsx)("time",{className:"text-label-14 m-0 text-gray-900",children:i}):null,l]}),n||r?(0,a.jsx)(L.ButtonLink,{"aria-label":"Go to page",className:"z-[2] !text-gray-800 group-hover:!text-gray-1000 group-[&:not(:has(a[target]:hover)):hover]:bg-gray-alpha-200",href:n??"#",prefetch:!1,prefetchStrategy:"hover",shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",onClick:()=>{(0,t4.track)("Project Card Clicked",{type:o}),r?.()},children:d||(0,a.jsx)(t5.ChevronRightSmall,{})}):null,n||r?(0,a.jsx)(L.Link,{className:"absolute inset-0 z-[1] block",href:n,tabIndex:-1,onClick:()=>{(0,t4.track)("Project Card Clicked",{type:o}),r?.()}}):null]})}function t6(e){let{children:t,className:l}=e;return(0,a.jsx)("div",{className:(0,t3.cn)("relative h-full",l),children:t})}function t7(e){let{icon:t,subtitle:l,cta:i}=e;return(0,a.jsxs)("div",{className:"flex h-5/6 flex-col items-center justify-center gap-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 text-gray-900",children:[t,(0,a.jsx)("p",{className:"text-label-14",children:l})]}),i]})}var ae=e.i(6675233),at=e.i(421794);function aa(e){let{config:t,rulesets:l}=e,i=(0,N.useParams)(),s=(0,at.botProtectionFromConfig)(t?.currentConfig),n=(0,at.botProtectionFromRulesets)(l),r=s?.active??n?.active,o=s?.action??n?.defaultAction;return(0,a.jsx)(L.Link,{canPrefetch:()=>!0,isDifferentZone:!1,href:i?.teamSlug&&i?.project?`/${i.teamSlug}/${i.project}/firewall/configure#bot-management`:"#",children:r?"log"===o?(0,a.jsx)(c.Badge,{icon:(0,a.jsx)(ae.Robot,{size:10}),size:"sm",variant:"gray-subtle",children:"Monitoring Bot Activity"}):(0,a.jsx)(c.Badge,{size:"sm",variant:"blue-subtle",icon:(0,a.jsx)(ae.Robot,{size:10,color:"blue-900"}),children:"Bot Protection Enabled"}):(0,a.jsx)(c.Badge,{size:"sm",variant:"pill",className:"",icon:(0,a.jsx)(ae.Robot,{size:10,color:"gray-900"}),children:"Enable Bot Protection"})})}var al=e.i(594750),ai=e.i(3774835),as=e.i(6060673);function an(e){let t=(0,N.useParams)();return(0,as.useProject)(t?.project,{config:e})}var ar=e.i(609109),ao=e.i(4723202);function ac(e){return new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0,compactDisplay:"short"}).format(e)}function ad(e){let{teamSlug:t,projectSlug:l}=e,{data:i,isLoading:s}=an(),{deployment:n,isLoading:r}=(0,eN.useProjectProductionDeployment)(l),{team:o}=(0,eX.useTeam)(t),{data:d,isLoading:u}=(0,tX.useIsomorphicSWR)(`${eG.API_FIREWALL}/proxy/status${(0,eW.encode)({teamId:t,projectId:l})}`),{data:m,isLoading:x,error:h,mutate:p}=(0,tD.default)(o&&i?`/api/firewall/project-overview-summary${(0,eW.encode)({ownerId:o.id,projectId:i.id})}`:null,e=>(0,ep.fetchAPI)(e,{throwOnHTTPError:!0})),{data:g,isLoading:f}=(0,tY.useAttackStatus)({teamId:t,projectId:l}),{activeConfig:j,isLoadingConfig:v}=(0,al.useFirewallConfig)({projectId:i?.id}),{data:y,isLoading:b}=(0,ai.useManagedRulesets)({projectIdOrName:l,teamIdOrSlug:t}),w=g?.anomalies.find(e=>"active"===e.state&&!e.endTime),N=(i?.latestDeployments??[]).length>0,S=!!(d&&d.length>0),k=i?.security?.attackModeEnabled??!1,C=(0,tZ.globalBypassStatus)(i),_=u&&!d||x&&!m||s&&!i||f&&!g||v&&!j||b&&!y||r&&!n,{can:E,isLoading:T}=(0,eB.default)();if(!E(eM.Action.Read,eM.Resource.SeawallConfig)&&!T)return(0,a.jsx)(aj,{});if(_||T)return(0,a.jsx)(af,{});if(h)return(0,a.jsx)(av,{onRetry:()=>{p()},projectSlug:l,teamSlug:t});if(!n)return(0,a.jsx)(ah,{hasDeployments:N,projectSlug:l,teamSlug:t});let R=null;return k?R=(0,a.jsx)(L.Link,{className:"z-[2] leading-none",external:!0,href:"/docs/attack-challenge-mode#attack-challenge-mode",icon:!1,children:(0,a.jsx)(c.Badge,{className:"border border-solid border-transparent transition hover:border-blue-400",icon:(0,a.jsx)(t$.Shield,{size:12}),size:"sm",variant:"blue-subtle",children:"Attack Mode active"})}):S?R=(0,a.jsx)(L.Link,{className:"z-[2] leading-none",external:!0,href:"/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment",icon:!1,children:(0,a.jsx)(c.Badge,{className:"border border-solid border-transparent transition hover:border-amber-400",icon:(0,a.jsx)(tF.Warning,{size:12}),size:"sm",variant:"amber-subtle",children:"Reverse Proxy Detected"})}):y&&(R=(0,a.jsx)(aa,{config:j,rulesets:y})),(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:w?.startTime?`Past ${String((0,tG.ago)(Date.now()-w.startTime,{suffix:" ",alwaysRelative:!0}))}`:"24h",href:`/${t}/${l}/firewall?range=1d`,title:"Firewall",children:R}),(0,a.jsx)(t6,{className:"flex items-center justify-center",children:w?(0,a.jsx)(ax,{anomaly:w}):C.enabled?(0,a.jsx)(am,{ttl:C.ttl}):(0,a.jsx)(ap,{summary:m})})]})}let au="flex flex-col gap-2 items-center justify-center relative mt-auto mb-9";function am(e){let{ttl:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ab,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"error"}),(0,a.jsxs)("div",{className:au,children:[(0,a.jsx)("p",{className:"text-label-14 font-medium text-red-900",children:"System Mitigations Disabled"}),(0,a.jsx)("p",{className:"text-label-14 font-medium",children:"You are susceptible to attacks"}),t?(0,a.jsxs)("p",{className:"text-label-14",children:["Until ",(0,ar.formatDateAndTime)(1e3*t)]}):""]})]})}function ax(e){let{anomaly:t}=e,l=(0,tW.useQuerySelect)({action:"all",filter:"sys_dos_mitigation",groupBy:"wafAction",range:`${new Date().getTime()-t.startTime}ms`}),{data:i,isLoading:s}=(0,tq.useSonarLiveQuery)({...l,summaryOnly:!0}),n=i?.summary.reduce((e,t)=>(e[t.wafAction]=t.value??0,e),{});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ab,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"warning"}),(0,a.jsxs)("div",{className:au,children:[(0,a.jsx)("p",{className:"text-label-14 font-medium text-amber-900",children:"DDoS attack is being mitigated"}),s?(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(j.Skeleton,{height:20,width:120}),(0,a.jsx)(j.Skeleton,{height:20,width:120})]}):(0,a.jsx)(ag,{summary:n})]})]})}function ah(e){let{teamSlug:t,projectSlug:l,hasDeployments:i}=e;return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{href:`/${t}/${l}/firewall?range=1d`,title:"Firewall"}),(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsxs)("div",{className:"relative -top-5 flex items-center gap-2 text-gray-900",children:[(0,a.jsx)(tO.FirewallFlame,{}),(0,a.jsx)("p",{className:"text-label-14 font-medium text-gray-900",children:i?"Firewall is active":"No live deployments"})]})})]})}function ap(e){let{summary:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ab,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"success"}),(0,a.jsxs)("div",{className:au,children:[(0,a.jsx)("p",{className:"text-label-14 font-medium text-blue-900",children:"Firewall is active"}),t&&0===t.deny&&0===t.challenge?(0,a.jsx)("p",{className:"text-copy-14",children:"All systems are normal"}):(0,a.jsx)(ag,{summary:t})]})]})}function ag(e){let{summary:t}=e;return(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2",children:[t?.deny&&t.deny>0?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(tH.ShieldOff,{color:"gray-900"}),(0,a.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:[ac(t.deny)," denied"]})]}):null,t?.challenge&&t.challenge>0?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(t$.Shield,{color:"gray-900"}),(0,a.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:[ac(t.challenge)," challenged"]})]}):null]})}function af(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:"24h",title:"Firewall",children:(0,a.jsx)(j.Skeleton,{height:24,width:160})}),(0,a.jsxs)("div",{className:"relative h-[188px] pt-[115px]",children:[(0,a.jsx)(ab,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"disabled"}),(0,a.jsxs)("div",{className:au,children:[(0,a.jsx)(j.Skeleton,{height:20,width:150}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(j.Skeleton,{height:20,width:120}),(0,a.jsx)(j.Skeleton,{height:20,width:120})]})]})]})]})}function aj(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{title:"Firewall"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{icon:(0,a.jsx)(s.LockClosed,{}),subtitle:"You don't have access to firewall",cta:(0,a.jsx)(ao.RequestRoleButton,{teamRole:"MEMBER"})})})]})}function av(e){let{teamSlug:t,projectSlug:l,onRetry:i}=e;return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:"24h",href:`/${t}/${l}/firewall?range=1d`,title:"Firewall"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{cta:(0,a.jsx)(d.Button,{className:"text-label-14 font-medium",onClick:i,size:"small",type:"tertiary",children:"Retry"}),icon:(0,a.jsx)(t$.Shield,{}),subtitle:"We couldn't load the firewall data"})})]})}let ay={success:tJ,warning:t1,error:t0,disabled:tK};function ab(e){let{className:t,variant:l="success",icons:s,iconSize:n=40}=e,r=s?.[l]||ay[l];return(0,a.jsx)("div",{className:(0,i.clsx)("p-[10px]",t,{"text-blue-700 [--status-badge-circle-color:var(--ds-blue-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(15,27,45,0.37)_100%)]":"success"===l,"text-amber-700 [--status-badge-circle-color:var(--ds-amber-200)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(255,244,213,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(52,28,0,0.37)_100%)]":"warning"===l,"text-red-700 [--status-badge-circle-color:var(--ds-red-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.22)_49.5%,rgba(255,240,240,0.22)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.22)_49.5%,rgba(42,19,20,0.22)_100%)]":"error"===l,"text-gray-700 [--status-badge-circle-color:var(--ds-gray-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:none]":"disabled"===l}),children:(0,a.jsxs)("div",{className:"relative isolate flex items-center justify-center",children:[(0,a.jsx)(aw,{className:"p-[182px] opacity-50"}),(0,a.jsx)(aw,{className:"p-[115px] opacity-50"}),(0,a.jsx)(aw,{className:"p-[50px]"}),(0,a.jsx)(r,{className:"z-10",size:n})]})})}function aw(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,i.clsx)(t,"absolute block size-0 rounded-full border border-solid text-[var(--status-badge-circle-color)] [background:var(--status-badge-background-gradient)]")})}var aN=e.i(2640326),aS=e.i(5005572),ak=e.i(8119470),aC=e.i(4826595),a_=e.i(7946377),aL=e.i(9028632),aE=e.i(4394132),aT=e.i(2442931),aR=e.i(2979333),aI=e.i(8633387),aD=e.i(85322),aP=e.i(9161090);let aA={good:"green-subtle",bad:"red-subtle",neutral:"gray-subtle","no-data":"gray-subtle"},az={ssr:{timeout:3e3}};function aB(e){let{teamSlug:t,projectSlug:l}=e,{data:i,isLoading:s}=(0,aI.useDashboardProject)({teamSlug:t,projectSlug:l});return s||!i?(0,a.jsx)(aU,{}):(0,aD.isFeatureEnabled)(i.webAnalytics)?(0,a.jsx)(aV,{project:i,teamSlug:t}):(0,a.jsx)(aM,{project:i,teamSlug:t})}function aM(e){let{project:t,teamSlug:l}=e,i=(0,aT.useCanToggleWebAnalytics)();return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{href:`/${l}/${t.name}/analytics`,title:"Analytics"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{cta:(0,a.jsx)(L.ButtonLink,{className:"text-label-14 font-medium",disabled:!i,href:`/${l}/${t.name}/analytics?enable=1&source=project-overview-analytics-card`,size:"small",type:"tertiary",children:"Enable"}),icon:(0,a.jsx)(aN.Analytics,{}),subtitle:"Track visitors and page views"})})]})}function aV(e){let{teamSlug:t,project:l}=e,i=(0,aC.getRangeFromPeriod)("7d"),{data:s,isLoading:n,error:r,mutate:o}=(0,tX.useIsomorphicSWR)(`/api/web-analytics/overview${(0,eW.encode)({from:i.from.toISOString(),to:i.to.toISOString(),teamId:t,projectId:l.name})}`,az),{data:d}=(0,tX.useIsomorphicSWR)(`/api/web-analytics/overview${(0,eW.encode)({from:(0,ak.subDays)(i.from,7).toISOString(),to:(0,ak.subDays)(i.to,7).toISOString(),teamId:t,projectId:l.name})}`,az),{data:u,isLoading:m}=(0,tX.useIsomorphicSWR)(`/api/web-analytics/timeseries${(0,eW.encode)({from:i.from.toISOString(),to:i.to.toISOString(),teamId:t,projectId:l.name,tz:(0,a_.getClientTimezone)()})}`,az),{data:x,isLoading:h}=(0,tX.useIsomorphicSWR)(`/api/web-analytics/realtime${(0,eW.encode)({teamId:t,projectId:l.name})}`,{...az,refreshInterval:1e4});if(n&&!s||m&&!u)return(0,a.jsx)(aU,{});if(r)return(0,a.jsx)(aO,{onRetry:()=>{o()},projectSlug:l.name,teamSlug:t});let p=s?.devices??0,g=(0,aR.getPercentageTrend)(d?.devices??0,p),f=!!l.webAnalytics?.hasData;return(0,a.jsxs)(t8,{className:"relative after:pointer-events-none after:absolute after:inset-0 after:rounded-md after:border after:border-solid after:border-[#fff]/15 after:content-[''] dark:after:hidden",children:[(0,a.jsx)(t9,{duration:"1w",href:`/${t}/${l.name}/analytics`,title:"Analytics"}),(0,a.jsxs)(t6,{children:[(0,a.jsxs)("div",{className:"flex min-h-[44px] flex-col justify-between gap-1 px-4",children:[(0,a.jsxs)("div",{className:"flex h-[20px] items-center gap-2.5 overflow-visible",children:[f?(0,a.jsxs)("p",{className:"text-label-14 font-medium",children:[new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1,compactDisplay:"short"}).format(p)," Visitors"]}):(0,a.jsx)("p",{className:"text-label-14 text-gray-900",children:"No data"}),"no-data"!==g.type?(0,a.jsxs)(c.Badge,{variant:aA[g.type],children:[g.value,g.unit]}):null]}),(0,a.jsx)(aP.VisitorCount,{count:x?.devices??0,loading:h})]}),(0,a.jsx)("div",{className:"mt-2.5 h-[138px] w-full",children:(0,a.jsx)(aS.ParentSize,{children:e=>{let{width:t,height:l}=e;return(0,a.jsx)(aL.Graph,{data:u?.data??{groups:{},groupCount:0},height:l,margin:{top:0,left:0,right:0,bottom:0},range:i,type:aE.AnalyticsType.Visitors,variant:"minimal",width:t})}})})]})]})}function aU(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:"1w",title:"Analytics"}),(0,a.jsx)(t6,{children:(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-1 px-4",children:[(0,a.jsxs)("div",{className:"flex gap-2.5",children:[(0,a.jsx)(j.Skeleton,{height:20,width:100}),(0,a.jsx)(j.Skeleton,{height:20})]}),(0,a.jsx)(j.Skeleton,{height:20,width:100})]})})]})}function aF(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{title:"Analytics"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{icon:(0,a.jsx)(s.LockClosed,{}),subtitle:"You don't have access to analytics",cta:(0,a.jsx)(ao.RequestRoleButton,{teamRole:"MEMBER"})})})]})}function aO(e){let{teamSlug:t,projectSlug:l,onRetry:i}=e;return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:"1w",href:`/${t}/${l}/analytics`,title:"Analytics"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{cta:(0,a.jsx)(d.Button,{className:"text-label-14 font-medium",onClick:i,size:"small",type:"tertiary",children:"Retry"}),icon:(0,a.jsx)(aN.Analytics,{}),subtitle:"We couldn't load analytics data"})})]})}var a$=e.i(1192207),aH=e.i(5182595),aX=e.i(8443460),aG=e.i(6062041),aW=e.i(3851902);function aq(e){let{teamSlug:t,projectSlug:i}=e,s=(0,l.useRef)((0,a$.subHours)(new Date,6)),n=(0,l.useRef)(new Date),r=s.current,o=n.current,{data:c,isLoading:d}=(0,tq.useSonarQuery)({event:"incomingRequest",reason:"project_overview_card",granularity:{minutes:15},rollups:{count:{measure:"count",aggregation:"sum"}},startTime:r,endTime:o},{disableRefetch:!0}),{data:u,isLoading:m,isRelativeTime:x}=(0,tq.useSonarQuery)({event:"serverlessFunctionInvocation",reason:"project_overview_card",granularity:{minutes:15},rollups:{total:{measure:"count",aggregation:"sum"},errors:{measure:"count",aggregation:"sum",filter:aX.SERVERLESS_DEFAULT_ERROR_FILTER},timeouts:{measure:"count",aggregation:"sum",filter:aX.SERVERLESS_TIMEOUT_FILTER}},limit:500,tailRollup:"truncate",summaryOnly:!1,startTime:r,endTime:o},{disableRefetch:!0}),h=c?.data?.map(e=>({name:e.timestamp.toISOString(),Requests:e.count}))??[],p=(0,l.useMemo)(()=>u?.data?u.data.map(e=>{let{timestamp:t,errors:a,timeouts:l,total:i}=e;return{name:t.toISOString(),Error:0===i?null:(0,aG.calculatePercentage)(a,i),Timeout:0===i?null:(0,aG.calculatePercentage)(l,i)}}):[],[u?.data]),g=Math.max(...p.flatMap(e=>[e.Error||0,e.Timeout||0])),f=Math.max(...h.map(e=>e.Requests)),j=(0,l.useMemo)(()=>u?.data?u.data.map(e=>{let{timestamp:t,total:a}=e;return{name:t.toISOString(),Invocations:a}}):[],[u?.data]);return(0,a.jsxs)(t8,{allowOverflow:!0,children:[(0,a.jsx)(t9,{duration:"6h",href:`/${t}/${i}/observability?period=6h`,title:"Observability"}),(0,a.jsx)(t6,{className:"px-4 pt-0",children:(0,a.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-4",children:[(0,a.jsx)(aZ,{isLoading:d,title:"Edge Requests",value:(0,a_.formatNumberCompact)(c?.summary[0]?.count??0)}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,a.jsx)(aH.LineChart,{data:h,sonarQueryResults:c,isLoading:d,isRelativeTime:x,emptyState:"",hideXAxis:!0,hideYAxis:!0,disableLegend:!0,disableZoom:!0,hideGrid:!0,syncId:"edge-requests",getColor:()=>"var(--geist-success)"})}),(0,a.jsx)(aZ,{isLoading:m,title:"Function Invocations",value:(0,a_.formatNumberCompact)(u?.summary[0]?.total??0)}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,a.jsx)(aH.LineChart,{data:j,sonarQueryResults:u,disableLegend:!0,disableZoom:!0,isLoading:m,isRelativeTime:x,syncId:"function-invocations",emptyState:"",hideXAxis:!0,hideYAxis:!0,hideGrid:!0,getColor:()=>"var(--geist-success)",...f>0?{yAxisDomain:[0,f]}:{}})}),(0,a.jsx)(aZ,{isLoading:m,title:"Error Rate",value:(0,aW.formatPercentage)(u?.summary[0]?.errors??0,u?.summary[0]?.total??0)}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,a.jsx)(aH.LineChart,{data:p,sonarQueryResults:u,disableLegend:!0,disableZoom:!0,emptyState:"",isLoading:m,isRelativeTime:x,getColor:e=>"Error"===e?"var(--geist-error)":"Timeout"===e?"var(--geist-warning)":"var(--geist-success)",syncId:"error-rate",hideXAxis:!0,hideTooltip:0===p.length,hideYAxis:!0,formatValue:aG.formatPercentageChart,hideGrid:!0,yAxisDomain:[0,Math.max(5,g)]})})]})})]})}function aZ(e){let{title:t,value:l,isLoading:i}=e;return(0,a.jsxs)("div",{className:"self-center",children:[(0,a.jsx)("div",{className:"whitespace-nowrap text-gray-800",children:t}),(0,a.jsx)("div",{className:"font-gray-1000 font-medium",children:i?(0,a.jsx)(j.Skeleton,{}):l})]})}function aY(){return(0,a.jsxs)(t8,{allowOverflow:!0,children:[(0,a.jsx)(t9,{duration:"6h",href:"#",title:"Observability"}),(0,a.jsx)(t6,{className:"px-4 pt-0",children:(0,a.jsxs)("div",{className:"tailwind grid grid-cols-[auto_1fr] gap-4",children:[(0,a.jsx)(aZ,{isLoading:!0,title:"Edge Requests",value:""}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"}),(0,a.jsx)(aZ,{isLoading:!0,title:"Function Invocations",value:""}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"}),(0,a.jsx)(aZ,{isLoading:!0,title:"Error Rate",value:""}),(0,a.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"})]})})]})}function aQ(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{title:"Observability"}),(0,a.jsx)(t6,{children:(0,a.jsx)(t7,{icon:(0,a.jsx)(s.LockClosed,{}),subtitle:"You don't have access to observability",cta:(0,a.jsx)(ao.RequestRoleButton,{teamRole:"MEMBER"})})})]})}var aK=e.i(7087273),aJ=e.i(8965799),a0=e.i(6318858);function a1(){return(0,a.jsxs)(t8,{children:[(0,a.jsx)(t9,{duration:"",title:"",titleElement:(0,a.jsx)(j.Skeleton,{height:20,width:100})}),(0,a.jsx)(t6,{children:(0,a.jsx)("div",{className:"pl-4",children:(0,a.jsx)(j.Skeleton,{height:20,width:200})})})]})}var a2=e.i(9658738),a5=e.i(3228096),a3=e.i(8664271),a4=e.i(1933683);let a8={type:"custom-domain-add",abbreviation:"cd",title:"Add Custom Domain",icon:(0,a.jsx)(a5.Globe,{}),description:"Buy a new domain or add an existing one to your project to serve production traffic from.",actionLabel:"Add",performAction:e=>{let{teamSlug:t,projectSlug:a}=e;window.open(`/${t}/${a}/settings/domains?source=prod-checklist`,"_blank","noopener")?.focus()}},a9={type:"git-repo-connect",abbreviation:"gr",title:"Connect Git Repository",icon:(0,a.jsx)(a3.Repositories,{}),description:"Get preview deployments for every push, and go live on your domain by merging to the production branch.",actionLabel:"Connect",performAction:e=>{let{teamSlug:t,projectSlug:a}=e;window.open(`/${t}/${a}/settings/git?source=prod-checklist`,"_blank","noopener")?.focus()}},a6={type:"observability-plus-enable",abbreviation:"op",title:"Enable Observability Plus",icon:(0,a.jsx)(a4.Eye,{}),description:"30 days retention, custom queries, anomaly alerts, and more.",actionLabel:"Enable",performAction:e=>{let{teamSlug:t}=e;window.open(`/${t}/~/observability?enableModal=show&source=prod-checklist`,"_blank","noopener")?.focus()}},a7={type:"preview-deployment-create",abbreviation:"pd",title:"Preview Deployment",icon:(0,a.jsx)(tN.PreviewEye,{}),description:"Create and push to a new branch to create a preview deployment that allows you to see your changes before going to production.",actionLabel:"Learn more",performAction:()=>{window.open("/docs/deployments/environments#preview-environment-pre-production","_blank","noopener")?.focus()}},le={type:"speed-insights-enable",abbreviation:"si",title:"Enable Speed Insights",icon:(0,a.jsx)(a2.Gauge,{}),description:"Monitor performance and Core Web Vitals to keep your site fast.",actionLabel:"Enable",performAction:e=>{let{teamSlug:t,projectSlug:a}=e;window.open(`/${t}/${a}/speed-insights?enable=1&source=prod-checklist`,"_blank","noopener")?.focus()}},lt={type:"web-analytics-enable",abbreviation:"wa",title:"Enable Web Analytics",icon:(0,a.jsx)(aN.Analytics,{}),description:"Gain insights into your website's visitors.",actionLabel:"Enable",performAction:e=>{let{teamSlug:t,projectSlug:a}=e;window.open(`/${t}/${a}/analytics?enable=1&source=prod-checklist`,"_blank","noopener")?.focus()}},la=[a9,a8,a7,lt,le],ll=[a9,a8,a7,lt,le,a6];function li(e){let{teamSlug:t,projectId:a}=e,{team:i,isLoading:s}=(0,eX.useTeam)(),{data:n,isLoading:r,mutate:o}=function(e){var t,a;let{teamSlug:l,projectId:i}=e,s=l&&i?(t=i,a=l,`/dashboard/projects/${t}/production-checklist?teamId=${a}`):null;return(0,tX.useIsomorphicSWR)(s,async(e,t)=>t(e),{dedupingInterval:1e3,revalidateIfStale:!0})}({teamSlug:t,projectId:a}),c=(0,l.useMemo)(()=>s||!i||i.billing?.plan==="hobby"?la:ll,[s,i]),d=(0,l.useMemo)(()=>c.map(e=>({main:e,fromApi:n?.items.find(t=>t.feature===e.type)})),[n?.items,c]),u=(0,l.useMemo)(()=>d.filter(e=>e.fromApi?.state==="completed"||e.fromApi?.state==="dismissed").length,[d]),m=(0,l.useCallback)((e,l)=>{t&&a&&o(()=>({items:[...n?.items.filter(t=>t.feature!==e)??[],{ownerId:t,projectId:a,feature:e,state:l,updatedAt:Date.now()}]}),{revalidate:!1})},[o,a,t,n]),x=(0,l.useCallback)(e=>{o(()=>({items:n?.items.filter(t=>t.feature!==e)??[]}),{revalidate:!1})},[o,n]),h=r||s;return{items:d,countCompleted:u,isAllCompleted:u===c.length,isLoading:h,mutate:o,optimisticUpdate:m,optimisticClear:x}}var ls=e.i(3869281),ln=e.i(5806401),lr=e.i(6942035),lo=e.i(2121538),lc=e.i(4161083);function ld(e,t){k.analytics.track(e,t,{send_to:{data_warehouse_legacy:!0,product_analytics:!0}})}function lu(e){let{open:t,onClose:i,teamSlug:s,projectSlug:n}=e,{items:r,countCompleted:o,isLoading:c,optimisticUpdate:u,optimisticClear:m}=li({teamSlug:s,projectId:n}),x=(0,l.useRef)(!1);(0,l.useEffect)(()=>{t&&!x.current&&(x.current=!0,ld(C.VercelActivityAction.ProdChecklistSheetShown,{})),t||(x.current=!1)},[t]);let h=(0,l.useCallback)(e=>{ld(C.VercelActivityAction.ProdChecklistItemActed,{itemType:e.type,ui:"sheet"}),e.performAction({teamSlug:s,projectSlug:n}),i?.()},[s,n,i]),p=(0,l.useCallback)(async e=>{ld(C.VercelActivityAction.ProdChecklistItemDismissed,{itemType:e}),u(e,"dismissed"),await (0,ep.fetchAPI)(`/dashboard/projects/${n}/production-checklist/${e}?teamId=${s}`,{method:"PATCH",body:{action:"dismiss"},throwOnHTTPError:!0})},[n,s,u]),g=(0,l.useCallback)(async e=>{m(e),await (0,ep.fetchAPI)(`/dashboard/projects/${n}/production-checklist/${e}?teamId=${s}`,{method:"PATCH",body:{action:"clear"},throwOnHTTPError:!0})},[n,s,m]);return c?null:(0,a.jsx)(ln.Sheet,{open:t,onOpenChange:e=>!e&&i?.(),modal:!1,children:(0,a.jsx)(ln.SheetContent,{className:"m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] overflow-hidden rounded-lg bg-white p-0 lg:w-3/4 sm:max-w-[800px]",side:"right",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"pt-2 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("div",{className:"flex w-full justify-end pr-2",children:(0,a.jsx)(ln.SheetClose,{asChild:!0,children:(0,a.jsx)(d.Button,{"aria-label":"Close",shape:"square",size:"medium",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(lr.Cross,{color:"gray-900"})})})}),(0,a.jsx)(ln.SheetHeader,{children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-6 text-center",children:[(0,a.jsx)(lx,{countCompleted:o,total:r.length}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(ln.SheetTitle,{children:"Production Checklist"}),(0,a.jsx)(ln.SheetDescription,{className:"text-label-14 text-gray-1000",children:"Get the most from Vercel as you prepare to take your project to productionâ€”review security and key feature settings."})]})]})})]})}),(0,a.jsx)(aK.Scroller,{className:"flex-1",scrollerClassName:"overscroll-contain",overflow:"y",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6 px-4 py-6",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:r.map(e=>(0,a.jsx)(lm,{item:e.main,state:e.fromApi?.state,onDismiss:()=>void p(e.main.type),onClear:()=>void g(e.main.type),onAction:()=>h(e.main)},e.main.type))}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-label-13 text-gray-900",children:"Further reading"}),(0,a.jsxs)(L.Link,{href:"/docs/production-checklist",external:!0,icon:!1,className:"flex items-center gap-3 border border-gray-alpha-400 rounded-[6px] pl-3 pr-5 py-2 hover:bg-gray-alpha-200",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-md bg-gray-alpha-100 text-gray-1000",children:(0,a.jsx)(lc.BookOpen,{})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-label-14 font-medium text-gray-1000",children:"Production checklist for launch"}),(0,a.jsx)("span",{className:"text-sm text-gray-1000",children:"This checklist is prepared by the Vercel engineering team and designed to help you prepare your.."})]})]})]})]})}),(0,a.jsx)(ln.SheetFooter,{className:"hidden sm:flex sm:justify-end border-t border-solid border-gray-alpha-400 gap-4 p-4",children:(0,a.jsx)(d.Button,{onClick:()=>i?.(),children:"Done"})})]})})})}function lm(e){let{item:t,state:l,onDismiss:i,onClear:s,onAction:n}=e,r="completed"===l,o="dismissed"===l,c=!r&&!o;return(0,a.jsxs)("div",{className:(0,t3.cn)("flex flex-col gap-3 rounded-md p-3",{"bg-gray-alpha-100":c||o,"bg-blue-300":r}),children:[(0,a.jsx)("div",{className:(0,t3.cn)("flex h-8 w-8 shrink-0 items-center justify-center rounded-md",{"bg-blue-400 text-blue-900":r,"bg-gray-alpha-100 text-gray-1000":!r}),onDoubleClick:s,children:t.icon}),(0,a.jsxs)("div",{className:(0,t3.cn)("flex flex-col",{"text-gray-1000":c||o,"text-blue-900":r,"line-through":r||o}),children:[(0,a.jsx)("span",{className:"text-label-14 font-medium",children:t.title}),(0,a.jsx)("span",{className:"text-sm",children:t.description})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Button,{onClick:n,size:"small",type:"secondary",children:t.actionLabel}),(0,a.jsx)(d.Button,{size:"small",type:"tertiary",onClick:i,children:"Skip"})]}):(0,a.jsx)(lh,{state:l,onClear:s})})]})}function lx(e){let{countCompleted:t,total:l}=e,i=l>0?Math.round(t/l*100):0;return(0,a.jsx)(ed.default,{size:"small",value:i,colors:{0:"var(--ds-blue-500)"},className:"text-blue-900",children:(0,a.jsx)(lo.DoubleCheck,{size:16})})}function lh(e){let{state:t,onClear:l}=e;return(0,a.jsx)(d.Button,{size:"small",type:"tertiary",className:(0,t3.cn)({"pointer-events-none !bg-blue-400 !text-blue-900":"completed"===t}),prefix:(0,a.jsx)(lp,{state:t}),onClick:"dismissed"===t?l:void 0,children:"completed"===t?"Done":"Skipped"})}function lp(e){let{state:t}=e;return(0,a.jsx)(ls.Checkbox,{checked:!0,readOnly:!0,iconClassName:(0,t3.cn)({"!bg-blue-900 !border-blue-900":"completed"===t})})}function lg(e){let{teamSlug:t,projectSlug:i}=e,[s,n]=(0,l.useState)(!1),r=(0,l.useRef)(!1),{items:o,countCompleted:d,isLoading:u}=li({teamSlug:t,projectId:i});(0,l.useEffect)(()=>{if(!r.current&&!u){r.current=!0;let e=o.filter(e=>e.fromApi);ld(C.VercelActivityAction.ProdChecklistCardShown,{count:e.length,items:e.map(e=>e.main.abbreviation).join(",")})}},[u,o]);let m=(0,l.useCallback)((e,a)=>{"completed"===a?n(!0):(ld(C.VercelActivityAction.ProdChecklistItemActed,{itemType:e.type,ui:"widget"}),e.performAction({teamSlug:t,projectSlug:i}))},[t,i]);return u?(0,a.jsx)(a1,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t8,{allowOverflow:!0,children:[(0,a.jsx)(t9,{badge:(0,a.jsx)(c.Badge,{size:"sm",variant:"gray-subtle",children:`${d}/${o.length}`}),title:"Production Checklist",buttonIcon:(0,a.jsx)(aJ.ArrowUpDiagonalScaleSmall,{}),onClick:()=>{ld(C.VercelActivityAction.ProdChecklistSheetOpenClicked,{}),n(e=>!e)}}),(0,a.jsx)(t6,{className:"px-4",children:(0,a.jsx)(aK.Scroller,{overflow:"y",height:190,childrenContainerClassName:"gap-1 ",children:o.map(e=>(0,a.jsx)(lf,{icon:e.main.icon,title:e.main.title,state:e.fromApi?.state,onClick:()=>m(e.main,e.fromApi?.state)},e.main.type))})})]}),(0,a.jsx)(lu,{open:s,onClose:()=>n(!1),teamSlug:t,projectSlug:i})]})}function lf(e){let{icon:t,title:l,state:i,onClick:s}=e,n="completed"===i,r="dismissed"===i;return(0,a.jsxs)("div",{className:(0,t3.cn)("flex items-center gap-3 py-2 pl-3 pr-2.5 rounded-[6px] cursor-pointer",{"bg-gray-alpha-100":!n,"bg-blue-300":n,"text-blue-900":n,"text-gray-900":!n}),role:"button",onClick:s,children:[t,(0,a.jsx)("span",{className:(0,t3.cn)("text-label-14 leading-5",{"line-through":n||r,"text-gray-1000":!n}),children:l}),n||r?(0,a.jsx)(a0.Check,{}):null]})}var lj=e.i(6280036),lv=e.i(9183349),ly=e.i(9317241),lb=e.i(3992079),lw=e.i(5579912),lN=e.i(5149014),lS=e.i(4994408),lk=e.i(1460262),lC=e.i(1829577),l_=e.i(5760285);function lL(e){let{ip:t,events:i}=e,[s,...n]=i,r=new Date(`${s.startTime}Z`).getTime(),o=n.reduce((e,t)=>e+t.count,s.count),c=(0,l.useMemo)(()=>{let e=(0,l_.formatRelativeTime)(r);return"now"===e?e:`${e} ago`},[r]);return s?(0,a.jsxs)("div",{className:"group flex *:py-1.5 *:shrink-0 *:last:mb-2 ml-2 mr-2 even:my-0.5",children:[(0,a.jsx)("div",{className:"p-2 pr-3 rounded-l-[6px] group-odd:bg-foreground/[2%] dark:group-odd:bg-foreground/[5%]",children:(0,a.jsx)(lT,{type:s.action})}),(0,a.jsxs)("div",{className:`
        flex grow justify-end items-center
        text-gray-900 text-right gap-1
        pr-2 rounded-r-[6px]
        group-odd:bg-foreground/[2%]
        dark:group-odd:bg-foreground/[5%]
        text-label-12
      `,children:[(0,a.jsx)("p",{className:"text-gray-900 tabular-nums",children:s.public_ip}),(0,a.jsx)("p",{children:"â€¢"}),(0,a.jsx)(F.RelativeTimeCard,{date:r,className:"cursor-default text-gray-900",children:c}),(0,a.jsx)("p",{className:"w-9 font-medium text-gray-1000",children:(0,a_.formatNumberCompact)(o)})]})]}):null}function lE(e){let{allEvents:t}=e,l=t.flatMap(e=>{let[,t]=e;return t});if(!l.length)return null;let i=l.reduce((e,t)=>e+t.count,0);return(0,a.jsxs)("div",{className:`
        flex gap-3 justify-between grow text-right items-center text-label-12
        px-2.5 py-1.5 mx-1.5 mb-1.5 rounded-[6px]
        tabular-nums
        odd:bg-foreground/[2%] dark:odd:bg-foreground/5
      `,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-gray-800",children:[(0,a.jsx)(H.PlusCircle,{size:14}),(0,a.jsxs)("span",{children:[l.length," Event",1===l.length?"":"s"]})]}),(0,a.jsx)("p",{className:"w-9 font-medium text-gray-800",children:(0,a_.formatNumberCompact)(i)})]})}function lT(e){let{type:t,className:l=""}=e;switch(t){case"challenge":return(0,a.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${l}`,children:[(0,a.jsx)(lC.FirewallCheck,{size:14}),(0,a.jsx)("span",{className:"text-label-12 font-medium",children:"Challenge"})]});case"block":case"deny":return(0,a.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${l}`,children:[(0,a.jsx)(tO.FirewallFlame,{size:14}),(0,a.jsx)("span",{className:"text-label-12 font-medium",children:"Deny"})]});case"system-action":return(0,a.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${l}`,children:[(0,a.jsx)(t2,{size:14}),(0,a.jsx)("span",{className:"text-label-12 font-medium",children:"System Action"})]});default:return(0,a.jsx)("p",{children:t})}}function lR(e){let{projectSlug:t,teamSlug:i}=e,s=(0,lw.useProxyModal)(),{loading:n,anomaly:r,globalBypass:o,challengeMode:c,deployment:d,events:u,reverseProxy:m}=function(e){let{teamSlug:t,projectSlug:a,onProxyClick:i}=e,s={teamId:t,projectId:a,size:"sm"},{data:n,isLoading:r}=an(),{isLoading:o,hasAnomaly:c}=(0,lN.useActiveAnomaly)(s),[d,u,m]=(0,lN.useGlobalBypass)(s),[x,h,p]=(0,lN.useReverseProxyBadge)({...s,onProxyClick:i}),[g,f,,j]=(0,lN.useACMBadge)(s),{deployment:v,isLoading:y}=(0,eN.useProjectProductionDeployment)(a),{current:[b,w]}=(0,l.useRef)([Date.now()-864e5,Date.now()]),{data:N,isLoading:S}=(0,lk.useFirewallEvents)({...s,startTime:b,endTime:w}),k=(0,lS.useLoadingStates)(r,o,m,p,j,y,S),C=(0,l.useRef)(!1);return S||(C.current=!0),{loading:k,project:n,anomaly:{has:c},globalBypass:{has:d,Badge:u},reverseProxy:{has:x,Badge:h},challengeMode:{has:g,Badge:f},deployment:{has:!!n?.latestDeployments?.length,hasProduction:!!v},events:{loading:{is:S,has:C.current},has:!!N?.actions.length,data:(0,lk.groupEventsByIp)(N?.actions??[])}}}({...e,onProxyClick:s.open}),x=(0,l.useMemo)(()=>{let[e,t,l,...i]=Object.entries(u.data);return u.loading.is&&!u.loading.has?(0,a.jsx)("div",{className:"flex m-3.5",children:(0,a.jsx)(j.Skeleton,{className:"!w-full",height:120})}):u.has?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lL,{ip:e[0],events:e[1]}),t?(0,a.jsx)(lL,{ip:t[0],events:t[1]}):null,l?(0,a.jsx)(lL,{ip:l[0],events:l[1]}):null,(0,a.jsx)(lE,{allEvents:i})]}):(0,a.jsx)("div",{className:"m-3.5 mt-0 h-[120px] rounded-[6px] bg-gray-100/50 dark:bg-[rgba(0,0,0,15%)] grid place-items-center text-gray-900",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 items-center text-label-13",children:[(0,a.jsx)(tO.FirewallFlame,{size:24}),(0,a.jsx)("p",{children:"No recent events"})]})})},[u]),{resolvedTheme:h}=(0,lj.useTheme)(),p=(0,l.useCallback)((e,t)=>e.includes("amber")?"dark"===h?"#2b1205":"#FFFBF5":e.includes("blue")?"dark"===h?"#0B1522":"#F5FAFF":e.includes("red")?"dark"===h?"#2A1314":"#FFF5F5":("production"!==lv.VERCEL_ENV&&console.warn(`Unknown color (\`${e}\`) for color function.`),e),[h]),g=(0,l.useMemo)(()=>o.has?(0,a.jsx)("p",{className:"text-red-700",children:"Inactive Â· System mitigations paused"}):r.has?(0,a.jsx)("p",{className:"text-amber-700",children:"Active Â· DDoS attacks are being mitigated"}):d.has?c.has?(0,a.jsx)("p",{className:"text-amber-900",children:"Active Â· All requests are being challenged"}):(0,a.jsx)("p",{className:"text-blue-700",children:"Active Â· All systems normal"}):(0,a.jsx)("p",{className:"text-gray-900",children:"No live deployments"}),[r.has,o.has,d.has,c.has]),f=(0,l.useMemo)(()=>o.has?"[&_strong]:!text-red-1000 [&_time]:!text-red-900":c.has?"[&_strong]:!text-amber-1000 [&_time]:!text-amber-900":"",[c.has,o.has]);return n.is&&!n.has?(0,a.jsx)(lI,{}):(0,a.jsxs)(ly.GradientPostureCard,{hasAnomaly:r.has,hasDeployments:d.has,hasChallengeMode:c.has,hasGlobalBypass:o.has,size:"sm",colorFunction:(e,t)=>p(e,t),className:"@container",children:[(0,a.jsx)(t9,{className:f,duration:"24h",href:`/${i}/${t}/firewall?range=1d`,title:"Firewall",children:m.has?(0,a.jsx)("div",{className:"ml-1.5 [--badge-bg:var(--ds-gray-alpha-300)] z-10",children:(0,a.jsx)(m.Badge,{})}):null}),(0,a.jsxs)("div",{className:"flex flex-col justify-between grow",children:[(0,a.jsx)("div",{className:"px-3.5 text-label-14 font-medium",children:g}),(0,a.jsx)(aK.Scroller,{childrenContainerClassName:"!flex-col min-w-[var(--min-size)]",className:"rounded-md",height:"auto",overflow:"x",children:x})]}),s.isOpen&&(0,a.jsx)(lb.ProxyImpactModal,{onClose:s.close,projectId:t,teamId:i})]})}function lI(){return(0,a.jsxs)(ly.GradientPostureCard,{hasAnomaly:!1,hasDeployments:!1,hasChallengeMode:!1,hasGlobalBypass:!1,size:"sm",children:[(0,a.jsx)(t9,{className:"[&>div]:w-full h-12",duration:"24h",title:"Firewall",children:(0,a.jsx)("div",{className:"ml-auto w-6 h-6 flex items-center justify-center",children:(0,a.jsx)(t5.ChevronRightSmall,{size:16,color:"gray-700"})})}),(0,a.jsxs)(t6,{className:"flex flex-col justify-between m-3.5 mt-0",children:[(0,a.jsx)(j.Skeleton,{width:200,height:20}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(j.Skeleton,{className:"!w-full",height:120})})]})]})}function lD(){let{project:e="",teamSlug:t=""}=(0,N.useParams)()??{};return(0,a.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-wrapper",children:(0,a.jsxs)("div",{className:(0,i.clsx)("mt-4 grid grid-cols-1 gap-4 @lg-page:grid-cols-3"),children:[(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(a1,{}),children:(0,a.jsx)(lM,{projectSlug:e,teamSlug:t})}),(0,a.jsx)(lA,{projectSlug:e,teamSlug:t}),(0,a.jsx)(lz,{projectSlug:e,teamSlug:t})]})})}function lP(e){let{teamSlug:t,projectSlug:i}=e,s=(0,eZ.useServerFlag)("esp-547",!1),n=(0,l.useCallback)(()=>s?(0,a.jsx)(lI,{}):(0,a.jsx)(af,{}),[s]),r=(0,l.useCallback)(e=>{let{projectSlug:t,teamSlug:l}=e;return s?(0,a.jsx)(lR,{projectSlug:t,teamSlug:l}):(0,a.jsx)(ad,{projectSlug:t,teamSlug:l})},[s]);return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(n,{}),children:(0,a.jsx)(r,{projectSlug:i,teamSlug:t})})}function lA(e){let{teamSlug:t,projectSlug:i}=e,{can:s,isLoading:n}=(0,eB.default)(),r=s(eM.Action.Read,eM.Resource.ObservabilityData);return n?(0,a.jsx)(aY,{}):(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(aY,{}),children:r?(0,a.jsx)(aq,{teamSlug:t,projectSlug:i}):(0,a.jsx)(aQ,{})})}function lz(e){let{teamSlug:t,projectSlug:i}=e,{can:s,isLoading:n}=(0,eB.default)(),r=s(eM.Action.Read,eM.Resource.WebAnalytics);return n?(0,a.jsx)(aU,{}):(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(aU,{}),children:r?(0,a.jsx)(aB,{projectSlug:i,teamSlug:t}):(0,a.jsx)(aF,{})})}function lB(e){let{teamSlug:t,projectSlug:i}=e;return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(a1,{}),children:(0,a.jsx)(lg,{teamSlug:t,projectSlug:i})})}function lM(e){let{teamSlug:t,projectSlug:i}=e,s=(0,eZ.useServerFlag)("enable-production-checklist",!1),{isLoading:n,isAllCompleted:r}=li({teamSlug:t,projectId:i}),o=(0,l.useRef)(!1);n||r||(o.current=!0);let c=r&&!o.current;return(0,a.jsxs)(a.Fragment,{children:[s?(0,a.jsx)(l.Activity,{mode:c?"hidden":"visible",children:(0,a.jsx)(lB,{teamSlug:t,projectSlug:i})}):null,(0,a.jsx)(l.Activity,{mode:s&&!c?"hidden":"visible",children:(0,a.jsx)(lP,{projectSlug:i,teamSlug:t})})]})}var lV=e.i(7132425),lU=e.i(3748432),lF=e.i(5709282),lO=e.i(588428),l$=e.i(4154812);function lH(e){let{project:t}=e,{team:l}=(0,eX.useTeam)(),{value:i}=(0,lO.useV0RBAC)(),s=(0,eZ.useServerFlag)("open-in-v0-dash-and-toolbar",!1),n=(0,eZ.useServerFlag)("open-in-v0-non-v0-projects",!1);return t&&l?(0,a.jsx)(l$.V0Badge,{project:t,teamSlug:l.slug,showOpenInV0Flag:s,showOpenInV0NonV0ProjectsFlag:n,hasV0RbacFlag:!!i}):null}var lX=e.i(7173923),lG=e.i(7017723);function lW(e){let{isLoadingDeployment:l,...s}=e,{data:n}=(0,td.default)(s.productionDeployment?.url);return!l&&n&&s.project&&s.productionDeployment?(0,a.jsx)(lq,{buildsData:n.builds,...s}):(0,a.jsx)("div",{className:(0,i.clsx)("flex flex-col items-stretch justify-start flex-initial","true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"@md-page:hidden":"geist-show-on-tablet"),children:(0,a.jsx)(u.DotsMenu,{})})}let lq=l.default.memo(e=>{let{project:l,productionDeployment:o,canRollbackDeployment:c,openRollbackModal:m,rollbackTooltip:x,buildLogsHref:h,runtimeLogsHref:p}=e,f=(0,N.useRouter)();if(null===o)return(0,a.jsx)("div",{style:{width:88}});let j="View Runtime Logs",v=null;return v=!c||x?(0,a.jsx)(y.Tooltip,{text:x||"You do not have permission to rollback this project",children:(0,a.jsx)(d.Button,{disabled:!0,size:"small",type:"secondary",children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[x?(0,a.jsx)(n.Stop,{color:"gray-500"}):(0,a.jsx)(s.LockClosed,{color:"gray-500"}),(0,a.jsx)("span",{children:"Instant Rollback"})]})})}):(0,a.jsx)(d.Button,{onClick:m,size:"small",type:"secondary",typeName:"button",children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,a.jsx)(r.RotateCounterClockwise,{}),(0,a.jsx)("span",{children:"Instant Rollback"})]})}),(0,a.jsx)("div",{className:"flex flex-col items-stretch justify-start",style:{marginTop:0,flex:"0 0 auto"},children:(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3",style:{flex:"0 0 auto"},children:[(0,a.jsxs)("div",{className:(0,i.clsx)("flex-row items-center justify-start gap-3","true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"hidden @lg-page:flex":"flex geist-hide-on-tablet"),style:{flex:"0 0 auto"},children:[(0,a.jsx)(L.ButtonLink,{href:h,size:"small",title:"View Build Logs",type:"secondary",children:"Build Logs"}),(0,a.jsx)(L.ButtonLink,{href:p,size:"small",title:j,type:"secondary",children:"Runtime Logs"})]}),(0,a.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-center justify-start gap-3",("true"===t.default.env.NEXT_PUBLIC_TESTMODE||"true"===t.default.env.NEXT_PUBLIC_TESTSERVER||"1"!==t.default.env.NEXT_PUBLIC_DASH)&&"geist-hide-on-tablet"),children:[v,"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?(0,a.jsx)(eQ.default,{hideOnMobile:!1,project:l,size:"small"}):null]}),(0,a.jsx)("div",{className:(0,i.clsx)("flex flex-row items-center justify-start flex-initial","true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?"@lg-page:hidden":"geist-show-on-tablet"),children:(0,a.jsxs)(u.DotsMenu,{children:[(0,a.jsx)(g.MenuItem,{onClick:()=>f.push(h),children:"View Build Logs"}),(0,a.jsx)(g.MenuItem,{"data-testid":(0,S.tid)("production-links","function-logs-button"),onClick:()=>f.push(p),children:j}),("true"===t.default.env.NEXT_PUBLIC_TESTMODE||"true"===t.default.env.NEXT_PUBLIC_TESTSERVER||"1"!==t.default.env.NEXT_PUBLIC_DASH)&&c?(0,a.jsx)(g.MenuItem,{onClick:m,prefix:(0,a.jsx)(r.RotateCounterClockwise,{}),children:"Instant Rollback"}):null]})})]})})});function lZ(e){let{branches:t,handleCancelDeployment:i,handleClickCreateAlias:s,handleClickRedeploy:n,project:r,productionDeploymentId:o}=e,[c]=function(e){let{projectId:t,branches:a=[]}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:s,team:n}=(0,eX.useTeam)(),r=(0,l.useRef)(new Map),o=(0,tD.default)(()=>t&&s&&0!==a.length?`/api/feedback/branch-state${(0,eW.encode)({projectId:t,teamId:n?.id,branch:a})}`:null,e=>fetch(e).then(e=>e.json()),i);return(0,l.useEffect)(()=>{if(o.data)for(let e of o.data)r.current.set(e.branch,e)},[o.data]),[(0,l.useMemo)(()=>{let e={};for(let t of a)e[t]=o.data?.find(e=>e.branch===t)??r.current.get(t);return e},[o.data,a]),o]}({projectId:r?.id,branches:t.map(e=>e.branch)});return(0,a.jsx)(a.Fragment,{children:t.map(e=>(0,a.jsx)(tE,{branch:e,feedbackState:c[e.branch],handleCancelDeployment:i,handleClickCreateAlias:s,isCurrentProductionDeployment:o===e.deployment.id,project:r,redeploy:n},e.deployment.id))})}function lY(e){let{repositoryButton:t,usageButton:i,domainsSettingsButton:s,visitButton:n}=e,r=(0,N.useParams)(),{promise:c}=(0,eC.useApi)(e_.getProjectOverview),d=(0,l.use)(c),u=`/${encodeURIComponent(r?.teamSlug??"")}/${encodeURIComponent(r?.project??"")}/settings/domains`,m=l0(d);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"block @md-page:hidden",children:(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[n,t,(0,a.jsxs)(p.MenuContainer,{children:[(0,a.jsx)(h.MenuButton,{"aria-label":"Menu",shape:"square",svgOnly:!0,type:"secondary",children:(0,a.jsx)(o.MoreHorizontal,{})}),(0,a.jsxs)(x.Menu,{children:[(0,a.jsx)(g.MenuItem,{href:u,isLink:!0,children:"Domains"}),m?(0,a.jsx)(g.MenuItem,{href:m,isLink:!0,children:"Usage"}):null]})]})]})}),(0,a.jsxs)("div",{className:"hidden @md-page:flex flex-wrap flex-row @md-page:flex-row @lg-page:flex-row-reverse items-stretch justify-start gap-4 flex-initial",children:[n,s,i,t]})]})}function lQ(e){let{rowLimit:t,project:i,projectIdOrName:s,teamSlug:n,isProjectLoading:r,cancelModal:o,rollbackModal:c}=e,[d,u]=(0,l.useState)(t),{data:x}=(0,ts.default)({project:i,limit:d}),[h,p]=(0,l.useState)(null),g=x?.aliases||h,{modal:f,open:j}=(0,e6.default)(i),{modal:y,open:b}=(0,e9.default)(s,i),N=(0,l.useCallback)((e,t)=>{t?b(e):j(e)},[b,j]),{filteredBranch:S,setFilteredBranch:_,clearBranch:L,showBranchFilterBar:T}=(0,tx.useProjectFilteredBranch)({project:i}),{isInitialStatusItems:D,selectedStatusItems:P,handleSelectStatusItem:A}=(0,th.useFilterStatus)(),[z,M]=(0,l.useState)(""),[V,{size:U,isLoading:F},O]=function(e){let{limit:t,project:a,users:l,readyStateFilter:i,branchSearch:s,branch:n}=e,r=!!a?.hasActiveBranches,o=(0,tp.useDeploymentsInfinite)({limit:t,project:r?void 0:a,requireProject:!0,users:l,target:"preview",branch:n,readyStateFilter:i},{refreshInterval:5e3}),c=(0,tg.useProjectDeployedBranches)({limit:t,project:r?a:void 0,includeDeploymentInfo:!0,active:!0,includeProductionBranch:!1,query:s,readyStateFilter:i},{refreshInterval:5e3,keepPreviousData:!0,revalidateFirstPage:!0,persistSize:!0});return r?[!0,...c]:[!1,...o]}({limit:t,project:i,branch:S??void 0,readyStateFilter:(0,th.getReadyStateFilter)(P),branchSearch:z}),{isLoadingMore:$,isReachingEnd:H,initialDataLoaded:X,isEmpty:G,loadMore:W,mutate:q}=O,[Z,Y]=(0,l.useState)(null),{data:Q}=(0,tn.default)(Z),K=(0,l.useCallback)(e=>{Y("uid"in e?e.uid:e.id)},[]),[J,ee]=(0,l.useState)(!1),et=(0,l.useCallback)(()=>{ee(!0)},[]),ea=(0,l.useCallback)(()=>{ee(!1)},[]);return(0,a.jsx)(a.Fragment,{children:i&&X?(0,a.jsxs)("div",{className:"max-w-full mx-auto w-[var(--geist-page-width-with-margin)] px-[var(--geist-page-margin)]",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Spacer,{y:1.5}),(0,a.jsxs)("div",{id:"preview-deployments",className:"flex flex-col items-stretch @lg-page:justify-between flex-initial",children:[(0,a.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:(0,a.jsx)("p",{className:"text-heading-20",children:V?"Active Branches":"Preview Deployments"})}),(0,a.jsx)(v.Spacer,{y:.5}),!!(!G||!D||S||z)&&(0,a.jsx)("div",{className:"flex flex-col @md-page:flex-row @lg-page:flex-row items-stretch justify-start flex-initial",children:V?(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 @md-page:flex-row",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(tI.DebouncedSearchInput,{disabled:G&&!z,loading:F&&z.length>0,onFocus:()=>k.analytics.track(C.VercelActivityAction.ProjectOverviewActiveBranchesSearchFocused,{},{send_to:{data_warehouse_legacy:!0}}),setSearch:M})}),(0,a.jsx)(th.default,{handleSelectStatusItem:A,menuButtonClassName:"w-full !justify-between @md-page:!justify-center @md-page:w-auto",position:"none",selectedStatusItems:P})]}):(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 @md-page:flex-row",children:[(0,a.jsx)(th.default,{handleSelectStatusItem:A,position:"none",selectedStatusItems:P}),(0,a.jsx)(tt.BranchSearchCombobox,{onSelect:_,project:i,skeleton:!i,value:S||""})]})})]}),T&&!V?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Spacer,{y:.5}),(0,a.jsx)(te.FilteredBranchEntityBar,{branch:S,deployments:O.deployments,isLoading:!X,onClearBranch:L,project:i})]}):(0,a.jsx)(v.Spacer,{y:.5}),G?(0,a.jsx)(B,{branch:S,onClearBranch:L,isUsingActiveBranches:V}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.EntityGroup,{children:(0,a.jsxs)(a.Fragment,{children:[!r&&V?(0,a.jsx)("div",{className:"flex flex-col !divide-solid rounded bg-background-100 !divide-x-0 !divide-y !divide-gray-alpha-400",children:(0,w.chunk)(O.branches,t).map(e=>(0,a.jsx)(lZ,{branches:e,handleCancelDeployment:K,handleClickCreateAlias:et,handleClickRedeploy:N,project:i},e[0].deployment.id))}):null,r||V?null:O.deployments.map(e=>(0,a.jsx)(I.DeploymentRow,{deployment:e,handleCancelDeployment:K,handleClickCreateAlias:et,redeploy:N,projectIdOrName:s},e.uid)),r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{}),(0,a.jsx)(I.DeploymentRow,{})]}):null]})}),H?(0,a.jsx)(m.LoadMoreButton,{placeholder:!0}):(0,a.jsx)(m.LoadMoreButton,{loading:$&&U>1,onClick:()=>{W(),p(g),u(d+t)}})]}),(0,a.jsx)(R.default,{active:J,onCancel:ea}),o,(0,a.jsx)(e7.default,{active:!!Q,deployment:Q,onClose:()=>{Y(null),q()},teamId:n}),c,f,y]}),(0,a.jsx)(v.Spacer,{y:2})]}):(0,a.jsx)(tU,{})})}function lK(e){let{projectId:t,projectPaused:i,teamSlug:s}=e,[n,r]=(0,l.useState)(!1),o=(0,l.useCallback)(async()=>{if(t&&s)try{await (0,tB.resumeProject)(t,s),b.toasts.success("Resumed project")}catch{b.toasts.error("Error resuming project")}finally{r(!1)}},[t,s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lJ,{handleSetShowResumeModal:r,projectPaused:i}),(0,a.jsx)(tz.ResumeServiceModal,{active:n,hide:()=>r(!1),save:o,teamSlug:s})]})}function lJ(e){let{projectPaused:t,handleSetShowResumeModal:l}=e;return t?(0,a.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial p-4",children:(0,a.jsx)(f.Note,{action:(0,a.jsx)(d.Button,{onClick:()=>l(!0),size:"small",children:"Resume Service"}),fill:!0,type:"warning",children:(0,a.jsxs)("p",{className:"text-copy-14 text-amber-900",children:[(0,tA.noOrphan)("The project is paused and your Production Deployment is currently unavailable. "),(0,a.jsx)(L.Link,{external:!0,href:"/docs/projects/overview#pausing-a-project",underline:!0,children:"Learn More"})]})})}):null}lq.displayName="ProductionLinks";let l0=e=>{let t=(0,N.useParams)(),a=t?.teamSlug;return a&&e?`/${a}/~/usage?${tM.USAGE_TAB_PROJECT_QUERY_PARAM_KEY}=${e.id}`:null};e.s(["default",0,function(e){let s=(0,_.useIsMobile)()?5:10,n=(0,N.useParams)(),r=n?.project,o=(0,lG.useIsImpersonating)(),[d,u]=(0,l.useState)(!1),m=(0,l.useCallback)(()=>{u(!0)},[]),{data:x,isLoading:h,error:p,mutate:g}=(0,eC.useApi)(e_.getProjectOverview,{refreshInterval:3e4,dedupingInterval:1e3});(0,tu.default)("newCreated","Your project was created and is deploying."),(0,tu.default)("deploymentDeleted","The deployment was deleted."),(0,tu.default)("fromTransfer","Transferred Project successfully.","success",!!x?.transferCompletedAt);let f=x?.link,{data:b,isLoading:w}=(0,eC.useApi)(e_.getProjectProductionDeployment),{deployment:S,deploymentIsStale:k,rollbackDescription:C}=b??{},L=to({project:x,productionDeployment:S,revalidateProject:g}),{data:E}=function(e){let{project:t,productionDeploymentIsStale:a}=e,{data:l,mutate:i,...s}=(0,tp.default)({projectId:a&&t?t.id:"",limit:10,rollbackCandidate:!0}),n=l?.deployments.filter(e=>e.isRollbackCandidate),r=n?.[0];return{...s,data:r,mutate:()=>i()}}({project:x,productionDeploymentIsStale:k}),{data:R,isLoading:I}=(0,eC.useApi)(e_.getProjectDomains),D=R?.domains??[],P=(0,l.useMemo)(()=>(0,lF.getSortedNonRedirectDomains)(D).map(e=>e.name),[D,I]),{data:A,isLoading:z}=(0,eC.useApi)(e_.getProjectRollingRelease),B=(0,tm.useProjectTransferring)(x),M=h||w||I||z,[V,U]=(0,l.useState)(0),F=(0,l.useCallback)(()=>{U(e=>e+1)},[]),{canRollbackDeployment:O,rollbackModal:$,openRollbackModal:H}=(0,tP.useInstantRollbackModal)(x,{onClose:F}),X=(0,W.useDeploymentLink)(S),{link:G}=function(){let e,{deploymentUrl:t,branchName:a,project:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:i,user:s,isLoading:n}=(0,eh.useAccount)(),r=n?void 0:i?.slug||s?.username;return r&&(e=l?`/${[r,l].map(encodeURIComponent).join("/")}/logs?${t?`deploymentDomains=${t}`:""}${a?`&branches=${a}`:""}`:`/${encodeURIComponent(r)}/~/logs?${t?`deploymentDomains=${t}`:""}${a?`&branches=${a}`:""}`),{link:e}}({deploymentUrl:S?.url,branchName:x?.link?.productionBranch??"",project:n?.project}),q=(0,a.jsx)(lW,{buildLogsHref:X,canRollbackDeployment:O,isLoadingDeployment:w,openRollbackModal:()=>H(),productionDeployment:S??(0,em.getProductionDeployment)(x),project:x,rollbackTooltip:"",runtimeLogsHref:G||""});(0,ti.default)(p);let Z=(0,l.useCallback)(()=>r?(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("p",{className:"text-heading-32",children:(0,a.jsx)(lX.TruncateMiddle,{children:r})}),(0,a.jsx)(lV.MicrofrontendsBadge,{className:"relative top-px",project:x??null}),(0,a.jsx)(lH,{project:x??null}),o&&x?.customerSupportCodeVisibility&&(0,a.jsx)(y.Tooltip,{maxWidth:260,text:(0,a.jsx)("span",{children:"You can view source code because the customer has enabled Code Visibility for support."}),children:(0,a.jsx)(c.Badge,{variant:"trial",children:"Source Code Access"})})]}):(0,a.jsx)(j.Skeleton,{height:40,width:220}),[r,x,o]);return(0,a.jsxs)("div",{style:{background:"var(--ds-background-200)",minHeight:"calc(100vh - var(--navbar-height))"},children:[(0,a.jsx)(T.HeadTitle,{title:x?`${x.name} â€“ Overview`:"Overview",titlePostfix:!0}),(0,a.jsx)(lK,{projectId:x?.id,projectPaused:!!x?.paused,teamSlug:n?.teamSlug??""}),B?(0,a.jsxs)("div",{className:"max-w-full mx-auto w-[var(--geist-page-width-with-margin)] px-[var(--geist-page-margin)]",children:[(0,a.jsx)(v.Spacer,{y:2}),(0,a.jsx)(e4.default,{})]}):null,x&&!B?(0,a.jsx)(ta.DiscontinuedNodeBanner,{project:x,teamSlug:n?.teamSlug??""}):null,x&&!B?(0,a.jsx)(tl.ExceededMicrofrontendsLimitBanner,{project:x,teamSlug:n?.teamSlug??""}):null,(0,a.jsx)(tc.default,{buttons:(0,a.jsx)(lY,{repositoryButton:e.repositoryButton,usageButton:e.usageButton,domainsSettingsButton:e.domainsSettingsButton,visitButton:e.visitButton}),title:(0,a.jsx)(Z,{}),truncateTitle:!0,updatedStyles:!0}),B?(0,a.jsx)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0 min-h-[calc(100vh-280px)] bg-[var(--ds-background-200)] py-[var(--geist-gap-double)]",children:(0,a.jsx)("div",{className:"max-w-full mx-auto w-[var(--geist-page-width-with-margin)] px-[var(--geist-page-margin)]",children:(0,a.jsx)(e8.default,{})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"max-w-full mx-auto w-[calc(100vw-(100vw-100%))] px-0 pt-6",children:["true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?null:(0,a.jsx)("div",{className:"max-w-full mx-auto w-[var(--geist-page-width-with-margin)] px-[var(--geist-page-margin)]",children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start flex-initial",style:{justifyContent:"space-between"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("h3",{className:"text-heading-24",style:{lineHeight:1.5},children:["Production"," ",(0,a.jsx)("span",{className:(0,i.clsx)({"hidden @md-page:inline":k&&!M}),children:"Deployment"})]}),k&&!M?(0,a.jsx)(c.Badge,{variant:"amber-subtle",children:"Rolled Back"}):null]}),q]})}),"true"!==t.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==t.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===t.default.env.NEXT_PUBLIC_DASH?null:(0,a.jsx)(v.Spacer,{y:1}),(0,a.jsx)(lU.ConditionalNavigationMarker,{enabled:!M,label:"ProductionDeploymentCard",phase:"content",children:(0,a.jsx)(e3,{isLoading:M,onCancelUpcomingDeployment:m,previousDeployment:E,productionAliases:P,productionDeployment:S,productionDeploymentIsStale:!!k,project:x,projectLink:f,refreshPreviewImage:V,rollbackDescription:C,scope:n?.teamSlug||"",upcomingDeployment:L.data,rollingReleaseResponse:A,canRollbackDeployment:O,openRollbackModal:H,buildLogsHref:X,runtimeLogsHref:G||"",headerActions:q})})]}),(0,a.jsx)(lD,{}),(0,a.jsx)(lQ,{cancelModal:(0,a.jsx)(e7.default,{active:!!(L.data&&d),deployment:L.data,onClose:()=>{u(!1),L.mutate()},teamId:n?.teamSlug??""}),projectIdOrName:r,rowLimit:s,project:x,teamSlug:n?.teamSlug??"",isProjectLoading:h,rollbackModal:$})]})]})}],2766871)}]);

//# debugId=7aa304f5-4490-7395-596c-b301e7e0daaf
//# sourceMappingURL=1a9ea62b7a624bae.js.map