;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5a0dfb89-6dfe-2664-95d7-0e48b9fc6822")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9385057,e=>{"use strict";let t=e=>crypto.getRandomValues(new Uint8Array(e));e.s(["customAlphabet",0,function(e){let a,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return i=-~(1.6*(a=(2<<Math.log(e.length-1)/Math.LN2)-1)*r/e.length),function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n="";for(;;){let r=t(i),l=i;for(;l--;)if((n+=e[r[l]&a]||"").length===s)return n}}},"nanoid",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")}],9385057)},838562,e=>{"use strict";var t=e.i(1717203),a=e.i(7557283);e.s(["useFlagsPermissions",0,function(e,i){let{can:r,isLoading:s}=(0,t.default)(e,i);return{permissions:{read:r(a.Action.Read,a.Resource.ProjectFlags),create:r(a.Action.Create,a.Resource.ProjectFlags),remove:r(a.Action.Delete,a.Resource.ProjectFlags),update:r(a.Action.Update,a.Resource.ProjectFlags)},isLoading:s}}])},6689108,e=>{"use strict";var t=e.i(4205214),a=e.i(3306538),i=e.i(9722978);let r={production:{dot:"bg-blue-700",badge:"blue-subtle",label:"Production"},preview:{dot:"bg-purple-700",badge:"purple-subtle",label:"Preview"},development:{dot:"bg-amber-700",badge:"amber-subtle",label:"Development"}};e.s(["EnvironmentBadge",0,function(e){let{environment:i,size:s="sm",className:n}=e,l=i in r?r[i].badge:"gray-subtle";return(0,t.jsx)(a.Badge,{size:s,variant:l,className:n,children:i})},"EnvironmentDot",0,function(e){let{environment:a,className:s}=e,n=a in r?r[a]:{dot:"bg-gray-600"};return(0,t.jsx)("div",{className:(0,i.default)("size-2.5 rounded-full",n.dot,s)})}])},6373608,e=>{"use strict";var t=e.i(4205214),a=e.i(8660982),i=e.i(4004502),r=e.i(8042625),s=e.i(277234),n=e.i(4244280),l=e.i(8128646),o=e.i(7694836);e.i(3512434);var d=e.i(9835407),u=e.i(6689108),c=e.i(3500331),m=e.i(9334091),g=e.i(8923565),f=e.i(5323212),h=e.i(1906681),p=e.i(4030453),v=e.i(455575),x=e.i(2504781),b=e.i(5468328),y=e.i(5806401),j=e.i(5677444),S=e.i(7722264),w=e.i(9385057),N=e.i(7957251),k=e.i(5883567),E=e.i(838562),I=e.i(409142),C=e.i(5338940);let T=d.z.object({key:d.z.string().min(1,"Key is required").regex(/^[a-zA-Z0-9_-]+$/,"Key may contain alphanumeric characters, _ and - only"),description:d.z.string().optional().default(""),options:d.z.array(d.z.object({label:d.z.string().optional(),value:d.z.union([d.z.string(),d.z.number(),d.z.boolean()])})).min(1,"At least one option is required").optional(),defaultValue:d.z.union([d.z.string(),d.z.number(),d.z.boolean()]).optional()});function R(e,t){let a=e.touched.has(t),i=e.errors.get(t);return e.submitAttempted||a?i:void 0}function P(e){return e.variantsByKind[e.kind]}function M(e){return e.environmentsByKind[e.kind]}function F(e,t){return Object.values(M(t)).some(t=>t.selectedVariantId===e)}function A(e){return 0===e.trim().length?{message:"Flag key is required"}:/^[a-zA-Z0-9_-]+$/.test(e.trim())?null:{message:"Flag key may contain alphanumeric characters, _ and - only"}}function $(e){let t=new Map,a=A(e.slug);return a&&t.set("slug",a),e.kind||t.set("kind",{message:"Missing kind"}),P(e).forEach((a,i)=>{"boolean"!==e.kind&&("string"===e.kind?("string"!=typeof a.value||""===a.value.trim())&&("string"!=typeof a.label||""===a.label.trim())&&t.set(`variants.${i}.label`,{message:"Label is required when value is empty"}):"number"===e.kind&&("number"!=typeof a.value||Number.isNaN(a.value))&&t.set(`variants.${i}.value`,{message:"Valid number is required"}))}),t}function B(e){let{open:d,setOpen:I,team:C,params:A,data:B,onSuccess:L}=e;(0,a.useEffect)(()=>(0,l.enableMapSet)(),[]);let O=(0,v.useToasts)(),_=(0,j.useRouter)(),V=(0,j.useSearchParams)(),z=(0,a.useRef)(null),{permissions:D,isLoading:q}=(0,E.useFlagsPermissions)(),K=(0,a.useRef)({slug:null,description:null}),U=(0,a.useMemo)(()=>{let e=[{id:(0,w.nanoid)(),label:"Off",description:"not enabled",value:!1},{id:(0,w.nanoid)(),label:"On",description:"enabled",value:!0}],t=[{id:(0,w.nanoid)(),label:"",description:"",value:""}],a=[{id:(0,w.nanoid)(),label:"",description:"",value:0},{id:(0,w.nanoid)(),label:"",description:"",value:1}];return{slug:"",kind:"boolean",description:"",variantsByKind:{boolean:e,string:t,number:a},environmentsByKind:{boolean:{development:{selectedVariantId:e[1].id},preview:{selectedVariantId:e[0].id},production:{selectedVariantId:e[0].id}},string:{development:{selectedVariantId:t[0].id},preview:{selectedVariantId:t[0].id},production:{selectedVariantId:t[0].id}},number:{development:{selectedVariantId:a[0].id},preview:{selectedVariantId:a[0].id},production:{selectedVariantId:a[0].id}}}}},[]),H=(0,a.useMemo)(()=>{if(B){if(!Number.isNaN(Number(B)))return U;try{let e=JSON.parse(B),t=T.safeParse(e);if(!t.success)return console.warn("Invalid create param format:",t.error),U;let a=t.data,i=!a.options||0===a.options.length||a.options.every(e=>"boolean"==typeof e.value)?"boolean":a.options.every(e=>"string"==typeof e.value)?"string":a.options.every(e=>"number"==typeof e.value)?"number":"boolean",r={...U};if(a.options&&a.options.length>0){let e=a.options.map(e=>({id:(0,w.nanoid)(),label:e.label,description:"",value:e.value}));r.variantsByKind[i]=e;let t=e[0]?.id||r.variantsByKind[i][0]?.id;r.environmentsByKind[i]={development:{selectedVariantId:t},preview:{selectedVariantId:t},production:{selectedVariantId:t}}}return{...r,slug:a.key,kind:i,description:a.description}}catch(e){console.warn("Failed to parse create param:",e)}}return U},[B,U]),J=(0,a.useMemo)(()=>({isDisabled:!1,isSubmitting:!1,submitAttempted:!1,values:H,errors:new Map,touched:new Set}),[H]),[Y,W]=(0,a.useState)(J),Q=(0,a.useMemo)(()=>{let e=e=>{W(t=>{let a=(0,l.produce)(t,e);return{...a,errors:$(a.values)}})};return{formState:Y,setFormState:W,adjust:e,refs:K,reset:()=>{W(J)},handleChange:t=>{t.target.name&&e(e=>{(0,o.set)(e.values,t.target.name,t.target.value)})},handleBlur:t=>{t.target.name&&Y.submitAttempted&&e(e=>{e.touched.add(t.target.name)})},handleRef:e=>{if(!e)return;let t="name"in e?e.name:e.dataset.name;t&&(K.current[t]=e)}}},[Y,J]),{adjust:Z,reset:G}=Q;(0,a.useEffect)(()=>{if(d&&z.current){let e=setTimeout(()=>{z.current?.focus()},100);return()=>clearTimeout(e)}},[d,B]);let X=(0,a.useCallback)(()=>{I(!1)},[I]),ee=(0,a.useCallback)(()=>{G(),X()},[G,X]),et=async e=>{e.preventDefault();let t=Y.values,a=P(t);Z(e=>{e.submitAttempted=!0});let i=e=>{let a=M(t)[e].selectedVariantId;return{revision:0,active:!1,pausedOutcome:{type:"variant",variantId:a},fallthrough:{type:"variant",variantId:a},rules:[],reuse:{active:!1,environment:""}}},l={slug:t.slug.trim(),kind:t.kind,description:t.description,variants:a,environments:{production:i("production"),preview:i("preview"),development:i("development")}},o=$(t);if(o.size>0)return void Z(e=>{e.errors=o});Z(e=>{e.isSubmitting=!0,e.isDisabled=!0});try{await (0,s.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v1")}/${A.project}/feature-flags/flags${(0,r.encode)({teamId:C?.id})}`,{method:"PUT",throwOnHTTPError:!0,body:l}),O.success("Flag created"),L?.(),I(!1);let e=new URLSearchParams,a=V?.get("env");a&&e.set("env",a),_.push(`/${A.teamSlug}/${A.project}/flag/${t.slug.trim()}?${e.toString()}`)}catch(e){if((0,S.isError)(e)){if(Z(e=>{e.isSubmitting=!1,e.isDisabled=!1}),e.message.includes("Flag already exists"))return void O.error("Could not save flag — Name is in use by an active or archived flag.");O.error(e.message);return}throw e}},ea=(0,a.useMemo)(()=>Y.values.variantsByKind[Y.values.kind].every(e=>{if(e.label&&e.label.trim().length>0)return!0;switch(Y.values.kind){case"boolean":return"boolean"==typeof e.value;case"string":return"string"==typeof e.value;case"number":return"number"==typeof e.value&&!Number.isNaN(e.value)}return!1}),[Y.values]);return(0,t.jsxs)(y.Sheet,{open:d,onOpenChange:I,modal:!0,children:[(0,t.jsx)(y.SheetOverlay,{}),(0,t.jsx)(y.SheetContent,{side:"right",noOverlay:!0,className:"m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-[512px] sm:max-w-[auto] flex flex-col",children:(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)(y.SheetHeader,{className:"p-6 border-b flex-shrink-0",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)(y.SheetTitle,{children:"Create Feature Flag"})}),(0,t.jsx)(y.SheetDescription,{children:"Enter the details of your new feature flag."})]}),(0,t.jsx)("div",{className:"flex flex-col h-full flex-auto overflow-y-scroll",children:(0,t.jsx)("form",{id:(0,i.tid)("vercel-flags","create-form","form"),"data-testid":(0,i.tid)("vercel-flags","create-form","form"),onSubmit:et,className:"flex flex-col h-full",children:(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(c.Input,{"aria-labelledby":"Slug","data-testid":(0,i.tid)("vercel-flags","create-form","slug"),disabled:Y.isSubmitting,label:"Slug",name:"slug",value:Y.values.slug,onChange:Q.handleChange,onBlur:Q.handleBlur,ref:e=>{z.current=e,Q.handleRef(e)},error:R(Y,"slug"),placeholder:"my-flag"}),(0,t.jsx)(m.Textarea,{"aria-labelledby":"Description","data-testid":(0,i.tid)("vercel-flags","create-form","description"),disabled:Y.isSubmitting,label:"Description",name:"description",value:Y.values.description,onChange:Q.handleChange,onBlur:Q.handleBlur,ref:Q.handleRef,placeholder:"Describe what this feature flag controls…",rows:3}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"Type"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(g.Switch,{name:"kind",children:[(0,t.jsx)(g.Switch.Control,{checked:"boolean"===Y.values.kind,disabled:Y.isSubmitting,label:"Boolean",value:"boolean",onChange:()=>{Z(e=>{e.values.kind="boolean"})}}),(0,t.jsx)(g.Switch.Control,{checked:"string"===Y.values.kind,disabled:Y.isSubmitting,label:"String",value:"string",onChange:()=>{Z(e=>{e.values.kind="string"})}}),(0,t.jsx)(g.Switch.Control,{checked:"number"===Y.values.kind,disabled:Y.isSubmitting,label:"Number",value:"number",onChange:()=>{Z(e=>{e.values.kind="number"})}})]})}),R(Y,"kind")?(0,t.jsx)(p.Error,{className:"mt-2",children:R(Y,"kind")?.message}):null]}),Y.values.kind&&"boolean"!==Y.values.kind&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"Variants"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:P(Y.values)?.map((e,a)=>(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:`variant-${e.id}-value`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Value"}),(0,t.jsx)(c.Input,{id:`variant-${e.id}-value`,value:String(e.value),onChange:e=>{Z(t=>{t.values.variantsByKind[Y.values.kind][a].value="number"===Y.values.kind?Number.parseFloat(e.target.value)||0:e.target.value})},disabled:Y.isSubmitting,typeName:"number"===Y.values.kind?"number":"text",error:R(Y,`variants.${a}.value`),className:"font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:`variant-${e.id}-name`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Label (optional)"}),(0,t.jsx)(c.Input,{id:`variant-${e.id}-name`,value:e.label??"",onChange:e=>{Z(t=>{t.values.variantsByKind[Y.values.kind][a].label=e.target.value})},disabled:Y.isSubmitting,error:R(Y,`variants.${a}.label`)})]})]}),P(Y.values).length>2&&(0,t.jsx)("div",{className:"flex items-start justify-end mt-3",children:(0,t.jsx)(b.Tooltip,{text:!Y.isSubmitting&&F(e.id,Y.values)?"This variant can not be deleted as it is selected as an outcome for one of the environments":void 0,children:(0,t.jsx)(x.Button,{"aria-label":`Remove variant ${a+1}`,size:"small",type:"tertiary",disabled:Y.isSubmitting||F(e.id,Y.values),onClick:()=>{Z(e=>{e.values.variantsByKind[Y.values.kind].splice(a,1)})},prefix:(0,t.jsx)(N.MinusCircle,{}),children:"Remove variant"})})})]},e.id))}),(0,t.jsx)(x.Button,{type:"tertiary",onClick:()=>{Z(e=>{e.values.variantsByKind[Y.values.kind].push({id:(0,w.nanoid)(),label:"",description:"",value:"number"===Y.values.kind?0:""})})},disabled:Y.isSubmitting,typeName:"button",className:"mt-2",prefix:(0,t.jsx)(k.PlusCircle,{}),size:"small",children:"Add variant"})]}),P(Y.values)&&P(Y.values).length>0&&(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"Environments"}),ea?(0,t.jsx)("div",{className:"mt-4 space-y-8",children:["production","preview","development"].map((e,a)=>{let i=M(Y.values),r=i[e]?.selectedVariantId,s=P(Y.values),n=s.reduce((e,t)=>e+(t.label||String(t.value)).length,0),l="boolean"!==Y.values.kind&&n>24||s.length>8;return(0,t.jsxs)("div",{children:[a>0&&"boolean"===Y.values.kind&&(0,t.jsx)("div",{className:"border-t border-gray-100 -mt-4 mb-6"}),"boolean"===Y.values.kind?null:(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(u.EnvironmentDot,{environment:e}),(0,t.jsx)("p",{className:"text-copy-14 font-medium capitalize",children:e})]}),"boolean"===Y.values.kind?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.EnvironmentDot,{environment:e}),(0,t.jsx)("p",{className:"text-copy-14 font-medium capitalize",children:e})]}),(0,t.jsx)(h.Toggle,{size:"medium",checked:r===s.find(e=>!0===e.value)?.id,disabled:Y.isSubmitting,onChange:t=>{let a=t?s.find(e=>!0===e.value)?.id:s.find(e=>!1===e.value)?.id;a&&Z(t=>{t.values.environmentsByKind[Y.values.kind][e].selectedVariantId=a})},children:r===s.find(e=>!0===e.value)?.id?"On":"Off"})]}):l?(0,t.jsx)(f.Select,{value:r,onChange:t=>{Z(a=>{a.values.environmentsByKind[Y.values.kind][e].selectedVariantId=t.target.value})},disabled:Y.isSubmitting,children:s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label||String(e.value)},e.id))}):(0,t.jsx)(g.Switch,{name:`environment-${e}`,children:s.map(a=>(0,t.jsx)(g.Switch.Control,{checked:r===a.id,disabled:Y.isSubmitting,label:a.label||String(a.value),value:a.id,onChange:()=>{Z(t=>{t.values.environmentsByKind[Y.values.kind][e].selectedVariantId=a.id})}},a.id))})]},e)})}):(0,t.jsx)("div",{className:"mt-2 text-gray-800 text-sm",children:"Configure variants above before configuring environments"})]})]})})})}),(0,t.jsx)(y.SheetFooter,{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(x.Button,{"data-testid":(0,i.tid)("vercel-flags","create-form","cancel"),disabled:Y.isSubmitting,onClick:ee,type:"secondary",children:"Cancel"}),(0,t.jsx)(b.Tooltip,{disableTriggers:D.create,text:"You need additional permissions to create a flag.",children:(0,t.jsx)(x.Button,{"data-testid":(0,i.tid)("vercel-flags","create-form","submit"),disabled:!D.create||q||Y.isSubmitting,loading:Y.isSubmitting,typeName:"submit",form:(0,i.tid)("vercel-flags","create-form","form"),children:"Create"})})]})})]})})]})}let L={create:{defaultValue:void 0}};e.s(["useCreateFlagForm",0,e=>{let i,r,{team:s}=(0,C.useTeam)(),{set:n,state:l}=(0,I.useSearchParamsState)(L),[o,d]=(i=(0,a.useRef)(1),r=(0,a.useCallback)(()=>{i.current++},[]),[i,r]),u=(0,a.useCallback)(()=>{d(),e.onSuccess?.()},[e.onSuccess,d]);return[(0,a.useCallback)(e=>{let t=e?JSON.stringify({key:e.slug,description:e.description,options:e.options,defaultValue:e.defaultValue}):o.current.toString();(0,a.startTransition)(()=>{n({create:t})})},[n,o]),(0,t.jsx)(B,{open:!!l.create,data:l.create,params:e,setOpen:e=>{e||(Number.isNaN(Number(l.create))&&d(),(0,a.startTransition)(()=>{n({create:void 0})}))},team:s??void 0,onSuccess:u},o.current.toString())]},"validateSlug",0,A])},8587921,7873387,e=>{"use strict";var t=e.i(8660982),a=e.i(850302),i=e.i(7222834),r=e.i(8042625),s=e.i(277234),n=e.i(4244280),l=e.i(9668517),o=e.i(5338940),d=e.i(1717203),u=e.i(7557283);let c=e=>(a,i,r)=>{let s=(0,t.useRef)(void 0),n=e(a,i,r);(0,t.useEffect)(()=>{void 0!==n.data&&(s.current=n.data)},[n.data]);let l=(0,t.useCallback)(()=>{s.current=void 0},[]);return{...n,data:void 0===n.data?s.current:n.data,isLagging:void 0===n.data&&void 0!==s.current,resetLaggy:l}};e.s(["default",0,c],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",0,function(){let{sort:e="date_desc",limit:t=20,filterByUserIds:i,until:l,role:c,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:p}=(0,o.useTeam)(),{isLoading:v,can:x}=(0,d.default)(),b=!v&&x(u.Action.List,u.Resource.TeamFellowMembership);return(0,a.default)(()=>h&&p&&b?`${n.API_TEAMS_MEMBERS_V3}/${p.id}/members${(0,r.encode)({sort:e,until:l,limit:t,role:c,filterByUserIds:i,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),f)},"useMembersForTeam",0,function(e){let{limit:t=20,until:i,role:l,sort:o="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.default)(()=>e?`${n.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,r.encode)({until:i,limit:t,role:l,sort:o})}`:null,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),d)},"useMembersInfinite",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:g,role:f,eligibleMembersForProjectId:h,sort:p="date_desc",filterByUserIds:v,includeEntitlements:x,mfaStateFilter:b,includePermissionRequests:y}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:w,team:N}=(0,o.useTeam)(),{isLoading:k,can:E}=(0,d.default)(),I=!k&&E(u.Action.List,u.Resource.TeamFellowMembership),C=(0,l.useTeamSlug)(),T=g||20,R=(0,i.default)((e,t)=>{if(!w||!N||!I)return null;if(0===e)return`${n.API_TEAMS_MEMBERS_V3}/${N.id}/members${(0,r.encode)({sort:p,limit:T,search:m,role:f,eligibleMembersForProjectId:h,filterByUserIds:v,includeEntitlements:!!x||void 0,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:y})}`;let a=t?.pagination.nextPageCursor;return a?`${n.API_TEAMS_MEMBERS_V3}/${N.id}/members${(0,r.encode)({sort:p,limit:T,nextPageCursor:a,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:!!x||void 0,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:y})}`:null},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:j?[c]:[]});(0,t.useEffect)(()=>{j&&R.resetLaggy()},[C,j]);let P=(0,t.useMemo)(()=>R.data?.flatMap(e=>e.members.slice(0,T))||[],[R.data,T]),M=(0,t.useMemo)(()=>R.data?.flatMap(e=>e.permissionRequests||[])||[],[R.data]),F=!!R.data,A=F&&0===P.length,$=!!(F&&R.data&&R.size>R.data.length),B=!!(F&&R.data&&!R.data[R.data.length-1]?.pagination?.nextPageCursor);return(0,a.default)(()=>{if(!S||!R.data||B||!w||!N)return null;let e=R.data[R.data.length-1].pagination.nextPageCursor;return`${n.API_TEAMS_MEMBERS_V3}/${N.id}/members${(0,r.encode)({sort:p,limit:T,nextPageCursor:e,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:x,filterByMfaState:"all"!==b?b:void 0,includePermissionRequests:y})}`},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0})),[R,{members:P,permissionRequests:M.filter(e=>null!=e),initialDataLoaded:F,isEmpty:A,loadMore:()=>R.setSize(R.size+1),isLoadingMore:$,isReachingEnd:B,isLagging:R.isLagging}]},"useSuggestedMembersInfinite",0,function(){let{limit:e=25,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:n,isLoading:c}=(0,d.default)(),m=!c&&n(u.Action.Create,u.Resource.TeamFellowMembership),{isReady:g,team:f}=(0,o.useTeam)(),h=(0,l.useTeamSlug)(),p=(0,i.default)((t,a)=>{if(!g||!f||!m)return null;if(!t)return`/api/teams/${h}/members/suggested${(0,r.encode)({limit:e})}`;let i=a?.members,s=i?.length===e?i[i.length-1].email:null;return s?`/api/teams/${h}/members/suggested${(0,r.encode)({limit:e,from:s})}`:null},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),a),v=(0,t.useMemo)(()=>p.data?.flatMap(t=>t.members.slice(0,e))||[],[p.data,e]),x=!!p.data,b=x&&0===v.length,y=!!(x&&p.data&&p.size>p.data.length),j=!!(x&&p.data&&p.data[p.data.length-1]?.members.length<e);return[p,{members:v,initialDataLoaded:x,isEmpty:b,loadMore:()=>p.setSize(p.size+1),isLoadingMore:y,isReachingEnd:j}]}],8587921)},4723202,e=>{"use strict";var t=e.i(4205214),a=e.i(8660982),i=e.i(2504781),r=e.i(5255926),s=e.i(455575),n=e.i(5468328),l=e.i(277234),o=e.i(5338940),d=e.i(8587921),u=e.i(5140444),c=e.i(8248823),m=e.i(57106);async function g(e,t){await (0,l.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",0,function(e){let{teamRole:l,variant:f="card"}=e,{team:h,isLoading:p}=(0,o.useTeam)(),{hasRequestedRole:v,mutate:x,isLoading:b}=function(e){let{user:t,isLoading:a}=(0,u.useUser)(),{data:i,mutate:r,isLoading:s}=(0,d.default)({includePermissionRequests:!0}),n=i?.permissionRequests;return{hasRequestedRole:n?.some(a=>a.uid===t?.uid&&a.requestedTeamRole.includes(e))??!1,mutate:r,isLoading:a||s}}(l),[y,j]=(0,a.useState)(!1),[S,w]=(0,a.useState)(!1);if(h?.membership?.role!=="VIEWER_FOR_PLUS")return null;let N=v||S;return(0,t.jsx)(r.Skeleton,{show:b||p,children:(0,t.jsx)(n.Tooltip,{disableTriggers:!N,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${h?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(i.Button,{disabled:N,loading:y,className:"card"===f?"text-label-14 font-medium":void 0,onClick:async()=>{if(h?.id){j(!0);try{await g(h.id,l),x(),w(!0),s.toasts.success("Request for the Member role has been sent")}catch(e){s.toasts.error((0,c.errorToString)(e,"Failed to send request"))}finally{j(!1)}}},size:"card"===f?"small":void 0,type:"card"===f?"tertiary":void 0,children:N?"Access Requested":"Request Access"})})})}])},8556491,e=>{"use strict";var t=e.i(4205214),a=e.i(4723202),i=e.i(57106),r=e.i(1235157),s=e.i(6352514),n=e.i(1853611);e.s(["AdditionalPermissionsRequiredModal",0,function(e){let{role:l,team:o,actionLabel:d,dataTestId:u}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 @md-page:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":u,children:(0,t.jsxs)("div",{className:"shadow-lg @md-page:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:l?(0,r.getRoleName)(l):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:o?.name})," team, you do not have permission to ",d,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(i.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{n.analytics.track(s.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===l?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(a.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}])},1068837,e=>{"use strict";var t=e.i(4205214),a=e.i(1717203),i=e.i(8556491);e.s(["AdditionalPermissionsRequiredModalClient",0,function(e){let{actionLabel:r,permissionChecks:s}=e,{can:n,isLoading:l,accessInfo:o}=(0,a.default)(),d=s.every(e=>{let[t,a]=e;return n(t,a)});return l||d?null:(0,t.jsx)(i.AdditionalPermissionsRequiredModal,{role:o?.role,team:o?.team??void 0,actionLabel:r})}])},6214714,4830608,e=>{"use strict";var t=e.i(4205214),a=e.i(8660982),i=e.i(850302);e.i(5463680);var r=e.i(6769352),s=e.i(15312);e.i(5628754);var n=e.i(9691190),l=e.i(6565161),o=e.i(4244280),d=e.i(8042625),u=e.i(9171423);async function c(e){let t=await (0,u.fetchApi)(e,{throwOnHTTPError:!0,returnStatus:!0,cache:"default",headers:{"cache-control":"private, max-age=45",vary:"Cookie"}});if("object"!=typeof t.body)throw Error(`Invalid fetch response(${t.status}), returned ${typeof t.body} at ${e}`);if(200!==t.status)throw Error(`Fetch failed with status ${t.status} at ${e}`);return t.body}let m=e=>{let t=`${o.API_EXPERIMENTATION}/items?${(0,d.encode)({teamId:e.teamSlug,resourceId:e.resourceId})}`;return{get key(){return t},fetch:c,process:t=>e.resourceId?t.items.filter(t=>t.resourceId===e.resourceId):e.resourceIds?t.items.filter(t=>e.resourceIds?.includes(t.resourceId)):t.items}};function g(e){if(!e.resourceId)return;let t=m(e);(0,l.preload)(t.key,t.fetch)}e.s(["preloadExperimentItems",0,g,"useExperimentItems",0,function(e){let t=(0,a.useMemo)(()=>m(e),[e]),r=(0,i.default)(t.key,t.fetch);return(0,a.useMemo)(()=>({items:r.data?t.process(r.data):[],isLoading:r.isLoading,error:r.error}),[r.data,r.isLoading,t,r.error])}],4830608);var f=e.i(7557283),h=e.i(1068837),p=e.i(6838069);e.s(["ExperimentsResourceHeadingButtons",0,function(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.CreateResourceButton,{onSuccess:e=>{},protocolType:"experimentation"})})},"ExperimentsResourceListFallback",0,function(){return(0,t.jsx)(n.ResourceList,{protocolType:"experimentation",resourceLinkFunc:()=>"#"})},"ExperimentsResourceListWithParams",0,function(e){let i=(0,a.use)(e.params),r=(0,a.useRef)({}),s=(0,a.useCallback)(e=>{if(e){let t=e=>{let t=e.target.closest("[data-resource-item]");if(!t)return;let a=t.getAttribute("data-resource-item");!a||r.current[a]||(r.current[a]=!0,g({teamSlug:i.teamSlug,resourceId:a}))};return e.addEventListener("mouseover",t),()=>{e.removeEventListener("mouseover",t)}}},[i.teamSlug]);return(0,t.jsxs)("div",{ref:s,children:[(0,t.jsx)(n.ResourceList,{protocolType:"experimentation",resourceLinkFunc:e=>i.project?(0,p.getProjectResourceDashboardLink)(e,{teamSlug:i.teamSlug,projectSlug:i.project}):(0,p.getResourceDashboardLink)(e,{teamSlug:i.teamSlug})}),(0,t.jsx)(h.AdditionalPermissionsRequiredModalClient,{actionLabel:"view or manage experiment integrations",permissionChecks:[[f.Action.Read,f.Resource.IntegrationConfiguration]]})]})},"ExperimentsResourceModalsProvider",0,function(e){let{children:a}=e;return(0,t.jsx)(s.ResourceModalsProvider,{protocolType:"experimentation",children:a})},"useExperimentResource",0,function(e){let t=(0,a.useMemo)(()=>{let t;return t=`${o.API_STORE}/stores/${e.resourceId}${(0,d.encode)({teamId:e.teamSlug})}`,{get key(){return t},fetch:c,process:e=>e.store}},[e]),r=(0,i.default)(t.key,t.fetch);return(0,a.useMemo)(()=>({resource:r.data?t.process(r.data):null,isLoading:r.isLoading}),[r.data,r.isLoading,t])}],6214714)},872627,e=>{"use strict";e.s(["safeJsonStringify",0,function(e,t,a){let i=JSON.stringify(e,t,a);return"string"==typeof i?i.replace(/</g,"\\u003c"):i}])},7589011,e=>{"use strict";var t=e.i(4205214),a=e.i(4585051),i=e.i(5468328);e.s(["CreatorAvatar",0,function(e){let{uid:r,name:s,size:n=24,showUsername:l=!1,className:o}=e;if(!r)return null;let d=(0,t.jsx)(a.Avatar,{size:n,uid:r,title:s});return l&&s?(0,t.jsxs)("div",{className:`flex items-center gap-1 ${o||""}`,children:[d,l&&s&&(0,t.jsx)("span",{className:"text-gray-700 truncate max-w-[120px]",children:s})]}):(0,t.jsx)("div",{className:`flex ${o||""}`,children:s||s?(0,t.jsx)(i.Tooltip,{text:s||s,children:d}):d})}])},5384518,e=>{"use strict";var t=e.i(4205214),a=e.i(3306538);e.s(["KindBadge",0,function(e){let{kind:i}=e;return(0,t.jsx)(a.Badge,{variant:{string:"green-subtle",boolean:"blue-subtle",number:"purple-subtle"}[i],children:i})}])},3690212,e=>{"use strict";e.s(["getEnvState",0,function e(t,a){var i;let r=t.environments[a];if(!r)return"off";if("boolean"!==t.kind)return"on";let s=t.variants.find(e=>!1===e.value);return r.active?r.reuse?.active?e(t,r.reuse.environment):r.rules.length>0||(i=r.targets)&&Object.values(i).some(e=>Object.values(e).some(e=>Object.values(e).some(e=>e.length>0)))?"on":"variant"===r.fallthrough.type&&r.fallthrough.variantId===s?.id?"off":"on":"variant"===r.pausedOutcome.type&&r.pausedOutcome.variantId===s?.id?"off":"on"}])},6434329,e=>{"use strict";var t=e.i(4205214),a=e.i(9722978);e.s(["FlagStatusDot",0,function(e){let{isOn:i}=e;return(0,t.jsx)("div",{className:(0,a.clsx)("size-2.5 rounded-full",i?"bg-geist-cyan":"bg-gray-200")})}])},6625292,e=>{"use strict";var t=e.i(9171423),a=e.i(7629563),i=e.i(8042625),r=e.i(4244280),s=e.i(134877);async function n(e){try{return{flags:(await (0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})).data}}catch(e){throw(0,a.isInternalNextError)(e),e}}async function l(e){try{return await (0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})}catch(e){if((0,a.isInternalNextError)(e))throw e;if((0,s.isAPIError)(e)&&404===e.status)return;throw e}}async function o(e,a){let s=(0,i.encode)({teamId:e.teamSlug}),n=`${(0,r.API_PROJECTS_VERSION)("v1")}/${e.project}/feature-flags/settings${s}`;return(0,t.fetchApi)(n,{method:"PATCH",throwOnHTTPError:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),contentType:"json"})}async function d(e){return(0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})}e.s(["getFlagList",0,n,"getFlagListUrl",0,function(e){let{teamId:t,state:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,i.encode)({teamId:t,state:a,withMetadata:!0});return`${(0,r.API_PROJECTS_VERSION)("v1")}/${e}/feature-flags/flags${s}`},"getFlagsForDeployment",0,l,"query",0,d,"submitSettingsUpdate",0,o])},7870950,e=>{"use strict";var t=e.i(8660982),a=e.i(850302),i=e.i(6625292);e.s(["useDeploymentFlags",0,function(e){let{data:r,...s}=(0,a.default)(e,i.getFlagsForDeployment,{refreshInterval:12e4,keepPreviousData:!0});return{data:(0,t.useMemo)(()=>new Map(r?.flags?.map(e=>[e.slug,e])),[r]),...s}}])},1154769,e=>{"use strict";var t=e.i(4205214),a=e.i(3306538),i=e.i(5468328),r=e.i(7870950);e.s(["UnreferencedBadge",0,function(e){let{slug:s,deploymentFlagsUrl:n,className:l}=e,{data:o,error:d}=(0,r.useDeploymentFlags)(n);return o.has(s)||d||null===n?null:(0,t.jsx)(i.Tooltip,{className:l,text:"This feature flag is not referenced by your latest production deployment.",children:(0,t.jsx)(a.Badge,{className:"hidden @sm-page:block",variant:"amber-subtle",children:"Unreferenced"})})}])},3696332,e=>{"use strict";var t=e.i(4205214),a=e.i(3306538),i=e.i(5468328),r=e.i(7870950);e.s(["ReferencedArchivedBadge",0,function(e){let{slug:s,deploymentFlagsUrl:n,className:l}=e,{data:o,error:d}=(0,r.useDeploymentFlags)(n);return!o.has(s)||d||null===n?null:(0,t.jsx)(i.Tooltip,{className:l,text:"This archived feature flag is still referenced by your latest production deployment.",children:(0,t.jsx)(a.Badge,{className:"hidden @sm-page:block",variant:"red-subtle",children:"Referenced"})})}])},3281894,8060783,9106551,e=>{"use strict";var t=e.i(4205214),a=e.i(8248823),i=e.i(5338940),r=e.i(4004502),s=e.i(2504781),n=e.i(8161149),l=e.i(2064047),o=e.i(8835183),d=e.i(8923565),u=e.i(5468328),c=e.i(2155064),m=e.i(6198010),g=e.i(6160777),f=e.i(7189115),h=e.i(246968),p=e.i(1765225),v=e.i(57106),x=e.i(8660982),b=e.i(850302),y=e.i(9722978),j=e.i(872627),S=e.i(5384518),w=e.i(7589011),N=e.i(6625292),k=e.i(3748432),E=e.i(6373608),I=e.i(1913530),C=e.i(3690212),T=e.i(6434329),R=e.i(2447497),P=e.i(1154769),M=e.i(3696332),F=e.i(838562),A=e.i(6214714);e.i(5463680);var $=e.i(6769352),B=e.i(7897830),L=e.i(4030453),O=e.i(3500331),_=e.i(8522580),V=e.i(109803),z=e.i(2065543),D=e.i(2560270),q=e.i(8674454),K=e.i(6694387),U=e.i(4991687),H=e.i(5326905),J=e.i(8459493),Y=e.i(2713868),W=e.i(8042625),Q=e.i(3306538);function Z(e){let{toolTipPosition:a}=e;return(0,t.jsx)(u.Tooltip,{position:a,text:"You have access to this feature because you are on the Early Access Program.",children:(0,t.jsx)(Q.Badge,{content:"Early Access",variant:"purple-subtle",children:"Early Access"})})}var G=e.i(409142);let X={create:{defaultValue:""}},ee=()=>(0,G.useSearchParamsState)(X);function et(e){let{disabled:a}=e,{set:i}=ee();return(0,t.jsx)(s.Button,{"data-testid":(0,r.tid)("vercel-flags","create-form","trigger"),disabled:a,type:"default",typeName:"button",onClick:()=>{(0,x.startTransition)(()=>{i({create:"1"})})},prefix:(0,t.jsx)(m.Plus,{}),children:"Create Flag"})}function ea(e){let{disabled:a,openVercelFlagForm:i,marketplaceFlagProviders:r}=e;return a?(0,t.jsx)(s.Button,{disabled:!0,prefix:(0,t.jsx)(m.Plus,{}),type:"default",typeName:"button",children:"Create Flag"}):(0,t.jsx)(Y.SplitButton,{buttonProps:{type:"default",typeName:"button",onClick:i},menuButtonLabel:"Create Flag",menuItems:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.SplitButtonMenuItem,{title:"Vercel Flag",menuItemProps:{suffix:(0,t.jsx)(Z,{}),onClick:i}}),(0,t.jsx)(H.MenuDivider,{}),r.map(e=>(0,t.jsx)(Y.SplitButtonMenuItem,{title:e.name,description:e.product.integration.name,menuItemProps:{href:`/api/marketplace/sso${(0,W.encode)({teamId:e.ownerId,resource_id:e.externalResourceId,integrationConfigurationId:e.product.integrationConfigurationId})}`,rel:"noopener",target:"_blank",suffix:(0,t.jsx)(V.External,{})}},e.name))]}),menuAlignment:"bottom-end",menuProps:{width:239},children:"Create Flag"})}function ei(e){let{disabled:a,openVercelFlagForm:i,vercelFlagsEnabled:s,marketplaceFlagProviders:n}=e;return(0,t.jsxs)(U.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(K.MenuButton,{"data-testid":(0,r.tid)("vercel-flags","create-form","trigger"),suffix:(0,t.jsx)(D.ChevronDown,{}),type:"default",typeName:"button",disabled:a,children:"Create Flag"}),(0,t.jsxs)(q.Menu,{width:239,children:[s?(0,t.jsx)(J.MenuItem,{innerMenuItemClassName:"h-14",suffix:(0,t.jsx)(Z,{}),onClick:i,children:"Vercel Flag"}):null,s&&n.length>0?(0,t.jsx)(H.MenuDivider,{}):null,n.map(e=>(0,t.jsx)(J.MenuItem,{innerMenuItemClassName:"h-14",suffix:(0,t.jsx)(V.External,{}),href:`/api/marketplace/sso${(0,W.encode)({teamId:e.ownerId,resource_id:e.externalResourceId,integrationConfigurationId:e.product.integrationConfigurationId})}`,rel:"noopener",target:"_blank",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[e.name,(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-xs text-gray-800",children:e.product.integration.name})]})},e.name))]})]})}function er(e){let{disabled:a,openVercelFlagForm:i,vercelFlagsEnabled:r,marketplaceFlagProviders:s}=e;return s.length>0?r?(0,t.jsx)(ea,{openVercelFlagForm:i,marketplaceFlagProviders:s,disabled:a}):(0,t.jsx)(ei,{openVercelFlagForm:i,vercelFlagsEnabled:r,marketplaceFlagProviders:s,disabled:a}):(0,t.jsx)(et,{disabled:a})}e.s(["CreateFlagMenu",0,function(e){let{params:a,marketplaceResourcesAndFlagsFetcher:i,vercelFlagsEnabled:r}=e,{data:s}=(0,b.default)(i.key,i.fetch,{revalidateOnMount:!0,suspense:!0}),n=(0,x.useMemo)(()=>s?.resources??[],[s]),{permissions:l,isLoading:o}=(0,F.useFlagsPermissions)(),d=!l.create||o,[c,m]=(0,E.useCreateFlagForm)(a);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Tooltip,{disableTriggers:l.create||o,text:"You need additional permissions to create a flag.",children:(0,t.jsx)(er,{disabled:d,openVercelFlagForm:()=>c(),vercelFlagsEnabled:r,marketplaceFlagProviders:n})}),r?m:null]})},"useCreateFlagFormState",0,ee],8060783),e.i(6887680);var es=e.i(1414602),en=e.i(5677444),el=e.i(2413911),eo=e.i(524181);function ed(){return(0,t.jsx)("div",{className:"border border-gray-200 rounded-full p-1.5",children:(0,t.jsx)(V.External,{size:14,color:"gray-900"})})}function eu(e){let{children:a}=e,{openBrowseProducts:i}=(0,B.useResourceModals)({onSuccess:e=>{}}),{permissions:r,isLoading:s}=(0,es.useResourcePermissions)(),n=r.create,o=!n||s;return(0,t.jsx)(l.Entity,{onClick:o?void 0:()=>{i("browse-new")},className:o?"opacity-50 cursor-not-allowed":"",children:(0,t.jsx)(u.Tooltip,{disableTriggers:s||n,text:"You do not have permission to install a flag provider",children:a})})}function ec(e){let{params:a,promoteMarketplaceProviders:i=!0}=e,r=(0,en.useRouter)(),{set:o}=ee(),[d,u]=(0,E.useCreateFlagForm)(a),[c,m]=(0,x.useState)(null),[g,f]=(0,x.useState)(""),[h,p]=(0,x.useState)(!1);return(0,t.jsx)(A.ExperimentsResourceModalsProvider,{children:(0,t.jsxs)(n.EmptyState.Root,{description:"No flags have been created",icon:(0,t.jsx)(n.EmptyState.Icon,{icon:(0,t.jsx)(z.ToggleOnAlt,{size:32})}),title:"No flags",children:[u,(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=(0,eo.slugify)(g),a=(0,E.validateSlug)(t);m(a),a||(0,x.startTransition)(()=>{o({create:JSON.stringify({key:t})})})},className:"flex flex-initial flex-col items-stretch justify-start material-base p-4 gap-3 w-3/5",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3",children:[(0,t.jsx)(O.Input,{name:"slug",value:g,onChange:e=>{let t=e.target.value,a=(0,eo.slugify)(t);f(t),p(a!==t)},"aria-labelledby":"flag-name",placeholder:"my-flag",width:"100%",showErrorMessage:!1,error:c}),(0,t.jsx)(s.Button,{type:"secondary",typeName:"submit",children:"Create flag..."})]}),c?(0,t.jsx)(L.Error,{error:c}):null,h?(0,t.jsxs)(_.Note,{children:['The flag will be created with the slug "',(0,eo.slugify)(g),'".']}):null]}),(0,t.jsxs)(l.Entity.List,{className:"w-3/5 rounded-md shadow-border",children:[(0,t.jsx)(l.Entity,{onClick:()=>{r.push(`/${a.teamSlug}/${a.project}/flags/onboarding`)},children:(0,t.jsx)(l.Entity.Content,{title:"Getting started",description:"Learn how to integrate flags"})}),(0,t.jsx)(l.Entity,{right:(0,t.jsx)(ed,{}),onClick:()=>{(0,el.openWindow)("https://vercel.com/docs/feature-flags","_blank")},children:(0,t.jsx)(l.Entity.Content,{title:"Browse Documentation",description:"Learn how to use flags"})}),i?(0,t.jsx)(eu,{children:(0,t.jsx)(l.Entity.Content,{title:"Install a Flag Provider",description:"Bring your existing flags"})}):null]})]},"empty")})}e.s(["EmptyStateMarketplaceOnly",0,function(){return(0,t.jsx)(A.ExperimentsResourceModalsProvider,{children:(0,t.jsx)(n.EmptyState.Root,{description:"No flags have been created",icon:(0,t.jsx)(n.EmptyState.Icon,{icon:(0,t.jsx)(z.ToggleOnAlt,{size:32})}),title:"No flags",children:(0,t.jsx)("div",{className:"flex flex-row gap-4",children:(0,t.jsx)($.CreateResourceButton,{buttonType:"secondary",onSuccess:e=>{},protocolType:"experimentation",hideIfHasNoStores:!1})})},"empty")})},"FlagsOverviewEmptyState",0,ec],9106551);let em=(0,I.createFuzzySearch)({keys:["slug","description"]});function eg(e){let{flag:i,outcomes:r}=e,s=r.flatMap(e=>{switch(e.type){case"variant":return i.variants.find(t=>t.id===e.variantId)??[];case"split":return(0,g.uniq)([e.defaultVariantId,...Object.keys(e.weights).filter(t=>e.weights[t]>0)]).flatMap(e=>i.variants.find(t=>t.id===e)??[]);default:{let{type:t}=e;(0,a.exhaustivenessCheck)(t)}}}),n=(0,f.uniqBy)(s,"id").map(e=>e.label?(0,j.safeJsonStringify)(e.label).replace(/^"(?<s>.+)"$/g,"$<s>"):(0,j.safeJsonStringify)(e.value)).join(", ");return n.length>32?(0,t.jsxs)(u.Tooltip,{as:"span",text:`Possible values: ${n}`,children:[n.slice(0,32),"…"]}):n}function ef(e){let{flag:a,flagEnv:i}=e;if(!(i in a.environments))return null;let r=a.environments[i];return(r.active&&r.reuse?.active&&(r=a.environments[r.reuse.environment]),r.active)?(0,t.jsx)(eg,{flag:a,outcomes:[r.fallthrough,...r.rules.map(e=>e.outcome)]}):(0,t.jsx)(eg,{flag:a,outcomes:[r.pausedOutcome]})}function eh(e){let{flagDefinition:a,flagEnv:i,deploymentFlagsUrl:s,params:n,deferredSearch:o,from:d}=e,u=d?`?from=${d}`:"";return(0,t.jsxs)(l.Entity,{className:"flex min-h-[60px] list-none justify-center px-4",children:[(0,t.jsx)("div",{className:"w-6 place-items-center",children:(0,t.jsx)(T.FlagStatusDot,{isOn:"on"===(0,C.getEnvState)(a,i)})}),(0,t.jsx)(v.Link,{className:"text-decoration-none flex flex-auto font-mono text-black no-underline","data-testid":(0,r.tid)("vercel-flags","browse","flag",a.slug),href:`/${n.teamSlug}/${n.project}/flag/${a.slug}${u}`,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:(0,t.jsx)(R.Highlight,{text:a.slug,searchQuery:o})}),"archived"===a.state?(0,t.jsx)(M.ReferencedArchivedBadge,{slug:a.slug,deploymentFlagsUrl:s}):(0,t.jsx)(P.UnreferencedBadge,{slug:a.slug,deploymentFlagsUrl:s})]})}),(0,t.jsx)("div",{className:"ml-4 grow justify-self-end truncate text-right font-mono text-sm text-gray-800 hidden @md-page:block",children:(0,t.jsx)(ef,{flag:a,flagEnv:i})}),(0,t.jsx)("div",{className:"ml-4 min-w-20 text-right hidden @md-page:block",children:(0,t.jsx)(S.KindBadge,{kind:a.kind})}),(0,t.jsx)("div",{className:"flex items-center ml-2",children:(0,t.jsx)(w.CreatorAvatar,{uid:a.createdBy,name:a.metadata?.creator?.name,size:24,showUsername:!1,className:"text-xs"})})]})}e.s(["FlagList",0,function(e){let{params:a,searchParams:g,deploymentFlagsUrl:f,state:v,initialFlagsResponse:j}=e,{team:S}=(0,i.useTeam)(),[w,I]=(0,h.useQueryState)("env",(0,p.parseAsArrayOf)(p.parseAsString).withOptions({history:"push"}).withDefault(["production"])),C=w[0],[T,R]=(0,x.useState)(g.search??""),{permissions:P,isLoading:M}=(0,F.useFlagsPermissions)(),[A,$]=(0,x.useState)(T);(0,x.useEffect)(()=>{(0,x.startTransition)(()=>{$(T)})},[T]),(0,x.useEffect)(()=>{(0,x.startTransition)(()=>{let e=new URL(location.href);A?e.searchParams.set("search",A):e.searchParams.delete("search"),history.replaceState(null,"",e.toString())})},[A]);let B=(0,N.getFlagListUrl)(a.project,{teamId:a.teamSlug,state:v}),{data:L}=(0,b.default)(B,N.getFlagList,{refreshInterval:7e3,fallbackData:j}),O=(0,x.useMemo)(()=>{if(L&&0===L.flags.length)return;let e=L?.flags;if(e)return e.sort((e,t)=>(t.updatedAt||t.createdAt||0)-(e.updatedAt||e.createdAt||0))},[L]),_=(0,x.useMemo)(()=>Array.isArray(O)?0===A.trim().length?O:em(A,O):O,[O,A]),V=!_?.length&&O?.length,z=!O?.length,[D,q]=(0,E.useCreateFlagForm)(a);return(0,t.jsxs)("div",{className:"mx-auto w-full",children:[z?null:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-4 flex-row",children:[(0,t.jsx)(o.SearchInput,{id:"flag-search",onChange:e=>R(e.target.value),placeholder:"Search flags…",value:T,width:"100%"}),(0,t.jsx)("div",{className:"hidden flex-1 items-center @md-page:flex",children:(0,t.jsxs)(d.Switch,{className:"w-full",children:[(0,t.jsx)(d.Switch.Control,{checked:"production"===C,"data-testid":(0,r.tid)("vercel-flags","browse","env.switch","production"),label:"Production",onChange:()=>{I(["production"])},value:"production"}),(0,t.jsx)(d.Switch.Control,{checked:"preview"===C,"data-testid":(0,r.tid)("vercel-flags","browse","env.switch","preview"),label:"Preview",onChange:()=>{I(["preview"])},value:"preview"}),(0,t.jsx)(d.Switch.Control,{checked:"development"===C,"data-testid":(0,r.tid)("vercel-flags","browse","env.switch","development"),label:"Development",onChange:()=>{I(["development"])},value:"development"})]})}),"active"===v?(0,t.jsx)(u.Tooltip,{disableTriggers:P.create,text:"You need additional permissions to create a flag.",children:(0,t.jsx)(s.Button,{"data-testid":(0,r.tid)("vercel-flags","create-form","trigger"),disabled:!S||!P.create||M,onClick:()=>D(),prefix:(0,t.jsx)(m.Plus,{}),type:"default",typeName:"button",children:"Create Flag"})}):null]}),q,(0,t.jsx)("div",{className:(0,y.clsx)("bg-white @sm-page:rounded-md",z?"":"mt-4"),children:z?"archived"===v?(0,t.jsx)(n.EmptyState.Root,{description:"You have not archived any flags yet",icon:(0,t.jsx)(c.Archive,{size:32}),title:"Archived Flags"},"empty"):(0,t.jsx)(ec,{params:a,promoteMarketplaceProviders:!1}):(0,t.jsx)(l.Entity.List,{className:"shadow-border",children:_?.map((e,i)=>(0,t.jsx)(k.ConditionalNavigationMarker,{label:"FlagList",phase:"content",enabled:0===i,children:(0,t.jsx)(eh,{flagDefinition:e,flagEnv:C,deploymentFlagsUrl:f,params:a,deferredSearch:A,from:e.state})},e.slug))??null},"list")}),V?(0,t.jsxs)("div",{className:"mt-5 rounded-md text-center",children:[(0,t.jsx)("span",{className:"text-copy-14 text-gray-700",children:"No results found for"})," ",'"',A,'"']}):null]})},"FlagListItem",0,eh],3281894)}]);

//# debugId=5a0dfb89-6dfe-2664-95d7-0e48b9fc6822
//# sourceMappingURL=e54c83980278428a.js.map