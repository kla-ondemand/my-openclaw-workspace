;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c717e096-e8b9-1147-06d0-b2e6d9167ae3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1080700,e=>{"use strict";e.s(["arraysEqual",0,function(e,t){if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},"arraysEqualUnordered",0,function(e,t){if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;let r=t.toSorted();return e.toSorted().every((e,t)=>e===r[t])},"getIfNotEmpty",0,function(e){return e.length>0?e:void 0},"moveArrayItem",0,function(e,t,r){if(!e)return e;let n="up"===r?t-1:t+1;if(n<0||n>=e.length)return e;let a=[...e],[i]=a.splice(t,1);return a.splice(n,0,i),a}])},409142,e=>{"use strict";var t=e.i(8660982),r=e.i(5677444),n=e.i(1080700);function a(e,t){let r={},n=new URLSearchParams(t);for(let[t,a]of Object.entries(e)){let e=n.get(a.searchParamKey??t);if(null===e||""===e)r[t]=a.defaultValue;else if(a.parseFromUrl){let n=a.parseFromUrl(e);r[t]=void 0!==n?n:a.defaultValue}else a.allowed?r[t]=a.allowed.includes(e)?e:a.defaultValue:r[t]=e}return r}e.s(["useSearchParamsState",0,e=>{let i=(0,r.useRouter)(),l=function(e,t){let r=new URLSearchParams;for(let n of Object.keys(e)){let a=e[n].searchParamKey??n,i=t?.get(a)??null;null!==i&&r.set(a,i)}return r.toString()}(e,(0,r.useSearchParams)()),o=(0,t.useCallback)(function(t){let r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a(e,l);r=o.override?{...Object.keys(e).reduce((e,t)=>(e[t]=void 0,e),{}),...t}:{...s,...t},function(e,t,r){for(let n of Object.keys(t)){let t=e[n];for(let e of t?.onChangeRemoveKeys??[])r[e]=void 0}}(e,t,r);let u=function(e,t){let r=new URL(window.location.href);for(let[i,l]of Object.entries(t)){var a;let t=e[i];if(!t)continue;let o=t.searchParamKey??i;if(l&&!(l===(a=t.defaultValue)||Array.isArray(l)&&Array.isArray(a)&&(0,n.arraysEqualUnordered)(l,a))){let e=t.formatToUrl?.(l)??l;r.searchParams.set(o,e)}else r.searchParams.delete(o)}return r}(e,r);o.replace?o.navigate?i.replace(u.href,{scroll:!1}):window.history.replaceState(null,"",u.href):window.location.href!==u.toString()&&(o.navigate?i.push(u.href,{scroll:!1}):window.history.pushState(null,"",u.href))},[e,l,i]);return(0,t.useMemo)(()=>({state:a(e,l),set:o}),[e,l,o])}])},2936765,e=>{"use strict";var t=e.i(516467);e.s(["endOfMonth",0,function(e,r){let n=(0,t.toDate)(e,r?.in),a=n.getMonth();return n.setFullYear(n.getFullYear(),a+1,0),n.setHours(23,59,59,999),n}])},1174741,e=>{"use strict";var t=e.i(516467);e.s(["endOfDay",0,function(e,r){let n=(0,t.toDate)(e,r?.in);return n.setHours(23,59,59,999),n}])},8492421,e=>{"use strict";let t={};e.s(["getDefaultOptions",0,function(){return t}])},7954259,e=>{"use strict";var t=e.i(8492421),r=e.i(516467);e.s(["startOfWeek",0,function(e,n){let a=(0,t.getDefaultOptions)(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=(0,r.toDate)(e,n?.in),o=l.getDay();return l.setDate(l.getDate()-(7*(o<i)+o-i)),l.setHours(0,0,0,0),l}])},4495794,e=>{"use strict";var t=e.i(9487122),r=e.i(516467);e.s(["addMonths",0,function(e,n,a){let i=(0,r.toDate)(e,a?.in);if(isNaN(n))return(0,t.constructFrom)(a?.in||e,NaN);if(!n)return i;let l=i.getDate(),o=(0,t.constructFrom)(a?.in||e,i.getTime());return(o.setMonth(i.getMonth()+n+1,0),l>=o.getDate())?o:(i.setFullYear(o.getFullYear(),o.getMonth(),l),i)}])},9103882,e=>{"use strict";var t=e.i(539392),r=e.i(3738416);e.s(["isSameDay",0,function(e,n,a){let[i,l]=(0,t.normalizeDates)(a?.in,e,n);return+(0,r.startOfDay)(i)==+(0,r.startOfDay)(l)}])},7432286,e=>{"use strict";var t=e.i(516467);e.s(["startOfMonth",0,function(e,r){let n=(0,t.toDate)(e,r?.in);return n.setDate(1),n.setHours(0,0,0,0),n}])},7983961,e=>{"use strict";var t=e.i(539392);e.s(["isSameMonth",0,function(e,r,n){let[a,i]=(0,t.normalizeDates)(n?.in,e,r);return a.getFullYear()===i.getFullYear()&&a.getMonth()===i.getMonth()}])},4337458,e=>{"use strict";var t=e.i(8172029),r=e.i(5677444),n=e.i(5338940),a=e.i(6060673),i=e.i(9668517),l=e.i(8633387);e.s(["useSlugScope",0,e=>{let{isReady:t,teams:r}=(0,n.useTeam)(),{data:i}=(0,a.useProjects)(e&&"projectIds"in e?e.projectIds:void 0);if(!e||!t||!i)return;let l=r?.find(t=>t.id===e.ownerId);if(l)switch(e.type){case"project":if(!i.length)return;return{type:"project",teamSlug:l.slug,projectNames:i.map(e=>e.name)};case"owner":if(!l.slug)return;return{type:"team",teamSlug:l.slug}}},"useSonarQueryScope",0,()=>{let e=(0,r.useParams)(),a=(0,t.getQueryParam)(e?.project),{team:i}=(0,n.useTeam)(),{data:o}=(0,l.useDashboardProject)({projectSlug:a});if(!a||o){if(o&&i)return{type:"project",ownerId:i.id,projectIds:[o.id]};if(i)return{type:"owner",ownerId:i.id}}},"useSonarQueryScopeWithSlug",0,()=>{let e=(0,r.useParams)(),n=(0,t.getQueryParam)(e?.project),a=(0,i.useTeamSlug)();return n&&a?{type:"project-with-slug",teamSlug:a,projectName:n}:a?{type:"team-with-slug",teamSlug:a}:void 0}])},8151845,e=>{"use strict";var t=e.i(409142),r=e.i(2749380);let n={f:{defaultValue:{levels:{v:["error"],o:"eq"}},formatToUrl:e=>JSON.stringify(e),parseFromUrl:e=>JSON.parse(e)},period:{defaultValue:"12h",onChangeRemoveKeys:["from","to"]},from:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["period"]},to:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["period"]},orderBy:{defaultValue:void 0},environment:{defaultValue:"production"}},a=()=>{let{set:e,state:r}=(0,t.useSearchParamsState)(n);return[r,e]};e.s(["useRangeFromQueryState",0,function(){let[e]=a(),{start:t,end:n}=e.from&&e.to?{start:e.from,end:e.to}:(0,r.getRangeFromPreset)(e.period);return{start:t,end:n,isRelativeTime:!(e.from&&e.to)}},"useSonarQueryState",0,a])},7911158,e=>{"use strict";e.s(["formatPercentage",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return isNaN(e)?"-%":new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:t}).format(e)}])},7111873,e=>{"use strict";let t;e.s(["xxHash32",0,function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="string"==typeof e?(t??=new TextEncoder).encode(e):e,a=r+0x165667b1|0,i=0;if(n.length>=16){let e=[r+0x9e3779b1+0x85ebca77|0,r+0x85ebca77|0,r+0|0,r-0x9e3779b1|0],t=n.length-16,l=0;for(i=0;(0xfffffff0&i)<=t;i+=4){let t=i,r=0x85ebca77*(n[t+0]+(n[t+1]<<8))+((n[t+2]+(n[t+3]<<8))*0x85ebca77<<16),a=e[l]+r|0,o=65535&(a=a<<13|a>>>19),s=a>>>16;e[l]=0x9e3779b1*o+(0x9e3779b1*s<<16)|0,l=l+1&3}a=(e[0]<<1|e[0]>>>31)+(e[1]<<7|e[1]>>>25)+(e[2]<<12|e[2]>>>20)+(e[3]<<18|e[3]>>>14)|0}a=a+n.length|0;let l=n.length-4;for(;i<=l;i+=4){let e=i;a=(65535&(a=(a=a+(0xc2b2ae3d*(n[e+0]+(n[e+1]<<8))+((n[e+2]+(n[e+3]<<8))*0xc2b2ae3d<<16))|0)<<17|a>>>15))*0x27d4eb2f+((a>>>16)*0x27d4eb2f<<16)|0}for(;i<n.length;++i)a+=0x165667b1*n[i],a=(65535&(a=a<<11|a>>>21))*0x9e3779b1+((a>>>16)*0x9e3779b1<<16)|0;return a^=a>>>15,a=((65535&a)*0x85ebca77|0)+((a>>>16)*0x85ebca77<<16),a^=a>>>13,a=((65535&a)*0xc2b2ae3d|0)+((a>>>16)*0xc2b2ae3d<<16),(a^=a>>>16)<0?a+0x100000000:a}])},6062041,e=>{"use strict";var t=e.i(4205214),r=e.i(3973638),n=e.i(7111873),a=e.i(1233856),i=e.i(7911158),l=e.i(2749380);let o=[800,600,500].flatMap(e=>[`var(--ds-blue-${e})`,`var(--ds-amber-${e})`,`var(--ds-green-${e})`,`var(--ds-purple-${e})`,`var(--ds-pink-${e})`]),s={"2xx":"hsla(212, 100%, 60%, 1)","3xx":"hsla(208, 100%, 66%, 1)","4xx":"hsla(39, 100%, 57%, 1)","5xx":"hsla(358, 75%, 59%, 1)"};e.s(["calculatePercentage",0,(e,t)=>e/t*100||0,"excludedIntervalsToMarks",0,function(e){if(!e?.query?.startTime||!e?.query?.endTime)return[];let n=new Date(e.query.startTime).getTime(),a=new Date(e.query.endTime).getTime();return(e.query.excludedIntervals??[]).filter(e=>{let{start:t,end:r}=e;return n<=t&&t<=a||n<=r&&r<=a}).map(e=>{let{start:n,end:a}=e;return{id:`${n}-${a}`,type:"area",label:"Observability Plus\n was disabled",color:"var(--ds-gray-500)",startTime:new Date(n),endTime:new Date(a),children:(0,t.jsx)(r.EyeOff,{color:"gray-900",x:"-8",y:"-8"}),tooltipContent:(0,t.jsx)("div",{className:"p-1",children:"Observability Plus was disabled"})}})},"formatPercentageChart",0,(e,t)=>{let r=e/100;return 0===r?"0%":"tooltip"===t?r<1e-4?"<0.01%":(0,i.formatPercentage)(r,2):r<.001&&"yaxis"!==t&&0!==r?"<0.1%":(0,i.formatPercentage)(r,1)},"getRoundedDateRange",0,function(e){let{startTime:t,endTime:r}=e,n=(0,l.getGranularityFromDuration)(r.getTime()-t.getTime(),!1);return{granularity:n,startTime:(0,a.startOfDuration)(t,n),endTime:(0,a.startOfDuration)(r,n)}},"getStatusColors",0,function(e){return e.includes("xx")?s[e.toLowerCase()]||"var(--ds-gray-700)":s[`${e[0]}xx`.toLowerCase()]||"var(--ds-gray-700)"},"indexToColor",0,function(e){return o[e%o.length]},"nameToColor",0,function(e){let t=(0,n.xxHash32)(e,50)%o.length;return o[t]}])},5467025,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),n=e.i(5677444),a=e.i(6062041);let i=(0,r.createContext)({hoveredRow:void 0,setHoveredRow:()=>{},hoveredTimestamp:void 0,setHoveredTimestamp:()=>{},getColor:()=>"transparent",registerColorKeys:()=>{}});i.displayName="ObservabilityChartContext",e.s(["ObservabilityChartContextProvider",0,function(e){let{children:l}=e,[o,s]=(0,r.useState)(void 0),[u,c]=(0,r.useState)(void 0),[d,f]=(0,r.useState)(new Map),m=(0,n.usePathname)(),h=(0,r.useCallback)((e,t)=>{let r=(d.get(e)||[]).indexOf(t);return -1===r?"transparent":(0,a.indexToColor)(r)},[d]),y=(0,r.useCallback)((e,t)=>{let r=d.get(e)||[],n=[];for(let e of t)-1===r.indexOf(e)&&n.push(e);n.length&&f(t=>new Map(t).set(e,[...r,...n]))},[d,f]),g=(0,r.useMemo)(()=>({hoveredRow:o,setHoveredRow:s,hoveredTimestamp:u,setHoveredTimestamp:c,getColor:h,registerColorKeys:y}),[o,u,h,y]);return(0,r.useEffect)(()=>{s(void 0),c(void 0)},[m]),(0,t.jsx)(i.Provider,{value:g,children:l})},"useObservabilityChartContext",0,function(){return(0,r.useContext)(i)}])},1463005,e=>{"use strict";var t=e.i(4254226),r=e.i(8660982),n=e.i(8264458);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"};function l(e){var t=e.className,l=e.top,o=e.left,s=e.offsetLeft,u=void 0===s?10:s,c=e.offsetTop,d=void 0===c?10:c,f=e.style,m=e.children,h=e.unstyled,y=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(a[r]=e[r]);return a}(e,["className","top","left","offsetLeft","offsetTop","style","children","unstyled"]);return r.default.createElement("div",a({className:(0,n.default)("visx-tooltip",t),style:a({top:null==l||null==d?l:l+d,left:null==o||null==u?o:o+u},!(void 0!==h&&h)&&(void 0===f?i:f))},y),m)}l.propTypes={left:t.default.number,top:t.default.number,offsetLeft:t.default.number,offsetTop:t.default.number,className:t.default.string,children:t.default.node,unstyled:t.default.bool},e.s(["Tooltip",0,l],1463005)},931197,e=>{"use strict";var t,r,n,a,i,l=((t={}).Production="production",t.Preview="preview",t),o=((r={}).Hour="1h",r.Day="1d",r.Week="1w",r.Month="1m",r),s=((n={}).Desktop="desktop",n.Mobile="mobile",n),u=((a={}).RES="RES",a.FID="FID",a.CLS="CLS",a.TTFB="TTFB",a.LCP="LCP",a.FCP="FCP",a.INP="INP",a),c=((i={}).Good="good",i.Improvable="improvable",i.Poor="poor",i);e.s(["DeviceType",()=>s,"Environment",()=>l,"Granularity",()=>o,"MetricType",()=>u,"Rating",()=>c])},9649596,e=>{"use strict";var t=e.i(516467);e.s(["startOfHour",0,function(e,r){let n=(0,t.toDate)(e,r?.in);return n.setMinutes(0,0,0),n}])},5793109,e=>{"use strict";var t=e.i(539392),r=e.i(7954259);e.s(["isSameWeek",0,function(e,n,a){let[i,l]=(0,t.normalizeDates)(a?.in,e,n);return+(0,r.startOfWeek)(i,a)==+(0,r.startOfWeek)(l,a)}])},8965799,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25006 3H8.50006V4.5H9.25006H10.4388L8.71964 6.21976L8.1894 6.75017L9.25023 7.81066L9.78048 7.28024L11.4982 5.56199V6.75V7.5H12.9982V6.75V4C12.9982 3.44772 12.5505 3 11.9982 3H9.25006ZM4.50171 10.4381V9.25V8.5H3.00171V9.25V12C3.00171 12.5523 3.44942 13 4.00171 13H6.75006H7.50006V11.5H6.75006H5.56109L7.28045 9.78027L7.81072 9.24988L6.74995 8.18934L6.21967 8.71973L4.50171 10.4381Z" fill="currentColor" />');e.s(["ArrowUpDiagonalScaleSmall",0,t])},3848869,e=>{"use strict";var t=e.i(8238153),r=e.i(8492421),n=e.i(3737038),a=e.i(2632713),i=e.i(539392),l=e.i(504244),o=e.i(1511518);e.s(["formatDistanceStrict",0,function(e,s,u){let c,d=(0,r.getDefaultOptions)(),f=u?.locale??d.locale??t.defaultLocale,m=(0,l.compareAsc)(e,s);if(isNaN(m))throw RangeError("Invalid time value");let h=Object.assign({},u,{addSuffix:u?.addSuffix,comparison:m}),[y,g]=(0,i.normalizeDates)(u?.in,...m>0?[s,e]:[e,s]),v=(0,n.getRoundingMethod)(u?.roundingMethod??"round"),p=g.getTime()-y.getTime(),x=p/o.millisecondsInMinute,b=(p-((0,a.getTimezoneOffsetInMilliseconds)(g)-(0,a.getTimezoneOffsetInMilliseconds)(y)))/o.millisecondsInMinute,w=u?.unit;if("second"===(c=w||(x<1?"second":x<60?"minute":x<o.minutesInDay?"hour":b<o.minutesInMonth?"day":b<o.minutesInYear?"month":"year"))){let e=v(p/1e3);return f.formatDistance("xSeconds",e,h)}if("minute"===c){let e=v(x);return f.formatDistance("xMinutes",e,h)}if("hour"===c){let e=v(x/60);return f.formatDistance("xHours",e,h)}if("day"===c){let e=v(b/o.minutesInDay);return f.formatDistance("xDays",e,h)}if("month"===c){let e=v(b/o.minutesInMonth);return 12===e&&"month"!==w?f.formatDistance("xYears",1,h):f.formatDistance("xMonths",e,h)}else{let e=v(b/o.minutesInYear);return f.formatDistance("xYears",e,h)}}])},7286972,7013170,5693388,e=>{"use strict";var t=e.i(9598279),r=e.i(4495794),n=e.i(9487122),a=e.i(516467);function i(e,i,l){let{years:o=0,months:s=0,weeks:u=0,days:c=0,hours:d=0,minutes:f=0,seconds:m=0}=i,h=(0,a.toDate)(e,l?.in),y=s||o?(0,r.addMonths)(h,s+12*o):h,g=c||u?(0,t.addDays)(y,c+7*u):y;return(0,n.constructFrom)(l?.in||e,+g+1e3*(m+60*(f+60*d)))}var l=e.i(3737038),o=e.i(539392),s=e.i(1511518);function u(e,t,r){let[n,a]=(0,o.normalizeDates)(r?.in,e,t),i=(n-a)/s.millisecondsInHour;return(0,l.getRoundingMethod)(r?.roundingMethod)(i)}e.s(["differenceInHours",0,u],7013170);var c=e.i(3324292),d=e.i(1230902),f=e.i(3738416),m=e.i(7432286),h=e.i(7954259),y=e.i(9649596),g=e.i(9103882),v=e.i(7983961),p=e.i(5793109),x=e.i(8119470),b=e.i(3848869),w=e.i(931197);let k=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}),D=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case w.Granularity.Hour:{let t=k.format(e).replace(" AM","am").replace(" PM","pm").replace(":00am","am").replace(":00pm","pm");return r?`${(0,d.format)(e,"MMM d")}, ${t}`:t}case w.Granularity.Day:case w.Granularity.Week:return r?(0,d.format)(e,"MMMM d"):(0,d.format)(e,"MMM d");case w.Granularity.Month:default:return r?(0,d.format)(e,"MMMM yyyy"):`${(0,d.format)(e,"MMM")} '${(0,d.format)(e,"yy")}`}},S=(e,t)=>{switch(t){case w.Granularity.Hour:return{from:(0,y.startOfHour)(e),to:i((0,y.startOfHour)(e),{hours:1})};case w.Granularity.Day:return{from:(0,f.startOfDay)(e),to:i((0,f.startOfDay)(e),{days:1})};case w.Granularity.Week:return{from:(0,h.startOfWeek)(e,{weekStartsOn:1}),to:i((0,h.startOfWeek)(e,{weekStartsOn:1}),{weeks:1})};case w.Granularity.Month:default:return{from:(0,m.startOfMonth)(e),to:i((0,m.startOfMonth)(e),{months:1})}}};e.s(["formatRangeWithGranularity",0,function(e,t){let{from:r,to:n}=S(e,t),a=D(r,t),i=D(n,t);if(t===w.Granularity.Hour)return`${a} – ${i}`;if(t===w.Granularity.Day);else if(t===w.Granularity.Week)return`${a} – ${i}`;return a},"formatRelativeTime",0,function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(isNaN(e.getTime()))return"";switch(r){case w.Granularity.Hour:if(function(e,t,r){let[n,a]=(0,o.normalizeDates)(void 0,e,t);return+(0,y.startOfHour)(n)==+(0,y.startOfHour)(a)}(e,n))return"Now";break;case w.Granularity.Day:if((0,g.isSameDay)(e,n))return"Today";if((0,g.isSameDay)(e,(0,t.addDays)(n,1)))return"Tomorrow";if((0,g.isSameDay)(e,(0,x.subDays)(n,1)))return"Yesterday";break;case w.Granularity.Week:if((0,p.isSameWeek)(e,n))return"This week";break;case w.Granularity.Month:if((0,v.isSameMonth)(e,n))return"This month"}return(0,b.formatDistanceStrict)(e,n,{addSuffix:!0})},"formatWithGranularity",0,D,"getDateRangeFromGranularity",0,S,"getGranularity",0,function(e,t){let r=u(t,e),n=(0,c.differenceInMonths)(t,e);return r<168?w.Granularity.Hour:n>6?w.Granularity.Month:w.Granularity.Day},"roundDateWithGranularity",0,function(e,t){let{from:r}=S(e,t);return r}],5693388),e.s([],7286972)},5182595,639493,e=>{"use strict";var t=e.i(4205214),r=e.i(3868422),n=e.i(516467);function a(e){return+(0,n.toDate)(e)}var i=e.i(268049),l=e.i(3333777),o=e.i(1463005),s=e.i(7712782),u=e.i(931197),c=e.i(5467025),d=e.i(5297450),f=e.i(6062041);e.i(7286972);var m=e.i(5693388),h=e.i(8660982),y=e.i(4337458),g=e.i(8151845),v=e.i(7797615),p=e.i(2749380),x=e.i(7917902),b=e.i(2504781),w=e.i(3973638),k=e.i(6143247),D=e.i(2000230),S=e.i(7401739),j=e.i(7363883),O=e.i(550620),M=e.i(6022879),C=e.i(8805156),T=e.i(7893082),N=e.i(2253480),P=e.i(485911),R=e.i(2391273),I=["x1","y1","x2","y2","key"],A=["offset"];function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(){return(z=Object.assign.bind()).apply(this,arguments)}function F(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var G=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,a=e.y,i=e.width,l=e.height,o=e.ry;return h.default.createElement("rect",{x:n,y:a,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function W(e,t){var r;if(h.default.isValidElement(e))r=h.default.cloneElement(e,t);else if((0,j.default)(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,l=t.y2,o=t.key,s=F(t,I),u=(0,C.filterProps)(s,!1),c=(u.offset,F(u,A));r=h.default.createElement("line",z({},c,{x1:n,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function V(e){var t=e.x,r=e.width,n=e.horizontal,a=void 0===n||n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(n,i){return W(a,H(H({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(i),index:i}))});return h.default.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function K(e){var t=e.y,r=e.height,n=e.vertical,a=void 0===n||n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(n,i){return W(a,H(H({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(i),index:i}))});return h.default.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function $(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontalPoints,s=e.horizontal;if(!(void 0===s||s)||!t||!t.length)return null;var u=o.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==u[0]&&u.unshift(0);var c=u.map(function(e,o){var s=u[o+1]?u[o+1]-e:a+l-e;if(s<=0)return null;var c=o%t.length;return h.default.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:s,width:i,stroke:"none",fill:t[c],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return h.default.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function U(e){var t=e.vertical,r=e.verticalFill,n=e.fillOpacity,a=e.x,i=e.y,l=e.width,o=e.height,s=e.verticalPoints;if(!(void 0===t||t)||!r||!r.length)return null;var u=s.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==u[0]&&u.unshift(0);var c=u.map(function(e,t){var s=u[t+1]?u[t+1]-e:a+l-e;if(s<=0)return null;var c=t%r.length;return h.default.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:s,height:o,stroke:"none",fill:r[c],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return h.default.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var Y=function(e,t){var r=e.xAxis,n=e.width,a=e.height,i=e.offset;return(0,T.getCoordinatesOfGrid)((0,N.getTicks)(H(H(H({},P.CartesianAxis.defaultProps),r),{},{ticks:(0,T.getTicksOfAxis)(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},B=function(e,t){var r=e.yAxis,n=e.width,a=e.height,i=e.offset;return(0,T.getCoordinatesOfGrid)((0,N.getTicks)(H(H(H({},P.CartesianAxis.defaultProps),r),{},{ticks:(0,T.getTicksOfAxis)(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},q=[],Q=[];function X(e){var t,r,n,a,i,l,o=(0,R.useChartWidth)(),s=(0,R.useChartHeight)(),u=(0,R.useOffset)(),c=H(H({},e),{},{stroke:null!=(t=e.stroke)?t:"#ccc",fill:null!=(r=e.fill)?r:"none",horizontal:null==(n=e.horizontal)||n,horizontalFill:null!=(a=e.horizontalFill)?a:Q,vertical:null==(i=e.vertical)||i,verticalFill:null!=(l=e.verticalFill)?l:q,x:(0,M.isNumber)(e.x)?e.x:u.left,y:(0,M.isNumber)(e.y)?e.y:u.top,width:(0,M.isNumber)(e.width)?e.width:u.width,height:(0,M.isNumber)(e.height)?e.height:u.height}),d=c.x,f=c.y,m=c.width,y=c.height,g=c.syncWithTicks,v=c.horizontalValues,p=c.verticalValues,x=(0,R.useArbitraryXAxis)(),b=(0,R.useYAxisWithFiniteDomainOrRandom)();if(!(0,M.isNumber)(m)||m<=0||!(0,M.isNumber)(y)||y<=0||!(0,M.isNumber)(d)||d!==+d||!(0,M.isNumber)(f)||f!==+f)return null;var w=c.verticalCoordinatesGenerator||Y,k=c.horizontalCoordinatesGenerator||B,D=c.horizontalPoints,S=c.verticalPoints;if((!D||!D.length)&&(0,j.default)(k)){var C=v&&v.length,T=k({yAxis:b?H(H({},b),{},{ticks:C?v:b.ticks}):void 0,width:o,height:s,offset:u},!!C||g);(0,O.warn)(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(E(T),"]")),Array.isArray(T)&&(D=T)}if((!S||!S.length)&&(0,j.default)(w)){var N=p&&p.length,P=w({xAxis:x?H(H({},x),{},{ticks:N?p:x.ticks}):void 0,width:o,height:s,offset:u},!!N||g);(0,O.warn)(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(E(P),"]")),Array.isArray(P)&&(S=P)}return h.default.createElement("g",{className:"recharts-cartesian-grid"},h.default.createElement(G,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),h.default.createElement(V,z({},c,{offset:u,horizontalPoints:D,xAxis:x,yAxis:b})),h.default.createElement(K,z({},c,{offset:u,verticalPoints:S,xAxis:x,yAxis:b})),h.default.createElement($,z({},c,{horizontalPoints:D})),h.default.createElement(U,z({},c,{verticalPoints:S})))}X.displayName="CartesianGrid";var Z=e.i(2210437),J=e.i(2481636),_=e.i(1905109),ee=e.i(3276970),et=e.i(2943451),er=e.i(1371552),en=e.i(1609062),ea=e.i(6462291),ei=e.i(3386654),el=e.i(8690335);function eo(e,t){if(!e?.length)return()=>null;let r=e.map(e=>e[t]).filter(e=>"number"==typeof e&&!Number.isNaN(e));return r.length?e=>{switch(e){case"sum":return r.reduce((e,t)=>e+t,0);case"avg":return r.reduce((e,t)=>e+t,0)/r.length;case"max":return Math.max(...r);case"min":return Math.min(...r);case"first":return r[0];case"lastComplete":return r[r.length-2];case"last":return r[r.length-1]}}:()=>null}e.s(["createRollupCalculator",0,eo],639493);var es=e.i(3351543),eu=e.i(5406549),ec=e.i(4597921);function ed(e){let{value:r,color:n,label:a,highlight:i}=e;return(0,t.jsxs)("div",{className:(0,k.cn)("flex flex-1 items-center gap-x-2 rounded-sm px-2 py-0.5",!1===i?"opacity-50":null),children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:n}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,t.jsx)("span",{children:a})," ",(0,t.jsx)("span",{className:"font-medium tabular-nums",children:r})]})]})}function ef(e){let{payload:r,label:n,ref:a,getColor:i,contentOverride:o,secondaryYAxisKeys:s,formatValue:u,formatSecondaryValue:c,formatName:d,hoverValue:f,intervalMs:m,hideZeroValuesInTooltip:y}=e,g=r?.[0]?.payload?.name,v=new Date(g||"Invalid date"),p=(0,h.useMemo)(()=>{let e=(0,es.filterPayload)(r),t=y?e.filter(e=>("number"==typeof e.value?e.value:0)>0):e;return(t.length>=6?t.toSorted((e,t)=>{if("Others"===e.dataKey)return 1;if("Others"===t.dataKey)return -1;let r="number"==typeof e.value?e.value:-1/0,n="number"==typeof t.value?t.value:-1/0;return n!==r?n-r:String(e.name).localeCompare(String(t.name))}):t.toSorted((e,t)=>{if("Others"===e.dataKey)return 1;if("Others"===t.dataKey)return -1;let r="number"==typeof e.value?e.value:-1/0,n="number"==typeof t.value?t.value:-1/0;return n!==r?n-r:String(e.name).localeCompare(String(t.name))})).slice(0,15)},[r,y]);return p.length?(0,t.jsxs)("div",{className:"pointer-events-none flex max-h-80 max-w-lg min-w-44 flex-col rounded bg-background-100 text-xs shadow-tooltip mt-2 max-lg:hidden",ref:a,children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-hidden p-1.5 pb-0",children:(0,t.jsx)("div",{className:"flex flex-col gap-0.5",children:o??p.map(e=>{let r=s?.includes(e.dataKey)?c:u;return(0,t.jsx)(ed,{color:i(String(e.dataKey)),highlight:f?f===e.dataKey:null,label:e.dataKey?.toString()||"Not set",value:r&&"number"==typeof e.value?r(e.value,"tooltip"):`${e.value?.toString()}`},e.dataKey)})})}),(0,t.jsx)("div",{className:"flex flex-col gap-1.5 shrink-0 p-1.5 pt-1 text-center",children:d?d(g):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-800",children:(0,l.formatDateRange)(v,new Date(v.getTime()+m))}),(0,t.jsxs)("span",{className:"text-gray-600",children:[(0,l.formatDateRange)(v,new Date(v.getTime()+m),{timezone:"UTC"})," ","UTC"]})]})})]},`ts-${n}`):null}function em(e){let{coordinate:r,label:n,viewBox:a,offset:i,ref:l}=e,s=new Date(n).toLocaleString(void 0,{hour:"numeric",minute:"2-digit",second:"numeric",day:"numeric",month:"2-digit",year:"2-digit"});return(0,t.jsx)(o.Tooltip,{className:"pointer-events-none absolute w-[18ch] bg-transparent bg-none",left:r?.x,ref:l,top:(a.top??0)+(a.height??0)-(i??0)-14,unstyled:!0,children:(0,t.jsx)("span",{className:"absolute flex h-[28px] -translate-x-1/2 items-center justify-center rounded-full border bg-gray-1000 px-2 text-xs font-[400] text-white",children:s})})}function eh(e){let{onZoomIn:n,onAnalyze:a,timestampLeft:i,timestampRight:o,ref:s}=e;return(0,t.jsx)("div",{className:"point items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",ref:s,children:(0,t.jsxs)("div",{className:"flex flex-col gap-1.5 p-2",children:[i&&o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:(0,l.formatDateRange)(new Date(i),new Date(o))}),(0,t.jsxs)("span",{className:"text-gray-600",children:[(0,l.formatDateRange)(new Date(i),new Date(o),{timezone:"UTC"})," ","UTC"]}),(0,t.jsx)("span",{className:"text-center text-gray-900",children:(0,r.formatDistance)(new Date(i),new Date(o))})]}):null,n?(0,t.jsx)(b.Button,{className:"!h-6 !text-xs",onClick:n,size:"small",children:"Zoom In"}):null,a?(0,t.jsx)(b.Button,{className:"!h-6 !text-xs",onClick:a,size:"small",children:"Analyze"}):null]})})}function ey(){return null}function eg(e){let{dataPoint:r,getColor:n,formatValue:a,intervalMs:i}=e,o=Object.entries(r).filter(e=>{let[t]=e;return"name"!==t}).map(e=>{let[t,r]=e;return{key:t,value:r}}).filter(e=>{let{value:t}=e;return t>0}).sort((e,t)=>t.value-e.value).slice(0,15);if(0===o.length)return null;let s=new Date(r.name||"Invalid date");return(0,t.jsxs)("div",{className:"hidden max-lg:block mt-4 rounded bg-background-100 p-2 text-xs shadow-tooltip relative z-[200]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-0.5 max-h-40 overflow-y-auto",children:o.map(e=>{let{key:r,value:i}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-x-2 rounded-sm px-2 py-0.5",children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full flex-shrink-0",style:{backgroundColor:n(r)}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2 min-w-0",children:[(0,t.jsx)("span",{className:"truncate",children:r}),(0,t.jsx)("span",{className:"font-medium tabular-nums flex-shrink-0",children:a(i,"tooltip")})]})]},r)})}),(0,t.jsx)("div",{className:"flex flex-col gap-1 pt-1 text-center text-gray-800 border-t border-gray-100 mt-1",children:(0,t.jsx)("span",{children:(0,l.formatDateRange)(s,new Date(s.getTime()+i))})})]})}function ev(e){return{position:"top",fontSize:10,fontWeight:500,...e}}function ep(e,r,n){let[a,i]=r;if(n<2)return(0,t.jsxs)("linearGradient",{id:e,x1:"0",y1:"0",x2:"100%",y2:"0",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:a}),(0,t.jsx)("stop",{offset:"100%",stopColor:i})]});let l=`${(n-2)*100/(n-1)}%`;return(0,t.jsxs)("linearGradient",{id:e,x1:"0",y1:"0",x2:"100%",y2:"0",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:a}),(0,t.jsx)("stop",{offset:l,stopColor:a}),(0,t.jsx)("stop",{offset:l,stopColor:i}),(0,t.jsx)("stop",{offset:"100%",stopColor:i})]})}e.s(["LineChart",0,function(e){var r;let n,o,{data:b,title:k,isLoading:j,syncId:O="sonar",disableLegend:M,renderCustomLegend:C,lineType:T="linear",formatValue:N=v.formatNumberCompact,formatAxisValue:P,formatXAxisValue:R,formatSecondaryValue:I=N,yAxisDomain:A,allowDataOverflow:E=!1,scale:L="linear",categories:H,showRollup:z=!1,placeholderKeys:F=[],secondaryYAxisKeys:G,rollupConfig:W,headerHeight:V,hideXAxis:K=!1,hideYAxis:$=!1,hideTooltip:U=!1,hideGrid:Y=!1,allowTooltipEscape:B=!1,builderQuery:q,agentWorkflow:Q="observability-investigation",customChartContent:ed,onZoomIn:ex,disableZoom:eb=!1,maxLines:ew=20,xTickCount:ek=2,yTickCount:eD=3,isRelativeTime:eS=!1,tooltipStyle:ej="value-list",granularity:eO,sonarQueryResults:eM,yAxisWidth:eC,marginLeft:eT,marginRight:eN,marginTop:eP,marginBottom:eR,hideZeroValuesInTooltip:eI=!1,shouldFadeKey:eA}=e;if("log"===L&&!A)throw Error("yAxisDomain is required when using a log scale");let eE=(n=(0,ec.useServerFlag)("enable-observability-agent",!1),o=(0,ec.useServerFlag)("enable-firewall-agent",!1),"observability-investigation"===Q?n:"firewall-investigation"===Q&&o),eL=(0,h.useRef)(null),eH=(0,h.useRef)(null),[,ez]=(0,g.useSonarQueryState)(),eF=(0,c.useObservabilityChartContext)(),eG=(0,y.useSonarQueryScope)(),eW=(0,d.useShowDemoDataContext)(),eV=(0,h.useMemo)(()=>!!(q&&eG&&eE),[q,eG,eE]),eK=!eb&&b.length>0,e$=eK||eV,[eU,eY]=(0,h.useState)(!1),eB=(0,h.useRef)(!1),[eq,eQ]=(0,h.useState)(void 0),[eX,eZ]=(0,h.useState)([]),[eJ,e_]=(0,h.useState)(null),[e0,e1]=(0,h.useState)(null),[e2,e5]=(0,h.useState)(null),[e3,e7]=(0,h.useState)(null),e6=(0,h.useCallback)((e,t)=>e_([e,t]),[e_]),{handleMouseDown:e9,isDragging:e4,refAreaLeft:e8,refAreaRight:te,mouseX:tt}=function(e,t,r){let[n,a]=(0,h.useState)(!1),i=(0,h.useRef)(!1),[l,o]=(0,h.useState)(null),[s,u]=(0,h.useState)(null),[c,d]=(0,h.useState)(null),f=(0,h.useRef)(null),m=(0,h.useRef)(null),y=(0,h.useRef)(null),g=(0,h.useRef)(null),v=(0,h.useCallback)(r=>{if(!e.current)return null;let n=e.current.getBoundingClientRect(),a=n.left+50,i=n.width-70,l=r-a;return{index:Math.max(0,Math.min(Math.floor(Math.max(0,Math.min(1,(l-l/i*15)/i))*(t-1)),t-1)),mouseX:Math.max(50,Math.min(i+50,l+50))}},[e,t]),p=(0,h.useCallback)(e=>{if(!i.current)return;let t=v(e.clientX);null!==t&&(u(t.index),d(t.mouseX),m.current=t.index)},[v]),x=(0,h.useCallback)(()=>{if(i.current){let e=f.current,t=m.current;if(null===e||null===t)i.current=!1,a(!1),o(null),u(null);else{let n={start:Math.min(e,t),end:Math.max(e,t)};r(n.start,n.end),i.current=!1,a(!1),o(null),u(null)}d(null)}y.current&&(window.removeEventListener("mousemove",y.current),y.current=null),g.current&&(window.removeEventListener("mouseup",g.current),g.current=null)},[r]),b=(0,h.useCallback)(e=>{i.current=!0,a(!0),d(null),o(e?.activeTooltipIndex??null),f.current=e?.activeTooltipIndex??null,m.current=null,y.current=p,g.current=x,window.addEventListener("mousemove",y.current),window.addEventListener("mouseup",g.current)},[p,x]);return(0,h.useEffect)(()=>()=>{y.current&&window.removeEventListener("mousemove",y.current),g.current&&window.removeEventListener("mouseup",g.current)},[]),{handleMouseDown:b,isDragging:n,refAreaLeft:l,refAreaRight:s,mouseX:c}}(eL,b.length,e6),tr=(0,h.useCallback)(e=>{e$&&(e_(null),e9(e))},[e9,e$]),tn=(0,h.useCallback)(()=>{e1(null),e5(null),eQ(void 0),eB.current=!1,eY(!1),eF.setHoveredRow?.(void 0),eF.setHoveredTimestamp?.(void 0)},[eF]),ta=null!==e8?b[e8]:eJ?b[eJ[0]]:null,ti=null!==te?b[te]:eJ?b[eJ[1]]:null,tl=R?e=>R(new Date(e)):e=>{let t=new Date(e);return eS?(0,s.ago)(Date.now()-t.getTime()):(0,m.formatWithGranularity)(t,u.Granularity.Hour,!0)},to=(0,h.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&e_(null)},[]);r=()=>to(!0),(0,h.useEffect)(()=>{function e(e){"Escape"===e.key&&r()}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]);let ts=(0,h.useCallback)(()=>{if(!ta||!ti)return;let e={from:new Date(ta.name),to:new Date(ti.name)};ex?ex(e):ez(e),to(!0)},[ta,ti,to,ez,ex]),tu=(0,h.useMemo)(()=>function(e){if("payload"in e&&null===e.payload[e.dataKey])return null;let r=b[e.index-1]?.[e.dataKey],n=b[e.index+1]?.[e.dataKey];return null==r&&null==n?(0,t.jsx)("circle",{cx:e.cx,cy:e.cy,fill:e.fill,fillOpacity:e.strokeWidth,r:e.strokeWidth},e.key):null},[b]),tc=(0,h.useMemo)(()=>{let e=new Date,t=b.length-1;for(;t>=0&&new Date(b[t].name)>e;)t--;return t>=0?b.slice(0,t+1):[]},[b]),td=(0,h.useMemo)(()=>{let e=new Set;for(let t of tc)for(let r of Object.keys(t))"name"!==r&&e.add(r);return Array.from(e)},[tc]),tf=H||(0!==tc.length?td:F),tm=tf.some(e=>e===eF.hoveredRow?.value),th=(0,h.useMemo)(()=>"string"==typeof e.getColor?t=>eF.getColor(e.getColor,t):e.getColor??f.nameToColor,[e.getColor,eF.getColor]),ty=(0,h.useMemo)(()=>{let e=[];for(let t of tf)if(!H&&"name"!==t||H){let r=eo(tc,t);e.push({dataKey:t,yAxisId:+!!G?.includes(t),color:th(t),shouldFade:eA?eA(t):tm&&void 0!==eF.hoveredRow&&eF.hoveredRow.value!==t,sum:r("sum"),avg:r("avg"),firstValue:r("first"),lastValue:r("lastComplete")})}return e.sort((e,t)=>(e.sum??0)-(t.sum??0)).slice(-ew)},[tf,H,G,th,tc,tm,eF.hoveredRow,ew,eA]);(0,h.useEffect)(()=>{"string"==typeof e.getColor&&eF.registerColorKeys(e.getColor,ty.map(e=>{let{dataKey:t}=e;return t}).reverse())},[e.getColor,ty,eF]);let tg=T.startsWith("step"),tv=tg?S.AreaChart:_.LineChart,tp=tg?D.Area:J.Line,tx=40;z||C||V||k?(60===V||z||C)&&(tx=60):tx=1;let tb=!j&&tc.length>0,tw=(0,h.useMemo)(()=>({start:new Date(eM?.query?.startTime??tc.at(0)?.name??Date.now()),end:new Date(eM?.query?.endTime??tc.at(-1)?.name??Date.now())}),[eM,tc]),{xTicks:tk,intervalMs:tD}=(0,h.useMemo)(()=>{let e=!!tc[0],{start:t,end:r}=tw,n=Math.floor(tc.length/(ek-1)),a=(0,i.milliseconds)(eO??(0,p.getGranularityFromDuration)(r.getTime()-t.getTime(),!1)),l=new Date(r.getTime()-a);return{xTicks:e?[...Array.from({length:ek-1},(e,t)=>new Date(tc[t*n].name).toISOString()),l.toISOString()]:[t.toISOString(),l.toISOString()],intervalMs:a}},[ek,tc,eO,tw]),{marks:tS,emptyMessage:tj}=(0,h.useMemo)(()=>{var r,n;let i=e.emptyState??"No data in this time range";if(!eM)return{marks:e.marks??[],emptyMessage:i};if(0===b.length&&eM.query){let{startTime:e,endTime:r,excludedIntervals:n}=eM.query,o=a(e),s=a(r),u=n?.find(e=>{let{start:t,end:r}=e;return t<=o&&s<=r});u&&(i=(0,t.jsxs)("span",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(w.EyeOff,{color:"gray-900"}),(0,t.jsx)("span",{children:"Observability Plus was disabled"}),(0,t.jsxs)("span",{className:"text-xs",children:["from"," ",(0,l.formatDateRange)(new Date(u.start),new Date(u.end),{separator:" to "})]})]}))}return{marks:(r=(e.marks??[]).concat((0,f.excludedIntervalsToMarks)(eM)),n=tD,r.filter(e=>{let{startTime:t,endTime:r}=e;return!r||!t||a(r)-a(t)>=n})),emptyMessage:i}},[eM,e.marks,e.emptyState,b,tD]),tO=(0,h.useCallback)((e,t)=>{let{clientX:r}=t;e7(r),eB.current||(eB.current=!0,eY(!0));try{let t=a(e.activeLabel||"");eF.setHoveredTimestamp?.(Number.isNaN(t)?void 0:new Date(t));let r=tc.find(t=>t.name===e.activeLabel);eQ(r);let n=!1;for(let e of tS)if("timestamp"in e&&e.timestamp){let r=a(e.timestamp),i=Math.max(3e5,Math.min(72e5,2*tD));if(Math.abs(r-t)<=i){e1(e),n=!0;break}}else if("startTime"in e&&e.startTime&&e.endTime){let r=a(e.startTime),i=a(e.endTime);if(r<=t&&t<=i){e5(e),n=!0;break}}n||(e1(null),e5(null))}catch{}},[eF,tS,e2,tD,tc]),tM=(0,h.useCallback)(e=>tb||A?(P??N)(e,"yaxis").replace(/(?: GB-hrs)/,"").replace(" ",""):"",[P,N,tb,A]),{user:tC,team:tT}=(0,x.useAccount)(),tN=(0,eu.useAIInvestigationsStore)(e=>e.addInvestigation),tP=(0,h.useCallback)(()=>{var e,t,r,n;let a,i;!tC||!tT||q&&ta&&ti&&eG&&(tN({user:{uid:tC.uid,username:tC.username},teamId:tT.id,workflow:Q??"observability-investigation",input:(e=q,t=new Date(ta.name),r=new Date(ti.name),n=eG,a=(0,el.toSonarQuery)(e),i=(0,f.getRoundedDateRange)({startTime:t,endTime:r}),{...a,...i,scope:n})}),to(!0))},[tC,tT,Q,tN,q,ta,ti,to,eG]),tR=(0,h.useMemo)(()=>({left:eT??0,right:eN??0,bottom:eR??+!!$,top:eP??1}),[$,eT,eN,eP,eR]),tI=!!(e4&&ti||eJ),tA=(0,h.useMemo)(()=>eH.current&&e3?e3<(window.innerWidth||document.documentElement.clientWidth)-(eH.current.getBoundingClientRect().width+20):null,[e3]);return(0,t.jsxs)("div",{"data-share-dom-copy":"1",className:"relative size-full",children:[(0,t.jsx)(er.ResponsiveContainer,{className:"select-none",height:"100%",ref:eL,width:"100%",children:(0,t.jsxs)(tv,{className:"overflow-visible [&>svg]:overflow-visible",data:j&&0===tc.length?[]:tc,margin:tR,onMouseDown:tr,onMouseMove:tO,onMouseLeave:tn,style:{cursor:U||eb?"default":"crosshair",opacity:j?.35:1,transition:"opacity 0.15s ease-in-out"},...tI?{}:{syncId:O},children:[Y?(0,t.jsx)(et.ReferenceLine,{y:0,stroke:"var(--ds-gray-400)",strokeWidth:1,style:{transform:"translateY(0.25px)"}}):(0,t.jsx)(X,{stroke:"var(--ds-gray-100)",strokeWidth:1,syncWithTicks:!0,vertical:!1}),(0,t.jsx)(ei.YAxis,{axisLine:!1,domain:A||(tb?void 0:[0,10]),allowDataOverflow:E,hide:$,fontSize:12,scale:L,tickCount:eD,tickFormatter:tM,tickLine:!1,width:eC??50}),void 0!==G?(0,t.jsx)(ei.YAxis,{yAxisId:1,domain:[0,e=>1.4*e],hide:!0}):null,(0,t.jsx)(ea.XAxis,{axisLine:{stroke:"var(--ds-gray-400)"},dataKey:"name",height:"dots"===ej?38:28,hide:K,tick:{fill:"var(--ds-gray-700)",fontSize:"dots"===ej?14:12,fontFamily:"var(--font-sans)"},ticks:tk,tickFormatter:tl,tickLine:!1,tickSize:7,tickMargin:"dots"===ej?15:5}),eW||U?null:(0,t.jsx)(en.Tooltip,{animationDuration:0,content:tI?(0,t.jsx)(eh,{onZoomIn:eK?ts:void 0,onAnalyze:eV?tP:void 0,ref:eH,timestampLeft:ta?.name,timestampRight:ti?.name}):eU?"value-list"===ej?(0,t.jsx)(ef,{formatValue:N,formatSecondaryValue:I,getColor:th,hoverValue:tm?eF.hoveredRow?.value:null,intervalMs:tD,ref:eH,secondaryYAxisKeys:G,contentOverride:e2?.tooltipContent,hideZeroValuesInTooltip:eI}):(0,t.jsx)(em,{ref:eH}):(0,t.jsx)(ey,{}),allowEscapeViewBox:tI?void 0:{x:tA||B,y:tA||B},cursor:{stroke:"dots"===ej?"var(--ds-gray-500)":"var(--ds-gray-1000)",strokeDasharray:"dots"===ej?"6,2":void 0,strokeWidth:+(tc.length>0&&!e4&&!eJ)},offset:10,position:{y:tx,x:!tI&&tt&&tA?tt+10:void 0},trigger:eJ?"click":"hover",wrapperStyle:{visibility:"visible",pointerEvents:"auto",zIndex:100}}),ty.map(e=>{let{dataKey:r,yAxisId:n,color:a,shouldFade:i}=e,l=Math.floor(1e4*Math.random()),o={animationDuration:0,dataKey:r,fill:a,hide:eX.includes(r),stackId:tg?"a":void 0,strokeWidth:tg?1:1.5,strokeOpacity:i?.2:1,style:{transition:"opacity 0.05s ease-out, background-color 0.05s ease-out",backgroundColor:a,fillOpacity:tg&&!i?.15:0},type:T,yAxisId:n,onMouseEnter:()=>{eF.setHoveredRow?.({value:r})},onMouseLeave:()=>{eF.setHoveredRow?.(void 0)}};return(0,t.jsxs)(h.Fragment,{children:[eS?(0,t.jsxs)("defs",{children:[ep(`${l}-line`,[o.fill??"","transparent"],tc.length),ep(`${l}-dash`,["transparent",o.fill??""],tc.length)]}):null,(0,t.jsx)(tp,{activeDot:{r:5,strokeWidth:2*("dots"===ej&&!tI),fill:"dots"!==ej||tI?"transparent":a,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave},dot:tu,stroke:!tg&&eS?`url(#${l}-line)`:a,...o}),!tg&&eS?(0,t.jsx)(tp,{activeDot:!1,dot:!1,stroke:`url(#${l}-dash)`,strokeDasharray:"2 2",...o},`${r}-dash`):null]},r)}),tg&&eS&&tc.length>=2?(0,t.jsx)(ee.ReferenceArea,{fill:"var(--ds-background-100)",strokeOpacity:.5,x1:tc.at(-2)?.name,x2:tc.at(-1)?.name}):null,M&&!k?null:(0,t.jsx)(Z.Legend,{align:z?"left":"right",content:C??(z?(0,t.jsx)(es.LegendRollupContent,{disableLegend:!0,disabledMetrics:eX,formatValue:N,isLoading:!!j,onClickTag:(e,t)=>{t?eZ(Object.keys(b[0]||{}).filter(t=>t!==e)):eZ(t=>eX.includes(e)?t.filter(t=>t!==e):[...t,e])},placeholderKeys:F,rollupConfig:W,rollupData:ty,setHoveredKey:e=>{e?eF.setHoveredRow?.({value:e}):eF.setHoveredRow?.(void 0)},title:k}):(0,t.jsx)(es.LegendContent,{disabledMetrics:eX,hide:M,onClickTag:(e,t)=>{t?eZ(Object.keys(b[0]||{}).filter(t=>t!==e)):eZ(t=>eX.includes(e)?t.filter(t=>t!==e):[...t,e])},setHoveredKey:e=>{e?eF.setHoveredRow?.({value:e}):eF.setHoveredRow?.(void 0)},title:k})),fontSize:12,height:tx,iconSize:6,iconType:"circle",verticalAlign:"top"}),ta&&ti&&e$?(0,t.jsx)(ee.ReferenceArea,{fill:"var(--ds-gray-alpha-500)",strokeOpacity:.3,x1:ta.name,x2:ti.name}):null,tS.length>0&&(0,t.jsx)("g",{children:tS.filter(e=>"timestamp"===e.type).map(e=>{let r=e.color||"var(--ds-red-600)";if(e.timestamp){let n=new Date(Math.round(a(e.timestamp)/tD)*tD).toISOString();return(0,t.jsx)("g",{children:(0,t.jsx)(et.ReferenceLine,{x:n,stroke:r,strokeWidth:1,strokeDasharray:"3,3",strokeOpacity:.6,label:e0?.id===e.id?ev({value:e.label??"Anomaly",fill:r}):void 0,style:{zIndex:1e3}})},e.id)}return null})},"chart-marks"),tS.filter(e=>"area"===e.type).map(e=>{let r=e.color||"var(--ds-red-700)";if(e.startTime&&e.endTime){let n=Math.max(a(e.startTime),tw.start.getTime()),i=Math.min(a(e.endTime),tw.end.getTime()),l=Math.round(n/tD)*tD,o=Math.round(i/tD)*tD;return(0,t.jsx)(ee.ReferenceArea,{x1:new Date(l).toISOString(),x2:new Date(o).toISOString(),fill:r,fillOpacity:.03,radius:5,stroke:r,strokeOpacity:.8,strokeWidth:1,strokeDasharray:"3,3",label:e.children?function(e,r,n){let{children:a}=e;if(a&&!(r<3*n))return e=>{let r,{viewBox:n}=e;return n&&"x"in n&&(r=`translate(${(n.x??0)+(n.width??0)/2}, ${(n.y??0)+(n.height??0)/2})`),(0,t.jsx)("g",{transform:r,children:a})}}(e,o-l,tD):e2?.id===e.id?ev({value:e.label||"Anomaly Period",fill:r}):void 0,style:{zIndex:1e3,cursor:"pointer"}},e.id)}return null}),ed||null]})}),!tb&&!j&&(0,t.jsx)(es.EmptyStateWrapper,{topOffset:tx,children:tj}),eq&&eU&&!U&&(0,t.jsx)(eg,{dataPoint:eq,getColor:th,formatValue:N,intervalMs:tD}),(0,t.jsx)("div",{className:"duration-[time:50ms] absolute inset-x-0 bottom-0 z-10 flex translate-y-5 justify-center opacity-0 !transition-all focus-within:opacity-100 group-hover/chart:opacity-100 focus:opacity-100 max-lg:opacity-100",children:q?(0,t.jsx)(es.DelayedHoverQueryBuilderButton,{builderQuery:q}):null})]})}],5182595)}]);

//# debugId=c717e096-e8b9-1147-06d0-b2e6d9167ae3
//# sourceMappingURL=71061b8d2b5196fd.js.map