;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="fd31f35d-805d-d641-4009-a31080d2f7bf")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4043190,1610543,5758916,2381001,9974972,9584282,4029500,6119682,13501,e=>{"use strict";var t=e.i(4205214),i=e.i(8660982),n=e.i(1991452),l=e.i(6891161),s=e.i(8362472),r=e.i(57106);e.s(["default",0,function(e){let{active:i,onCancel:a}=e,{teamSlug:o,project:d}=(0,n.useRouter)().query;return(0,t.jsxs)(l.Modal.Modal,{active:i,onClickOutside:a,children:[(0,t.jsxs)(l.Modal.Body,{children:[(0,t.jsx)(l.Modal.Header,{children:(0,t.jsx)(l.Modal.Title,{children:"Assign Domain"})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["In order to assign a domain to your production deployments, configure it in"," ",(0,t.jsx)(r.Link,{as:`/${o}/${d}/settings/domains`,href:"/[teamSlug]/[project]/settings/domains",variant:"highlight",children:"the project settings"})," ",(0,t.jsx)("strong",{children:"(recommended)"}),"."]}),(0,t.jsxs)("p",{className:"text-copy-14",children:["If you want to assign to this specific deployment, however, you can do so using our"," ",(0,t.jsx)(r.Link,{href:"/cli",tab:!0,variant:"highlight",children:"command-line interface"}),":"]}),(0,t.jsx)(s.Snippet,{text:"vercel alias <deployment> <domain>",width:"100%"})]}),(0,t.jsx)(l.Modal.Actions,{children:(0,t.jsx)(l.Modal.Action,{fullWidth:!0,onClick:a,children:"OK"})})]})}],4043190);var a=e.i(3306538),o=e.i(6850581),d=e.i(5255926),c=e.i(5468328),u=e.i(3981247),m=e.i(8893913),p=e.i(3753138),x=e.i(6226725),h=e.i(3978547),j=e.i(4004502),g=e.i(7442760),y=e.i(1717203),f=e.i(7557283),v=e.i(7957424),b=e.i(7218483),k=e.i(5819220),S=e.i(979715),D=e.i(3872542),N=e.i(7808943),C=e.i(5677444),A=e.i(9722978),I=e.i(8735244),w=e.i(85019),R=e.i(4641028),L=e.i(5356862);function T(e){let{children:i,inProgress:n}=e;return(0,t.jsxs)("div",{className:"flex items-center",children:[n?(0,t.jsx)("div",{className:"ml-[-1.5px] w-[19.5px]",children:(0,t.jsx)(I.Spinner,{size:12})}):null,i]})}let M=function(e){let i,{deployment:n,padLeft:l,showSpinner:s=!0,onlyBuild:r=!1,hideAgo:a=!1}=e,{teamSlug:o}=(0,C.useParams)()??{},c=(0,b.useAge)(n?.buildingAt||void 0,{includeSeconds:!0}),u=n&&"id"in n?n.id:n?.uid,m=n&&"READY"===n.readyState&&n.checksState,{data:p,checks:x,isLoading:h}=(0,R.default)({deploymentId:m?u:void 0,teamId:o}),j=E(n,x,r)||0,g=n?.undeleted||n?.deleted||n?.createdAt||n?.created,y=g?g+j:void 0,f=n?.deleted!==void 0,v=y?new Date(y).toLocaleDateString(void 0,{hour:"numeric",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"numeric",timeZoneName:"short"}):"",k=(0,b.useAgo)(y,{suffix:" ago",alwaysRelative:!0});if(!n||h&&!p)return(0,t.jsx)(d.Skeleton,{height:16,width:100});let S=n.checksState&&!n.checksConclusion,D=!!("BUILDING"===n.readyState||"READY"===n.readyState&&!n.aliasAssigned&&S),N=(i=E(n,x,r),(0,w.age)(i,{includeSeconds:!0})||"—"),I=(0,t.jsx)("span",{className:(0,A.clsx)({"pl-[18px]":!D&&l}),suppressHydrationWarning:!0,children:f?(0,t.jsx)("span",{suppressHydrationWarning:!0,title:v,children:k}):(0,t.jsxs)(t.Fragment,{children:[D?c:N,D||a||!k?null:(0,t.jsxs)("span",{suppressHydrationWarning:!0,title:v,children:[" ","(",k,")"]})]})});return s?(0,t.jsx)(T,{inProgress:D,children:I}):I};function E(e,t,i){if(!e||"BUILDING"===e.readyState||!("buildingAt"in e))return;let n="readyStateAt"in e?e.readyStateAt:e.ready;if(!n||!e.buildingAt)return;let l=n-e.buildingAt;if(i)return l;let s=t?.length?(0,L.getChecksTimes)(t,e):void 0,r=s?.checksFinishedAt&&s.checksStartedAt?s.checksFinishedAt-s.checksStartedAt:0,a=e.aliasAssignedAt??("number"==typeof e.aliasAssigned?e.aliasAssigned:void 0),o=0;if(a){let e=s?.checksFinishedAt?a-s.checksFinishedAt:a-n;e<18e5&&(o=e)}return l+r+o}var P=e.i(8529990),F=e.i(6625227),B=e.i(6060673),z=e.i(2689512),U=e.i(5071474),W=e.i(7952998),O=e.i(5002318),_=e.i(2084539),V=e.i(9995926),$=e.i(9375869),G=e.i(8216525),H=e.i(3907048),q=e.i(779588),Y=e.i(5326905),X=e.i(8459493),K=e.i(7448864),Q=e.i(940143),Z=e.i(455575),J=e.i(7749291),ee=e.i(5338940),et=e.i(545405),ei=e.i(4478191),en=e.i(8366444);function el(e){let{isDisabled:i,menuText:n,tidString:l,icon:s,disabledTooltip:r,title:a,onClick:o}=e;return i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-show-on-mobile",children:(0,t.jsx)(c.Tooltip,{boxAlign:"left",text:r,children:(0,t.jsx)(X.MenuItem,{"data-testid":(0,j.tid)("deployment-entity","dots-menu",l),disabled:!0,suffix:s,children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)("span",{className:"text-copy-14",style:{fontSize:"inherit",color:"inherit"},children:n})})})})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-hide-on-mobile",children:(0,t.jsx)(c.Tooltip,{forceHide:!1,position:"left",style:{width:"100%"},text:r,children:(0,t.jsx)(X.MenuItem,{"data-testid":(0,j.tid)("deployment-entity","dots-menu",l),disabled:!0,style:{width:"100%"},suffix:s,children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)("span",{className:"text-copy-14",style:{fontSize:"inherit",color:"inherit"},children:n})})})})})]}):(0,t.jsx)(X.MenuItem,{"data-testid":(0,j.tid)("deployment-entity","dots-menu",l),onClick:o,suffix:s,title:a,children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)("span",{className:"text-copy-14",style:{fontSize:"inherit",color:"inherit"},children:n})})})}var es=e.i(6619197),er=e.i(9365163);function ea(e){let{openModal:i,rollingRelease:n,teamSlug:l,projectSlug:s}=e;return el({isDisabled:!1,menuText:"Abort Rollout",tidString:"abort-rollout",icon:(0,t.jsx)(m.RotateCounterClockwise,{}),disabledTooltip:"",title:"Abort Rollout",onClick:()=>{i&&n&&l&&s&&i(l,s,n)}})}function eo(e){let{openModal:i,rollingRelease:n,teamSlug:l,projectSlug:s}=e;return el({isDisabled:!1,menuText:"Force Complete",tidString:"force-complete",icon:(0,t.jsx)(p.ArrowCircleUp,{}),disabledTooltip:"",title:"Force Complete",onClick:()=>{i&&n&&l&&s&&i(l,s,n)}})}function ed(e){let{deployment:i,redeploy:n,handleClickRunInstantly:l,handleClickCreateAlias:s,itemsOnly:a,handleCancelDeployment:o,canPromoteToProduction:d,canRedeployProduction:c,canUpdateDeployment:u,canReadDeployment:x,canRollbackDeployment:h,handleClickRollback:j,isRollingReleaseCanaryDeployment:g,isRollingReleaseActive:y,rollingRelease:f,openCompleteRollingReleaseModal:v,openAbortRollingReleaseModal:b,previousDeployment:k}=e,S=(0,Z.useToasts)(),D=(0,$.useDeploymentLink)(i),N=o&&("QUEUED"===i.readyState||"INITIALIZING"===i.readyState||"BUILDING"===i.readyState),C="READY"===i.readyState,{team:A}=(0,ee.useTeam)(),{enabled:I}=(0,en.useOnDemandConcurrentBuilds)(A,u),w="QUEUED"===i.readyState&&I,R=!("target"in i)||"production"===i.target,L=!("prebuilt"in i&&i.prebuilt)&&(R?c&&u:u),T=d&&L&&u&&x&&h,M=(0,er.useRollbackTooltip)(i,k),E=el({isDisabled:!!M,menuText:"Instant Rollback",tidString:"instant-rollback",icon:(0,t.jsx)(m.RotateCounterClockwise,{}),disabledTooltip:M,title:"Instant Rollback",onClick:j}),P=y?"Queue for Promotion":"target"in i&&"production"===i.target?"Promote":"Promote to Production",F=null,B=(0,es.usePromoteTooltip)(i);d&&(F=(0,t.jsxs)(t.Fragment,{children:[el({isDisabled:!!B,disabledTooltip:B,menuText:P,tidString:"promote",icon:(0,t.jsx)(p.ArrowCircleUp,{}),title:P,onClick:()=>n(i,!0)}),(0,t.jsx)(Y.MenuDivider,{})]}));let z=g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Q.MenuSection,{title:"Manage Rolling Release",children:[(0,t.jsx)(ea,{openModal:b,rollingRelease:f,teamSlug:A?.slug,projectSlug:i.name}),(0,t.jsx)(eo,{openModal:v,rollingRelease:f,teamSlug:A?.slug,projectSlug:i.name})]}),(0,t.jsx)(Y.MenuDivider,{})]}):(0,t.jsxs)(t.Fragment,{children:[h?E:null,d?F:null]}),U=(0,t.jsxs)(t.Fragment,{children:[d||h?z:null,L?(0,t.jsx)(X.MenuItem,{onClick:()=>n(i),children:"Redeploy"}):null,w&&u?(0,t.jsx)(X.MenuItem,{onClick:l,children:"Start Building Now"}):null,x?(0,t.jsx)(X.MenuItem,{Component:r.Link,href:D,isLink:!0,children:"Inspect Deployment"}):null,x?(0,t.jsx)(X.MenuItem,{Component:r.Link,href:`${D}/source`,isLink:!0,children:"View Source"}):null,x?(0,t.jsx)(X.MenuItem,{onClick:()=>{(0,et.copyToClipboard)(i.url),S.message("Copied to clipboard!")},children:"Copy URL"}):null,C&&u?(0,t.jsx)(X.MenuItem,{onClick:s,children:"Assign Domain"}):null,N&&u?(0,t.jsx)(X.MenuItem,{onClick:()=>o?.(i),type:"error",children:"Cancel Deployment"}):null,x?(0,t.jsxs)(X.MenuItem,{Component:r.Link,disabled:!i,href:(0,ei.withDefaultRoute)(`https://${i.url}`,i.defaultRoute),isLink:!0,target:"_blank",children:["Visit   ",(0,t.jsx)(J.ExternalSmall,{})]}):null,!T&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.MenuDivider,{}),h?null:(0,t.jsx)(K.MenuItemLocked,{children:"Instant Rollback"}),d?null:(0,t.jsx)(K.MenuItemLocked,{children:"Promote"}),L?null:(0,t.jsx)(K.MenuItemLocked,{children:"Redeploy"}),w&&!u?(0,t.jsx)(K.MenuItemLocked,{children:"Run Build"}):null,x?null:(0,t.jsx)(K.MenuItemLocked,{children:"Inspect Deployment"}),x?null:(0,t.jsx)(K.MenuItemLocked,{children:"View Source"}),x?null:(0,t.jsx)(K.MenuItemLocked,{children:"Copy URL"}),C&&!u?(0,t.jsx)(K.MenuItemLocked,{children:"Assign Domain"}):null,N&&!u?(0,t.jsx)(K.MenuItemLocked,{children:"Cancel Deployment"}):null,x?null:(0,t.jsxs)(K.MenuItemLocked,{children:["Visit   ",(0,t.jsx)(J.ExternalSmall,{})]})]})]});return a?U:(0,t.jsx)(q.DotsMenu,{closeOnSelect:!1,children:U})}var ec=e.i(6143247),eu=e.i(8270020);function em(){return(0,eu.useIsActive)()?8e3:3e4}e.s(["useDeploymentsPageRefreshInterval",0,em],1610543);var ep=e.i(4396019);function ex(e){let{datetime:i,label:n,tooltipTop:l}=e;return(0,t.jsx)(c.Tooltip,{text:(0,t.jsx)(O.DeploymentAliasToolTipText,{datetime:i,tooltipTop:l}),children:(0,t.jsx)("div",{className:"inline-flex items-center text-gray-900 font-medium text-label-14 truncate max-w-full z-10 relative",children:n})})}function eh(e){let{datetime:i}=e,n=(0,b.useAgo)(i);return(0,t.jsx)("span",{children:n})}function ej(e){let{datetime:i}=e;return i?(0,t.jsx)(eh,{datetime:i}):null}var eg=e.i(4206574),ey=e.i(4597921);function ef(e){let{deployment:i}=e,l=(0,n.useRouter)(),{data:s}=(0,B.useProject)(i?.name);return(0,t.jsx)(S.EntityField,{thumbnail:s?(0,t.jsx)(z.ProjectAvatar,{project:s,size:22}):(0,t.jsx)(z.ProjectAvatarSkeleton,{size:22}),thumbnailSize:22,title:s?(0,t.jsx)(r.Link,{href:`/${l.query.teamSlug}/${s.name}`,title:s.name,children:s.name}):i?.name??null})}function ev(e){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(eS,{}),children:(0,t.jsx)(eb,{...e})})}function eb(e){let n,{deployment:l,deploymentsMap:s,projectLink:a}=e,o=l?.meta?.originalDeploymentId,c=o?String(o):void 0;c&&(n=s?.get(c));let{data:u,isLoading:x}=(0,F.default)(n?void 0:c,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});u&&(n=u);let h=(0,$.useDeploymentLink)(n),j=(0,i.useMemo)(()=>n?(0,U.default)(n).hash:"",[n]);if(c){let e=l?.meta?.action==="promote"||l?.target==="production"&&n?.target!=="production";return(0,t.jsx)(S.EntityField,{title:(0,t.jsx)("div",{className:"flex h-[20px] flex-row gap-2 text-[var(--accents-6)]",children:x?(0,t.jsx)(d.Skeleton,{boxHeight:22,height:14,vcenter:!0,width:100}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid place-content-center",children:e?(0,t.jsx)(p.ArrowCircleUp,{}):(0,t.jsx)(m.RotateCounterClockwise,{})}),(0,t.jsxs)("span",{className:"flex min-w-0 items-center gap-[0.3em]",children:[e?"Production Rebuild":"Redeploy"," of"," ",n?(0,t.jsx)(r.Link,{className:"z-[2] flex min-w-0 text-inherit",href:h,title:n.host||"",variant:"secondary",prefetch:!1,children:j?(0,t.jsx)(N.default,{className:"overflow-hidden truncate whitespace-nowrap bg-transparent p-0 text-[13.5px] text-inherit",children:j}):n.host||""}):"a deleted deployment"]})]})}),titleSkeletonWidth:100})}return(0,t.jsx)(ek,{deployment:l,projectLink:a,skeletonWidth:100})}function ek(e){let{deployment:i,skeletonWidth:n,projectLink:l}=e;return i?(0,t.jsx)(S.EntityField,{description:(0,t.jsx)(W.DeploymentSource,{branchClassName:"text-[13.5px]",commitClassName:"text-[13.5px]",lineClassName:"relative z-10 gap-x-2 text-gray-1000",secondLineLinkClassName:"gap-x-1 text-[13.5px]",deployment:i,projectLink:l}),descriptionSkeletonWidth:n,title:null,titleSkeletonWidth:n}):(0,t.jsx)(eS,{})}function eS(){return(0,t.jsx)(S.EntityField,{description:null,descriptionSkeletonWidth:100,title:null,titleSkeletonWidth:100})}function eD(e){let{scope:i}=(0,g.useDeploymentListScope)(),{deployment:n}=e,{team:l}=(0,ee.useTeam)(),s=em(),r=e.projectIdOrName??n?.projectId??n?.name,{data:a}=(0,B.useProject)(r),{deployment:o}=(0,ep.useProjectProductionDeployment)(r,{config:{refreshInterval:s}}),d=n?.customEnvironment?.id&&!n.customEnvironment.slug,{data:c}=(0,v.useCustomEnvironments)(r,{revalidateIfStale:!1,skip:!d}),{data:m}=(0,u.useRollingRelease)({teamIdOrSlug:l?.slug,projectSlug:n?.name},{refreshInterval:s}),p=(0,$.useDeploymentLink)(n),{can:x,isLoading:h}=(0,y.default)({projectIdOrName:r}),{deploymentTargetLabel:j}=(0,V.useDeploymentEnvironmentLabel)({deployment:n,customEnvironments:c?.customEnvironments}),f=(0,ey.useServerFlag)("promotion-status-visible",!1);return(0,t.jsx)(eN,{...e,arePermissionsLoading:h,can:x,deploymentLink:p,deploymentTargetLabel:j,isCurrentProductionDeployment:o?.id===n?.uid,rollingRelease:m?.rollingRelease??void 0,project:a,isProjectDeploymentsPage:"PROJECT_DEPLOYMENTS"===i,promotionStatusVisibleFlag:f,previousDeployment:e.previousDeployment})}let eN=(0,i.memo)(function(e){let{deployment:n,deploymentsMap:l,isCurrentProductionDeployment:s,rollingRelease:d,redeploy:u,handleClickCreateAlias:g,handleCancelDeployment:y,handleClickRunInstantly:v,project:N,openRollbackModal:C,projectCellEnabled:A,deploymentLink:I,can:w,arePermissionsLoading:R,deploymentTargetLabel:L,skeleton:T,openCompleteRollingReleaseModal:E,openAbortRollingReleaseModal:F,isProjectDeploymentsPage:B,promotionStatusVisibleFlag:z,previousDeployment:W}=e,V=N?.lastAliasRequest?.type==="rollback"&&N.lastAliasRequest.toDeploymentId===n?.uid,$=N?.lastAliasRequest?.type==="rollback"&&N.lastAliasRequest.fromDeploymentId===n?.uid,q=V&&N.lastAliasRequest?.requestedAt||n?.created||0,Y=(0,b.useAgo)(q),X=n?(0,P.getGitInfoFromDeployment)(n,N?.link):null,K=n?.meta?.deployHookId||void 0,Q=(e,t)=>w?.(e,t)??!1,Z=!!(N&&R),J=n?.target!==null?f.Resource.Deployment:f.Resource.DeploymentPreview,ee=Q(f.Action.Update,J),et=Q(f.Action.Read,J),ei=Q(f.Action.Create,f.Resource.DeploymentRollback),en=Q(f.Action.Create,f.Resource.Deployment),el=Q(f.Action.Create,f.Resource.DeploymentFromProductionBranch),es=!Z&&(en||el||ee||et||ei),er=(0,i.useMemo)(()=>(0,U.default)(n).hash,[n]),ea=null,eo=d?.state==="ACTIVE"&&!!(d.canaryDeployment?.id&&d.canaryDeployment.id===n?.uid),eu=d?.state==="ACTIVE"&&!!(d.queuedDeploymentId&&d.queuedDeploymentId===n?.uid),em=null,ep=(0,eg.getPromotionStatusInfo)({deployment:n,rollingRelease:d,project:N});z&&(em=ep?(0,t.jsx)(S.EntityField,{description:ep.datetime?(0,t.jsx)("span",{className:"block h-[20px] tabular-nums",children:(0,t.jsx)(ej,{datetime:ep.datetime})}):null,descriptionSkeletonWidth:120,descriptionWrap:!1,title:(0,t.jsx)(ex,{...ep}),titleSkeletonWidth:80,width:120}):(0,t.jsx)(S.EntityField,{width:120,className:"!hidden @md-page:!block"}));let eh=ep?(0,t.jsx)(O.DeploymentAliasToolTipText,{datetime:ep.datetime,tooltipTop:ep.tooltipTop}):null;if(s)ea=V?(0,t.jsx)(c.Tooltip,{className:"translate-y-px",text:eh,children:(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(m.RotateCounterClockwise,{}),size:"sm",variant:"amber-subtle",children:"Current"})}):(0,t.jsx)(c.Tooltip,{className:"translate-y-px",text:eh,children:(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(p.ArrowCircleUp,{}),size:"sm",variant:"blue-subtle",children:"Current"})});else if(eo){let{activeStage:e}=d,i=e?.targetPercentage;ea=(0,t.jsx)(c.Tooltip,{className:"translate-y-px",text:eh,children:(0,t.jsx)(a.Badge,{icon:"number"==typeof i?(0,t.jsx)(_.CustomGaugeIcon,{percentage:i}):null,size:"sm",variant:"blue-subtle",children:"Canary"})})}else $?ea=(0,t.jsx)(c.Tooltip,{className:"translate-y-px",text:eh,children:(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(x.CrossCircle,{}),size:"sm",variant:"red-subtle",children:"Rolled Back"})}):n?.readySubstate!=="PROMOTED"||z||(ea=(0,t.jsx)(c.Tooltip,{text:eh,children:(0,t.jsx)(h.ClockDashed,{color:"gray-900",size:14})}));return eu&&(ea=(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(h.ClockDashed,{}),size:"sm",variant:"blue-subtle",children:"Upcoming Canary"})),n?.readySubstate!=="STAGED"||"production"!==n.target||z||(L=L?.concat(": Staged")),(0,t.jsxs)(k.Entity,{className:(0,ec.cn)("@md-page:border-0 @md-page:[&:not(:first-of-type)]:rounded-t-[0px] @md-page:[&:not(:first-of-type)]:border-t",{"deployment-entity":n,"shadow-[inset_4px_0_0_var(--ds-amber-700)] rounded-none":V&&s,"@md-page:[&:not(:first-of-type)]:mt-[-1px]":T}),"data-testid":(0,j.tid)("deployments","deployment-entity",n?.uid??"no-uid"),disabledDotMenuTooltip:es?void 0:(0,t.jsxs)(t.Fragment,{children:["Additional permissions are required to manage Deployment."," ",(0,t.jsx)(r.Link,{href:"/docs/deployments/managing-deployments",variant:"highlight",children:"Learn More →"})]}),isDotMenuDisabled:!es,menuButtonProps:{"aria-label":"Deployment Actions","data-testid":(0,j.tid)("deployment-entity","dots-menu","button")},menuItems:n&&B?(0,t.jsx)(ed,{canPromoteToProduction:en,canReadDeployment:et,canRedeployProduction:el,canRollbackDeployment:ei,canUpdateDeployment:ee,deployment:n,handleCancelDeployment:()=>y?.(n),handleClickCreateAlias:()=>g?.(n),handleClickRollback:()=>{C&&C(s?void 0:n)},handleClickRunInstantly:()=>v?.(n),isRollingReleaseCanaryDeployment:eo,isRollingReleaseActive:d?.state==="ACTIVE",itemsOnly:!0,redeploy:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return u?.(...t)},rollingRelease:d,openCompleteRollingReleaseModal:E,openAbortRollingReleaseModal:F,previousDeployment:W}):null,menuListTestId:`${n?.uid??"no-uid"}-dots-menu`,placeholder:!n,children:[n?(0,t.jsx)(D.PropagatedPropsOmitter,{children:(0,t.jsx)(r.Link,{className:"absolute -inset-4 z-[1]",href:I,prefetchStrategy:"hover"})}):null,(0,t.jsx)(S.EntityField,{className:"max-w-[200px]","data-testid":(0,j.tid)("deployment-entity","target"),descriptionWrap:!1,description:n?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial relative z-[1]",children:[L,ea]}):null,descriptionSkeletonWidth:80,title:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(r.Link,{href:I,prefetchStrategy:"hover",style:{display:"flex",alignItems:"center",gap:8},title:n?.url,children:(0,t.jsx)("p",{className:"text-heading-14 truncate",children:er})})}),titleSkeletonWidth:220,minWidth:140}),(0,t.jsx)(S.EntityField,{description:(0,t.jsx)("span",{className:"block h-[20px] tabular-nums",children:(0,t.jsx)(M,{deployment:n,onlyBuild:!0,hideAgo:!0})}),descriptionSkeletonWidth:146,descriptionWrap:!1,title:n?(0,t.jsx)(G.DeploymentStatus,{deployment:n,label:!0,labelStyle:{color:"var(--ds-gray-900)",fontWeight:400},labelWeight:500}):null,titleSkeletonWidth:146,width:146}),em,A?(0,t.jsx)(ef,{deployment:n}):null,(0,t.jsx)(ev,{deployment:n,deploymentsMap:l,projectLink:N?.link}),(0,t.jsx)(S.EntityField,{avatar:n?(0,t.jsx)(H.CreatorAvatar,{deployment:n,showProviderIcon:!0,size:24}):null,className:"z-[2]",description:n?(0,t.jsxs)(o.RelativeTimeCard,{date:q,side:"left",children:[Y,void 0===K&&(!n.meta?.originalDeploymentId&&X?.commitAuthorLogin?` by ${X.commitAuthorLogin}`:` by ${n?.creator.username}`),void 0!==K&&" via Deploy Hook"]}):null,right:!0})]})});e.s(["DeploymentRow",0,function(e){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(eN,{...e}),children:(0,t.jsx)(eD,{...e})})}],5758916);var eC=e.i(3228096),eA=e.i(5771992);function eI(e){let{style:i,className:n}=e;return(0,t.jsx)("div",{className:(0,ec.cn)("h-[500px] material-base border-none",n),style:i,children:(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center",children:[(0,t.jsx)("div",{className:"flex rounded border border-solid border-gray-alpha-400 bg-background-100 p-2",children:(0,t.jsx)(eC.Globe,{})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(d.Skeleton,{boxHeight:20,height:18,vcenter:!0,width:200}),(0,t.jsx)(d.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:400})]})]})})}e.s(["NoDeploymentCard",0,function(e){let{scope:i="",project:n,style:l,className:s}=e,{data:a,isLoading:o}=(0,eA.default)({limit:1,projectId:n?.id||"",target:"production",state:"READY"}),d=!!a?.deployments.filter(e=>"STAGED"!==e.readySubstate).length,c=!!a?.deployments.filter(e=>"STAGED"===e.readySubstate).length,u=null;return(u=d?"Add, buy, or transfer in a domain to serve your Production deployment from.":c?"Promote a production deployment to serve traffic.":"Your Production Domain is not serving traffic.",o&&!a)?(0,t.jsx)(eI,{style:l,className:s}):(0,t.jsx)("div",{className:(0,ec.cn)("h-[500px] material-base border-none shadow-md",s),style:l,children:(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center",children:[(0,t.jsx)("div",{className:"flex rounded border border-solid border-gray-alpha-400 bg-background-100 p-2",children:(0,t.jsx)(eC.Globe,{color:"gray-900"})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-label-16 m-0 font-medium","data-testid":(0,j.tid)("no-deployment-card","title"),children:`No Production ${d?"Domain":"Deployment"}`}),(0,t.jsx)("p",{className:"text-copy-14 m-0",children:u})]}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.ButtonLink,{as:`/${i}/${n?.name||""}/settings/domains`,className:"self-center",disabled:!n,href:`/${i}/${n?.name||""}/settings/domains`,type:"secondary",children:"Add Domain"}),(0,t.jsx)(r.Link,{external:!0,href:"/docs/domains/working-with-domains#working-with-domains",variant:"secondary",children:"Learn More"})]}):null]})})}],2381001);var ew=e.i(8522580),eR=e.i(4218798);e.s(["default",0,()=>{let e=(0,n.useRouter)(),{data:i}=(0,B.useProject)(e.query.project),l=(0,eR.useTransferTarget)(i);return i?.name&&l?(0,t.jsxs)(ew.Note,{fill:!0,label:!1,type:"warning",variant:"contrast",children:["The Project ",(0,t.jsx)("b",{children:i.name})," is being transferred into"," ",(0,t.jsx)("b",{children:l.name}),"."]}):(0,t.jsx)(ew.Note,{fill:!0,label:!1,type:"warning",variant:"contrast",children:" "})}],9974972);var eL=e.i(4585051),eT=e.i(9318197),eM=e.i(4450569),eE=e.i(369178);let eP=(0,t.jsxs)("svg",{fill:"var(--accents-5)",height:"20",viewBox:"0 0 66 20",width:"66",children:[(0,t.jsx)("path",{d:"M43 10c0 5.523-4.477 10-10 10s-10-4.477-10-10S27.477 0 33 0s10 4.477 10 10zM32.53 6.47a.75.75 0 10-1.06 1.06L33.94 10l-2.47 2.47a.75.75 0 101.06 1.06l3-3a.75.75 0 000-1.06l-3-3z"}),(0,t.jsx)("path",{d:"M.5 9.125v1h2.455v-1H.5zM4.864 9.125v1h3.909v-1h-3.91zM10.682 9.125v1h3.909v-1h-3.91zM16.5 9.125v1h3.91v-1H16.5zM45.59 9.125v1h3.91v-1h-3.91zM51.41 9.125v1h3.908v-1H51.41zM57.227 9.125v1h3.91v-1h-3.91zM63.045 9.125v1H65.5v-1h-2.455z"})]});e.s(["default",0,()=>{let e=(0,n.useRouter)(),{data:i}=(0,B.useProject)(e.query.project),{transferredFromAccountId:l}=i||{},s=(0,eR.useTransferTarget)(i),r=l?.startsWith("team_");return i&&s?(0,t.jsx)(eE.default,{children:(0,t.jsx)("div",{className:"rounded-[var(--geist-radius)] border border-dashed border-[var(--accents-2)] p-12",children:(0,t.jsxs)(eM.default,{center:!0,children:[(0,t.jsx)("h3",{className:"text-copy-16 m-0",style:{maxWidth:"360px",marginBottom:"16px"},children:"Transferring Project"}),(0,t.jsxs)(eM.default,{center:!0,row:!0,children:[(0,t.jsx)(eL.Avatar,{placeholder:!l,size:48,teamId:r?l:void 0,uid:r?void 0:l}),(0,t.jsx)(eT.Spacer,{inline:!0,x:.25}),eP,(0,t.jsx)(eT.Spacer,{inline:!0,x:.25}),(0,t.jsx)(eL.Avatar,{hash:s?.avatar,placeholder:!s,size:48,teamId:s.id})]}),(0,t.jsx)(eT.Spacer,{}),(0,t.jsx)(I.Spinner,{}),(0,t.jsx)(eT.Spacer,{}),(0,t.jsxs)("p",{className:"text-copy-16 m-0 text-center",children:["The Project ",(0,t.jsx)("b",{children:i.name})," is being transferred into"," ",(0,t.jsx)("b",{children:s.name}),"."]})]})})}):null}],9584282);var eF=e.i(1201436),eB=e.i(4345845),ez=e.i(6107899),eU=e.i(6942035),eW=e.i(7674801),eO=e.i(2132151),e_=e.i(1853611),eV=e.i(4712634),e$=e.i(4854149),eG=e.i(6401841),eH=e.i(2988836);function eq(e){let{children:i,header:n,text:l}=e;return(0,t.jsx)(c.Tooltip,{maxWidth:278,text:(0,t.jsxs)("span",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-center gap-1 flex-initial",children:n}),(0,t.jsx)(e$.Balancer,{children:(0,t.jsx)("span",{className:"text-copy-14",children:l})})]}),children:i})}let eY={building:{text:"Link can be shared now—it will open a page with a loading indicator until build completes",content:(0,t.jsx)(I.Spinner,{style:{overflow:"revert"},size:16})},ready:{text:"View of latest deployment on branch—updates automatically",content:(0,t.jsx)(eH.InformationFillSmall,{})},failed:{text:"Domain was not updated because checks failed",content:(0,t.jsx)(eG.Stop,{})}};function eX(e){let{state:i}=e;return(0,t.jsx)(eq,{header:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eB.GitBranch,{}),(0,t.jsx)("span",{className:"text-heading-14",children:"Branch Link"})]}),text:eY[i].text,children:eY[i].content})}var eK=e.i(2695633);let eQ=(0,i.memo)(e=>{var n;let l,{project:s,branch:a,deployments:o,isLoading:c,onClearBranch:u}=e,m=function(e){let t=e?.find(e=>"READY"===e.readyState);if(t)return t;let i=e?.find(e=>"BUILDING"===e.readyState);return i||null}(o),p=(0,Z.useToasts)(),{deployment:x}=(0,ep.useProjectProductionDeployment)(s?.id),{data:h,isValidating:j}=(0,F.default)(m?.uid,{revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateOnMount:!0}),g=(0,P.getGitInfoFromDeployment)(m),y=s?.link?.type||"github",f=g?.prUrl??g?.refUrl??g?.commitUrl??"",v=(0,eK.getGitMeta)(x?.meta),b=c||j,D=h?.alias[0]??h?.url,N=(n=()=>(0,t.jsxs)(k.Entity,{className:"shadow-small border border-[var(--ds-gray-alpha-400)] !bg-[var(--ds-background-100)] bg-clip-padding",filled:!0,placeholder:b,thumbnail:(0,t.jsx)(eV.EntityThumbnail,{circular:!0,size:30,children:(0,t.jsx)(eB.GitBranch,{style:{transform:"translateX(0.5px)"}})}),...!!f&&!b&&{menuItems:(0,t.jsxs)(t.Fragment,{children:[D?(0,t.jsx)(X.MenuItem,{href:`https://${D}`,isLink:!0,prefix:(0,t.jsx)(ez.PreviewEye,{}),target:"_blank",children:"Visit Preview"}):null,(0,t.jsxs)(X.MenuItem,{onClick:()=>{(0,et.copyToClipboard)(f),p&&p.current&&p.current.message("Copied URL to clipboard!")},prefix:(0,t.jsx)(eF.Copy,{}),children:["Copy ",g?.prUrl?"PR":"Branch"," URL ",(0,t.jsx)(eT.Spacer,{})," "]}),(0,t.jsx)(X.MenuItem,{onClick:u,prefix:(0,t.jsx)(eU.Cross,{}),type:"error",children:"Remove Filter"})]})},children:[(0,t.jsx)(S.EntityField,{description:f?(0,t.jsxs)("div",{children:["Branch link for"," ",(0,t.jsx)(r.Link,{href:f,children:(0,t.jsx)("span",{className:"text-copy-14-mono text-inherit",children:a})})]}):(0,t.jsx)("span",{children:a}),title:D?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(r.Link,{className:"inline font-medium",href:`https://${D}`,onClick:()=>{e_.analytics.track(eO.CoreAnalyticsEvents.CLICK_EVENT,{click_name:"click_button",click_value:"deployments_page_primary_preview_deployments"})},variant:"highlight",children:D}),(0,t.jsx)(eX,{state:m?.readyState==="BUILDING"?"building":"ready"})]}):(0,t.jsx)("div",{className:"mb-[2px]",children:"No successful deploy, yet."})}),(0,t.jsx)(S.EntityField,{className:"@sm-page:max-w-fit",right:!0,children:(0,t.jsx)(eM.default,{center:!0,row:!0,children:b?(0,t.jsxs)(eM.default,{center:!0,className:"flex flex-row gap-4",row:!0,children:[(0,t.jsx)(d.Skeleton,{height:32,width:130}),(0,t.jsx)(d.Skeleton,{style:{width:32,height:32}})]}):(0,t.jsxs)(t.Fragment,{children:[!!g?.prUrl&&(0,t.jsx)(r.ButtonLink,{href:g.prUrl,prefix:"github"===y?(0,t.jsx)(eW.LogoGithub,{}):v?(0,t.jsx)("span",{className:"size-4 [&>svg]:size-4",children:v.logo}):null,size:"small",tab:!0,type:"secondary",children:"github"===y?"View PR":"View Changes"}),!g?.prUrl&&!!g?.refUrl&&(0,t.jsx)(r.ButtonLink,{href:g?.refUrl,prefix:(0,t.jsx)(eB.GitBranch,{style:{transform:"translateX(4px)"}}),size:"small",tab:!0,type:"secondary",children:"View Branch"})]})})})]}),l=(0,i.useRef)(0),b||(l.current=Math.random()),(0,i.useMemo)(()=>n(),[l.current]));return b||a?N:null});e.s(["FilteredBranchEntityBar",0,eQ],4029500);var eZ=e.i(2144405),eJ=e.i(762945),e0=e.i(1335111),e1=e.i(7994132);e.s(["DiscontinuedNodeBanner",0,function(e){let{project:i,teamSlug:n}=e;if(!i.nodeVersion)return null;let l=(0,e1.getNodeVersions)().find(e=>e.range===i.nodeVersion);return l&&l.discontinueDate?(0,t.jsx)(e0.CompatBanner,{callToAction:{label:"true"!==eZ.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==eZ.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===eZ.default.env.NEXT_PUBLIC_DASH?"Upgrade Node.js":"Upgrade Node.js in project settings",href:`/${n}/${i.name}/settings/build-and-deployment#node.js-version`},icon:(0,t.jsx)(eJ.Warning,{className:"shrink-0"}),label:(0,e1.WarningMessage)({selectedOption:{range:i.nodeVersion,discontinueDate:l.discontinueDate,link:l.link}}),variant:"warning"}):null}],6119682);var e2=e.i(2006191);e.s(["ExceededMicrofrontendsLimitBanner",0,function(e){let{project:i,teamSlug:n}=e,{data:l}=(0,e2.useTeam)(n);if(!l?.microfrontends?.exceededMicrofrontendsLimitFromDowngradeAt||!i.microfrontends?.enabled)return null;let s=new Date(l?.microfrontends?.exceededMicrofrontendsLimitFromDowngradeAt+2592e6).toLocaleDateString("en-US",{month:"long",day:"numeric"});return(0,t.jsx)(e0.CompatBanner,{callToAction:{label:"Remove microfrontends or upgrade to a paid plan",href:`/${n}/${i.name}/settings/microfrontends`},icon:(0,t.jsx)(eJ.Warning,{className:"shrink-0"}),label:(0,t.jsxs)(t.Fragment,{children:["You have exceeded the microfrontends limit for your team. New deployments for this project will no longer build after"," ",s,"."]}),variant:"warning",priority:2})}],13501)}]);

//# debugId=fd31f35d-805d-d641-4009-a31080d2f7bf
//# sourceMappingURL=bf5a254faac82ab4.js.map