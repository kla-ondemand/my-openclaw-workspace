;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5864435b-1f50-83c1-6050-8fafabd17fef")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1721982,e=>{"use strict";var i=e.i(4205214),n=e.i(2504781),t=e.i(5468328),a=e.i(8660982),r=e.i(4110479),s=e.i(5338940),o=e.i(1717203),l=e.i(7557283),d=e.i(455575),c=e.i(1853611),u=e.i(7780974),g=e.i(3089600),p=e.i(6838069),y=e.i(7589392);let b="Add Drain";function D(e){let{teamSlug:D,projectIdOrSlug:x,size:f,type:h,onDrainCreated:j}=e,C=function(e){let{teamSlug:i,projectIdOrSlug:n}=e,{isOpen:t,drain:y,closeModal:b,setIsOpen:D}=(0,r.useDrainModalContext)(),{team:x,isLoading:f}=(0,s.useTeam)(),{can:h,isLoading:j}=(0,o.default)(),{success:C}=(0,d.useToasts)(),[v,k]=(0,a.useState)(void 0),M=(0,a.useRef)(void 0),m=x?.billing?.plan==="hobby",A=x?.billing?.plan==="pro"&&"trialing"===x.billing.status,T=h(l.Action.Create,l.Resource.Drain)&&!(m||A),O=f||j,B=(0,a.useCallback)(e=>{c.analytics.track(u.VercelActivityAction.DrainsModalOpened,{source:e},{send_to:{data_warehouse_legacy:!0}}),M.current=e,D(!0)},[D]),S=(0,a.useCallback)(e=>{c.analytics.track(u.VercelActivityAction.DrainsModalConverted,{source:M.current,drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy},{send_to:{data_warehouse_legacy:!0}}),M.current=void 0},[]),L=(0,a.useCallback)(e=>{M.current=e},[]),_=(0,a.useCallback)(e=>{C({text:"Drain successfully added",action:"Open integration page",actionHref:(0,p.getInstallationDetailsLink)({teamSlug:i,configurationId:e.id,integrationSlug:e.slug,isMarketplace:!1})})},[i,C]);return(0,g.default)("create",(e,i)=>{"1"===e&&k(i?.source??"query-create")},["source"]),(0,a.useEffect)(()=>{v&&!O&&(T&&B(v),k(void 0))},[v,B,O,T]),{isOpen:t,drain:y,closeModal:b,setIsOpen:D,isLoading:O,canAccess:T,isHobby:m,isProTrial:A,teamSlug:i,projectIdOrSlug:n,openDrainsModal:B,onDrainCreated:S,setLastSource:L,handleExternalIntegrationInstalled:_}}({teamSlug:D,projectIdOrSlug:x});return C.isLoading?(0,i.jsx)(n.Button,{size:f,type:h,disabled:!0,children:b}):C.canAccess?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Button,{size:f,type:h,onClick:()=>C.openDrainsModal("connect-resource-button"),children:b}),(0,i.jsx)(y.DrainModals,{isOpen:C.isOpen,closeModal:C.closeModal,teamSlug:D,projectIdOrSlug:x,onDrainCreated:async e=>{C.onDrainCreated(e),await j?.(e)},drain:C.drain})]}):(0,i.jsx)(t.Tooltip,{desktopOnly:!0,text:C.isHobby||C.isProTrial?"Upgrade your plan to enable Drains":"You need additional permissions to enable Drains for your team",children:(0,i.jsx)(n.Button,{size:f,type:h,disabled:!0,children:b})})}e.s(["AddDrainButton",0,function(e){let{teamSlug:n,projectIdOrSlug:t,resource:a,size:s,type:o,onDrainCreated:l}=e;return(0,i.jsx)(r.DrainModalProvider,{initialResource:a,children:(0,i.jsx)(D,{teamSlug:n,projectIdOrSlug:t,size:s,type:o,onDrainCreated:l})})}],1721982)},184899,e=>{"use strict";var i=e.i(4205214),n=e.i(8674454),t=e.i(6694387),a=e.i(4991687),r=e.i(2560270);e.s(["DisabledButton",0,function(){let{size:e,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsxs)(a.MenuContainer,{children:[(0,i.jsx)(t.MenuButton,{disabled:!0,size:e,type:s,suffix:(0,i.jsx)(r.ChevronDown,{}),children:"Add Drain"}),(0,i.jsx)(n.Menu,{className:"min-w-[300px]"})]})}])}]);

//# debugId=5864435b-1f50-83c1-6050-8fafabd17fef
//# sourceMappingURL=3185edee8075697e.js.map