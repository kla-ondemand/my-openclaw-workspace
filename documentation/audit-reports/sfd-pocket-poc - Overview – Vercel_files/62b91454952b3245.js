;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5e39c0d4-b6b7-dbb8-02a3-a7307897c3a7")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3675495,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.4749 1.33217L11.1964 2.02853L6.19636 14.5285L5.91781 15.2249L4.5251 14.6678L4.80364 13.9714L9.80364 1.47144L10.0822 0.775085L11.4749 1.33217ZM4 5.49999C4.82843 5.49999 5.5 4.82841 5.5 3.99999C5.5 3.17156 4.82843 2.49999 4 2.49999C3.17157 2.49999 2.5 3.17156 2.5 3.99999C2.5 4.82841 3.17157 5.49999 4 5.49999ZM7 3.99999C7 5.65684 5.65685 6.99999 4 6.99999C2.34315 6.99999 1 5.65684 1 3.99999C1 2.34313 2.34315 0.999986 4 0.999986C5.65685 0.999986 7 2.34313 7 3.99999ZM13.5 12C13.5 12.8284 12.8284 13.5 12 13.5C11.1716 13.5 10.5 12.8284 10.5 12C10.5 11.1716 11.1716 10.5 12 10.5C12.8284 10.5 13.5 11.1716 13.5 12ZM12 15C13.6569 15 15 13.6568 15 12C15 10.3431 13.6569 8.99999 12 8.99999C10.3431 8.99999 9 10.3431 9 12C9 13.6568 10.3431 15 12 15Z" fill="currentColor"/>');e.s(["Percentage",0,t])},7867910,e=>{"use strict";var t=e.i(8660982);e.s(["useHotkey",0,function(e,i){(0,t.useEffect)(()=>{let t=t=>{let r=document.activeElement,a=r&&["input","select","textarea"].includes(r.tagName.toLowerCase());t.key.toLowerCase()!==i||a||t.ctrlKey||t.metaKey||(t.preventDefault(),e())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,i])}])},4047087,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 2H1.75H14.25H15V3.5H14.25H1.75H1V2ZM1 12.5H1.75H14.25H15V14H14.25H1.75H1V12.5ZM1.75 7.25H1V8.75H1.75H14.25H15V7.25H14.25H1.75Z" fill="currentColor"/>');e.s(["MenuAlt",0,t])},5348482,e=>{"use strict";var t=e.i(8660982),i=e.i(6352514),r=e.i(1853611),a=e.i(5338940),n=e.i(5677444),l=e.i(409142),o=e.i(4337458),s=e.i(8690335);function u(){let e=(0,o.useSonarQueryScope)(),i=(0,n.useSearchParams)(),r=i?.get("period"),a=i?.get("from"),l=i?.get("to"),u=e?.type==="owner";return(0,t.useCallback)(e=>{for(let[t,r]of i?.entries()||[])s.queryBuilderSearchParamsList.includes(t)&&e.set(t,r);return u&&e.set("by","projectId"),r?e.set("time",r):a&&l&&e.set("time",`${new Date(1e3*Number(a)).toISOString()}/${new Date(1e3*Number(l)).toISOString()}`),e},[i,u,r,a,l])}e.s(["useComputeQueryBuilderParams",0,u,"useOpenQueryBuilder",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"observability-tab-menu",l=arguments.length>1?arguments[1]:void 0,{team:o}=(0,a.useTeam)(),s=(0,n.usePathname)(),d=u();return(0,t.useCallback)(()=>{let t=new URL(s??"",window.location.origin);for(let[e,i]of(t.searchParams.set("builder","true"),d(t.searchParams),s?.endsWith("vercel-functions")&&t.searchParams.set("metric","serverlessFunctionInvocation.count"),l?.entries()??[]))t.searchParams.set(e,i);window.history.pushState(null,"",s+t.search),r.analytics.track(i.AnalyticsEvent.QUERY_BUILDER_OPENED,{teamId:o?.id,plan:o?.billing?.plan??"hobby",source:e})},[o,s,e,l,d])},"useQueryBuilderQueryState",0,()=>{let{set:e,state:t}=(0,l.useSearchParamsState)(s.queryBuilderSearchParamsConfig);return[t,e]}])},1813317,e=>{"use strict";var t=e.i(7557283),i=e.i(1283928);e.s(["canAccessDimension",0,function(e){let{dimension:t,team:r,can:a,isSeawallFlagged:n,isFirewallFlagged:l}=e,o=i.AllDimensions[t];return!(o.restrictions?.some(e=>{let[t,i]=e;return!a(t,i)})||"clientIp"===t&&r.hideIpAddresses||"wafAction"===t&&!n&&!l||["wafRuleId","clientJa4Digest","clientIpCountry"].includes(t)&&!l)},"canAccessEvent",0,function(e){let{event:r,team:a,can:n}=e,l=i.AllEvents[r];return!l.restrictions?.some(e=>{let[t,i]=e;return!n(t,i)})&&("blockedConnection"!==r||!!(a.permissions?.ipBlocking?.includes(t.Action.List)&&a.permissions.domain?.includes(t.Action.List)))},"canAccessMeasure",0,function(e){let{measure:t}=e;return!0},"getAggregableMeasures",0,e=>Object.keys(i.AllMeasures).filter(t=>{let r=i.AllMeasures[t];return"canAggregate"in r&&(Array.isArray(r.canAggregate)?r.canAggregate.includes(e):r.events.includes(e))}),"getGroupableDimensions",0,e=>Object.keys(i.AllDimensions).filter(t=>{let r=i.AllDimensions[t];return"canGroupBy"in r&&r.events.includes(e)})])},9486194,e=>{"use strict";e.s(["queryBuilderEvents",0,["incomingRequest","imageTransformation","isrOperation","serverlessFunctionInvocation","middlewareInvocation","outgoingRequest","aiGatewayRequest","blockedConnection","firewallAction","botIdCheck","edgeFunctionInvocation"],"staticDimensionValues",0,[{dimensions:["environment"],values:[{id:"production",label:"Production"},{id:"preview",label:"Preview"}]},{dimensions:["requestMethod"],values:[{id:"GET"},{id:"POST"},{id:"PUT"},{id:"DELETE"},{id:"PATCH"},{id:"HEAD"},{id:"OPTIONS"},{id:"PROPFIND"},{id:"TRACE"},{id:"CONNECT"},{id:"PROPPATCH"},{id:"MKCOL"},{id:"COPY"},{id:"MOVE"},{id:"LOCK"},{id:"UNLOCK"}]},{dimensions:["httpStatus"],values:[{id:100},{id:101},{id:102},{id:103},{id:200},{id:201},{id:202},{id:203},{id:204},{id:205},{id:206},{id:207},{id:208},{id:226},{id:300},{id:301},{id:302},{id:303},{id:304},{id:305},{id:306},{id:307},{id:308},{id:400},{id:401},{id:402},{id:403},{id:404},{id:405},{id:406},{id:407},{id:408},{id:409},{id:410},{id:411},{id:412},{id:413},{id:414},{id:415},{id:416},{id:417},{id:418},{id:421},{id:422},{id:423},{id:424},{id:425},{id:426},{id:428},{id:429},{id:431},{id:451},{id:500},{id:501},{id:502},{id:503},{id:504},{id:505},{id:506},{id:507},{id:508},{id:510},{id:511}]},{dimensions:["edgeNetworkRegion","functionRegion","imageTransformationRegion","isrShieldRegion"],values:[{id:"sfo1",label:"San Francisco, USA"},{id:"bom1",label:"Mumbai, India"},{id:"sin1",label:"Singapore"},{id:"fra1",label:"Frankfurt, Germany"},{id:"iad1",label:"Washington D.C., USA"},{id:"cdg1",label:"Paris, France"},{id:"hkg1",label:"Hong Kong, China"},{id:"gru1",label:"São Paulo, Brazil"},{id:"arn1",label:"Stockholm, Sweden"},{id:"cle1",label:"Cleveland, USA"},{id:"cpt1",label:"Cape Town, South Africa"},{id:"dub1",label:"Dublin, Ireland"},{id:"dxb1",label:"Dubai, UAE"},{id:"hnd1",label:"Tokyo, Japan"},{id:"icn1",label:"Seoul, South Korea"},{id:"kix1",label:"Osaka, Japan"},{id:"lhr1",label:"London, UK"},{id:"pdx1",label:"Portland, USA"},{id:"syd1",label:"Sydney, Australia"},{id:"yul1",label:"Montréal, Canada"}]},{dimensions:["cacheResult"],values:[{id:"HIT"},{id:"MISS"},{id:"BYPASS"},{id:"STALE"},{id:"REVALIDATED"},{id:"PRERENDER"}]},{dimensions:["wafAction"],values:[{id:"log",label:"LOG"},{id:"bypass",label:"BYPASS"},{id:"challenge",label:"CHALLENGE"},{id:"challenge-solved",label:"CHALLENGE_SOLVED"},{id:"challenge-failed",label:"CHALLENGE_FAILED"},{id:"deny",label:"DENY"},{id:"rate_limit",label:"RATE_LIMIT"},{id:"redirect",label:"REDIRECT"},{id:"allow",label:"ALLOW"}]},{dimensions:["skewProtection"],values:[{id:"active"},{id:"inactive"}]},{dimensions:["functionStartType"],values:[{id:"hot",label:"HOT"},{id:"cold",label:"COLD"},{id:"prewarmed",label:"PREWARMED"},{id:"unknown",label:"UNKNOWN"}]}]])},9179929,e=>{"use strict";var t=e.i(2749380),i=e.i(1233856),r=e.i(8660982),a=e.i(5778089);e.s(["useLast",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.useMemo)(()=>{if(!e?.data)return null;let{value:i="value",filter:r}=t,a="string"==typeof i?e=>e[i]??null:i;for(let t=e.data.length-1;t>=0;t--){if(r&&!r(e.data[t]))continue;let i=a(e.data[t]);if(null!==i)return i}return null},[e?.data,t])},"useSum",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.useMemo)(()=>{if(!e?.summary)return null;let{value:i="value",filter:r}=t,a=e.summary;return(r&&(a=a.filter(r)),"function"==typeof i)?a.reduce((e,t)=>e+(i(t)??0),0):a.reduce((e,t)=>e+(t[i]??0),0)},[e?.summary,t])},"useTableData",0,function(e){let{enrich:a,meta:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,r.useMemo)(()=>{if(!e?.summary)return null;let r=n?.timeseries?.by??[],l=n?.timeseries?.lowGranularity,o=n?.timeseries?.granularity,s=a?e.summary.map(e=>({...e,...a(e)})):e.summary,u=a?e.data?.map(e=>({...e,...a(e)})):e.data,d=r.length>0&&u?u.reduce((e,t)=>{let i=r.map(e=>t[e]).join(",");return e[i]??=[],e[i].push(t),e},{}):{};if(r.length>0&&u){let e=o||(()=>{if(!u.length)return{minutes:1};let e=u.map(e=>new Date(e.timestamp).getTime()),i=Math.min(...e),r=Math.max(...e);return(0,t.getGranularityFromDuration)(r-i,l)})();Object.keys(d).forEach(t=>{let a=d[t];if(0===a.length)return;let n={};a.forEach(t=>{let r=new Date(t.timestamp),a=(0,i.startOfDuration)(r,e).toISOString();n[a]??=[],n[a].push(t)});let l=[];Object.entries(n).forEach(e=>{let[t,i]=e;if(0===i.length)return;let a={...i[0],timestamp:t};Object.keys(i[0]).filter(e=>"number"==typeof i[0][e]&&!r.includes(e)).forEach(e=>{a[e]=i.reduce((t,i)=>t+(i[e]||0),0)}),l.push(a)}),d[t]=l})}let c={};for(let e of s)for(let t in e)"number"==typeof e[t]&&(!c[t]||e[t]>c[t])&&(c[t]=e[t]);let m=Object.keys(c);return s.map(e=>{let t={},i=r.length>0?r.map(t=>e[t]).join(","):null;if(i){let e=d[i];for(let i of m)e&&(t[i]=e.map(e=>({date:e.timestamp,value:e[i]})))}return e.meta={maxValue:c,timeseries:t},e})},[e?.data,e?.summary,n?.timeseries?.by,n?.timeseries?.lowGranularity,n?.timeseries?.granularity,a,...l])},"useTimeseriesData",0,function(e,t){return(0,r.useMemo)(()=>{if(!e?.data)return null;let i={};if("singleCategoryName"in t){let{singleCategoryName:i,rollupName:r="value"}=t;return e.data.map(e=>{let{timestamp:t,...a}=e;return{name:t.toISOString(),[i]:a[r]}})}if("rollupCategories"in t){let{rollupCategories:r,filter:a}=t;e.data.forEach(e=>{if(a&&!a(e))return;let t=e.timestamp.toISOString();Object.entries(r).forEach(r=>{let[a,n]=r,l=e[a]??null;i[t]??={name:t};let o=i[t][n]??null;i[t][n]=null!==l?(o??0)+l:o})})}else{let{category:r,value:n="value",filter:l}=t,o="string"==typeof r?e=>e[r]:r,s="string"==typeof n?e=>e[n]??null:n;e.data.forEach(e=>{if(l&&!l(e))return;let t=e.timestamp.toISOString(),r=o(e)||a.emptyStringReplacement,n=s(e);i[t]??={name:t};let u=i[t][r]??null;i[t][r]=null!==n?(u??0)+n:u})}return Object.values(i)},[e?.data,t])}])},2924363,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.89531 13.7603C6.72984 13.8785 6.5 13.7602 6.5 13.5569V10.75C6.5 9.7835 5.7165 9 4.75 9H2.5V2.5H12.1884C12.762 2.5 13.262 2.89037 13.4011 3.44683L14.4011 7.44683C14.5984 8.23576 14.0017 9 13.1884 9H9.25H8.5V9.75V12.4854C8.5 12.5662 8.46101 12.6419 8.39531 12.6889L6.89531 13.7603ZM5 13.5569C5 14.9803 6.6089 15.8082 7.76717 14.9809L9.26717 13.9095C9.72706 13.581 10 13.0506 10 12.4854V10.5H13.1884C14.9775 10.5 16.2903 8.81868 15.8563 7.08303L14.8563 3.08303C14.5503 1.85882 13.4503 1 12.1884 1H1.75H1V1.75V9.75V10.5H1.75H4.75C4.88807 10.5 5 10.6119 5 10.75V13.5569Z" fill="currentColor"/>');e.s(["ThumbDown",0,t])},2006677,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM9 11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55229 10 9 10.4477 9 11ZM7.09584 5.82182C7.25716 5.48223 7.6022 5.25 7.99999 5.25C8.55227 5.25 8.99999 5.69772 8.99999 6.25C8.99999 6.75329 8.62748 7.17086 8.14337 7.23989C7.70367 7.3026 7.24999 7.67511 7.24999 8.25V8.5V9.25H8.74999V8.63535C9.76443 8.31661 10.5 7.36971 10.5 6.25C10.5 4.86929 9.3807 3.75 7.99999 3.75C7.00158 3.75 6.14136 4.3353 5.74095 5.17818L5.41913 5.85563L6.77402 6.49926L7.09584 5.82182Z" fill="currentColor"/>');e.s(["Question",0,t])},5627633,e=>{"use strict";var t=e.i(8238153),i=e.i(8492421);let r=["years","months","weeks","days","hours","minutes","seconds"];e.s(["formatDuration",0,function(e,a){let n=(0,i.getDefaultOptions)(),l=a?.locale??n.locale??t.defaultLocale,o=a?.format??r,s=a?.zero??!1,u=a?.delimiter??" ";return l.formatDistance?o.reduce((t,i)=>{let r=`x${i.replace(/(^.)/,e=>e.toUpperCase())}`,a=e[i];return void 0!==a&&(s||e[i])?t.concat(l.formatDistance(r,a)):t},[]).join(u):""}])},4998750,e=>{"use strict";var t=e.i(2749380);let i="$time";e.s(["DEFAULT_TIME_VALUE",0,"12h","TIME_VARIABLE",0,i,"extractError",0,function(e){return null==e?"Please retry later":`${e.message??e}`},"parseNotebook",0,function(e){let{variables:i,widgets:r,...a}=e;return{...a,variables:function(e){if(e)return{...e,time:e.time?(0,t.parseTime)(e.time):void 0}}(i),widgets:r?.map(e=>{let{query:{time:i,...r},...a}=e;return{type:"query-visualization",...a,query:{...r,time:(0,t.parseTime)(i)}}})}},"replaceVariables",0,function(e,t){return t?{...e,time:e.time===i&&t.time?t.time:e.time}:e},"serializeVariables",0,function(e){if(!e)return;let{time:t,...i}=e;return{...i,time:t?"string"==typeof t?t:{from:t.from.toISOString(),to:t.to.toISOString()}:void 0}}])},8673480,e=>{"use strict";e.s(["buildSWRKey",0,function(e,t){let{id:i,teamSlug:r}=t;return`${e.replace("{id}",i??"")}?${new URLSearchParams({slug:r}).toString()}`},"updateCachedList",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return i=>{let r=i??{hasAccess:!0,notebooks:[]},a=r.notebooks.findIndex(t=>{let{id:i}=t;return i===e.id});return -1!==a?t?r.notebooks[a]=e:r.notebooks.splice(a,1):t&&r.notebooks.push(e),r}},"updateCachedNotebook",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return r=>{if(!r)return{...e,widgets:t?[t]:void 0};let a={...r,...e};if(i&&(a.widgets=a.widgets?.filter(e=>{let{id:t}=e;return t!==i})),t){a.widgets||(a.widgets=[]);let e=a.widgets.findIndex(e=>{let{id:i}=e;return i===t.id});a.widgets=[...a.widgets.slice(0,e),t,...a.widgets.slice(e+1)]}return a}}])},2128692,e=>{"use strict";var t=e.i(4998750),i=e.i(4244280),r=e.i(9668517),a=e.i(5338940),n=e.i(9979783),l=e.i(6352514),o=e.i(1853611),s=e.i(8660982),u=e.i(6565161),d=e.i(5298575),c=e.i(8673480),m=e.i(2749380);e.s(["useNotebookOperations",0,function(e){let{mutate:p}=(0,u.useSWRConfig)(),g=(0,r.useTeamSlug)()??"",{team:b}=(0,a.useTeam)(),y=b?.id,f=b?.billing?.plan??"hobby",h=(0,c.buildSWRKey)(i.API_NOTEBOOK,{id:e?.id,teamSlug:g}),v=(0,c.buildSWRKey)(i.API_NOTEBOOKS,{teamSlug:g}),{trigger:E,isMutating:O}=(0,d.default)(h,async(r,a)=>{let{arg:l}=a,o=l.id??e?.id;if(!o)throw Error("Notebook ID is required to save a notebook");return(0,t.parseNotebook)(await (0,n.typedFetchData)(i.API_NOTEBOOK,"put",{id:o,slug:g},{title:l.title,variables:(0,t.serializeVariables)(l.variables)},{throwOnHTTPError:!0}))},{revalidate:!1}),{trigger:C,isMutating:w}=(0,d.default)(h,async(t,r)=>{let{arg:a}=r,l=a?.id??e?.id;if(!l)throw Error("Notebook ID is required to delete a notebook");return(0,n.typedFetchData)(i.API_NOTEBOOK,"delete",{id:l,slug:g},{throwOnHTTPError:!0})},{revalidate:!1}),{trigger:I,isMutating:S}=(0,d.default)(h,async(r,a)=>{let{arg:l}=a,o=l?.id??e?.id;if(!o)throw Error("Notebook ID is required to share a notebook");return(0,t.parseNotebook)(await (0,n.typedFetchData)(i.API_NOTEBOOK_SHARE,"put",{id:o,slug:g},{},{throwOnHTTPError:!0}))},{revalidate:!1}),{trigger:T,isMutating:k}=(0,d.default)(h,async(r,a)=>{let{arg:l}=a,o=l.notebookId??e?.id;if(!o)throw Error("Notebook ID is required to save a notebook widget");let{id:s,query:u,...d}=l.widget;return(0,t.parseNotebook)(await (0,n.typedFetchData)(i.API_NOTEBOOK_WIDGET,"put",{id:o,slug:g,widgetId:s},{query:(0,m.serializeQuery)(u),...d},{throwOnHTTPError:!0}))},{revalidate:!1}),{trigger:A,isMutating:D}=(0,d.default)(h,async(r,a)=>{let{arg:l}=a,o=l.notebookId??e?.id;if(!o)throw Error("Notebook ID is required to remove a notebook widget");return(0,t.parseNotebook)(await (0,n.typedFetchData)(i.API_NOTEBOOK_WIDGET,"delete",{id:o,slug:g,widgetId:l.id},{throwOnHTTPError:!0}))},{revalidate:!1}),N=(0,s.useCallback)(async e=>(await Promise.all([p((0,c.buildSWRKey)(i.API_NOTEBOOK,{id:e.id,teamSlug:g}),e),p((0,c.buildSWRKey)(i.API_NOTEBOOKS,{teamSlug:g}),(0,c.updateCachedList)(e))]),e),[g,p]);return{saveNotebook:async e=>{let t=await N(await E(e,{optimisticData:(0,c.updateCachedNotebook)(e),rollbackOnError:!0}));return o.analytics.track(l.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_EDITED,{teamId:y,plan:f,operation:"title_edited",source:"notebook-details-page"}),t},deleteNotebook:async t=>{await C(t),o.analytics.track(l.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_DELETED,{teamId:y,plan:f,source:"notebook-details-page"});let i=t?.id??e?.id;return await p(v,(0,c.updateCachedList)({id:i},!1)),null},shareNotebook:async e=>{let t=N(await I(e));return o.analytics.track(l.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_EDITED,{teamId:y,plan:f,operation:"notebook_shared",source:"notebook-details-page"}),t},saveWidget:async(e,t)=>{let i=await N(await T(e,{optimisticData:(0,c.updateCachedNotebook)({},e.widget),rollbackOnError:!0}));return o.analytics.track(l.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_EDITED,{teamId:y,plan:f,operation:"new"===e.widget.id?"widget_added":"widget_edited",source:t??"notebook-details-page"}),i},removeWidget:async e=>{let t=await N(await A(e,{optimisticData:(0,c.updateCachedNotebook)({},null,e.id),rollbackOnError:!0}));return o.analytics.track(l.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_EDITED,{teamId:y,plan:f,operation:"widget_removed",source:"notebook-details-page"}),t},isSaving:O||w||S||k||D}}])},4919835,e=>{"use strict";let t={deploymentIdBadges:{},priorityOrder:[]};e.s(["applyBadgesToDeploymentIds",0,function(e,t){let{deploymentIdBadges:i,priorityOrder:r}=t;try{if(0===Object.keys(i).length)return e;let t=[],a=[],n=new Set;for(let r of e){let e=i[r.id];e?(t.push({...r,badge:e}),n.add(r.id)):a.push(r)}for(let[e,r]of Object.entries(i))n.has(e)||t.push({id:e,value:e,badge:r});return t.sort((e,t)=>{let i=r.indexOf(e.id),a=r.indexOf(t.id),n=-1===i?Number.MAX_SAFE_INTEGER:i,l=-1===a?Number.MAX_SAFE_INTEGER:a;return n-l}),[...t,...a]}catch{return e}},"createBadgeDataFromRollingRelease",0,function(e){try{let t={},i=[];if(!e?.rollingRelease)return{deploymentIdBadges:t,priorityOrder:i};let{rollingRelease:r}=e;if(r.currentDeployment?.id){let e=r.currentDeployment.id;t[e]={children:"Current",variant:"blue-subtle",tooltip:"The current rolling release production deployment"},i.push(e)}if(r.canaryDeployment?.id){let e=r.canaryDeployment.id;t[e]={children:"Canary",variant:"green-subtle",tooltip:"The current rolling release canary deployment"},i.push(e)}return{deploymentIdBadges:t,priorityOrder:i}}catch{return t}}])},5721568,e=>{"use strict";var t=e.i(8690335);let i=[/projectId\s*eq\s*'(?<projectId>[^']+)'/,/projectId\s*in\s*\(\s*'(?<projectId>[^']+)'\s*\)/];e.s(["addOrUpdateExcludeFilter",0,(e,i,r)=>{let a,n=(0,t.parseFilters)(e.filter),l=n.findIndex(e=>e.dimension===i&&"nin"===e.operator.id);if(-1!==l){let e=n[l];a=e.values.map(e=>e.value).includes(r)?n:[...n.slice(0,l),{...e,values:[...e.values,{id:String(r),value:r}]},...n.slice(l+1)]}else a=[...n.filter(e=>e.dimension!==i||"eq"!==e.operator.id),{dimension:i,operator:{id:"nin",label:"is not",type:"multiple",group:"Any"},values:[{id:String(r),value:r}]}];return{filter:(0,t.serializeFilters)(a)}},"extractProjectIdFromFilter",0,function(e){if(!e)return null;for(let t of i){let i=t.exec(e);if(i?.groups?.projectId)return i.groups.projectId}return null},"upsertFilter",0,(e,i)=>{let r=(0,t.parseFilters)(e.filter);return{filter:(0,t.serializeFilters)([...r.filter(e=>e.dimension!==i.dimension),i])}}])},9429462,e=>{"use strict";var t=e.i(6311495),i=e.i(2547843),r=e.i(6060673),a=e.i(8660982),n=e.i(850302),l=e.i(6565161),o=e.i(5298575),s=e.i(5721568),u=e.i(4919835);let d={deploymentIdBadges:{},priorityOrder:[]};e.s(["useDeploymentBadgeData",0,e=>{let l=(0,t.useTeamSlug)(),o=(0,a.useMemo)(()=>(0,s.extractProjectIdFromFilter)(e?.filter),[e?.filter]),{data:c}=(0,r.useProject)(o),m=(0,a.useMemo)(()=>l&&c?.name?(0,i.getRollingReleaseEndpoint)(l,c.name):null,[l,c?.name]),p=e?.by.includes("deploymentId")??!1;return(0,n.default)(p&&m?m:null,async e=>{try{let t=await (0,i.rollingReleaseFetcher)(e);return(0,u.createBadgeDataFromRollingRelease)(t)}catch{return d}},{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:3e4,fallbackData:d})},"useDeploymentBadgeResolverMutation",0,e=>{let c=(0,t.useTeamSlug)(),m=(0,a.useMemo)(()=>(0,s.extractProjectIdFromFilter)(e?.filter),[e?.filter]),{data:p}=(0,r.useProject)(m),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!c||!p?.name){g.current=null;return}g.current=(0,i.getRollingReleaseEndpoint)(c,p.name)},[c,p?.name]);let{mutate:b}=(0,n.default)(g.current,null,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:3e4}),y=(0,o.default)(()=>`${g.current}-mutation`,async()=>{let e=g.current;try{if(!e)throw Error("No endpoint available for fetching deployment badges");let t=await (0,i.rollingReleaseFetcher)(e),r=(0,u.createBadgeDataFromRollingRelease)(t);try{b(r,{revalidate:!1,populateCache:!0})}catch{}return r}catch{return d}}),{cache:f}=(0,l.useSWRConfig)(),h=(0,a.useCallback)(async()=>{try{let e=g.current;if(!e)return d;let t=f.get(e);if(t?.data)return t.data;return await y.trigger()}catch{return d}},[f,y]);return{...y,trigger:h,data:y.data}}])},9372366,e=>{"use strict";var t=e.i(4337458),i=e.i(854682),r=e.i(9667097),a=e.i(1283928),n=e.i(1233856),l=e.i(8660982),o=e.i(8690335),s=e.i(4919835),u=e.i(9486194),d=e.i(9429462),c=e.i(7722264),m=e.i(2107254),p=e.i(9668517),g=e.i(7189115);let b=e=>{let{observabilityConfiguration:t}=(0,i.useHasObservabilityPlus)(),r=(0,p.useTeamSlug)(),{data:a,updateSearch:n,search:o}=(0,m.default)({limit:10,latestDeployments:null},{},r??void 0);return{decorate:(0,l.useCallback)(async e=>[...e,...a?.projects.map(e=>{let{id:t,name:i}=e;return{id:t,value:t,label:i}})??[]].map(e=>t?.observabilityPlus.excludedProjects?.some(t=>t.id===e.id)?{...e,disabled:!0,tooltip:"Excluded from Observability Plus"}:e),[t,a]),triggerMutation:async e=>{o!==e.text&&n(e.text)},dimensionId:"projectId"}},y=e=>{let{trigger:t}=(0,d.useDeploymentBadgeResolverMutation)(e);return{decorate:(0,l.useCallback)(async e=>{try{let i=await t();return(0,s.applyBadgesToDeploymentIds)(e,i)}catch{return e}},[t]),triggerMutation:()=>t().catch(()=>{}),dimensionId:"deploymentId"}},f=e=>{let{event:r,measure:a}=(0,o.splitEventAndMeasure)(e),n=(0,t.useSonarQueryScope)(),{hasObservabilityPlusAccess:l}=(0,i.useHasObservabilityPlus)();return{decorate:async(e,t)=>{let{dimension:i,text:o}=t;return n?[...e,...await h({event:r,measure:a,column:i.id,reason:l?"observability_query_builder_plus":"observability_query_builder_free",text:o,...n})]:[]},dimensionId:null}};async function h(e){let{event:t,measure:i,column:l,ownerId:s,reason:d,text:c}=e,m={minutes:5},p=(0,n.startOfDuration)(new Date(Date.now()-36e5),m),g=(0,n.endOfDuration)(new Date,m),b=o.labelColumnByColumn.get(l),y=u.staticDimensionValues.find(e=>e.dimensions.includes(l))?.values,f="number"===a.AllDimensions[l].type;if(y)return y.map(e=>({id:e.id.toString(),value:e.id,..."label"in e?{label:e.label}:{}})).sort((e,t)=>String(e.id).localeCompare(String(t.id)));let h=c?`contains(${b||l},'${c}')`:void 0;return(await (0,r.getSonarData)({event:t,scope:{type:"owner",ownerId:s},reason:d,startTime:p,endTime:g,rollups:{value:{measure:i,aggregation:"sum"}},filter:h,granularity:m,groupBy:b?[l,b]:[l],limit:10,tailRollup:"truncate",summaryOnly:!0})).summary.map(e=>{let t=f?Number.parseFloat(e[l]):e[l];return{id:t.toString(),label:b?e[b]:void 0,value:t}})}e.s(["getDimensionValues",0,h,"useValuesResolver",0,e=>{let t,i,r,{decorate:a,triggerMutation:n}=(t=[f,b,y].map(t=>t(e)),(i=(0,l.useRef)(t)).current=t,r=e=>i.current.filter(t=>null===t.dimensionId||t.dimensionId===e.dimension.id),{decorate:async(e,t)=>{let i=e;for(let e of r(t))i=await e.decorate(i,t);return i},triggerMutation:e=>Promise.all(r(e).map(t=>t.triggerMutation?.(e)))});return async e=>{let{dimension:t,text:i}=e;try{n({dimension:t,text:i});let e=await a([],{dimension:t,text:i});return(0,g.uniqBy)(e,"id")}catch(e){return console.error(`Error fetching dimension values. ${(0,c.isError)(e)?e.message:""}`,e),[]}}}])},5086286,e=>{"use strict";var t=e.i(4998750),i=e.i(2749380),r=e.i(4244280),a=e.i(9668517),n=e.i(5338940),l=e.i(9979783),o=e.i(6352514),s=e.i(1853611),u=e.i(6565161),d=e.i(5298575),c=e.i(8673480);e.s(["useCreateNotebook",0,function(){let e=(0,a.useTeamSlug)()??"",{team:m}=(0,n.useTeam)(),{mutate:p}=(0,u.useSWRConfig)(),g=(0,c.buildSWRKey)(r.API_NOTEBOOKS,{teamSlug:e}),{trigger:b,isMutating:y}=(0,d.default)(g,async(a,n)=>{let{arg:{title:o,widget:s}}=n,u=(0,t.parseNotebook)(await (0,l.typedFetchData)(r.API_NOTEBOOKS,"post",{slug:e},{title:o,variables:{time:t.DEFAULT_TIME_VALUE},widgets:s?[{query:(0,i.serializeQuery)(s.query),title:s.title}]:void 0},{throwOnHTTPError:!0}));return p((0,c.buildSWRKey)(r.API_NOTEBOOK,{id:u.id,teamSlug:e}),(0,c.updateCachedNotebook)(u,u.widgets?.[0])),setTimeout(()=>void p(g,(0,c.updateCachedList)(u)),1e3),u},{revalidate:!1});return{createNotebook:async(e,t)=>{let i=await b(e);return s.analytics.track(o.AnalyticsEvent.OBSERVABILITY_NOTEBOOK_CREATED,{teamId:m?.id,plan:m?.billing?.plan??"hobby",hasInitialWidget:!!e.widget,source:t??"notebook-list-page"}),i},isSaving:y}}])},7371622,e=>{"use strict";var t=e.i(4244280),i=e.i(9668517),r=e.i(215852),a=e.i(8673480);e.s(["useNotebooks",0,function(){let e=(0,i.useTeamSlug)()??"";return(0,r.useIsomorphicSuspenseSWR)((0,a.buildSWRKey)(t.API_NOTEBOOKS,{teamSlug:e})).data}])},1482429,4912077,e=>{"use strict";var t=e.i(4205214),i=e.i(9192216),r=e.i(5086286),a=e.i(2128692),n=e.i(7371622),l=e.i(5115727),o=e.i(854682),s=e.i(4998750),u=e.i(5338940),d=e.i(1473216),c=e.i(2504781),m=e.i(5468328),p=e.i(455575),g=e.i(5677444),b=e.i(8660982);let y="new-notebook";function f(e){return{id:y,title:e||"Untitled Notebook",group:"Personal"}}function h(e){return e.id}let v=e=>{let{title:t,group:i}=e;return`${t}${i?` ${i}`:""}`};function E(e){return(0,t.jsx)("div",{className:"flex w-full items-center gap-2 px-2 py-1.5",children:(0,t.jsx)("span",{children:e.title})})}e.s(["AddToNotebookButton",0,function(e){let{query:O}=e,{hasObservabilityPlusAccess:C,ready:w}=(0,o.useHasObservabilityPlus)(),I=!w||!C,{notebooks:S}=(0,n.useNotebooks)(),{createNotebook:T,isSaving:k}=(0,r.useCreateNotebook)(),{saveWidget:A,isSaving:D}=(0,a.useNotebookOperations)(),[N,R]=(0,b.useState)(!1),{team:P}=(0,u.useTeam)(),L=(0,p.useToasts)(),B=(0,g.useRouter)(),M=(0,l.useDefaultQueryTitle)(O),_=(0,b.useMemo)(()=>S.map(e=>({...e,group:P&&e.contributors.includes(P.id)?"Team":"Personal"})),[S,P]),x=(0,b.useCallback)(e=>{(async()=>{try{if(!P)throw Error("Team not found");R(!1);let t=e.id,i={id:"new",query:O,title:M};t===y?t=(await T({title:e.title,widget:i},"query-builder")).id:await A({notebookId:t,widget:i},"query-builder"),B.push(`/${P.slug}/~/observability/notebooks/${t}`)}catch(e){L.error({preserve:!0,text:(0,t.jsxs)(t.Fragment,{children:["Failed to add query to the notebook.",(0,t.jsx)("br",{}),(0,s.extractError)(e)]})})}})()},[T,A,M,O,L,B,P]),j=(0,t.jsx)(c.Button,{disabled:I,loading:D||k,onClick:()=>R(!0),size:"medium",type:"default",typeName:"button",children:"Add to Notebook"});return I?(0,t.jsx)(m.Tooltip,{text:"Unlock all advanced query features with Observability Plus",children:j}):(0,t.jsxs)(d.Root,{modal:!0,onOpenChange:R,open:N,children:[(0,t.jsx)(d.Anchor,{className:"flex",children:(0,t.jsx)(d.Trigger,{asChild:!0,children:j})}),(0,t.jsx)(d.Portal,{children:(0,t.jsx)(d.Content,{align:"end",onCloseAutoFocus:()=>R(!1),sideOffset:8,children:(0,t.jsx)(i.CommandMenu,{getId:h,getValue:v,label:"notebook",onChange:x,options:_,parseNewValue:f,renderItem:E,reverse:!0,allowEmptyAdd:!0,addLabel:"Create"})})})]})}],1482429);var O=e.i(4991687),C=e.i(6694387),w=e.i(8674454),I=e.i(8459493),S=e.i(3993360),T=e.i(3886311);e.s(["ExportButton",0,function(e){let{handleExport:i,disabled:r}=(0,T.useExportSonarData)(e);return(0,t.jsxs)(O.MenuContainer,{closeOnSelect:!0,position:"bottom-end",children:[(0,t.jsx)(C.MenuButton,{"aria-label":"Export data",disabled:r,shape:"square",size:"medium",type:"secondary",children:(0,t.jsx)(S.Download,{size:16})}),(0,t.jsxs)(w.Menu,{style:{minWidth:160},portalClassName:"pointer-events-auto",width:"auto",children:[(0,t.jsx)(I.MenuItem,{onClick:()=>i("csv"),children:"Export as CSV"}),(0,t.jsx)(I.MenuItem,{onClick:()=>i("json"),children:"Export as JSON"})]})]})}],4912077)}]);

//# debugId=5e39c0d4-b6b7-dbb8-02a3-a7307897c3a7
//# sourceMappingURL=7a6d1aa53bf1c1ed.js.map