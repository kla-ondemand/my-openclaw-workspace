;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f522afbf-ccf6-6fa3-0136-fda2b6cd4b3f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9156249,e=>{e.v({circle:"step-indicator-module__5gZ_RG__circle",current:"step-indicator-module__5gZ_RG__current","step-indicator":"step-indicator-module__5gZ_RG__step-indicator"})},5184244,e=>{e.v({"close-button":"survey-prompt-toast-module__JkO0_W__close-button",description:"survey-prompt-toast-module__JkO0_W__description",prompt:"survey-prompt-toast-module__JkO0_W__prompt"})},8457113,e=>{e.v({"align-left":"survey-module__3DCdiW__align-left","back-button":"survey-module__3DCdiW__back-button",buttons:"survey-module__3DCdiW__buttons",fadeIn:"survey-module__3DCdiW__fadeIn",footer:"survey-module__3DCdiW__footer",header:"survey-module__3DCdiW__header",hidden:"survey-module__3DCdiW__hidden",info:"survey-module__3DCdiW__info",instructions:"survey-module__3DCdiW__instructions",modal:"survey-module__3DCdiW__modal","no-padding":"survey-module__3DCdiW__no-padding",single:"survey-module__3DCdiW__single","skip-button":"survey-module__3DCdiW__skip-button","skip-text":"survey-module__3DCdiW__skip-text",stacked:"survey-module__3DCdiW__stacked","step-indicator":"survey-module__3DCdiW__step-indicator","submit-button":"survey-module__3DCdiW__submit-button",survey:"survey-module__3DCdiW__survey",tip:"survey-module__3DCdiW__tip",title:"survey-module__3DCdiW__title"})},255537,e=>{e.v({list:"checkbox-select-module__u-_xrG__list"})},8820139,e=>{e.v({heading:"checkbox-option-module__aiX9dq__heading",hidden:"checkbox-option-module__aiX9dq__hidden",input:"checkbox-option-module__aiX9dq__input",keyboard:"checkbox-option-module__aiX9dq__keyboard",option:"checkbox-option-module__aiX9dq__option",selected:"checkbox-option-module__aiX9dq__selected","selected-icon":"checkbox-option-module__aiX9dq__selected-icon"})},9169214,e=>{e.v({text:"survey-prompt-module__kD9QzG__text"})},1585898,2066827,e=>{"use strict";e.i(2144405);var t=e.i(4205214),s=e.i(8660982),i=e.i(9722978),l=e.i(1752298),a=e.i(2523660),d=e.i(3070041),n=e.i(6362863),o=e.i(2504781),r=e.i(6891161),u=e.i(455575),c=e.i(6352514),f=e.i(1853611),p=e.i(7921976);function x(e){let t=e.lastIndexOf(" ");return -1===t?e:`${e.substring(0,t)}\u00A0${e.substring(t+1)}`}var v=e.i(2020034),_=e.i(9156249);function m(e){let{currentStep:l,steps:a,className:d}=e,n=(0,s.useRef)(null),[o,r]=(0,s.useState)({top:0,left:0});return(0,s.useEffect)(()=>{n.current&&r({top:n.current.offsetTop,left:n.current.offsetLeft})},[l]),(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-stretch justify-start gap-1 flex-initial",_.default["step-indicator"],d),children:[(0,t.jsx)("span",{"aria-hidden":!0,className:(0,i.clsx)(_.default.circle,_.default.current),style:o}),a.map((e,s)=>(0,t.jsx)("span",{"aria-hidden":!0,className:_.default.circle,ref:s===l?n:void 0},e.key)),(0,t.jsxs)("span",{className:"geist-sr-only",children:["Step ",l+1," of ",a.length]})]})}let y=(0,s.createContext)({accountId:void 0,cancel:()=>void 0,dataTestIdContext:[],dispatch:()=>void 0,hasMultipleSteps:!1,invalidFields:[],originalSteps:[],setInvalidFields:()=>void 0,setStatus:()=>void 0,status:"idle",submit:()=>Promise.resolve(),surveyState:null,team:null,updateCookie:()=>void 0,user:null});y.displayName="SurveyContext";var h=e.i(6942035),E=e.i(5184244);function b(e){let{id:l,onAction:a,surveyName:d,updateCookie:n}=e,r=(0,u.useToasts)(),p=()=>{r.removeToastByKey(l)};(0,s.useEffect)(()=>{f.analytics.track(c.AnalyticsEvent.SURVEY_TOAST_SHOWN,{surveyName:d})},[d]);let x=()=>{f.analytics.track(c.AnalyticsEvent.SURVEY_TOAST_DISMISSED,{surveyName:d}),n(),p()};return(0,t.jsxs)("div",{className:(0,i.default)("flex flex-col items-stretch justify-start gap-4 flex-initial",E.default.prompt),children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:[(0,t.jsx)("h1",{className:"text-[16px] leading-[24px] font-medium",children:"Help us improve your Vercel experience"}),(0,t.jsx)(o.Button,{"aria-label":"dismiss",className:E.default["close-button"],onClick:x,svgOnly:!0,variant:"unstyled",children:(0,t.jsx)(h.Cross,{})})]}),(0,t.jsx)("p",{className:`text-copy-14 ${E.default.description}`,children:"Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-end gap-2 flex-initial",children:[(0,t.jsx)(o.Button,{onClick:x,size:"small",type:"secondary",children:"No Thanks"}),(0,t.jsx)(o.Button,{onClick:()=>{a(),p()},size:"small",children:"Start"})]})]})}var S=e.i(8457113),k=e.i(4004502),I=e.i(8248823);function T(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return(0,k.tid)("survey-modal",e,...s)}function g(e){if("checkbox"!==e.as)throw Error(`Expected a checkbox select list, but got a ${e.as} select list instead.`);return e}let j=e=>{let t=[],s={},i=[],l={},{surveyName:a,surveySlug:d,surveySteps:n}=e,o=0;for(let e=0;e<n.length;e++){let a=n[e];for(let d of(i[e]={title:a.title,description:a.description,start:o,end:o+1},a.fields))if("select"===d.type){switch(d.as){case"dropdown":l[d.id]={as:"dropdown",id:d.id,start:o,end:o+1,label:d.label};break;case"combobox":l[d.id]={as:"combobox",id:d.id,start:o,end:o+1,label:d.label,placeholder:d.placeholder??null};break;default:l[d.id]={as:d.as??"checkbox",id:d.id,start:o,end:o+1,label:d.label,selectMultiple:!!d.selectMultiple}}for(let a of d.options){let n=`${e}-${d.id}-${a.id}`,r={fqid:n,stepIndex:e,inputId:a.id,selectListId:d.id,label:a.label,selected:!!a.selected,type:"option",reveals:a.reveals?{fqid:`${n}-${a.reveals.id}`,stepIndex:e,inputId:a.reveals.id,label:a.reveals.label??"",value:a.reveals.value??"",size:a.reveals.size??"short",validationRegex:a.reveals.validationRegex,validationErrorMessage:a.reveals.validationErrorMessage,inputTypeName:a.reveals.inputTypeName,type:"text"}:void 0};t.push(r),s[n]=o,i[e].end=o+1,l[d.id].end=o+1,o++}}else{let l=`${e}-${d.id}`,a={fqid:l,stepIndex:e,inputId:d.id,label:d.label,instructions:d.instructions,value:d.value||"",size:d.size||"short",validationRegex:d.validationRegex,validationErrorMessage:d.validationErrorMessage,inputTypeName:d.inputTypeName,type:"text"};t.push(a),s[l]=o,i[e].end=o+1,o++}}return{surveyName:a,surveySlug:d,fields:t,fieldLookup:s,stepLookup:i,selectListLookup:l,currentStep:0,previousStep:null,lastStep:n.length-1,isFirstStep:!0,isLastStep:n.length-1==0}},C=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var D=e.i(255537),N=e.i(8761240),F=e.i(9689002),q=e.i(8820139),L=e.i(7534323),w=e.i(3500331),O=e.i(9334091);function P(e){let{type:i,optionFqid:l,field:a,className:d,"data-testid":n,showLabel:o,autoFocus:r,...u}=e,{setInvalidFields:c,invalidFields:f,surveyState:p,dispatch:v}=(0,s.useContext)(y),{fqid:_,inputId:m,inputTypeName:h,label:E,size:b="short",value:k,validationErrorMessage:I,validationRegex:T}=a,{focusedField:g,focusedNestedField:j}=p,C=(0,s.useRef)(null),D=(0,s.useRef)(null),[N,F]=(0,s.useState)(!1);(0,s.useEffect)(()=>{f.includes(_)?N||c(f.filter(e=>e!==_)):N&&c([...f,_])},[N,_,c]),(0,s.useEffect)(()=>{("top-level"===i?g?.fqid===_:j?.fqid===_)&&(C.current??D.current)?.focus()},[g?.fqid,j?.fqid,_,i]);let q=()=>{"top-level"===i&&g?.fqid!==_?v({type:"SET_FOCUSED_FIELD",fqid:_}):"nested"===i&&j?.fqid!==_&&v({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:l})},P=e=>{"nested"===i?v({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):v({type:"UPDATE_TEXT_FIELD",fqid:_,value:e.target.value}),k?M(e.target.value):F(!1)},U=e=>{let t=e.target;"nested"===i?v({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):v({type:"UPDATE_TEXT_FIELD",fqid:_,value:e.target.value}),N&&M(t.value)},A=I??(h?({email:"Please enter a valid email.",url:"Please enter a valid URL."})[h]:void 0),M=e=>{let t;if(T&&I)t=T;else switch(h){case"email":t=/^\S+@\S+\.\S+$/;break;case"url":F(!(0,L.default)(e));return}t&&F(!t.test(e))},R=a.instructions?(0,t.jsx)("p",{className:`text-copy-16 ${S.default.instructions}`,children:x(a.instructions)}):null;return"short"===b?(0,t.jsxs)(t.Fragment,{children:[R,(0,t.jsx)(w.Input,{"aria-label":E,autoComplete:"off",className:d,"data-testid":n,id:m,label:o?E:void 0,maxLength:256,onBlur:P,onChange:U,onFocus:q,placeholder:o?void 0:E||"Add your answer…",...u,error:N?A:void 0,ref:C,typeName:h,value:k,autoFocus:r})]}):(0,t.jsxs)(t.Fragment,{children:[R,(0,t.jsx)(O.Textarea,{"aria-label":E,className:d,"data-testid":n,id:m,label:o?E:void 0,maxLength:4e3,onBlur:P,onChange:U,onFocus:q,placeholder:o?void 0:E||"Add your answer…",rows:3,...u,error:N?A:void 0,ref:D,value:k,autoFocus:r})]})}function U(e){let{index:n,listId:o,option:r,dataTestIdContext:u=[]}=e,[c,{height:f}]=(0,l.default)(),p=(0,s.useRef)(null),{surveyState:x,dispatch:v}=(0,s.useContext)(y),{focusedField:_,focusedNestedField:m,selectListLookup:h}=x,{selectMultiple:E}=g(h[r.selectListId]),b=r.selected&&r.reveals,S=!!r.reveals,k=_?.fqid===r.fqid,I="30px";(0,s.useEffect)(()=>{k&&null===m&&p.current?.focus()},[m,k,r.fqid]);let[j,D]=(0,d.useSpring)(()=>({config:{...d.config.default,clamp:!0},height:b?`${f}px`:I}),[b]);return(0,s.useEffect)(()=>{b?D.start({height:`${f}px`,onStart:()=>{v({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:r.fqid})}}):S&&D.start({height:I,onStart:()=>{v({type:"SET_FOCUSED_FIELD",fqid:r.fqid})}})},[S,v,f,b,k,r.fqid,D]),(0,t.jsxs)("li",{"aria-checked":r.selected,"aria-labelledby":r.inputId,"aria-selected":r.selected,className:(0,i.clsx)(q.default.option,{[q.default.selected]:r.selected}),"data-testid":T("form-input",o,"checkbox",r.inputId,...u),id:C[n],onClick:e=>{k||v({type:"SET_FOCUSED_FIELD",fqid:r.fqid});let t=e.target;t.dataset.reveal&&t.focus(),"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&v({type:"TOGGLE_OPTION",fqid:r.fqid})},onFocus:()=>{k||v({type:"SET_FOCUSED_FIELD",fqid:r.fqid})},onKeyDown:void 0,ref:p,role:"option",tabIndex:0,value:r.inputId,children:[E?(0,t.jsx)("input",{"aria-readonly":!0,checked:r.selected,className:q.default.input,"data-list-id":o,id:r.inputId,readOnly:!0,type:"checkbox",value:r.label||""}):(0,t.jsx)("input",{checked:r.selected,className:q.default.input,"data-list-id":o,id:r.inputId,readOnly:!0,type:"radio",value:r.label||""}),(0,t.jsx)(a.animated.div,{style:void 0,children:(0,t.jsxs)("div",{ref:c,className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("div",{className:q.default.heading,children:[(0,t.jsx)(F.Kbd,{"aria-hidden":!0,className:q.default.keyboard,children:C[n]}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:(0,t.jsx)("label",{htmlFor:r.inputId,children:r.label})}),r.selected?(0,t.jsx)("span",{"aria-hidden":!0,className:q.default["selected-icon"],children:(0,t.jsx)(N.CheckCircleFill,{color:"green-700"})}):null]}),r.reveals?(0,t.jsx)("div",{className:(0,i.clsx)({[q.default.hidden]:!r.selected}),onClick:e=>e.stopPropagation(),"data-testid":T("form-input-wrapper",o,"checkbox",r.inputId,"revealed-textbox",...u),children:(0,t.jsx)(P,{"data-testid":T("form-input",o,"checkbox",r.inputId,"revealed-textbox",...u),field:r.reveals,optionFqid:r.fqid,type:"nested",autoFocus:!0})}):null]})})]},r.inputId)}let A=new Set(["INPUT","TEXTAREA"]);function M(e){let{id:l,options:a,selectMultiple:d,dataTestIdContext:n=[]}=e,{surveyState:o,dispatch:r}=(0,s.useContext)(y),{focusedField:u,focusedNestedField:c,selectListLookup:f}=o,{label:p}=g(f[a[0].selectListId]),x=(0,s.useCallback)(e=>{let t=a.findIndex(e=>e.fqid===u?.fqid),s=null!==c;switch(e.key){case"ArrowUp":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:a[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:a.at(t-1)?.fqid??null});break;case"ArrowDown":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:a[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:a.at(t+1)?.fqid??a.at(0)?.fqid??null});break;case" ":if(-1===t||s)return;e.preventDefault(),r({type:"TOGGLE_OPTION",fqid:a[t].fqid});break;default:if(C.includes(e.key)){if(s)return;let t=a[C.indexOf(e.key)]?.fqid;t&&(r({type:"TOGGLE_OPTION",fqid:t}),r({type:"SET_FOCUSED_FIELD",fqid:t}))}}},[a,c,u?.fqid,r]);return(0,s.useEffect)(()=>{let e=e=>{A.has(document.activeElement?.tagName||"")||(x(e),e.stopPropagation())};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}},[x]),(0,t.jsx)("ul",{"aria-label":p,"aria-multiselectable":d,"data-testid":T("form-input",l,...n),onKeyDown:x,role:"listbox",className:(0,i.default)("flex flex-col items-stretch justify-start gap-2 flex-initial",D.default.list),children:a.map((e,s)=>(0,t.jsx)(U,{dataTestIdContext:n,index:s,listId:l,option:e},e.inputId))})}var R=e.i(5323212);function B(e){let{id:i,options:l,dataTestIdContext:a=[]}=e,{surveyState:d,dispatch:n}=(0,s.useContext)(y),{selectListLookup:o}=d,r=function(e){if("dropdown"!==e.as)throw Error(`Expected a dropdown select list, but got a ${e.as} select list instead.`);return e}(o[l[0].selectListId]),{label:u}=r,c=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)("div",{role:"group",className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(R.Select,{"aria-label":u,"data-testid":T("form-input",i,...a),defaultValue:c?.inputId,id:r.id,onChange:e=>{let t=u?e.target.selectedIndex-1:e.target.selectedIndex;n({type:"TOGGLE_OPTION",fqid:l[t].fqid}),n({type:"SET_FOCUSED_FIELD",fqid:l[t].fqid})},onFocus:()=>{n({type:"SET_FOCUSED_FIELD",fqid:c?.fqid??l[0].fqid})},placeholder:u,value:c?.inputId,children:l.map(e=>(0,t.jsx)("option",{"aria-selected":e.selected,selected:e.selected,value:e.inputId,children:e.label},e.inputId))}),c?.reveals?(0,t.jsx)(P,{"data-testid":T("form-input",r.id,"dropdown",c.inputId,"revealed-textbox",...a),field:c.reveals,optionFqid:c.fqid,type:"nested"}):null]})}var G=e.i(6881349),W=e.i(3671642);function $(e){let{id:i,options:l,dataTestIdContext:a=[]}=e,{surveyState:d,dispatch:n}=(0,s.useContext)(y),{selectListLookup:o}=d,r=function(e){if("combobox"!==e.as)throw Error(`Expected a combobox select list, but got a ${e.as} select list instead.`);return e}(o[l[0].selectListId]),{label:u,placeholder:c}=r,f=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)(G.Combobox,{"aria-label":u,"data-testid":T("form-input",i,...a),onChange:e=>{if(!e){f&&n({type:"TOGGLE_OPTION",fqid:f.fqid});return}let t=l.findIndex(t=>t.inputId===e),s=l[t];f?.fqid!==s.fqid&&(f&&n({type:"TOGGLE_OPTION",fqid:f.fqid}),s.reveals&&n({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:s.fqid}),n({type:"TOGGLE_OPTION",fqid:l[t].fqid}))},placeholder:c??u,value:f?.inputId,children:[(0,t.jsx)(W.Label,{value:u}),(0,t.jsx)(G.Combobox.Input,{}),(0,t.jsx)(G.Combobox.List,{children:l.map(e=>(0,t.jsx)(G.Combobox.Option,{"aria-selected":e.selected,value:e.inputId,children:e.label},e.inputId))})]}),f?.reveals?(0,t.jsx)(P,{"data-testid":T("form-input",r.id,"combobox",f.inputId,"revealed-textbox",...a),field:f.reveals,optionFqid:f.fqid,type:"nested"}):null]})}function X(e){let{showInputLabels:i,dataTestIdContext:l=[]}=e,{surveyState:a}=(0,s.useContext)(y),{fields:d,selectListLookup:n,stepLookup:o,currentStep:r}=a,{start:u,end:c}=o[r],f=d.slice(u,c),p=[];for(let e=0;e<f.length;e++){let t=f[e];if("text"===t.type&&p.push(t),"option"===t.type){let{start:s,end:i}=n[t.selectListId],l=d.slice(s,i);p.push(l),e=i-u-1}}return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:p.map(e=>{if(Array.isArray(e)){let s=n[e[0].selectListId].as,i="checkbox"===s?n[e[0].selectListId].selectMultiple:void 0;return"dropdown"===s?(0,t.jsx)("div",{children:(0,t.jsx)(B,{dataTestIdContext:l,id:e[0].selectListId,options:e})},e[0].selectListId):"combobox"===s?(0,t.jsx)("div",{children:(0,t.jsx)($,{id:e[0].selectListId,options:e})},e[0].selectListId):(0,t.jsx)("div",{children:(0,t.jsx)(M,{dataTestIdContext:l,id:e[0].selectListId,options:e,selectMultiple:i})},e[0].selectListId)}return(0,t.jsx)("div",{children:(0,t.jsx)(P,{"data-testid":T("form-input",e.inputId,...l),field:e,showLabel:i,type:"top-level"},e.inputId)},e.inputId)})})}var V=e.i(175449),Y=e.i(7917902);let z=(0,e.i(8128646).default)((e,t)=>{switch(t.type){case"RESET_SURVEY_INFO":return{...j(t.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:e.enableSkip,submitButtonExists:!0,enableSkip:e.enableSkip};case"TOGGLE_SKIP_ENABLED":e.enableSkip=t.enableSkip;break;case"SET_FOCUSED_BUTTON":e.focusedItem={type:"button",buttonId:t.buttonId};break;case"SET_FOCUSED_FIELD":e.focusedItem=t.fqid?{type:"field",fqid:t.fqid}:null;break;case"SET_FOCUSED_NESTED_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(e.focusedItem={type:"nested-field",optionFqid:t.optionFqid,nestedFqid:s.reveals.fqid});break}case"INCREMENT_STEP":e.currentStep<e.lastStep&&(e.previousStep=e.currentStep,e.currentStep++,e.focusedItem={type:"survey"});break;case"DECREMENT_STEP":e.currentStep>0&&(e.previousStep=e.currentStep,e.currentStep--,e.focusedItem={type:"survey"});break;case"SET_STEP":t.to>=0&&t.to<=e.lastStep&&(e.previousStep=e.currentStep,e.currentStep=t.to,e.focusedItem={type:"survey"});break;case"UPDATE_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.fqid]];"text"===s.type&&(s.value=t.value);break}case"UPDATE_NESTED_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(s.reveals.value=t.value);break}case"TOGGLE_OPTION":{let s=e.fields[e.fieldLookup[t.fqid]];if("option"===s.type){let t=e.selectListLookup[s.selectListId],{start:i,end:l}=t;if("checkbox"===t.as&&t.selectMultiple)s.selected=!s.selected;else{let t=s.selected;for(let t of e.fields.slice(i,l))"option"===t.type&&t.selectListId===s.selectListId&&(t.selected=!1);s.selected=!t}}break}default:(0,I.exhaustivenessCheck)(t)}switch(e.isFirstStep=0===e.currentStep,e.isLastStep=e.currentStep===e.lastStep,e.skipButtonExists=e.isFirstStep&&e.enableSkip,e.backButtonExists=!e.isFirstStep,e.focusedItem?.type){case"field":e.focusedField=e.fields[e.fieldLookup[e.focusedItem.fqid]],e.focusedNestedField=null,e.focusedButton=null;break;case"nested-field":{let t=e.fields[e.fieldLookup[e.focusedItem.optionFqid]];"option"===t.type&&t.reveals&&(e.focusedField=t,e.focusedNestedField=t.reveals,e.focusedButton=null);break}case"button":e.focusedField=null,e.focusedNestedField=null,e.focusedButton=e.focusedItem.buttonId;break;case"survey":case void 0:e.focusedField=null,e.focusedNestedField=null,e.focusedButton=null;break;default:(0,I.exhaustivenessCheck)(e.focusedItem)}});function K(e){let{children:i,...l}=e,{dataTestIdContext:a=[],showThankYouToast:d=!0,onDismiss:n=V.noop,onSubmit:o,overrideTeamId:r,surveyInfo:p,submitOnSkip:x}=l,{surveySteps:_}=p,m=_.length>1,[h,E]=(0,s.useReducer)(z,(e=>{let{enableSkip:t=!1}=e;return{...j(e.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:t,submitButtonExists:!0,enableSkip:t}})(l)),{surveyName:b,surveySlug:S,isLastStep:k,fields:T}=h,[g,C]=(0,s.useState)("idle"),[D,N]=(0,s.useState)([]),{team:F,teams:q,user:L}=(0,Y.useAccount)(),w=(0,s.useMemo)(()=>q?.find(e=>e.id===r)??F,[r,F,q]),O=w?.id,P=L?.uid,U=O??P,A=(0,u.useToasts)(),M=(0,v.getCookie)(S),R=!!P&&M?.includes(P),B=(0,s.useCallback)(()=>{P&&(M?R||(0,v.setCookie)(S,`${M},${P}`):(0,v.setCookie)(S,P))},[R,M,S,P]),G=(0,s.useCallback)(()=>{f.analytics.track(c.AnalyticsEvent.SURVEY_EXITED,{surveyName:b}),n()},[n,b]),W=(0,s.useCallback)(async()=>{if(!(k||x))return;C("submitting"),f.analytics.track(c.AnalyticsEvent.SURVEY_SUBMITTED,{surveyName:b});let e=T.some(e=>{switch(e.type){case"option":if(e.selected)return!0;return!1;case"text":if(e.value)return!0;return!1;default:return(0,I.exhaustivenessCheck)(e)}});e||f.analytics.track(c.AnalyticsEvent.SURVEY_SUBMITTED_EMPTY,{surveyName:b}),B();try{let t=function(e){let{fields:t,stepLookup:s,selectListLookup:i}=e,l=Object.values(s).map(e=>({title:e.title,description:e.description,fields:[]}));for(let e=0;e<t.length;e++){let s=t[e];switch(s.type){case"text":l[s.stepIndex].fields.push({...s,id:s.inputId});break;case"option":{let a=i[s.selectListId],{start:d,end:n}=a,o=t.slice(d,n).map(e=>{if("text"===e.type)throw Error("Somehow, a text field was added to an option list. This is likely a developer error.");let t={id:e.inputId,label:e.label,selected:e.selected};return e.reveals&&(t.reveals={id:e.reveals.inputId,...e.reveals}),t}),r={type:"select",id:s.selectListId,label:a.label,options:o};"checkbox"===a.as&&(r.selectMultiple=a.selectMultiple),l[s.stepIndex].fields.push(r),e=n-1}break;default:(0,I.exhaustivenessCheck)(s)}}return l}(h);await o({surveyName:b,surveySlug:S,user:L??void 0,team:w??void 0,surveySteps:t,hasResponses:e,get fields(){return t.flatMap(e=>e.fields)}})}finally{C("idle"),d&&A.success({text:"Thank you for your feedback."})}},[k,b,T,B,h,o,x,S,L,w,d,A]);return(0,t.jsx)(y.Provider,{value:{accountId:U,cancel:G,dataTestIdContext:a,dispatch:E,hasMultipleSteps:m,invalidFields:D,originalSteps:_,setInvalidFields:N,setStatus:C,status:g,submit:W,surveyState:h,team:w,updateCookie:B,user:L},children:i})}var H=e.i(9169214);function J(e){let{onAction:s,title:i="Help Shape the Future of Vercel",ctaText:l="Get Started",description:a="Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(r.Modal.Title,{children:i}),(0,t.jsx)("p",{className:`text-copy-16 text-left ${H.default.text}`,children:a})]})}),(0,t.jsx)(r.Modal.Actions,{children:(0,t.jsx)(r.Modal.Action,{fullWidth:!0,onClick:s,children:l})})]})}function Z(e){let{isModal:n=!1,externalProps:o}=e,{dispatch:u,submit:v,surveyState:_,team:m,user:h,invalidFields:E}=(0,s.useContext)(y),{className:b,dataTestIdContext:k=[],enableSkip:I=!1,noPadding:g=!1,onSkip:j,onSubmitted:C,secondaryButtonText:D,showInputLabels:N=!1,stackButtons:F=!1,submitButtonText:q="Submit"}=o,{currentStep:L,focusedField:w,focusedItem:O,isLastStep:P,previousStep:U,stepLookup:A,surveyName:M}=_,{surveySteps:R}=function(e,t){if(t&&1!==e.surveySteps.length)throw Error(`Can only stack buttons for single-step surveys. Your survey has ${e.surveySteps.length} steps.'`);return e}(o.surveyInfo,F),{title:B,description:G}=A[L];(0,s.useEffect)(()=>{u({type:"TOGGLE_SKIP_ENABLED",enableSkip:I})},[u,I]),(0,s.useEffect)(()=>{u({type:"RESET_SURVEY_INFO",surveyInfo:o.surveyInfo})},[u,o.surveyInfo]);let W=h?.uid,$=m?.id;(0,s.useEffect)(()=>{(W||$)&&(f.analytics.track(c.AnalyticsEvent.SURVEY_STARTED,{surveyName:M,teamId:$,userId:W}),u({type:"SET_STEP",to:0}))},[u,M,$,W]);let V=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{V.current&&!V.current.contains(e.target)&&u({type:"SET_FOCUSED_FIELD",fqid:null})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u]),(0,s.useEffect)(()=>{null===O?document.activeElement?.blur():"survey"===O.type&&V.current?.focus()},[O]);let[Y,z]=(0,s.useState)();(0,s.useEffect)(()=>{let e=new Set;R.forEach(t=>{t.fields.forEach(t=>{if(e.has(t.id)&&z(`Duplicate top-level field id: ${t.id}`),e.add(t.id),"options"in t){let e=new Set;t.options.forEach(t=>{e.has(t.id)&&z(`Duplicate option id: ${t.id}`),e.add(t.id)})}})})},[R]);let K=(0,s.useCallback)(function(e){if(V.current?.contains(e.target))switch(e.key){case"Enter":if(!(0,p.isModifierPressed)(e)||E.length>0)return;P?v():(e.preventDefault(),u({type:"INCREMENT_STEP"}));break;case"ArrowRight":w?.type!=="text"&&u({type:"INCREMENT_STEP"});break;case"ArrowLeft":w?.type!=="text"&&u({type:"DECREMENT_STEP"})}},[u,w?.type,E.length,P,v]);(0,s.useEffect)(()=>(window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)),[K]),(0,s.useEffect)(()=>{null!==U&&f.analytics.track(c.AnalyticsEvent.SURVEY_MODAL_STEP_CHANGED,{startIndex:U,endIndex:L,surveyName:M})},[L,M]);let[H,{height:J}]=(0,l.default)(),[Z,ee]=(0,d.useSpring)(()=>({config:{...d.config.default,clamp:!0},height:void 0}),[L]);return(0,s.useEffect)(()=>{J&&ee.start({height:`${J}px`})},[L,ee,J]),(0,t.jsxs)("div",{"aria-label":M,"data-testid":T("wrapper",...k),ref:V,tabIndex:-1,"data-survey-container":!0,className:(0,i.clsx)("flex flex-col items-stretch justify-start gap-8 flex-initial",S.default.survey,b,{[S.default["no-padding"]]:g,[S.default.modal]:n}),children:[(0,t.jsx)(a.animated.div,{style:n?void 0:Z,children:(0,t.jsxs)("form",{"data-testid":T("form",...k),onSubmit:e=>{e.preventDefault()},title:M,children:[(0,t.jsx)("h1",{className:"geist-sr-only",children:M}),(0,t.jsxs)("fieldset",{children:[(0,t.jsxs)("legend",{className:"geist-sr-only",children:["Step ",L+1]}),(0,t.jsxs)("div",{ref:H,className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[B||G?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:n?(0,t.jsxs)(t.Fragment,{children:[B?(0,t.jsx)(r.Modal.Title,{children:B}):void 0,G?(0,t.jsx)(r.Modal.Subtitle,{children:"string"==typeof G?x(G):G}):null]}):(0,t.jsxs)(t.Fragment,{children:[B?(0,t.jsx)("h1",{className:`text-copy-14 ${S.default.title}`,children:B}):void 0,G?(0,t.jsx)("p",{className:"text-copy-14",children:"string"==typeof G?x(G):G}):null]})}):null,(0,t.jsx)(X,{dataTestIdContext:k,showInputLabels:N})]})]})]})}),null,n?null:(0,t.jsx)(Q,{onSkip:j,onSubmitted:C,secondaryButtonText:D,stack:F,submitButtonText:q})]})}function Q(e){let{onSkip:l,onSubmitted:a,secondaryButtonText:d="Skip",stack:r,submitButtonText:u}=e,{cancel:c,dataTestIdContext:f,dispatch:p,invalidFields:x,originalSteps:v,status:_,submit:h,surveyState:E,hasMultipleSteps:b}=(0,s.useContext)(y),{backButtonExists:k,currentStep:I,fields:g,focusedButton:j,focusedField:C,isLastStep:D,selectListLookup:N,skipButtonExists:F,stepLookup:q}=E,L=(0,s.useRef)(null),w=(0,s.useRef)(null),O=(0,s.useRef)(null);(0,s.useEffect)(()=>{switch(j){case"back":L.current?.focus();break;case"skip":w.current?.focus();break;case"submit":O.current?.focus()}},[j]);let P=C?.type==="option"&&"checkbox"===N[C.selectListId].as,U=b&&!P,A=(0,s.useMemo)(()=>v.map((e,t)=>({key:g[q[t].start].fqid})),[g,v,q]);return(0,t.jsxs)("div",{"aria-label":"Survey navigation controls",role:"group",className:(0,i.clsx)("flex flex-row items-center gap-4 flex-initial",k?"justify-between":"justify-end",S.default.footer),children:[k?(0,t.jsx)(o.Button,{"aria-label":"Back to previous step",className:(0,i.clsx)(S.default["back-button"]),"data-testid":T("back-button",...f),onClick:()=>p({type:"DECREMENT_STEP"}),onFocus:()=>{"back"!==j&&p({type:"SET_FOCUSED_BUTTON",buttonId:"back"})},ref:L,svgOnly:!0,type:"tertiary",typeName:"button",children:(0,t.jsx)(n.ArrowLeft,{"aria-label":"left-facing arrow"})}):null,(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-col items-center justify-center flex-initial",S.default.info,{[S.default["align-left"]]:!b||F&&P}),children:[(0,t.jsx)("p",{className:(0,i.clsx)("text-[14px] leading-[20px] font-medium text-gray-900",S.default.tip,{[S.default.hidden]:!P}),children:"Press a key to select or ↑↓ to navigate"}),(0,t.jsx)(m,{className:(0,i.clsx)(S.default["step-indicator"],{[S.default.hidden]:!U,[S.default.single]:!b}),currentStep:I,steps:A})]}),(0,t.jsxs)("div",{className:(0,i.clsx)("flex items-stretch justify-start gap-4 flex-initial",S.default.buttons,{[S.default.stacked]:r&&!b}),children:[F?(0,t.jsx)(o.Button,{className:(0,i.clsx)(S.default["skip-button"]),"data-testid":T("skip-button",...f),onClick:()=>{l?.(),c()},onFocus:()=>{"skip"!==j&&p({type:"SET_FOCUSED_BUTTON",buttonId:"skip"})},ref:w,type:"secondary",children:d}):null,(0,t.jsx)(o.Button,{"aria-label":D?"Submit survey":"Continue to next step",className:(0,i.clsx)(S.default["submit-button"]),"data-testid":T(D?"submit-button":"next-button",...f),disabled:x.length>0,loading:D?"submitting"===_:void 0,onClick:()=>{D?h().then(a):p({type:"INCREMENT_STEP"})},onFocus:()=>{"submit"!==j&&p({type:"SET_FOCUSED_BUTTON",buttonId:"submit"})},ref:O,children:D?u:"Next"})]})]})}function ee(e){let{externalProps:i}=e,{active:l,dataTestIdContext:a=[],enableSkip:d=!1,hideIfAlreadySeen:n,prompt:o,setActive:u,surveyInfo:c,submitOnSkip:f}=i,{surveySlug:p}=c,{dispatch:x,user:_,cancel:m,submit:h}=(0,s.useContext)(y),[E,b]=(0,s.useState)(o),S=(0,v.getCookie)(p),k=!!_?.uid&&S?.includes(_.uid),I=(0,s.useCallback)(e=>{let t=e?.target;(!t||t.offsetParent?.id!=="cconsent-bar")&&d&&(f&&h(),u(!1),m())},[m,d,u,f,h]);return(0,t.jsxs)(r.Modal.Modal,{active:(!n||!k)&&l,"data-testid":T("modal",...a),drawerHeight:"auto",enableSkip:d,onAnimationDone:()=>{x({type:"SET_STEP",to:0})},onClickOutside:I,width:520,children:[l&&E?(0,t.jsx)(J,{onAction:()=>b(!1)}):null,l&&!E?(0,t.jsx)(et,{externalProps:i,setShowPrompt:b}):null]})}function et(e){let{externalProps:i,setShowPrompt:l}=e,{onSkip:a,onSubmitted:d,prompt:n,promptWithToast:o,secondaryButtonText:c,setActive:f,stackButtons:p=!1,submitButtonText:x="Submit",surveyInfo:_,submitOnSkip:m}=i,{surveySlug:h,surveyName:E}=_,{user:S,updateCookie:k,submit:I}=(0,s.useContext)(y),T=(0,u.useToasts)(),g=(0,v.getCookie)(h),j=!!S?.uid&&g?.includes(S.uid),C=(0,s.useCallback)(()=>{f(!0)},[f]);(0,s.useEffect)(()=>{o&&T.loaded&&!j&&T.message({preserve:!0,text:(0,t.jsx)(b,{id:h,onAction:C,surveyName:E,updateCookie:k}),key:h})},[g,o,E,h,T,j,C,k]);let D=()=>{void 0===a?f(!1):a(),m&&I()},N=()=>{void 0===d?(f(!1),l?.(n)):d()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.Body,{padding:!1,children:(0,t.jsx)(Z,{externalProps:{onSkip:D,onSubmitted:N,...i},isModal:!0})}),(0,t.jsx)(r.Modal.Actions,{children:(0,t.jsx)(Q,{onSkip:D,onSubmitted:N,secondaryButtonText:c,stack:p,submitButtonText:x})})]})}e.s(["SurveyModal",0,function(e){return(0,t.jsx)(K,{...e,children:(0,t.jsx)(ee,{externalProps:e})})},"SurveyModalContent",0,function(e){return(0,t.jsx)(K,{...e,children:(0,t.jsx)(et,{externalProps:e})})}],2066827),e.s([],1585898)}]);

//# debugId=f522afbf-ccf6-6fa3-0136-fda2b6cd4b3f
//# sourceMappingURL=23f9ea042b404640.js.map