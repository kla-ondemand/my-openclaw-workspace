;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4b46564d-d2ad-2cae-cf97-7417fba8cccd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4714146,e=>{e.v({"warning-note":"warning-note-module__UV6e7q__warning-note","warning-note-link":"warning-note-module__UV6e7q__warning-note-link"})},8696994,e=>{e.v({betaBadge:"create-store-modal-module__Wmn6LG__betaBadge",itemContent:"create-store-modal-module__Wmn6LG__itemContent",itemDescription:"create-store-modal-module__Wmn6LG__itemDescription",itemTitle:"create-store-modal-module__Wmn6LG__itemTitle",modalBody:"create-store-modal-module__Wmn6LG__modalBody",storeContainer:"create-store-modal-module__Wmn6LG__storeContainer",storeGrid:"create-store-modal-module__Wmn6LG__storeGrid",storeItem:"create-store-modal-module__Wmn6LG__storeItem",storeItemCTA:"create-store-modal-module__Wmn6LG__storeItemCTA",storeItemColSpan2:"create-store-modal-module__Wmn6LG__storeItemColSpan2",storeItemDisabled:"create-store-modal-module__Wmn6LG__storeItemDisabled",storeItemSelected:"create-store-modal-module__Wmn6LG__storeItemSelected"})},8922739,562291,e=>{"use strict";var t=e.i(4205214),i=e.i(6891161),a=e.i(8923565),s=e.i(4004502),l=e.i(8660982),r=e.i(6352514),o=e.i(1853611);e.i(6887680);var n=e.i(6810699);e.i(5463680);var c=e.i(39509);e.i(3182268);var d=e.i(7849855);e.i(2886798);var u=e.i(680627),x=e.i(3183079),h=e.i(1017032),m=e.i(8522580),g=e.i(1717203),p=e.i(7557283),f=e.i(57106);e.i(8703064);var j=e.i(6798946),y=e.i(4981413),b=e.i(3798983),v=e.i(3703009);function C(e){let{onClickStore:i,storeTypeWithProduct:a,showCreateButton:s=!1}=e,{can:l,isLoading:r}=(0,g.default)(),o={"edge-config":l(p.Action.Create,p.Resource.EdgeConfig),blob:l(p.Action.Create,p.Resource.Blob),integration:l(p.Action.Create,p.Resource.Integration)};return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[["edge-config","blob"].map(e=>(0,t.jsx)(j.CreateResourceCard,{Icon:(0,t.jsx)(v.StoreIcon,{size:"large",type:e,useColor:!0}),description:b.storeDescription[e],isDisabled:r||!o[e],isSelected:a?.type===e,name:b.storeTitle[e],onClick:()=>{i({type:e})},showCreateButton:s,tooltip:{text:`You need additional permission to create a ${b.storeTitleFull[e]}.`,isEnabled:!o[e]}},e)),(0,t.jsxs)(m.Note,{fill:!0,type:"secondary",children:["KV and Postgres are now available through the Marketplace."," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/storage",target:"_blank",children:"Learn more"})]})]}),(0,t.jsx)(y.BrowseProducts,{onClickProduct:i,protocolType:"storage",selectedProduct:a,showCreateButton:s})]})}e.s(["BrowseStoresCards",0,C],562291);var w=e.i(3322174),S=e.i(9668517),T=e.i(4670733),M=e.i(5338940),k=e.i(2843591),_=e.i(8711152),N=e.i(3758860),A=e.i(455575),R=e.i(4030453),E=e.i(3500331),I=e.i(5323212),B=e.i(1848296),L=e.i(1637579),P=e.i(1119178),O=e.i(588428),$=e.i(277234),G=e.i(4244280),D=e.i(8042625),W=e.i(9584471),U=e.i(5377189),F=e.i(1758334);function q(e){let{active:a,cancelLabel:s,createLabel:n="Create",onBack:c,onBlobCreated:d,projectName:u}=e,{createStore:x}=function(){let{addResourceToList:e}=(0,W.useMutateResourceCache)(),t=(0,S.useTeamSlug)(),{permissions:i}=(0,U.useStorePermissions)({storeType:"blob",teamSlug:t??void 0});return{createStore:async i=>{let a=await (0,$.fetchAPI)(function(e,t){if("blob"===e)return`${G.API_STORE}/stores/blob${t}`;throw Error(`Unsupported store type: ${e}`)}("blob",(0,D.encode)({teamId:t})),{method:"POST",throwOnHTTPError:!0,body:i});return e(a.store),a},permissions:i}}(),{name:h,setName:m,storeNameError:g}=(0,F.useStoreName)({projectName:u,storeType:"blob"}),[p,f]=(0,l.useState)(!1),[j,y]=(0,l.useState)("iad1"),[b,v]=(0,l.useState)("private"),{value:C}=(0,O.useLaunchDarklyTeamFeatureFlag)("vercel-blob-private-access-policy"),[w,T]=(0,l.useState)(!1),[M,k]=(0,l.useState)(null),_=(0,l.useCallback)(async e=>{if(e.preventDefault(),f(!0),!g){k(null),T(!0);try{let e=await x({name:h,region:j,...C?{access:b}:{}});await d(e.store),A.toasts.success("Created Blob store successfully"),o.analytics.track(r.AnalyticsEvent.BLOB_STORE_CREATE,{name:h,ownerId:e.store.ownerId})}catch(e){e instanceof Error?k(e.message):k("An error occurred while creating the Blob store"),T(!1)}}},[x,g,h,j,d,C,b]),N=(0,l.useRef)(null);return(0,l.useEffect)(()=>{setTimeout(()=>{a&&(N.current?.focus(),N.current?.select())},0)},[a]),(0,t.jsxs)("form",{onSubmit:(0,P.promiseToCallback)(_),children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{center:!0,children:"Create Blob Store"}),(0,t.jsx)(i.Modal.Subtitle,{children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-center gap-0 flex-initial",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Set up this new Blob Store."})})})]}),(0,t.jsx)(i.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(E.Input,{"aria-label":"Store Name",disabled:w,error:p?g:void 0,label:"Store Name",maxLength:32,onChange:e=>m(e.currentTarget.value),placeholder:"store-name",ref:N,value:h,width:"100%"}),(0,t.jsx)(I.Select,{"aria-label":"Region",disabled:w,label:"Region",onChange:e=>y(e.currentTarget.value),value:j,width:"100%",children:Object.entries(L.groups).map(e=>{let[i,a]=e;return(0,t.jsx)("optgroup",{label:i,children:a.map(e=>"bru1"===e.key?null:(0,t.jsx)("option",{value:e.key,children:`${e.name} (${e.cardinal}) – ${e.key}`},`blob-region-${e.key}`))},`blob-region-group-${i}`)})}),C?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-label-14 text-gray-1000",children:"Access"}),(0,t.jsxs)(B.RadioGroup,{label:"Access",name:"access-policy",value:b,onChange:e=>{v(e)},children:[(0,t.jsx)(B.RadioGroup.Item,{className:"mb-3",value:"private",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-label-14",children:"Private"}),(0,t.jsx)("span",{className:"text-copy-13 text-gray-900",children:"Blobs require a token to read. Use this for sensitive data."})]})}),(0,t.jsx)(B.RadioGroup.Item,{value:"public",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-label-14",children:"Public"}),(0,t.jsx)("span",{className:"text-copy-13 text-gray-900",children:"Blobs are publicly accessible via their URL. Use this for assets like images and documents."})]})})]})]}):null]})}),M?(0,t.jsx)(R.Error,{children:M}):null]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:c,type:"secondary",children:s}),(0,t.jsx)(i.Modal.Action,{buttonType:"submit",disabled:""===h.trim(),loading:w,children:n})]})]})}var K=e.i(6565161),V=e.i(762945),Y=e.i(7917902),z=e.i(4714146),H=e.i(5919007);function J(){let{team:e}=(0,Y.useAccount)();return(0,t.jsx)(m.Note,{className:z.default["warning-note"],fill:!0,label:!1,type:"warning",variant:"contrast",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",style:{padding:1},children:[(0,t.jsx)(V.Warning,{style:{flexShrink:0}}),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-inherit",children:"You reached the maximum number of Edge Configs for your plan."}),(0,t.jsxs)("p",{className:"text-copy-14 text-inherit",children:[(0,t.jsx)(f.Link,{href:e?`/${e.slug}/~/settings/billing`:"/account/billing",variant:"blend",children:"Upgrade your plan"})," ","or"," ",(0,t.jsx)(f.Link,{external:!0,href:"https://vercel.com/contact/sales?p=1",variant:"blend",children:"contact our sales team"})," ","to request a higher limit."]})]})]})})}function Q(e){let{active:a,onClickOutside:s,onEdgeConfigCreated:n,projectName:c,cancelLabel:d="Cancel",createLabel:u="Create"}=e,{team:x,user:h}=(0,Y.useAccount)(),{data:m}=(0,k.useEdgeConfigs)(),{mutate:g}=(0,K.useSWRConfig)(),{addResourceToList:p}=(0,W.useMutateResourceCache)(),[f,j]=(0,l.useState)(!1),y=x||h,b=!f&&!!y&&!!m&&m.length>=(0,H.getMaxEdgeConfigs)(y),{name:v,setName:C,storeNameError:w}=(0,F.useStoreName)({projectName:c,storeType:"edge-config"}),[S,T]=(0,l.useState)(!1),[M,_]=(0,l.useState)(!1),[N,R]=(0,l.useState)(null),I=(0,A.useToasts)(),B=(0,l.useCallback)(async e=>{if(e.preventDefault(),T(!0),!w){R(null),_(!0);try{let e=await (0,$.fetchAPI)(`${G.API_EDGE_CONFIG}${(0,D.encode)({teamId:x?.id})}`,{method:"POST",throwOnHTTPError:!0,body:JSON.stringify({slug:v,items:{greeting:"hello world"}})});await g(`${G.API_EDGE_CONFIG}/${encodeURIComponent(e.id)}${(0,D.encode)({teamId:x?.id})}`,e,{revalidate:!1});let t=(0,k.mapEdgeConfigToStoreType)({edgeConfig:e});await p(t),I.success("Created Edge Config successfully"),o.analytics.track(r.AnalyticsEvent.EDGE_CONFIG_STORE_CREATE,{ownerId:x?.id}),j(!0),await new Promise(e=>{setTimeout(e,0)}),await n(e)}catch(e){e instanceof Error?R(e.message):I.error("Unexpected error while creating Edge Config"),_(!1)}}},[w,v,x?.id,g,p,I,n]),L=(0,l.useRef)(null);return(0,l.useEffect)(()=>{setTimeout(()=>{a&&(L.current?.focus(),L.current?.select())},0)},[a]),(0,t.jsxs)("form",{onSubmit:e=>void B(e),children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{center:!1,children:"Create Edge Config Store"}),(0,t.jsx)(i.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(E.Input,{"aria-label":"Edge Config Name",disabled:M||b,error:S?N??w:void 0,label:"Edge Config Name",maxLength:(0,F.getStoreNameLengthByType)("edge-config"),onChange:e=>C(e.currentTarget.value),placeholder:"my-edge-config-store",ref:L,value:v,width:"100%"})}),b?(0,t.jsx)(J,{}):null]})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:s,type:"secondary",children:d}),(0,t.jsx)(i.Modal.Action,{buttonType:"submit",disabled:""===v.trim()||b,loading:M,children:u})]})]})}var X=e.i(6356390);e.i(6483798);var Z=e.i(8287059);function ee(e){if(e)return b.docs[e].limitReached;throw Error("Invalid store type")}function et(e){let{limit:a,plan:s,storeType:r,onBack:o,onCancel:n}=e,{team:c}=(0,M.useTeam)(),d=(0,Z.useOpenUpgradeModal)(),u=function(e){switch(e){case"edge-config":return`${b.storeTitleFull["edge-config"]}`;case"blob":return`${b.storeTitleFull.blob}`;case"integration":return`${b.storeTitleFull.integration}`;default:throw Error("Invalid store type")}}(r),x=`${u}${1===a?"":"s"}`,h=c?.billing?.plan==="pro"&&"trialing"===c.billing.status,m=(0,l.useCallback)(e=>{e.preventDefault(),r&&(d({source:"storage-limit",forceImmediateUpgrade:!0,addOn:{type:"storage",additionalConfigurations:{storeType:r}}}),n())},[r,d,n]),g=(0,l.useCallback)(e=>{e.preventDefault(),window.open("https://vercel.com/help","_blank")},[]);return"hobby"===s||h?(0,t.jsxs)("form",{onSubmit:m,children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)(i.Modal.Title,{center:!0,children:["Create ",u]})}),(0,t.jsx)(i.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-5 flex-initial",children:[(0,t.jsx)(V.Warning,{color:"gray-700"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial pl-6 pr-6",children:[(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium text-center",children:["You have reached the limit of ",u,"s on this plan."]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-center",children:`${h?"Pro Trial teams":"Personal Accounts"} are limited to ${a??""} active ${x}
                at a time. To create additional ${u}s, upgrade your plan
                to Pro or remove an existing ${u}.`}),(0,t.jsx)("div",{children:(0,t.jsx)(f.Link,{external:!0,href:ee(r),variant:"highlight",children:"Learn more"})})]})]})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:o,type:"secondary",children:"Go Back"}),(0,t.jsx)(i.Modal.Action,{buttonType:"submit",children:"Upgrade your plan"})]})]}):(0,t.jsxs)("form",{onSubmit:g,children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)(i.Modal.Title,{center:!0,children:["Create ",u]})}),(0,t.jsx)(i.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-5 flex-initial",children:[(0,t.jsx)(V.Warning,{color:"gray-700"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial pl-6 pr-6",children:[(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium text-center",children:["You have reached the limit of ",u,"s on this plan."]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-center",children:`${"enterprise"===s?"Enterprise":"Pro"}${c?.billing?.status==="trialing"?" Trial":""} Teams are limited to ${a??""} active ${x} at a time.
To request a higher limit, please contact Support.`}),(0,t.jsx)("div",{children:(0,t.jsx)(f.Link,{external:!0,href:ee(r),variant:"highlight",children:"Learn more"})})]})]})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:o,type:"secondary",children:"Go Back"}),(0,t.jsx)(i.Modal.Action,{buttonType:"submit",children:"Contact Support"})]})]})}function ei(e){let{onBack:a,storeType:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)(i.Modal.Title,{children:["You do not have access to ",b.eula[s].product]})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:(0,t.jsxs)("p",{className:"text-copy-14",children:[b.eula[s].product," is not available on your Enterprise contract. To resolve this, please contact your Vercel account team."]})})]})}),(0,t.jsx)(i.Modal.Actions,{children:(0,t.jsx)(i.Modal.Action,{fullWidth:!0,onClick:a,type:"secondary",children:"Go Back"})})]})}var ea=e.i(4496450),es=e.i(4404233);e.i(5192575);var el=e.i(1887803),er=e.i(6060673);function eo(e){let{installations:a}=e,s=(0,S.useTeamSlug)(),{projectSlug:r}=(0,d.useProjectSlug)(),{data:o}=(0,er.useProject)(r),{isReady:c,status:u}=function(){let{state:e}=(0,x.useResourceModalsContext)(),{team:t,isReady:i}=(0,M.useTeam)(),{getLimits:a,isReady:s}=function(){let{data:e}=(0,n.useResourceList)({keepPreviousData:!0,protocolType:"storage"}),{team:t,user:i}=(0,Y.useAccount)(),a=t||i;return{getLimits:(0,l.useCallback)(t=>{let i=e?.stores.filter(e=>e.type===t);if(!a||!i)return{limit:void 0,isLimitReached:!1,plan:void 0};let s=function(e){let{owner:t,storeType:i}=e,a=t.billing?.status==="trialing";switch(i){case"edge-config":return(0,H.getMaxEdgeConfigs)(t);case"blob":if("number"==typeof t.resourceConfig?.blobStores)return t.resourceConfig.blobStores;switch(t.billing?.plan){case"enterprise":return 1e3;case"pro":return a?5:500;default:return 5}case"integration":return 1/0;default:throw Error("Invalid store type")}}({owner:a,storeType:t});return{limit:s,isLimitReached:i.length>=s,plan:a.billing?.plan}},[a,e?.stores]),isReady:!!(e?.stores&&a)}}(),{isStorageEnterpriseEnabled:r,isReady:o}=(0,T.useStorageEnterpriseFlag)(),c=i&&s&&o,[d,u]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if("create-resource"!==e.type||!c||d)return;let{type:i}=e.resourceWithProduct,s=t?.billing?.plan==="enterprise",l=!(0,ea.isLegacyPlanIteration)(t?.billing?.planIteration),o=t?.billing?.status==="trialing",n=a(i);n.isLimitReached?u({limitReached:n,enterpriseBlocked:!1}):s&&!r({storeType:i,isUnbundled:l,isTrialing:o})?u({limitReached:null,enterpriseBlocked:!0}):u({limitReached:null,enterpriseBlocked:!1})},[r,e,t?.billing?.plan,t?.billing?.status,t?.billing?.planIteration,d,c,a]),d?{isReady:!0,status:d}:{isReady:!1,status:null}}(),{state:h,onClose:m,onBack:g,onResourceUpdated:p,maybeGoToConnectProjectStep:f}=(0,x.useResourceModalsContext)(),{createConnection:j}=(0,el.useResourceConnection)(),y=(0,l.useCallback)(async e=>{if("integration"===e.type&&(0,N.supportsAnyDrainProtocol)(e.product))p({resource:e,isConnected:!0}),m();else if(p({resource:e,isConnected:!1}),f(e))try{if(!o)throw Error("no project");let t=(0,es.areResourceDeploymentsEnabled)(e);await j({projectId:o.id,envVarEnvironments:["production","preview","development"],deployments:t?{required:!0,actions:[]}:void 0,resourceId:e.id,v0token:void 0}),p({resource:e,isConnected:!0}),m()}catch{}else p({resource:e,isConnected:!0}),m()},[p,f,m,j,o]),b=(0,l.useCallback)(async e=>{let t=(0,k.mapEdgeConfigToStoreType)({edgeConfig:e});await y(t)},[y]);if("create-resource"!==h.type)return null;let{type:v}=h.resourceWithProduct;if(!c)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsx)(i.Modal.Title,{center:!0,children:"Create Store"})}),(0,t.jsx)(i.Modal.Inset,{last:!0,children:"Loading…"})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:g,type:"secondary",children:"Go Back"}),(0,t.jsx)(i.Modal.Action,{buttonType:"submit",disabled:!0,children:"Continue"})]})]});if(u.limitReached)return(0,t.jsx)(et,{limit:u.limitReached.limit,onBack:g,onCancel:m,plan:u.limitReached.plan,storeType:v});if(u.enterpriseBlocked)return(0,t.jsx)(ei,{onBack:g,storeType:v});switch(v){case"edge-config":return(0,t.jsx)(Q,{active:!0,cancelLabel:h.backOrCancelLabel,onClickOutside:g,onEdgeConfigCreated:b,projectName:r??void 0});case"blob":return(0,t.jsx)(q,{active:!0,cancelLabel:h.backOrCancelLabel,onBack:g,onBlobCreated:y,projectName:r??void 0});case"integration":{let e=h.resourceWithProduct.integration;return(0,t.jsx)(X.CreateResourceModal,{cancelLabel:h.backOrCancelLabel,initialConfigurationStatus:(0,_.getConfigurationStatusByIntegrationId)(a,e.id),integration:e,onBack:g,onIntegrationResourceCreate:y,onSkipOnboarding:e=>{e?y(e):m()},product:(0,N.getProductWithSupportedProtocols)(h.resourceWithProduct.product),teamSlug:s??""})}default:return null}}var en=e.i(8696994),ec=e.i(3584802),ed=e.i(5677444);e.s(["CreateStoreModal",0,function(){let{hasProject:e}=(0,d.useProjectSlug)(),{team:m}=(0,M.useTeam)(),{state:g,onClose:p,onAnimationDone:f,maybeGoToConnectProjectStep:j,switchTab:y,goToCreateResourceStep:b}=(0,x.useResourceModalsContext)(),{data:v}=(0,h.useConfigurations)({type:"provisioning",skipBillingData:!0}),{data:S}=(0,n.useResourceList)({protocolType:"storage"}),T=`create-connect-${g.modalKey}`,[k,_]=(0,l.useState)(),N=(0,ed.useRouter)(),A=(0,l.useRef)(null),R=(0,l.useCallback)(()=>{_(void 0),f()},[f]),E=(0,l.useCallback)(()=>{_(void 0),p()},[p]);switch(g.type){case c.ResourceModalsActionTypes.ModalClosed:return(0,t.jsx)(i.Modal.Modal,{active:g.active,allowOverflow:!0,onAnimationDone:R,onClickOutside:p,width:620,children:(0,t.jsx)("div",{})},T);case c.ResourceModalsActionTypes.BrowseProductsOrSelectResources:return(0,t.jsx)(i.Modal.Modal,{active:g.active,allowOverflow:!0,onAnimationDone:R,onClickOutside:p,width:"browse-new"===g.tab?540:620,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Modal.Body,{className:en.default.modalBody,children:(0,t.jsxs)("div",{ref:A,className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{children:"Browse Storage"}),(0,t.jsx)(i.Modal.Subtitle,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Create databases and stores that you can connect to your projects."})})]}),(0,t.jsxs)(a.Switch,{name:"switch-new-existing-tab",children:[(0,t.jsx)(a.Switch.Control,{defaultChecked:"browse-new"===g.tab,label:"Create New",onChange:()=>{y("browse-new")},size:"large",value:"create",width:104}),(0,t.jsx)(a.Switch.Control,{defaultChecked:"browse-existing"===g.tab,disabled:S?.stores.length===0,label:"Select Existing",onChange:()=>{y("browse-existing")},size:"large",value:"connect",width:122})]}),"browse-new"===g.tab?(0,t.jsx)(C,{onClickStore:e=>{_(e)},storeTypeWithProduct:k}):null,"browse-existing"===g.tab?(0,t.jsx)(u.SelectResources,{hasCreateConnectButton:!1,onClickConnectStoreModal:e=>{j(e)},protocolType:"storage"}):null]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:E,type:"secondary",children:"Cancel"}),"browse-new"===g.tab?(0,t.jsx)(i.Modal.Action,{disabled:!k,onClick:()=>{k&&b(k)},children:"Continue"}):null]})]})},T);case c.ResourceModalsActionTypes.BrowseProducts:return(0,t.jsx)(i.Modal.Modal,{active:g.active,allowOverflow:!0,onAnimationDone:R,onClickOutside:p,width:540,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Modal.Body,{className:en.default.modalBody,children:(0,t.jsxs)("div",{ref:A,className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{children:"Browse Storage"}),(0,t.jsx)(i.Modal.Subtitle,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Create databases and stores that you can connect to your projects."})})]}),(0,t.jsx)(C,{onClickStore:e=>{_(e)},storeTypeWithProduct:k})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:E,type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Modal.Action,{"data-testid":(0,s.tid)("create-store-modal","continue"),disabled:!k,onClick:()=>{k&&("integration"===k.type?(N.push((0,ec.getIntegrationCheckoutUrl)({params:{teamSlug:m?.slug??"",integrationSlug:k.integration.slug},searchParams:{productSlug:k.product.slug,cancelUrl:m?`/${m.slug}/~/integrations/${k.integration.slug}`:`/marketplace/${k.integration.slug}`}})),o.analytics.track(r.AnalyticsEvent.MARKETPLACE_PRODUCT_INSTALL_CLICKED,{source:"storage",integration:{id:k.integration.id,slug:k.integration.slug},productSlug:k.product.slug})):b(k))},children:"Continue"})]})]})},T);case c.ResourceModalsActionTypes.CreateResource:return(0,t.jsx)(i.Modal.Modal,{active:g.active,allowOverflow:!0,onAnimationDone:R,onClickOutside:p,width:540,children:(0,t.jsx)(eo,{installations:v})},T);case c.ResourceModalsActionTypes.CreateEnvs:return e?(0,t.jsx)(i.Modal.Modal,{active:g.active,allowOverflow:!0,onAnimationDone:R,onClickOutside:p,width:540,children:(0,t.jsx)(w.ConnectStoreSwitch,{store:g.resource})},T):(0,t.jsx)(w.ConnectStoreSwitchWithoutProject,{active:g.active,store:g.resource},T);case c.ResourceModalsActionTypes.DeleteEnvs:throw Error("State not supported")}}],8922739)}]);

//# debugId=4b46564d-d2ad-2cae-cf97-7417fba8cccd
//# sourceMappingURL=f42d3b36e0e1cf14.js.map