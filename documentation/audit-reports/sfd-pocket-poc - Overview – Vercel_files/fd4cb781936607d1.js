;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3668ba49-587f-9951-33cb-db442c40aefa")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6347389,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path d="M5.5 7C6.88267 7 8.16936 7.22302 9.1377 7.61035C9.61943 7.80309 10.0595 8.05132 10.3916 8.36523C10.7254 8.6809 11 9.11538 11 9.65039V13.3496C11 13.8855 10.7342 14.3259 10.3975 14.6514C10.0642 14.9733 9.62209 15.2261 9.1377 15.4199C8.17011 15.807 6.88779 16.0176 5.51074 15.999H5.48828C4.11161 16.0174 2.82966 15.8069 1.8623 15.4199C1.37791 15.2261 0.935772 14.9733 0.602539 14.6514C0.265798 14.3259 0 13.8855 0 13.3496V9.65039C0 9.11538 0.274608 8.6809 0.608398 8.36523C0.940466 8.05132 1.38057 7.80309 1.8623 7.61035C2.83063 7.22302 4.11733 7 5.5 7ZM9.1377 11.6895C8.16936 12.0768 6.88267 12.2998 5.5 12.2998C4.11733 12.2998 2.83063 12.0768 1.8623 11.6895C1.73823 11.6398 1.61742 11.5855 1.5 11.5283V13.3496C1.5 13.3584 1.50055 13.4341 1.64453 13.5732C1.79196 13.7156 2.04519 13.8775 2.41992 14.0273C3.16625 14.3258 4.2506 14.5188 5.48828 14.5H5.51172C6.7494 14.5188 7.83375 14.3258 8.58008 14.0273C8.95481 13.8775 9.20804 13.7156 9.35547 13.5732C9.49945 13.4341 9.5 13.3584 9.5 13.3496V11.5283C9.38258 11.5855 9.26177 11.6398 9.1377 11.6895ZM5.5 8.5C4.25936 8.5 3.17075 8.70262 2.41992 9.00293C2.04257 9.15387 1.78722 9.31466 1.63867 9.45508C1.56693 9.52293 1.53134 9.57591 1.51465 9.6084L1.5 9.65039L1.51465 9.69141C1.5313 9.72388 1.56681 9.77677 1.63867 9.84473C1.7872 9.98517 2.04249 10.1459 2.41992 10.2969C3.17075 10.5972 4.25933 10.7998 5.5 10.7998C6.74067 10.7998 7.82925 10.5972 8.58008 10.2969C8.95751 10.1459 9.2128 9.98517 9.36133 9.84473C9.43319 9.77677 9.4687 9.72388 9.48535 9.69141C9.49892 9.66489 9.5 9.65265 9.5 9.65039C9.5 9.65023 9.5004 9.6378 9.48535 9.6084C9.46866 9.57591 9.43307 9.52293 9.36133 9.45508C9.21278 9.31466 8.95743 9.15387 8.58008 9.00293C7.82925 8.70262 6.74064 8.5 5.5 8.5ZM10.5 0C11.8827 0 13.1694 0.223019 14.1377 0.610352C14.6194 0.803089 15.0595 1.05132 15.3916 1.36523C15.7254 1.6809 16 2.11538 16 2.65039V6.34961C16 6.90361 15.7462 7.3508 15.4248 7.67969C15.111 8.00066 14.709 8.23728 14.3174 8.41016C13.539 8.75368 12.6231 8.92285 12 8.92285V7.42285C12.415 7.42285 13.1248 7.2972 13.7119 7.03809C14.0027 6.9097 14.2183 6.7672 14.3516 6.63086C14.4771 6.50236 14.5 6.41271 14.5 6.34961V4.52832C14.3826 4.5855 14.2618 4.63981 14.1377 4.68945C13.1694 5.07679 11.8827 5.2998 10.5 5.2998C9.11733 5.2998 7.83063 5.07679 6.8623 4.68945C6.73823 4.63981 6.61742 4.5855 6.5 4.52832V5.5H5V2.65039C5 2.11538 5.27461 1.6809 5.6084 1.36523C5.94047 1.05132 6.38057 0.803089 6.8623 0.610352C7.83063 0.223019 9.11733 0 10.5 0ZM10.5 1.5C9.25936 1.5 8.17075 1.70262 7.41992 2.00293C7.04257 2.15387 6.78722 2.31466 6.63867 2.45508C6.56693 2.52293 6.53134 2.57591 6.51465 2.6084C6.4996 2.6378 6.5 2.65023 6.5 2.65039C6.5 2.65265 6.50108 2.66489 6.51465 2.69141C6.5313 2.72388 6.56681 2.77677 6.63867 2.84473C6.7872 2.98517 7.04249 3.1459 7.41992 3.29688C8.17075 3.5972 9.25933 3.7998 10.5 3.7998C11.7407 3.7998 12.8292 3.5972 13.5801 3.29688C13.9575 3.1459 14.2128 2.98517 14.3613 2.84473C14.4332 2.77677 14.4687 2.72388 14.4854 2.69141C14.4989 2.66489 14.5 2.65265 14.5 2.65039C14.5 2.65023 14.5004 2.6378 14.4854 2.6084C14.4687 2.57591 14.4331 2.52293 14.3613 2.45508C14.2128 2.31466 13.9574 2.15387 13.5801 2.00293C12.8292 1.70262 11.7406 1.5 10.5 1.5Z" fill="currentColor" />');e.s(["Coins",0,t])},87116,e=>{"use strict";var t=e.i(850302),i=e.i(5338940);e.s(["useVercelAgentCreditsBalance",0,function(){let{team:e}=(0,i.useTeam)(),{data:n,isLoading:s,mutate:r}=(0,t.default)(e?.id?`/api/agent/agent-credits-balance?teamId=${e.id}`:null,e=>fetch(e).then(e=>e.json()));return{balance:n?Number(n.cumulativeBalance):void 0,loading:s,mutate:r}}])},2471070,e=>{"use strict";var t=e.i(850302),i=e.i(5338940);function n(e){let{team:n}=(0,i.useTeam)(),{data:s,error:r,isLoading:a,mutate:o}=(0,t.default)(n?.id&&e?`/api/credit-topups?teamId=${n.id}&currency=${e}`:null,async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()});return{topups:s,error:r,loading:a,mutate:o}}e.s(["useAiGatewayCreditTopups",0,function(){return n("ai_gateway_credits")},"useCreditTopups",0,n,"useVercelAgentCreditTopups",0,function(){return n("vercel_agent_credits")}])},4949488,e=>{"use strict";var t=e.i(8660982),i=e.i(2304153);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,n,s=e&&("u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=s){var r=[],a=!0,o=!1;try{for(s=s.call(e);!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw n}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var d=function(e){return null!==e&&"object"===r(e)},u="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if(null===e||d(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if(d(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return h(e,t)})};var i=h(e,t);return null===i?{tag:"empty"}:{tag:"sync",stripe:i}},m=function(e){var i=t.default.useRef(e);return t.default.useEffect(function(){i.current=e},[e]),i.current},f="[object Object]",y=function e(t,i){if(!d(t)||!d(i))return t===i;var n=Array.isArray(t);if(n!==Array.isArray(i))return!1;var s=Object.prototype.toString.call(t)===f;if(s!==(Object.prototype.toString.call(i)===f))return!1;if(!s&&!n)return t===i;var r=Object.keys(t),a=Object.keys(i);if(r.length!==a.length)return!1;for(var o={},l=0;l<r.length;l+=1)o[r[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);return u.length===r.length&&u.every(function(n){return e(t[n],i[n])})},g=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},v=t.default.createContext(null);v.displayName="ElementsContext";var b=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};i.default.any,i.default.object,i.default.func.isRequired;var C=["on","session"],x=t.default.createContext(null);x.displayName="CheckoutContext";var w=function(e,t){if(!e)throw Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in a <CheckoutProvider> provider."));return e},j=function(e,t){if("success"!==t.type)return{stripe:e,checkoutState:t};var i=t.sdk,n=t.session;return i.on,i.session,{stripe:e,checkoutState:{type:"success",checkout:Object.assign({},n,o(i,C))}}},_=function(e){var i=e.stripe,n=e.options,s=e.children,r=t.default.useMemo(function(){return p(i,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[i]),a=l(t.default.useState({type:"loading"}),2),o=a[0],c=a[1],d=l(t.default.useState(null),2),u=d[0],h=d[1],f=t.default.useRef(!1);t.default.useEffect(function(){var e=!0,t=function(t){var i=t.stripe;i&&e&&!f.current&&(f.current=!0,i.initCheckout(n).then(function(e){c({type:"success",sdk:e,session:e.session()}),e.on("change",function(e){c(function(t){return"success"===t.type?{type:"success",sdk:t.sdk,session:e}:t})})},function(e){c({type:"error",error:e})}))};return"async"===r.tag?r.stripePromise.then(function(e){h(e),e&&t({stripe:e})}):"sync"===r.tag&&(h(r.stripe),t({stripe:r.stripe})),function(){e=!1}},[r,n,c]);var v=m(i);t.default.useEffect(function(){null!==v&&v!==i&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[v,i]);var b="success"===o.type?o.sdk:null,C=m(n),w=m(b);t.default.useEffect(function(){if(b){var e,t,i,s,r=!!(!w&&b),a=null==C||null==(e=C.elementsOptions)?void 0:e.appearance,o=null==n||null==(t=n.elementsOptions)?void 0:t.appearance,l=!y(o,a);o&&(l||r)&&b.changeAppearance(o);var c=null==C||null==(i=C.elementsOptions)?void 0:i.fonts,d=null==n||null==(s=n.elementsOptions)?void 0:s.fonts,u=!y(c,d);d&&(u||r)&&b.loadFonts(d)}},[n,C,b,w]),t.default.useEffect(function(){g(u)},[u]);var _=t.default.useMemo(function(){return j(u,o)},[u,o]);return t.default.createElement(x.Provider,{value:_},s)};_.propTypes={stripe:i.default.any,options:i.default.shape({fetchClientSecret:i.default.func.isRequired,elementsOptions:i.default.object}).isRequired};var S=function(e){var i=t.default.useContext(x),n=t.default.useContext(v);if(!i)return b(n,e);if(!n)return i;throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."))},k=function(e,i,n){var s=!!n,r=t.default.useRef(n);t.default.useEffect(function(){r.current=n},[n]),t.default.useEffect(function(){if(!s||!e)return function(){};var t=function(){r.current&&r.current.apply(r,arguments)};return e.on(i,t),function(){e.off(i,t)}},[s,i,e,r])},E=["mode"],A=function(e,n){var r="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),c=n?function(e){S("mounts <".concat(r,">"));var i=e.id,n=e.className;return t.default.createElement("div",{id:i,className:n})}:function(i){var n,c=i.id,u=i.className,h=i.options,p=void 0===h?{}:h,f=i.onBlur,g=i.onFocus,v=i.onReady,b=i.onChange,C=i.onEscape,x=i.onClick,w=i.onLoadError,j=i.onLoaderStart,_=i.onNetworksChange,A=i.onConfirm,T=i.onCancel,N=i.onShippingAddressChange,P=i.onShippingRateChange,M=i.onSavedPaymentMethodRemove,R=i.onSavedPaymentMethodUpdate,O=S("mounts <".concat(r,">")),I="elements"in O?O.elements:null,$="checkoutState"in O?O.checkoutState:null,L=(null==$?void 0:$.type)==="success"?$.checkout:null,F=l(t.default.useState(null),2),U=F[0],B=F[1],V=t.default.useRef(null),D=t.default.useRef(null);k(U,"blur",f),k(U,"focus",g),k(U,"escape",C),k(U,"click",x),k(U,"loaderror",w),k(U,"loaderstart",j),k(U,"networkschange",_),k(U,"confirm",A),k(U,"cancel",T),k(U,"shippingaddresschange",N),k(U,"shippingratechange",P),k(U,"savedpaymentmethodremove",M),k(U,"savedpaymentmethodupdate",R),k(U,"change",b),v&&(n="expressCheckout"===e?v:function(){v(U)}),k(U,"ready",n),t.default.useLayoutEffect(function(){if(null===V.current&&null!==D.current&&(I||L)){var t=null;if(L)switch(e){case"payment":t=L.createPaymentElement(p);break;case"address":if("mode"in p){var i=p.mode,n=o(p,E);if("shipping"===i)t=L.createShippingAddressElement(n);else if("billing"===i)t=L.createBillingAddressElement(n);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":t=L.createExpressCheckoutElement(p);break;case"currencySelector":t=L.createCurrencySelectorElement();break;case"taxId":t=L.createTaxIdElement(p);break;default:throw Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(t=I.create(e,p));V.current=t,B(t),t&&t.mount(D.current)}},[I,L,p]);var Y=m(p);return t.default.useEffect(function(){if(V.current){var e,t=(e=["paymentRequest"],d(p)?Object.keys(p).reduce(function(t,i){var n=!d(Y)||!y(p[i],Y[i]);return e.includes(i)?(n&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),t):n?s(s({},t||{}),{},a({},i,p[i])):t},null):null);t&&"update"in V.current&&V.current.update(t)}},[p,Y]),t.default.useLayoutEffect(function(){return function(){if(V.current&&"function"==typeof V.current.destroy)try{V.current.destroy(),V.current=null}catch(e){}}},[]),t.default.createElement("div",{id:c,className:u,ref:D})};return c.propTypes={id:i.default.string,className:i.default.string,onChange:i.default.func,onBlur:i.default.func,onFocus:i.default.func,onReady:i.default.func,onEscape:i.default.func,onClick:i.default.func,onLoadError:i.default.func,onLoaderStart:i.default.func,onNetworksChange:i.default.func,onConfirm:i.default.func,onCancel:i.default.func,onShippingAddressChange:i.default.func,onShippingRateChange:i.default.func,onSavedPaymentMethodRemove:i.default.func,onSavedPaymentMethodUpdate:i.default.func,options:i.default.object},c.displayName=r,c.__elementType=e,c},T="u"<typeof window,N=["options"];A("currencySelector",T);var P=A("payment",T);A("expressCheckout",T),A("taxId",T);var M=A("address",T);e.s(["BillingAddressElement",0,function(e){var i=e.options,n=o(e,N),r=s(s({},i),{},{mode:"billing"});return t.default.createElement(M,s(s({},n),{},{options:r}))},"CheckoutProvider",0,_,"PaymentElement",0,P,"useCheckout",0,function(){return w(t.default.useContext(x),"calls useCheckout()").checkoutState}])},4373123,5895979,5325056,5978870,2166755,e=>{"use strict";e.i(2144405);var t=e.i(4205214),i=e.i(8660982),n=e.i(6814182),s=e.i(633201),r=e.i(5802506),a=e.i(7917902),o=e.i(3322724),l=e.i(287495);let c=new Map;function d(e){if(!e)return Promise.resolve(null);let t=c.get(e);return t||(t=(0,s.loadStripe)(e).catch(t=>((0,r.captureError)(t),c.delete(e),null)),c.set(e,t)),t}e.s(["getStripe",0,d,"withBillingContext",0,e=>{function i(i){let{account:s}=(0,a.useAccount)(),r=(0,l.default)(),c=(0,o.useMediaQuery)(600),u=`${c?16:14}px`,h=s?.billing?.platform==="stripeTestMode";return(0,t.jsx)(n.Elements,{options:{loader:"always",payment_method_types:["card"],appearance:{theme:r?"stripe":"night",variables:{colorBackground:r?"#fff":"#000",colorPrimary:r?"#000":"#fff",fontSizeBase:u}},currency:"usd",mode:"setup"},stripe:d(h?"pk_test_51KWTJcBQYfoTMhVJkeKojfST4MsShve9XJ7Seqw7mgZaUCeO1DR4dR3EkrWFDqD0MG5IiZRYFygw6ZR8FnmZZKnn004vR9fkFq":"pk_live_alyEi3lN0kSwbdevK0nrGwTw"),children:(0,t.jsx)(e,{...i})})}return i.displayName=`WithBillingContext${e.displayName||e.name||"Component"}`,i}],5895979);let u=(0,i.createContext)(void 0);function h(){let e=(0,i.useContext)(u);if(!e)throw Error("useCopperStripe must be used within CopperProvider");return e}e.s(["CopperProvider",0,function(e){let{children:n,environment:s,teamIdOrSlug:r,clearPaymentStateRef:a}=e,[o,l]=(0,i.useState)(null),[c,h]=(0,i.useState)(null),p=(0,i.useMemo)(()=>d(function(e){switch(e){case"production_test":return"pk_test_51KWTJcBQYfoTMhVJkeKojfST4MsShve9XJ7Seqw7mgZaUCeO1DR4dR3EkrWFDqD0MG5IiZRYFygw6ZR8FnmZZKnn004vR9fkFq";case"production":return"pk_live_alyEi3lN0kSwbdevK0nrGwTw";default:throw Error(`Unsupported environment for Stripe key: ${e}`)}}(s)),[s]),m=(0,i.useCallback)(()=>{l(null),h(null)},[]);(0,i.useEffect)(()=>{a&&(a.current=m)},[m,a]);let f=(0,i.useMemo)(()=>({stripe:p,teamIdOrSlug:r??null,purchaseIntent:o,providerDetails:c,setPurchaseIntent:l,setProviderDetails:h,clearPaymentState:m}),[p,r,o,c,m]);return(0,t.jsx)(u.Provider,{value:f,children:n})},"useCopperClient",0,function(){let e=(0,i.useContext)(u);if(!e)throw Error("useCopperClient must be used within CopperProvider");return{teamIdOrSlug:e.teamIdOrSlug,purchaseIntent:e.purchaseIntent,providerDetails:e.providerDetails,setPurchaseIntent:e.setPurchaseIntent,setProviderDetails:e.setProviderDetails,clearPaymentState:e.clearPaymentState}},"useCopperStripe",0,h],5325056);var p=e.i(4949488);let m=(0,i.createContext)(void 0);var f=e.i(7722264);let y={layout:{type:"tabs",defaultCollapsed:!1},terms:{card:"never",applePay:"never",googlePay:"never"}};function g(e){let{paymentElementOptions:n}=e,{confirmHandler:s,onReady:r}=function(){let e=(0,i.useContext)(m);if(!e)throw Error("useCopperCheckout must be used within CopperPaymentElement");return e}(),a=(0,p.useCheckout)(),o=(0,i.useCallback)(async()=>{try{if("success"!==a.type)return{success:!1,error:"error"===a.type?a.error.message:"Checkout session failed to load"};let e=await a.checkout.confirm({redirect:"if_required"});if("error"===e.type)return{success:!1,error:e.error.message};return{success:!0}}catch(e){return{success:!1,error:(0,f.isErrorLike)(e)?e.message:"An error occurred"}}},[a]);return(0,i.useEffect)(()=>(s.current=o,()=>{s.current=null}),[s,o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.PaymentElement,{onReady:r,options:n??y}),(0,t.jsx)(p.BillingAddressElement,{})]})}e.s(["CopperPaymentElement",0,function(e){let{confirmHandler:n,clientSecret:s,options:r,onReady:a}=e,{stripe:o}=h(),l=(0,i.useMemo)(()=>({fetchClientSecret:()=>Promise.resolve(s),elementsOptions:r.elementsOptions}),[s,r.elementsOptions]);return(0,t.jsx)(m.Provider,{value:{confirmHandler:n,onReady:a},children:(0,t.jsx)(p.CheckoutProvider,{stripe:o,options:l,children:(0,t.jsx)(g,{paymentElementOptions:r.paymentElement})})})}],5978870),e.s(["useEnvironment",0,function(e){return(0,i.useMemo)(()=>e?.billing?.platform==="stripeTestMode"?"production_test":"production",[e])}],2166755),e.s([],4373123)},2831393,e=>{"use strict";var t=e.i(850302),i=e.i(5338940);e.s(["useAiCreditsBalance",0,function(){let{team:e,isReady:n}=(0,i.useTeam)(),{data:s,isLoading:r,mutate:a}=(0,t.default)(e?.id&&n?`/api/ai/ai-credits-balance?teamId=${e.id}`:null,e=>fetch(e).then(e=>e.json()));return{balance:s?Number(s.cumulativeBalance):void 0,hasEverPaid:s?.hasEverPaid,hasVerifiedPaymentMethod:s?.hasVerifiedPaymentMethod,loading:!n||r,mutate:a}}])},9963234,e=>{"use strict";var t=e.i(4205214),i=e.i(8660982),n=e.i(1473216),s=e.i(2504781),r=e.i(5255926),a=e.i(6347389),o=e.i(57106),l=e.i(5338940),c=e.i(6468432),d=e.i(2831393),u=e.i(87116);function h(e){if(void 0===e)return"";let t=Math.max(0,e);return t<100?t.toFixed(2):t<1e3?t.toFixed(0):`${(t/1e3).toFixed(0)}k`}function p(e){let{balance:l,isLoading:c,productLabel:d,teamSlug:u}=e,[p,m]=(0,i.useState)(!1);return c?(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)(s.Button,{type:"secondary",prefix:(0,t.jsx)(a.Coins,{}),children:"Loading Credits"})}):void 0===l||l<=0?null:(0,t.jsxs)(n.Root,{open:p,onOpenChange:m,children:[(0,t.jsx)(n.Trigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{type:"secondary",prefix:(0,t.jsx)(a.Coins,{}),children:["$",h(l)," Credits"]})}),(0,t.jsx)(n.Portal,{children:(0,t.jsx)(n.Content,{className:"w-[320px] p-4 material-modal text-label-14 z-[calc(var(--header-zindex)_+_2)]",sideOffset:6,align:"start",collisionPadding:8,children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("h3",{className:"text-label-16 font-medium",children:"Existing AI Credits"}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["You have existing AI Credits for ",d,". These will drawdown first. Additional usage will drawdown from your"," ",(0,t.jsx)(o.Link,{href:`/${u}/~/settings/billing`,className:"text-foreground underline-offset-2 hover:underline",children:"flexible commitment"}),"."]}),(0,t.jsx)("div",{className:"border-t border-gray-400 pt-4",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsxs)("span",{className:"text-label-14",children:[d," Credits"]}),(0,t.jsx)("span",{className:"text-copy-13 text-gray-900",children:"Remaining"})]}),(0,t.jsxs)("span",{className:"text-label-14 font-medium",children:["$",h(l)]})]})})]})})})]})}e.s(["AgentFlexCreditsPopover",0,function(){let{team:e,isReady:i}=(0,l.useTeam)(),{balance:n,loading:s}=(0,u.useVercelAgentCreditsBalance)();return i&&e&&(0,c.isFlexibleCommitment)(e)?(0,t.jsx)(p,{balance:n,isLoading:s,productLabel:"Agent",teamSlug:e.slug}):null},"AiGatewayFlexCreditsPopover",0,function(){let{team:e,isReady:i}=(0,l.useTeam)(),{balance:n,loading:s}=(0,d.useAiCreditsBalance)();return i&&e&&(0,c.isFlexibleCommitment)(e)?(0,t.jsx)(p,{balance:n,isLoading:s,productLabel:"AI Gateway",teamSlug:e.slug}):null}])},9257893,e=>{"use strict";let t;var i=e.i(8660982);let n=(e,t,i)=>{let n=document.createElement(e),[s,r]=Array.isArray(t)?[void 0,t]:[t,i];return s&&Object.assign(n,s),null==r||r.forEach(e=>n.appendChild(e)),n},s=String.raw,r="u">typeof CSS&&CSS.supports&&CSS.supports("animation-timing-function","linear(1,2)"),a="u">typeof CSS&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),o="u">typeof matchMedia?matchMedia("(prefers-reduced-motion: reduce)"):null,l="--_number-flow-d-opacity",c="--_number-flow-d-width",d="--_number-flow-dx",u="--_number-flow-d",h=(()=>{try{return CSS.registerProperty({name:l,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:d,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:c,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:u,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),p="var(--number-flow-char-height, 1em)",m="var(--number-flow-mask-height, 0.25em)",f=`calc(${m} / 2)`,y="var(--number-flow-mask-width, 0.5em)",g=`calc(${y} / var(--scale-x))`,v="#000 0, transparent 71%",b=s`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${p} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${c}) / var(--width));transform:translateX(var(${d})) scaleX(var(--scale-x));margin:0 calc(-1 * ${y});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${g},#000 calc(100% - ${g}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${m},#000 calc(100% - ${m}),transparent 100% ),radial-gradient(at bottom right,${v}),radial-gradient(at bottom left,${v}),radial-gradient(at top left,${v}),radial-gradient(at top right,${v});-webkit-mask-size:100% calc(100% - ${m} * 2),calc(100% - ${g} * 2) 100%,${g} ${m},${g} ${m},${g} ${m},${g} ${m};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${f} ${y};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${d})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section__exiting,.symbol__exiting{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${u})}.digit__num,.number .section::after{padding:${f} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num:not(.is-current){position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num:not(.is-current){display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol__exiting{left:0}.section--justify-right .symbol__exiting{right:0}.animate-presence{opacity:calc(1 + var(${l}))}`,C=HTMLElement,x=(s`:host{display:inline-block;direction:ltr;white-space:nowrap;line-height:${p} !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:${f} 0}.symbol{white-space:pre}`,a&&r&&h);class w extends C{constructor(){super(),this.created=!1,this.manual=!1;const{animated:e,...t}=this.constructor.defaultProps;this._animated=this.computedAnimated=e,Object.assign(this,t)}get animated(){return this._animated}set animated(e){var t;this.animated!==e&&(this._animated=e,null==(t=this.shadowRoot)||t.getAnimations().forEach(e=>e.finish()))}set data(e){if(null==e)return;let{pre:i,integer:n,fraction:s,post:r,value:a}=e;if(this.created){let t=this._data;if(this._data=e,this.computedTrend="function"==typeof this.trend?this.trend(t.value,a):this.trend,this.startingPos=void 0,this.computedTrend&&this.continuous){let i,n,s=t.integer.concat(t.fraction).filter(e=>"integer"===e.type||"fraction"===e.type),r=e.integer.concat(e.fraction).filter(e=>"integer"===e.type||"fraction"===e.type),a=s.find(e=>!r.find(t=>t.pos===e.pos&&t.value===e.value)),o=r.find(e=>!s.find(t=>e.pos===t.pos&&e.value===t.value));this.startingPos=(i=null==a?void 0:a.pos,n=null==o?void 0:o.pos,null==i?n:null==n?i:Math.max(i,n))}this.computedAnimated=x&&this._animated&&(!this.respectMotionPreference||!(null!=o&&o.matches))&&this.offsetWidth>0&&this.offsetHeight>0,this.manual||this.willUpdate(),this._pre.update(i),this._num.update({integer:n,fraction:s}),this._post.update(r),this.manual||this.didUpdate()}else{if(this._data=e,this.attachShadow({mode:"open"}),"u">typeof CSSStyleSheet&&this.shadowRoot.adoptedStyleSheets)t||(t=new CSSStyleSheet).replaceSync(b),this.shadowRoot.adoptedStyleSheets=[t];else{let e=document.createElement("style");e.textContent=b,this.shadowRoot.appendChild(e)}this._pre=new k(this,i,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new j(this,n,s),this.shadowRoot.appendChild(this._num.el),this._post=new k(this,r,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el)}this.created=!0}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();let e=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(e=>e.finished)).then(()=>{e.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=e}}w.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),continuous:!1,respectMotionPreference:!0,digits:void 0};class j{constructor(e,t,i,{className:s,...r}={}){this.flow=e,this._integer=new S(e,t,{justify:"right",part:"integer"}),this._fraction=new S(e,i,{justify:"left",part:"fraction"}),this._inner=n("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=n("span",{...r,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update(e){let{integer:t,fraction:i}=e;this._integer.update(t),this._fraction.update(i)}didUpdate(){let e=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();let t=this._prevLeft-e.left,i=this.el.offsetWidth,n=this._prevWidth-i;this.el.style.setProperty("--width",String(i)),this.el.animate({[d]:[`${t}px`,"0px"],[c]:[n,0]},{...this.flow.transformTiming,composite:"accumulate"})}}class _{constructor(e,t,{justify:i,className:s,...r},a){this.flow=e,this.children=new Map,this.onCharRemove=e=>()=>{this.children.delete(e)},this.justify=i;const o=t.map(e=>this.addChar(e).el);this.el=n("span",{...r,className:`section section--justify-${i} ${s??""}`},a?a(o):o)}addChar(e){let{startDigitsAtZero:t=!1,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="integer"===e.type||"fraction"===e.type?new T(this,e.type,t?0:e.value,e.pos,{...i,onRemove:this.onCharRemove(e.key)}):new N(this,e.type,e.value,{...i,onRemove:this.onCharRemove(e.key)});return this.children.set(e.key,n),n}unpop(e){e.el.classList.remove("section__exiting"),e.el.style.top="",e.el.style[this.justify]=""}pop(e){e.forEach(e=>{var t,i;e.el.style.top=`${e.el.offsetTop}px`,e.el.style[this.justify]=`${t=e.el,"left"===this.justify?t.offsetLeft:((null==(i=t.offsetParent instanceof HTMLElement?t.offsetParent:null)?void 0:i.offsetWidth)??0)-t.offsetWidth-t.offsetLeft}px`}),e.forEach(e=>{e.el.classList.add("section__exiting"),e.present=!1})}addNewAndUpdateExisting(e){let t=new Map,i=new Map,n="left"===this.justify,s=n?"prepend":"append";if(function(e,t){let{reverse:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.length;for(let s=i?n-1:0;i?s>=0:s<n;i?s--:s++)t(e[s],s)}(e,e=>{let n;this.children.has(e.key)?(n=this.children.get(e.key),i.set(e,n),this.unpop(n),n.present=!0):(n=this.addChar(e,{startDigitsAtZero:!0,animateIn:!0}),t.set(e,n)),this.el[s](n.el)},{reverse:n}),this.flow.computedAnimated){let e=this.el.getBoundingClientRect();t.forEach(t=>{t.willUpdate(e)})}t.forEach((e,t)=>{e.update(t.value)}),i.forEach((e,t)=>{e.update(t.value)})}willUpdate(){let e=this.el.getBoundingClientRect();this._prevOffset=e[this.justify],this.children.forEach(t=>t.willUpdate(e))}didUpdate(){let e=this.el.getBoundingClientRect();this.children.forEach(t=>t.didUpdate(e));let t=e[this.justify],i=this._prevOffset-t;i&&this.children.size&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}class S extends _{update(e){let t=new Map;this.children.forEach((i,n)=>{e.find(e=>e.key===n)||t.set(n,i),this.unpop(i)}),this.addNewAndUpdateExisting(e),t.forEach(e=>{e instanceof T&&e.update(0)}),this.pop(t)}}class k extends _{update(e){let t=new Map;this.children.forEach((i,n)=>{e.find(e=>e.key===n)||t.set(n,i)}),this.pop(t),this.addNewAndUpdateExisting(e)}}class E{constructor(e,t,{onRemove:i,animateIn:n=!1}={}){this.flow=e,this.el=t,this._present=!0,this._remove=()=>{var e;this.el.remove(),null==(e=this._onRemove)||e.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&n&&this.el.animate({[l]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=i}get present(){return this._present}set present(e){if(this._present!==e){if(this._present=e,!this.flow.computedAnimated){e||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",e?"0":"-.999"),this.el.animate({[l]:e?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),e?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}}class A extends E{constructor(e,t,i,n){super(e.flow,i,n),this.section=e,this.value=t,this.el=i}}class T extends A{constructor(e,t,i,s,r){var a,o;const l=((null==(o=null==(a=e.flow.digits)?void 0:a[s])?void 0:o.max)??9)+1,c=Array.from({length:l}).map((e,t)=>{let s=n("span",{className:`digit__num${t===i?" is-current":""}`},[document.createTextNode(String(t))]);return s.style.setProperty("--n",String(t)),s}),d=n("span",{part:`digit ${t}-digit`,className:"digit"},c);d.style.setProperty("--current",String(i)),d.style.setProperty("--length",String(l)),super(e,i,d,r),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=c,this._length=l}willUpdate(e){let t=this.el.getBoundingClientRect();this._prevValue=this.value;let i=t[this.section.justify]-e[this.section.justify],n=t.width/2;this._prevCenter="left"===this.section.justify?i+n:i-n}update(e){var t,i;null==(t=this._numbers[this.value])||t.classList.remove("is-current"),this.el.style.setProperty("--current",String(e)),null==(i=this._numbers[e])||i.classList.add("is-current"),this.value=e}didUpdate(e){let t=this.el.getBoundingClientRect(),i=t[this.section.justify]-e[this.section.justify],n=t.width/2,s="left"===this.section.justify?i+n:i-n,r=this._prevCenter-s;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});let a=this.diff;a&&(this.el.classList.add("is-spinning"),this.el.animate({[u]:[-a,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}get diff(){let e=this.flow.computedTrend,t=this.value-this._prevValue;return!t&&null!=this.flow.startingPos&&this.flow.startingPos>=this.pos?this._length*e:(e||(e=Math.sign(t)),e<0&&this.value>this._prevValue?this.value-this._length-this._prevValue:e>0&&this.value<this._prevValue?this._length-this._prevValue+this.value:t)}}class N extends A{constructor(e,t,i,s){const r=n("span",{className:"symbol__value",textContent:i});super(e,i,n("span",{part:`symbol ${t}`,className:"symbol"},[r]),s),this.type=t,this._children=new Map,this._onChildRemove=e=>()=>{this._children.delete(e)},this._children.set(i,new E(this.flow,r,{onRemove:this._onChildRemove(i)}))}willUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect();this._prevOffset=t[this.section.justify]-e[this.section.justify]}update(e){if(this.value!==e){let t=this._children.get(this.value);if(t.present=!1,t.el.classList.add("symbol__exiting"),this._children.has(e)){let t=this._children.get(e);t.present=!0,t.el.classList.remove("symbol__exiting")}else{let t=n("span",{className:"symbol__value",textContent:e});this.el.appendChild(t),this._children.set(e,new E(this.flow,t,{animateIn:!0,onRemove:this._onChildRemove(e)}))}}this.value=e}didUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect()[this.section.justify]-e[this.section.justify],i=this._prevOffset-t;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}var P=parseInt(i.version.match(/^(\d+)\./)?.[1])>=19,M=class extends w{attributeChangedCallback(e,t,i){this[e]=JSON.parse(i)}};M.observedAttributes=P?[]:["data","digits"],customElements.get("number-flow-react")!==M&&customElements.define("number-flow-react",M);var R={},O=P?e=>e:JSON.stringify;function I(e){let{transformTiming:t,spinTiming:i,opacityTiming:n,animated:s,respectMotionPreference:r,trend:a,continuous:o,...l}=e;return[{transformTiming:t,spinTiming:i,opacityTiming:n,animated:s,respectMotionPreference:r,trend:a,continuous:o},l]}var $=class extends i.Component{constructor(e){super(e),this.handleRef=this.handleRef.bind(this)}updateProperties(e){if(!this.el)return;this.el.manual=!this.props.isolate;let[t]=I(this.props);Object.entries(t).forEach(e=>{let[t,i]=e;this.el[t]=i??M.defaultProps[t]}),e?.onAnimationsStart&&this.el.removeEventListener("animationsstart",e.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),e?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",e.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),P&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(e){if(this.updateProperties(e),e.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(e,t,i){i?.()}handleRef(e){this.props.innerRef&&(this.props.innerRef.current=e),this.el=e}render(){let[e,{innerRef:t,className:n,data:s,willChange:r,isolate:a,group:o,digits:l,onAnimationsStart:c,onAnimationsFinish:d,...u}]=I(this.props);return i.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":r?"":void 0,class:n,"aria-label":s.valueAsString,...u,role:"img",dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:O(l),data:O(s)})}},L=i.forwardRef(function(e,t){let{value:n,locales:s,format:r,prefix:a,suffix:o,...l}=e;i.useImperativeHandle(t,()=>c.current,[]);let c=i.useRef(),d=i.useContext(F);d?.useRegister(c);let u=i.useMemo(()=>s?JSON.stringify(s):"",[s]),h=i.useMemo(()=>r?JSON.stringify(r):"",[r]),p=i.useMemo(()=>(function(e,t,i,n){let s=t.formatToParts(e);i&&s.unshift({type:"prefix",value:i}),n&&s.push({type:"suffix",value:n});let r=[],a=[],o=[],l=[],c={},d=e=>`${e}:${c[e]=(c[e]??-1)+1}`,u="",h=!1,p=!1;for(let e of s){u+=e.value;let t="minusSign"===e.type||"plusSign"===e.type?"sign":e.type;"integer"===t?(h=!0,a.push(...e.value.split("").map(e=>({type:t,value:parseInt(e)})))):"group"===t?a.push({type:t,value:e.value}):"decimal"===t?(p=!0,o.push({type:t,value:e.value,key:d(t)})):"fraction"===t?o.push(...e.value.split("").map(e=>({type:t,value:parseInt(e),key:d(t),pos:-1-c[t]}))):(h||p?l:r).push({type:t,value:e.value,key:d(t)})}let m=[];for(let e=a.length-1;e>=0;e--){let t=a[e];m.unshift("integer"===t.type?{...t,key:d(t.type),pos:c[t.type]}:{...t,key:d(t.type)})}return{pre:r,integer:m,fraction:o,post:l,valueAsString:u,value:"string"==typeof e?parseFloat(e):e}})(n,R[`${u}:${h}`]??=new Intl.NumberFormat(s,r),a,o),[n,u,h,a,o]);return i.createElement($,{...l,group:d,data:p,innerRef:c})}),F=i.createContext(void 0);e.s(["default",0,L],9257893)},4787360,e=>{"use strict";e.s(["PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES",0,{general:{username:"Username",name:"Display Name",email:"Email",emailRouting:"Email Routing",avatar:"Avatar",id:"User ID",resetTips:"Reset Tips",delete:"Delete Account",transfer:"Transfer"},billing:{plan:"Plan",paymentMethod:"Payment Method",remoteCaching:"Remote Caching",spendManagement:"Spend Management"}},"PERSONAL_ACCOUNT_SETTINGS_TITLES",0,{general:"General",authentication:"Authentication",signInWithVercel:"Sign in with Vercel",teams:"Teams",domains:"Domains",billing:"Billing",invoices:"Invoices",tokens:"Tokens",notifications:"My Notifications",deploymentProtection:"Deployment Protection",activity:"Activity"}])},6677203,e=>{"use strict";e.s(["isAwsMarketplaceCustomer",0,function(e){var t,i;if(!e?.billing)return!1;let{awsMarketplace:n}=e.billing;return!!n&&("boolean"==typeof n?n:(t=e,i="vercel",!!t?.billing?.awsMarketplace&&!!Array.isArray(t.billing.awsMarketplace)&&t.billing.awsMarketplace.includes(i)))}])},7418514,e=>{"use strict";var t=e.i(4205214),i=e.i(6264863),n=e.i(8660982),s=e.i(3306538),r=e.i(2504781),a=e.i(7137884),o=e.i(779588),l=e.i(8161149),c=e.i(5063443),d=e.i(8517043),u=e.i(1232681),h=e.i(8459493),p=e.i(6891161),m=e.i(5255926),f=e.i(3895030),y=e.i(455575),g=e.i(4004502),v=e.i(9070994),b=e.i(4244280),C=e.i(9171423),x=e.i(3169345),w=e.i(4543703),j=e.i(5664412),_=e.i(3256866),S=e.i(9373142),k=e.i(8761240),E=e.i(5756088),A=e.i(9847832),T=e.i(5802506),N=e.i(7917902),P=e.i(1717203),M=e.i(7557283);e.i(5335102);var R=e.i(6764151),O=e.i(8158658),I=e.i(6446781),$=e.i(6482217),L=e.i(4787360),F=e.i(1877305),U=e.i(6677203);function B(e){let{isActive:i,cardToRemove:n,requiresNewCard:s,onCancel:r,onCancelDone:a,onContinue:o}=e,l=n?.card;return s?(0,t.jsx)(O.default,{active:i,description:(0,t.jsxs)(t.Fragment,{children:["You cannot remove"," ",(0,t.jsxs)("span",{className:"text-heading-14",children:[(0,I.cardBrand)(l?.brand)," ****",l?.last4]})," ","without adding a new payment method first."]}),onAdded:o,onAnimationDone:a,onCancel:r,title:"Remove Payment Method"}):(0,t.jsxs)(p.Modal.Modal,{active:i,onAnimationDone:a,onClickOutside:r,children:[(0,t.jsxs)(p.Modal.Body,{children:[(0,t.jsx)(p.Modal.Title,{children:"Remove Payment Method"}),(0,t.jsxs)(p.Modal.Subtitle,{children:["You are about to remove"," ",(0,t.jsxs)("span",{className:"text-heading-14",children:[(0,I.cardBrand)(l?.brand)," ****",l?.last4]})," ","from your account."]}),(0,t.jsx)(p.Modal.Subtitle,{children:"Are you sure you want to continue?"})]}),(0,t.jsxs)(p.Modal.Actions,{children:[(0,t.jsx)(p.Modal.Action,{onClick:r,type:"secondary",children:"Cancel"}),(0,t.jsx)(p.Modal.Action,{onClick:o,children:"Continue"})]})]})}function V(e){let{brand:i}=e;switch(i){case"visa":return(0,t.jsx)(j.LogoVisa,{});case"mastercard":return(0,t.jsx)(_.LogoMastercard,{});case"amex":return(0,t.jsx)(w.LogoAmex,{});default:return(0,t.jsx)(S.CreditCard,{})}}e.s(["BillingCardFieldset",0,function(){let{team:e,mutate:p}=(0,N.useAccount)(),{can:m}=(0,P.default)(),w=m(M.Action.Update,M.Resource.PaymentMethod),j=m(M.Action.Read,M.Resource.PaymentMethod),_=(0,A.useIsMobile)(),O=(0,$.useStripeSources)({enabled:!0}),D=O.data?.defaultSource,Y=(0,n.useMemo)(()=>(O.data?.sources||[]).sort((e,t)=>e.id.localeCompare(t.id)),[O]),G=Y.length>0,[W,q]=(0,n.useState)(!1),[Z,H]=(0,n.useState)(!1),[z,J]=(0,n.useState)({active:!1,card:null,requiresNewCard:!1}),[K,X]=(0,n.useState)(null),Q=(0,U.isAwsMarketplaceCustomer)(e),ee=(0,y.useToasts)();async function et(e){let t=e?.id?`${b.API_BILLING}/validate-payment-method-removal?teamId=${e.id}`:`${b.API_BILLING}/validate-payment-method-removal`,i=await (0,C.fetchApi)(t,{method:"GET",throwOnHTTPError:!0});return i&&"string"!=typeof i?i:{result:!1,reasons:[]}}let ei=(0,n.useMemo)(()=>async(e,t)=>{let i=1===e.length&&t?.billing?.plan!=="enterprise";if((t?.id&&t.billing?.plan==="hobby"||!t)&&1===e.length){let{reasons:e}=await et(t);if(e.length>0)switch(e[0]){case"not-hobby-plan":ee.error("You cannot remove your last payment method, because you are not on a hobby plan.");break;case"has-open-invoice":ee.error("You cannot remove your last payment method, because you have an open invoice.");break;case"has-domains":ee.error("You cannot remove your last payment method, because you have domains.");break;case"has-marketplace-integrations":ee.error("You cannot remove your last payment method, because you have billable marketplace integrations.");break;case"has-v0-premium-sub":ee.error("You cannot remove your last payment method, because you have a v0 subscription.");break;case"has-v0-team-seats":ee.error("You cannot remove your last payment method, because you have v0 team seats.");break;case"has-draft-invoice":ee.error("You cannot remove your last payment method, because you have a draft invoice.")}i=e.length>0}return i},[ee]),en=async t=>{J({active:!0,card:t,requiresNewCard:await ei(Y,e)})},es=async()=>{await Promise.all([p(),O.mutate()]),H(!1),z.card&&(er(z.card.id,!0),J({...z,active:!1}))},er=async(t,i)=>{let n=e?`?teamId=${encodeURIComponent(e.id)}`:"";q(!0);try{let e=await (0,v.default)(`${b.API_STRIPE_PAYMENT_METHODS}${n}`,{method:i?"DELETE":"POST",body:JSON.stringify({paymentMethod:t,makeDefault:!i||void 0})});if(e.error)return X(e.error.message);await O.mutate()}finally{q(!1)}};return(0,t.jsxs)("div",{id:"payment-method",className:"jsx-efc69a07e34f3d23",children:[(0,t.jsxs)(d.Fieldset,{disabled:!w,children:[(0,t.jsxs)(a.FieldsetContent,{children:[(0,t.jsx)(F.FieldsetTitle,{id:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod,children:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod}),(0,t.jsxs)(f.FieldsetSubtitle,{children:[Q?"A card will be used for purchases of items outside of your AWS Marketplace contract. ":null,"Payments for domains, add-ons, and other usage are made using the default card."]}),(0,t.jsx)("div",{className:"jsx-efc69a07e34f3d23 h-[159px]",children:G||!j?(0,t.jsx)(x.Table,{children:(0,t.jsx)(x.Table.Body,{children:j?Y.map(e=>{let{card:i}=e;if(!i)return null;let n=e.id===D;return(0,t.jsxs)(x.Table.Row,{className:"border-t",children:[(0,t.jsx)(x.Table.Cell,{className:"text-gray-1000",children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)(V,{brand:i.brand}),_?`••••
                              ${i.last4}`:`${(0,I.cardBrand)(i.brand)} ${i.funding} ••••
                              ${i.last4}`,n?(0,t.jsx)(s.Badge,{icon:(0,t.jsx)(k.CheckCircleFill,{}),variant:w?"blue-subtle":"gray-subtle",children:"Default"}):null]})}),_?null:(0,t.jsxs)(x.Table.Cell,{className:"text-right text-gray-1000",children:["Valid until ",i.exp_month,"/",i.exp_year]}),(0,t.jsx)(x.Table.Cell,{className:"w-[3%]",children:(0,t.jsxs)(o.DotsMenu,{children:[n?null:(0,t.jsx)(h.MenuItem,{onClick:()=>{er(e.id).catch(T.captureError)},children:"Make Default"}),(0,t.jsx)(h.MenuItem,{onClick:()=>{en(e)},type:"error",children:"Remove"})]})})]},e.id)}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Table.Row,{className:"border-t",children:[(0,t.jsx)(x.Table.Cell,{children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)(S.CreditCard,{}),"••••"]})}),(0,t.jsx)(x.Table.Cell,{className:"text-right",children:"••/••••"}),(0,t.jsx)(x.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)(E.LockClosed,{})})]}),(0,t.jsxs)(x.Table.Row,{className:"border-t",children:[(0,t.jsx)(x.Table.Cell,{children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)(S.CreditCard,{}),"••••"]})}),(0,t.jsx)(x.Table.Cell,{className:"text-right",children:"••/••••"}),(0,t.jsx)(x.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)(E.LockClosed,{})})]})]})})}):(0,t.jsx)(l.EmptyState.Root,{description:"No payment methods added",icon:(0,t.jsx)(l.EmptyState.Icon,{icon:(0,t.jsx)(S.CreditCard,{size:32})}),paddingY:26})})]}),(0,t.jsxs)(u.FieldsetFooter,{disabled:!1,children:[(0,t.jsx)(u.FieldsetFooter.Status,{children:K?(0,t.jsxs)(c.ErrorText,{children:[K," – Please try again later."]}):w?"At most, three credit cards can be added.":"You need additional permissions to manage your team's payment method."}),w?(0,t.jsx)(u.FieldsetFooter.Actions,{children:(0,t.jsx)(r.Button,{className:"add-new-card","data-testid":(0,g.tid)("account-settings","billing","add-new-card"),disabled:Y.length>=3,loading:W,onClick:()=>{W||H(!0)},size:"small",children:"Add Card"})}):null]})]}),(0,t.jsx)(R.CreditCardModal,{isActive:Z,onAbort:()=>{H(!1)},onContinue:()=>void es(),paying:!1}),(0,t.jsx)(B,{cardToRemove:z.card,isActive:z.active,onCancel:()=>J({...z,active:!1}),onCancelDone:()=>J({...z,card:null}),onContinue:()=>{z.requiresNewCard?es():(er(z.card.id,!0),J({...z,active:!1}))},requiresNewCard:z.requiresNewCard}),(0,t.jsx)(i.default,{id:"efc69a07e34f3d23",children:".table th{text-transform:uppercase}@media (min-width:768px){.table .shown-on-mobile{display:none}}@media (max-width:768px){.table .column-brand,.table .column-type,.table .column-exp,.table .hidden-on-mobile{display:none}.table .shown-on-mobile{white-space:nowrap}}"})]})},"BillingCardSkeleton",0,function(e){let{canUpdatePaymentMethod:i}=e;return(0,t.jsx)("div",{id:"payment-method",children:(0,t.jsxs)(d.Fieldset,{disabled:!i,children:[(0,t.jsxs)(a.FieldsetContent,{children:[(0,t.jsx)(F.FieldsetTitle,{id:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod,children:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod}),(0,t.jsx)(f.FieldsetSubtitle,{children:"Payments for domains, add-ons, and other usage are made using the default card."}),(0,t.jsx)("div",{className:"h-[159px]",children:(0,t.jsx)(x.Table,{children:(0,t.jsx)(x.Table.Body,{children:[,,].fill(null).map((e,i)=>(0,t.jsxs)(x.Table.Row,{className:"border-t border-t-gray-alpha-400",children:[(0,t.jsx)(x.Table.Cell,{children:(0,t.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(m.Skeleton,{height:16,width:16}),(0,t.jsx)(m.Skeleton,{height:16,width:156})]})}),(0,t.jsx)(x.Table.Cell,{className:"flex justify-end text-right",children:(0,t.jsx)("span",{className:"flex h-8 items-center",children:(0,t.jsx)(m.Skeleton,{height:16,width:128})})}),(0,t.jsx)(x.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)("span",{className:"flex h-8 items-center",children:(0,t.jsx)(m.Skeleton,{height:16,width:16})})})]},i))})})})]}),(0,t.jsx)(u.FieldsetFooter,{disabled:!1,children:void 0===i?(0,t.jsx)(m.Skeleton,{height:22,width:480}):i?"At most, three credit cards can be added.":"You need additional permissions to manage your team's payment method."})]})})},"CardIcon",0,V])},95767,e=>{"use strict";var t=e.i(4205214),i=e.i(8674454),n=e.i(6694387),s=e.i(4991687),r=e.i(8459493),a=e.i(5255926),o=e.i(8876434),l=e.i(5756088),c=e.i(6143247),d=e.i(2831393),u=e.i(197417),h=e.i(1717203),p=e.i(7557283),m=e.i(5338940),f=e.i(231107),y=e.i(6468432);e.s(["OptionsMenu",0,function(){let{children:e,className:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,f.useSourceFromParams)(),{can:b}=(0,h.default)(),C=b(p.Action.Update,p.Resource.PaymentMethod),{balance:x}=(0,d.useAiCreditsBalance)(),{openModal:w}=(0,u.useAddCreditsModalContext)(),{team:j}=(0,m.useTeam)();return(0,y.isFlexibleCommitment)(j)&&!e?null:void 0===x?(0,t.jsx)(a.Skeleton,{children:(0,t.jsx)(n.MenuButton,{"aria-label":"More Actions",className:(0,c.cn)("shrink-0",g),shape:"square",svgOnly:!0,type:"secondary",disabled:!0,children:(0,t.jsx)(o.MoreHorizontal,{})})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(s.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(n.MenuButton,{"aria-label":"More Actions",className:(0,c.cn)("shrink-0",g),shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(o.MoreHorizontal,{})}),(0,t.jsxs)(i.Menu,{width:230,children:[!(0,y.isFlexibleCommitment)(j)&&(0,t.jsx)(r.MenuItem,{disabled:!C,onClick:()=>w(v?`options-menu.${v}`:"options-menu"),suffix:C?void 0:(0,t.jsx)(l.LockClosed,{}),children:"Buy Credits"}),e]})]})})}])},6808919,e=>{"use strict";var t=e.i(4205214),i=e.i(2504781),n=e.i(8522580),s=e.i(1912982),r=e.i(2471070),a=e.i(2936765),o=e.i(7432286),l=e.i(850302),c=e.i(5338940),d=e.i(6468432);e.s(["IncreaseMonthlySpendLimitModal",0,function(){let{team:e}=(0,c.useTeam)(),{topups:u}=(0,r.useAiGatewayCreditTopups)(),{total:h,loading:p}=(0,s.usePurchaseIntentAggregate)({start:(0,o.startOfMonth)(new Date),end:(0,a.endOfMonth)(new Date)}),m=u?.[0]?.maximumMonthlySpend,f=null!=h&&null!=m&&Number(m)<=Number(h),{mutate:y}=(0,l.default)("modal:ai-credits");return p||!f||(0,d.isFlexibleCommitment)(e)?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.Note,{fill:!0,action:(0,t.jsx)(i.Button,{size:"small",onClick:()=>{y("auto_recharge")},children:"Update Monthly Spend Limit"}),children:"You have exceeded the monthly spend limit you've set for auto recharges. Auto recharges will be paused until you increase your monthly spend limit."})})}])}]);

//# debugId=3668ba49-587f-9951-33cb-db442c40aefa
//# sourceMappingURL=e3968cc52031a90e.js.map