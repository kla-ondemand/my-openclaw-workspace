;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3f227051-3786-8446-f612-2d017459b3ff")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},8587921,7873387,e=>{"use strict";var t=e.i(8660982),i=e.i(850302),a=e.i(7222834),s=e.i(8042625),r=e.i(277234),n=e.i(4244280),l=e.i(9668517),d=e.i(5338940),o=e.i(1717203),u=e.i(7557283);let c=e=>(i,a,s)=>{let r=(0,t.useRef)(void 0),n=e(i,a,s);(0,t.useEffect)(()=>{void 0!==n.data&&(r.current=n.data)},[n.data]);let l=(0,t.useCallback)(()=>{r.current=void 0},[]);return{...n,data:void 0===n.data?r.current:n.data,isLagging:void 0===n.data&&void 0!==r.current,resetLaggy:l}};e.s(["default",0,c],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",0,function(){let{sort:e="date_desc",limit:t=20,filterByUserIds:a,until:l,role:c,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:f,team:M}=(0,d.useTeam)(),{isLoading:b,can:v}=(0,o.default)(),R=!b&&v(u.Action.List,u.Resource.TeamFellowMembership);return(0,i.default)(()=>f&&M&&R?`${n.API_TEAMS_MEMBERS_V3}/${M.id}/members${(0,s.encode)({sort:e,until:l,limit:t,role:c,filterByUserIds:a,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),h)},"useMembersForTeam",0,function(e){let{limit:t=20,until:a,role:l,sort:d="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.default)(()=>e?`${n.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,s.encode)({until:a,limit:t,role:l,sort:d})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),o)},"useMembersInfinite",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:g,role:h,eligibleMembersForProjectId:f,sort:M="date_desc",filterByUserIds:b,includeEntitlements:v,mfaStateFilter:R,includePermissionRequests:p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=arguments.length>2&&void 0!==arguments[2]&&arguments[2],T=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:x,team:L}=(0,d.useTeam)(),{isLoading:A,can:P}=(0,o.default)(),S=!A&&P(u.Action.List,u.Resource.TeamFellowMembership),_=(0,l.useTeamSlug)(),C=g||20,w=(0,a.default)((e,t)=>{if(!x||!L||!S)return null;if(0===e)return`${n.API_TEAMS_MEMBERS_V3}/${L.id}/members${(0,s.encode)({sort:M,limit:C,search:m,role:h,eligibleMembersForProjectId:f,filterByUserIds:b,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:p})}`;let i=t?.pagination.nextPageCursor;return i?`${n.API_TEAMS_MEMBERS_V3}/${L.id}/members${(0,s.encode)({sort:M,limit:C,nextPageCursor:i,search:m,role:h,eligibleMembersForProjectId:f,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:p})}`:null},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:E?[c]:[]});(0,t.useEffect)(()=>{E&&w.resetLaggy()},[_,E]);let y=(0,t.useMemo)(()=>w.data?.flatMap(e=>e.members.slice(0,C))||[],[w.data,C]),I=(0,t.useMemo)(()=>w.data?.flatMap(e=>e.permissionRequests||[])||[],[w.data]),j=!!w.data,$=j&&0===y.length,q=!!(j&&w.data&&w.size>w.data.length),B=!!(j&&w.data&&!w.data[w.data.length-1]?.pagination?.nextPageCursor);return(0,i.default)(()=>{if(!T||!w.data||B||!x||!L)return null;let e=w.data[w.data.length-1].pagination.nextPageCursor;return`${n.API_TEAMS_MEMBERS_V3}/${L.id}/members${(0,s.encode)({sort:M,limit:C,nextPageCursor:e,search:m,role:h,eligibleMembersForProjectId:f,includeEntitlements:v,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:p})}`},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0})),[w,{members:y,permissionRequests:I.filter(e=>null!=e),initialDataLoaded:j,isEmpty:$,loadMore:()=>w.setSize(w.size+1),isLoadingMore:q,isReachingEnd:B,isLagging:w.isLagging}]},"useSuggestedMembersInfinite",0,function(){let{limit:e=25,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:n,isLoading:c}=(0,o.default)(),m=!c&&n(u.Action.Create,u.Resource.TeamFellowMembership),{isReady:g,team:h}=(0,d.useTeam)(),f=(0,l.useTeamSlug)(),M=(0,a.default)((t,i)=>{if(!g||!h||!m)return null;if(!t)return`/api/teams/${f}/members/suggested${(0,s.encode)({limit:e})}`;let a=i?.members,r=a?.length===e?a[a.length-1].email:null;return r?`/api/teams/${f}/members/suggested${(0,s.encode)({limit:e,from:r})}`:null},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),i),b=(0,t.useMemo)(()=>M.data?.flatMap(t=>t.members.slice(0,e))||[],[M.data,e]),v=!!M.data,R=v&&0===b.length,p=!!(v&&M.data&&M.size>M.data.length),E=!!(v&&M.data&&M.data[M.data.length-1]?.members.length<e);return[M,{members:b,initialDataLoaded:v,isEmpty:R,loadMore:()=>M.setSize(M.size+1),isLoadingMore:p,isReachingEnd:E}]}],8587921)},4723202,e=>{"use strict";var t=e.i(4205214),i=e.i(8660982),a=e.i(2504781),s=e.i(5255926),r=e.i(455575),n=e.i(5468328),l=e.i(277234),d=e.i(5338940),o=e.i(8587921),u=e.i(5140444),c=e.i(8248823),m=e.i(57106);async function g(e,t){await (0,l.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",0,function(e){let{teamRole:l,variant:h="card"}=e,{team:f,isLoading:M}=(0,d.useTeam)(),{hasRequestedRole:b,mutate:v,isLoading:R}=function(e){let{user:t,isLoading:i}=(0,u.useUser)(),{data:a,mutate:s,isLoading:r}=(0,o.default)({includePermissionRequests:!0}),n=a?.permissionRequests;return{hasRequestedRole:n?.some(i=>i.uid===t?.uid&&i.requestedTeamRole.includes(e))??!1,mutate:s,isLoading:i||r}}(l),[p,E]=(0,i.useState)(!1),[T,x]=(0,i.useState)(!1);if(f?.membership?.role!=="VIEWER_FOR_PLUS")return null;let L=b||T;return(0,t.jsx)(s.Skeleton,{show:R||M,children:(0,t.jsx)(n.Tooltip,{disableTriggers:!L,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${f?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(a.Button,{disabled:L,loading:p,className:"card"===h?"text-label-14 font-medium":void 0,onClick:async()=>{if(f?.id){E(!0);try{await g(f.id,l),v(),x(!0),r.toasts.success("Request for the Member role has been sent")}catch(e){r.toasts.error((0,c.errorToString)(e,"Failed to send request"))}finally{E(!1)}}},size:"card"===h?"small":void 0,type:"card"===h?"tertiary":void 0,children:L?"Access Requested":"Request Access"})})})}])},8556491,e=>{"use strict";var t=e.i(4205214),i=e.i(4723202),a=e.i(57106),s=e.i(1235157),r=e.i(6352514),n=e.i(1853611);e.s(["AdditionalPermissionsRequiredModal",0,function(e){let{role:l,team:d,actionLabel:o,dataTestId:u}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 @md-page:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":u,children:(0,t.jsxs)("div",{className:"shadow-lg @md-page:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:l?(0,s.getRoleName)(l):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:d?.name})," team, you do not have permission to ",o,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(a.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{n.analytics.track(r.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===l?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(i.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}])},1068837,e=>{"use strict";var t=e.i(4205214),i=e.i(1717203),a=e.i(8556491);e.s(["AdditionalPermissionsRequiredModalClient",0,function(e){let{actionLabel:s,permissionChecks:r}=e,{can:n,isLoading:l,accessInfo:d}=(0,i.default)(),o=r.every(e=>{let[t,i]=e;return n(t,i)});return l||o?null:(0,t.jsx)(a.AdditionalPermissionsRequiredModal,{role:d?.role,team:d?.team??void 0,actionLabel:s})}])},4553963,e=>{"use strict";var t=e.i(4205214),i=e.i(2504781),a=e.i(6864621);e.s(["CreateDatabaseModalTrigger",0,function(e){let{setShowCreateDatabaseModal:s}=(0,a.useCreateDatabaseModal)();return(0,t.jsx)(i.Button,{onClick:()=>s(!0),...e})}])}]);

//# debugId=3f227051-3786-8446-f612-2d017459b3ff
//# sourceMappingURL=5ad861a8d3b99b07.js.map