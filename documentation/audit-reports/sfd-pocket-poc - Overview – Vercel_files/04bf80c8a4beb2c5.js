;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="95cf9c18-8bfa-7ea0-c2fd-c6a32b4d6870")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8366444,e=>{"use strict";var t=e.i(4496450);let n={enabled:!0,disabledReason:void 0},s=e=>({enabled:!1,disabledReason:e});e.s(["useOnDemandConcurrentBuilds",0,function(e,a){if(!e||!e.billing)return s("other");if("enterprise"===e.billing.plan)return(0,t.isLegacyPlanIteration)(e.billing.planIteration)?s("enterprise-non-unbundled"):a?n:s("no-permission");if("pro"===e.billing.plan)return"active"===e.billing.status?a?n:s("no-permission"):s("pro-non-active");return s("hobby-plan")}])},2425341,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 1.25V2.03971C5.87928 2.18571 4.62678 2.72736 3.6089 3.54824L3.03033 2.96967L2.5 2.43934L1.43934 3.5L1.96967 4.03033L2.54824 4.6089C1.57979 5.80976 1 7.33717 1 9C1 12.866 4.13401 16 8 16C11.866 16 15 12.866 15 9C15 7.33717 14.4202 5.80976 13.4518 4.6089L14.0303 4.03033L14.5607 3.5L13.5 2.43934L12.9697 2.96967L12.3911 3.54824C11.3732 2.72736 10.1207 2.18571 8.75 2.03971V1.25H9.25H10V-0.25H9.25H8.75H7.25H6.75H6V1.25H6.75H7.25ZM2.5 9C2.5 5.96243 4.96243 3.5 8 3.5C11.0376 3.5 13.5 5.96243 13.5 9C13.5 12.0376 11.0376 14.5 8 14.5C4.96243 14.5 2.5 12.0376 2.5 9ZM8.75 6.75V6H7.25V6.75V9V9.75H8.75V9V6.75Z" fill="currentColor"/>');e.s(["Stopwatch",0,t])},380513,e=>{"use strict";var t=e.i(850302),n=e.i(8042625),s=e.i(5338940),a=e.i(277234);function i(){let{team:e,isReady:i}=(0,s.useTeam)(),r=i?`/api/feature-flags${e?(0,n.encode)({teamSlug:e.slug}):""}`:null,{data:l,isLoading:o,error:d}=(0,t.default)(r,e=>(0,a.fetchAPI)(e));return{data:l,error:d,isLoading:o}}e.s(["useFeatureFlag",0,function(e){let{data:t,error:n,isLoading:s}=i();return{data:t?.[e],error:n,isLoading:s}},"useFeatureFlags",0,i])},4411675,e=>{"use strict";let t=new Map;window.addEventListener("storage",e=>{e.key&&(null===e.newValue?t.delete(e.key):t.set(e.key,e.newValue))}),e.s(["LSCache",0,class{key;defaultValue;constructor(e,t){this.key=e,this.defaultValue=t,this.init()}init(){if(!t.has(this.key))try{t.set(this.key,window.localStorage?.getItem(this.key))}catch(e){}}reset(){this.set(this.defaultValue)}get(){let e=t.get(this.key);if(!e)return this.defaultValue;try{return JSON.parse(e)}catch(e){return this.defaultValue}}set(e){try{let n=JSON.stringify(e);window.localStorage?.setItem(this.key,n),t.set(this.key,n)}catch(e){}}remove(){try{window.localStorage?.removeItem(this.key),t.delete(this.key)}catch(e){}}}])},8783592,4628083,e=>{"use strict";var t=e.i(850302),n=e.i(8042625),s=e.i(277234),a=e.i(4244280),i=e.i(5338940),r=e.i(4597921);e.s(["useVadeTasksByDeployment",0,function(e,l,o){let{team:d,isReady:u}=(0,i.useTeam)(),c=(0,r.useServerFlag)("project-agent-build-fix",!1),m=d?.vadeReview?.enabled??!1,p=!!e&&!!d?.id&&u&&l&&m&&c,h=p?`${a.API_VADE_TASK_BY_DEPLOYMENT}/${e}${(0,n.encode)({teamId:d?.id})}`:null;return{...(0,t.default)(h,async e=>(await (0,s.fetchAPI)(e,{throwOnHTTPError:!0})).task,{...o,refreshInterval:e=>1e4*!e}),isEnabled:p}}],8783592),e.s(["getVercelAgentBuildFixCodeSuggestion",0,function(e){return e?e.subtasks.flatMap(e=>e.codeSuggestions).find(e=>"build-fix"===e.type)??null:null}],4628083)},9041876,e=>{"use strict";function t(e){let t=e?.resourceConfig?.buildMachine?.default;return"enhanced"===t||"turbo"===t||"standard"===t?t:e?.resourceConfig?.buildEntitlements?.enhancedBuilds?"enhanced":e?.billing?.plan==="pro"?"turbo":"standard"}function n(e,n){let s=e?.resourceConfig?.buildMachineType;return"turbo"===s||"enhanced"===s?s:n?.billing?.plan!=="pro"||s?t(n):"standard"}e.s(["getDefaultBuildMachine",0,t,"getProjectBuildMachine",0,n,"getTeamConcurrentBuildsTier",0,function(e){if(!e?.billing?.invoiceItems?.concurrentBuilds)return"1";let t=e.billing.invoiceItems.concurrentBuilds.quantity||1;return t>=10?"3":t>=5?"2":"1"},"getTierBasedPricing",0,function(e,t,n){let s={1:"0.030",2:"0.026",3:"0.022"};if(!e?.onDemandConcurrencyMinutes)return"enhanced"===n?s[t]||"0.030":void 0;if(!e.onDemandConcurrencyMinutes.matrix)return e.onDemandConcurrencyMinutes.defaultUnitAmount||("enhanced"===n?s[t]||"0.030":void 0);let a=e.onDemandConcurrencyMinutes.matrix.find(e=>{let s=e.dimensionValues;return s&&s.length>=2&&s[0]===t&&s[1]===n});return a?.unitAmount||e.onDemandConcurrencyMinutes.defaultUnitAmount||("enhanced"===n?s[t]||"0.030":void 0)},"isUpgradedBuildMachine",0,function(e,t){return["enhanced","turbo"].includes(n(e,t))}])},5023172,e=>{"use strict";var t=e.i(4205214),n=e.i(8660982),s=e.i(6891161),a=e.i(455575),i=e.i(277234),r=e.i(4244280),l=e.i(57106);e.s(["StartBuildingNowModal",0,function(e){let[o,d]=(0,n.useState)(!1),u=(0,a.useToasts)(),c=(0,n.useCallback)(async()=>{if(!e.deploymentId||!e.teamId)return;d(!0);let t=new URLSearchParams;t.append("teamId",e.teamId);let n=`${(0,r.API_DEPLOYMENTS)("v13")}/${e.deploymentId}/skip-queue?${t.toString()}`;200===(await (0,i.fetchAPI)(n,{method:"POST",body:void 0,throwOnHTTPError:!1,returnStatus:!0})).status?(u.success("Deployment will start building now."),e.onSuccess?.()):u.error("Something went wrong"),d(!1),e.onClose()},[e,u]);return(0,t.jsxs)(s.Modal.Modal,{active:e.active,onClickOutside:e.onClose,width:"500px",children:[(0,t.jsxs)(s.Modal.Body,{children:[(0,t.jsx)(s.Modal.Header,{children:(0,t.jsx)(s.Modal.Title,{children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:"Start Building Now"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["This will bypass the regular queue and start your build immediately. On-demand builds are billed in 1 minute increments."," ",(0,t.jsx)(l.Link,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",variant:"highlight",children:"Learn more."})]}),e.teamId&&e.projectName?(0,t.jsxs)("p",{className:"text-copy-14",children:["If you frequently need faster builds for this project, consider enabling"," ",(0,t.jsx)(l.Link,{as:`/${e.teamId}/${encodeURIComponent(e.projectName)}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",variant:"highlight",children:"On-Demand Concurrent Builds"})," ","at the project level."]}):null,(0,t.jsx)("p",{className:"text-copy-14",children:'By clicking "Confirm" you agree to be charged for on-demand concurrency.'})]})]}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)(s.Modal.Action,{loading:!1,onClick:e.onClose,type:"secondary",children:"Close"}),(0,t.jsx)(s.Modal.Action,{disabled:o,loading:o,onClick:c,children:"Confirm"})]})]})}])},3577296,(e,t,n)=>{"use strict";let s;Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class a extends Error{constructor(e,t){super(e),this.cause=t}}function i(){return o(!1)||function(){let e=u(/^([^<]+)/);if(e){let t={type:"Text",content:e[1]};return{excluded:!1===s.options.filter(t),node:t}}}()||d()||function(){if(s.xml.startsWith("<![CDATA[")){let e=s.xml.indexOf("]]>");if(e>-1){let t=e+3,n={type:"CDATA",content:s.xml.substring(0,t)};return s.xml=s.xml.slice(t),{excluded:!1===s.options.filter(n),node:n}}}}()||l()}function r(){return u(/\s*/),o(!0)||d()||function(){let e=u(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||u(/^<!DOCTYPE\s+\S+\s*>/);if(e){let t={type:"DocumentType",content:e[0]};return{excluded:!1===s.options.filter(t),node:t}}}()||l()}function l(){let e=u(/^<\?([\w-:.]+)\s*/);if(!e)return;let t={name:e[1],type:"ProcessingInstruction",content:""},n=s.xml.indexOf("?>");if(n>-1)t.content=s.xml.substring(0,n).trim(),s.xml=s.xml.slice(n);else throw new a("Failed to parse XML","ProcessingInstruction closing tag not found");return u(/\?>/),{excluded:!1===s.options.filter(t),node:t}}function o(e){let t=u(/^<([^?!</>\s]+)\s*/);if(!t)return;let n={type:"Element",name:t[1],attributes:{},children:[]},r=!e&&!1===s.options.filter(n);for(;!(0===s.xml.length||c(">")||c("?>")||c("/>"));){let e=function(){let e=u(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(e)return{name:e[1].trim(),value:e[2].trim().replace(/^['"]|['"]$/g,"")}}();if(!e)return;n.attributes[e.name]=e.value}if(u(/^\s*\/>/))return n.children=null,{excluded:r,node:n};u(/\??>/);let l=i();for(;l;)l.excluded||n.children.push(l.node),l=i();if(s.options.strictMode){let e=`</${n.name}>`;if(s.xml.startsWith(e))s.xml=s.xml.slice(e.length);else throw new a("Failed to parse XML",`Closing tag not matching "${e}"`)}else u(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:r,node:n}}function d(){let e=u(/^<!--[\s\S]*?-->/);if(e){let t={type:"Comment",content:e[0]};return{excluded:!1===s.options.filter(t),node:t}}}function u(e){let t=s.xml.match(e);if(t)return s.xml=s.xml.slice(t[0].length),t}function c(e){return 0===s.xml.indexOf(e)}function m(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.trim();let i=n.filter||(()=>!0);s={xml:e,options:Object.assign(Object.assign({},n),{filter:i,strictMode:!0===n.strictMode})};let o=l(),d=[],u=r();for(;u;){if("Element"===u.node.type){if(t)throw Error("Found multiple root nodes");t=u.node}u.excluded||d.push(u.node),u=r()}if(!t)throw new a("Failed to parse XML","Root Element not found");if(0!==s.xml.length)throw new a("Failed to parse XML","Not Well-Formed XML");return{declaration:o?o.node:null,root:t,children:d}}n.ParsingError=a,t.exports=m,n.default=m},15932,(e,t,n)=>{"use strict";var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let a=s(e.r(3577296));function i(e){let t;if(e.options.indentation||e.options.lineSeparator)for(e.content+=e.options.lineSeparator,t=0;t<e.level;t++)e.content+=e.options.indentation}function r(e,t){e.content+=t}function l(e,t){t.content.length>0&&i(t),r(t,"<?"+e.name),r(t," "+e.content.trim()),r(t,"?>")}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=!0===t.collapseContent,t.lineSeparator="lineSeparator"in t?t.lineSeparator:"\r\n",t.whiteSpaceAtEndOfSelfclosingTag=!0===t.whiteSpaceAtEndOfSelfclosingTag,t.throwOnFailure=!1!==t.throwOnFailure;try{let n=(0,a.default)(e,{filter:t.filter,strictMode:t.strictMode}),s={content:"",level:0,options:t,path:[]};if(n.declaration&&l(n.declaration,s),n.children.forEach(function(e){!function e(t,n,s){if("Element"===t.type)!function(t,n,s){var a,l,o,d;if(n.path.push(t.name),!s&&n.content.length>0&&i(n),r(n,"<"+t.name),a=n,Object.keys(l=t.attributes).forEach(function(e){let t=l[e].replace(/"/g,"&quot;");r(a," "+e+'="'+t+'"')}),null===t.children||n.options.forceSelfClosingEmptyTag&&0===t.children.length){let e=n.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";r(n,e)}else if(0===t.children.length)r(n,"></"+t.name+">");else{let a=t.children;r(n,">"),n.level++;let l="preserve"===t.attributes["xml:space"]||s,u=!1;if(!l&&n.options.ignoredPaths){let e,t;o=n.path,d=n.options.ignoredPaths,e="/"+o.join("/"),t=o[o.length-1],l=u=d.includes(t)||d.includes(e)}if(!l&&n.options.collapseContent){let e=!1,t=!1,n=!1;a.forEach(function(i,r){"Text"===i.type?(i.content.includes("\n")?(t=!0,i.content=i.content.trim()):0!==r&&r!==a.length-1||s||0!==i.content.trim().length||(i.content=""),(i.content.trim().length>0||1===a.length)&&(e=!0)):"CDATA"===i.type?e=!0:n=!0}),!e||n&&t||(l=!0)}a.forEach(function(t){e(t,n,s||l)}),n.level--,s||l||i(n),u&&function(e){let t;for(t=0,e.content=e.content.replace(/ +$/,"");t<e.level;t++)e.content+=e.options.indentation}(n),r(n,"</"+t.name+">")}n.path.pop()}(t,n,s);else if("ProcessingInstruction"===t.type)l(t,n);else if("string"==typeof t.content){var a=t.content,o=n,d=s;if(!d){let e=a.trim();o.options.lineSeparator?a=e:0===e.length&&(a=e)}a.length>0&&(!d&&o.content.length>0&&i(o),r(o,a))}else throw Error("Unknown node type: "+t.type)}(e,s,!1)}),!t.lineSeparator)return s.content;return s.content.replace(/\r\n/g,"\n").replace(/\n/g,t.lineSeparator)}catch(n){if(t.throwOnFailure)throw n;return e}}o.minify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e,Object.assign(Object.assign({},t),{indentation:"",lineSeparator:""}))},t.exports=o,n.default=o},6656921,1895466,e=>{"use strict";var t=e.i(4205214),n=e.i(9689002),s=e.i(5089756),a=e.i(15932);let i=["GET","PUT","POST","PATCH","DELETE"],r=["Request","Response"],l=["Requests","Settings"],o=["Body","Headers","Params","Snippets"],d=["Body","Headers"],u=["application/json","text/plain"],c=e=>{if(!e)return"";try{return new URL(e).pathname}catch{return e}},m=e=>e?e.endsWith("/")?e.slice(0,-1):e:"",p=e=>e?e.startsWith("/")?e:`/${e}`:"/",h={sendRequest:{label:"Send Request",keys:[["Meta","Enter"]],predicate:e=>(0,s.isApple)()?e.metaKey&&"Enter"===e.key:e.ctrlKey&&"Enter"===e.key},newRequest:{label:"New Request",keys:[["Meta","K"],"N"],predicate:e=>e.metaKey&&"N"===e.key},toggleSidebar:{label:"Toggle Sidebar",keys:[["Meta","K"],"B"],predicate:e=>e.metaKey&&"B"===e.key},focusUrl:{label:"Focus Url",keys:[["Meta","K"],"L"],predicate:e=>e.metaKey&&"L"===e.key}},g=e=>{if(!e||!e.response)return"";let{response:t}=e;if(!t.content)return"";if("Raw"===e.ui.responseBodyView)return t.content.text||"";let{mimeType:n,text:s}=t.content;if(!s)return"";try{if(!n)return s;if(n.startsWith("application/json"))return JSON.stringify(JSON.parse(s),null,2);if(n.startsWith("application/xml")||n.startsWith("text/xml")||n.startsWith("text/html"))return(0,a.default)(s,{indentation:"  ",collapseContent:!0});return s}catch{return s}},f={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",204:"No Content",301:"Moved Permanently",302:"Found",304:"Not Modified",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},x=e=>f[e]||"",y=()=>`reqCol_${Math.random().toString(36).substring(2,10)}`,b=e=>{if(!e.postData||!e.postData.mimeType)return e;let{headers:t,postData:{mimeType:n}}=e,s=t.find(e=>"content-type"===e.name.toLowerCase());return s?{...e,headers:t.map(e=>e.name===s.name?{...e,value:n}:e)}:{...e,headers:[{name:"Content-Type",value:n},...t]}};e.s(["appTabs",0,l,"calculateContentType",0,b,"easterEggUrl",0,()=>{let e=["https://ai-sdk.dev","https://nextjs.org","https://nuxt.com","https://svelte.dev","https://turborepo.com","https://v0.app","https://vercel.com/agent","https://vercel.com/botid","https://vercel.com/docs/rolling-releases","https://vercel.com/fluid","https://vercel.com/products/observability","https://vercel.com/products/previews","https://vercel.com/products/rendering","https://vercel.com/security","https://vercel.com/security/bot-management","https://vercel.com/security/web-application-firewall","https://vercel.com/solutions/turborepo","https://doom-captcha.vercel.app"];return e[Math.floor(Math.random()*e.length)]},"ensureLeadingSlash",0,p,"extractPathname",0,c,"formatBytes",0,e=>{if(!e||e<=0)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024)),n=Number.parseFloat((e/Math.pow(1024,t)).toFixed(1));return`${n} ${["B","KB","MB","GB","TB"][t]}`},"formatResponseBody",0,g,"generateRequestCollectionId",0,y,"getStatusText",0,x,"makeTabs",0,e=>e.map(e=>({value:e,title:e})),"methodShorthand",0,{GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PTCH",DELETE:"DEL"},"methods",0,i,"microViewTabs",0,r,"mimeTypeToLabel",0,e=>e?e.startsWith("application/json")?"JSON":e.startsWith("text/plain")?"Text":e.startsWith("application/xml")||e.startsWith("text/xml")?"XML":e.startsWith("text/html")?"HTML":"Text":"Text","mimeTypes",0,u,"requestTabs",0,o,"responseTabs",0,d,"shortcutKeyToKbd",0,e=>{let s="text-gray-600";return(0,t.jsx)("span",{className:"flex flex-row gap-1",children:e.flatMap(e=>Array.isArray(e)?(0,t.jsx)(n.Kbd,{className:s,ctrl:"Ctrl"===e[0],shift:"Shift"===e[0],alt:"Alt"===e[0],meta:"Meta"===e[0],children:e[1]},`shortcut-${e[0]}-${e[1]}`):(0,t.jsx)(n.Kbd,{className:s,children:e},e))})},"shortcutKeyToString",0,e=>e.map(e=>Array.isArray(e)?e.join("+"):e).join(" "),"shortcuts",0,h,"stripTrailingSlash",0,m],1895466);var j=e.i(8660982),v=e.i(9171423);let C=async e=>{let t={method:e.method,headers:e.headers.reduce((e,t)=>(e[t.name]=t.value,e),{}),body:e.postData?.text||void 0},n=await fetch(e.url,t),s={};n.headers.forEach((e,t)=>{s[t]=e});let a=await n.text();return{status:n.status,statusText:n.statusText||x(n.status),headers:Object.entries(s).map(e=>{let[t,n]=e;return{name:t,value:n}}),content:{size:0,mimeType:n.headers.get("Content-Type")||"",text:a},headersSize:-1,bodySize:a.length,httpVersion:"HTTP/1.1",redirectURL:"",cookies:[]}},w={method:"GET",headers:[],cookies:[],url:"",postData:{mimeType:u[0],text:""},httpVersion:"HTTP/1.1",headersSize:-1,bodySize:-1,queryString:[]},S={response:null,transportError:null,ui:{responseBodyView:"Pretty"}};e.s(["useRequestBuilder",0,e=>{let{deploymentId:t,deploymentUrl:n,teamId:s}=e,[a,u]=(0,j.useState)("HTTP/1.1"),[f,x]=(0,j.useState)(!0),[T,k]=(0,j.useState)(l[0]),[E,I]=(0,j.useState)(r[0]),[N,B]=(0,j.useState)(o[0]),[L,R]=(0,j.useState)(d[0]),[A,M]=(0,j.useState)(!1),{requestCollections:D,setRequestCollections:O,addRequestCollection:P,removeRequestCollection:q,requestCollectionsAreLoading:F,activeRequestCollectionId:U,activeRequestCollection:_,setActiveRequestCollectionId:$,setMethod:V,pathname:H,setPathname:z,setRequestBody:G,setMimeType:W,setTransportError:Q,setResponseHar:K,setResponseBodyView:Y,responseBody:J,setRequestHeader:Z,deleteRequestHeader:X,addRequestHeader:ee,setActiveRequestCollectionName:et}=(e=>{let{urlBase:t}=e,[n,s]=(0,j.useState)(!0),[a,r]=(0,j.useState)(new Map),[l,o]=(0,j.useState)(null);(0,j.useEffect)(()=>{let e=setTimeout(()=>{let e=[y(),y(),y()];r(new Map([[e[0],{...S,id:e[0],name:"My First Request",request:b({...w,method:i[0],url:`${t}/api/hello`})}],[e[1],{...S,id:e[1],name:"Ban Scammer",request:b({...w,method:"DELETE",url:`${t}/api/ban/captain-spectacular`,headers:[{name:"CoNtEnT-TyPe",value:"application/json"}]})}],[e[2],{...S,id:e[2],name:"Ziltoid",request:b({...w,method:"POST",url:`${t}/api/ziltoid/visitPlanet`,postData:{mimeType:"application/json",text:JSON.stringify({nebulo:9,omniscient:!1,ultimateCupOfCoffee:!0,time:"6 earth minutes"},null,2)}})}]])),s(!1),o(e[2])},1e3);return()=>clearTimeout(e)},[t]);let d=l?a.get(l):null,u=g(d),m=(0,j.useCallback)((e,t)=>{r(n=>{let s=t??l;if(!s)return n;let a=n.get(s);if(!a)return n;let i={...a.request,...e.request??{}},r=null===e.response?null:void 0===e.response?a.response:{...a.response??{},...e.response},o=null===e.transportError?null:e.transportError??a.transportError,d={...a.ui,...e.ui??{}},u={id:e.id??a.id,name:e.name??a.name,request:i,response:r,transportError:o,ui:d};return new Map(n).set(s,u)})},[r,l]);return{requestCollections:a,setRequestCollections:r,responseBody:u,updateActiveRequestCollection:m,setMethod:(0,j.useCallback)(e=>{m({request:{method:e}})},[m]),setUrl:(0,j.useCallback)(e=>{m({request:{url:e}})},[m]),pathname:p(p(c(d?.request.url))),setPathname:(0,j.useCallback)(e=>{if(!d)return;let t=p(e);try{let e=new URL(d.request.url);m({request:{url:`${e.origin}${t}`}})}catch{return}},[m,d]),setRequestBody:(0,j.useCallback)(e=>{d&&d.request.postData&&m({request:{postData:{mimeType:d.request.postData.mimeType,text:e}}})},[m,d]),setMimeType:(0,j.useCallback)(e=>{if(!d||!d.request.postData)return;let t=d.request.headers.find(e=>"content-type"===e.name.toLowerCase()),{headers:n,postData:s}=d.request;m({request:{postData:{...s,mimeType:e},headers:t?n.map(n=>n.name===t.name?{...n,value:e}:n):[...n,{name:"Content-Type",value:e}]}})},[m,d]),setResponseHar:(0,j.useCallback)(e=>{m({response:e})},[m]),setTransportError:(0,j.useCallback)(e=>{m({transportError:e})},[m]),addRequestCollection:()=>{let e={...S,id:y(),name:"New Request",request:b({...w,method:i[0],url:`${t}/`})};r(t=>new Map(t).set(e.id,e)),o(e.id)},setResponseBodyView:(0,j.useCallback)(e=>{l&&r(t=>{let n=t.get(l);if(!n)return t;let s={...n,ui:{...n.ui,responseBodyView:e}};return new Map(t).set(l,s)})},[l]),removeRequestCollection:e=>{r(t=>{if(t.size<=1)return t;if(l===e){let n=Array.from(t.keys()),s=n.indexOf(e);o(n[0===s?1:s-1])}let n=new Map(t);return n.delete(e),n})},setActiveRequestCollectionName:(0,j.useCallback)((e,t)=>{m({name:e},t)},[m]),setRequestHeader:(0,j.useCallback)((e,t)=>{if(!d||!d.request.headers[e])return;let n=[...d.request.headers];n[e]=t,m({request:{headers:n}})},[m,d]),deleteRequestHeader:(0,j.useCallback)(e=>{if(!d||!d.request.headers[e])return;let t=[...d.request.headers];t.splice(e,1),m({request:{headers:t}})},[m,d]),addRequestHeader:(0,j.useCallback)(e=>{let{name:t,value:n}=e;d&&m({request:{headers:[...d.request.headers,{name:t,value:n}]}})},[m,d]),requestCollectionsAreLoading:n,activeRequestCollectionId:l,activeRequestCollection:d,setActiveRequestCollectionId:o}})({urlBase:n}),en=(0,j.useCallback)(()=>{if(A)return void console.log("already sending a request");if(!t)return void console.log("no deployment");if(!_)return void console.log("no active request collection");M(!0);let e={comment:`sent by ${window.location.href}`,..._.request,headers:_.request.headers.filter(e=>!e.comment?.includes("disabled"))};(f?(e=>{let{deploymentId:t,teamId:n}=e;return async e=>{let s=`/request-builder/proxy/har/${t}?team=${n}`,a=await (0,v.fetchApi)(s,{method:"POST",body:JSON.stringify(e),throwOnHTTPError:!0,headers:{"Content-Type":"application/json"}});if(null===a||"string"==typeof a)throw Error(`Proxy request failed: ${a||"No response"}`);let{response:i}=a;if(!i)throw Error("Proxy request failed: No response");return i}})({deploymentId:t,teamId:s}):C)(e).then(e=>{K(e),Q(null)}).catch(e=>{K(null),Q(e.message||String(e))}).finally(()=>{I("Response"),R("Body"),M(!1)})},[t,n,_,I,R,s,a,f,A,M,Q,K]);return{activeRequestCollection:null,requestCollections:D,setRequestCollections:O,addRequestCollection:P,removeRequestCollection:q,requestCollectionsAreLoading:F,activeRequestCollectionId:U,setActiveRequestCollectionId:$,handleShortcuts:(0,j.useCallback)(e=>{h.sendRequest.predicate(e)&&(e.preventDefault(),en())},[en]),method:_?.request.method,setMethod:V,appTab:T,setAppTab:k,microViewTab:E,setMicroViewTab:I,requestTab:N,setRequestTab:B,responseTab:L,setResponseTab:R,requestBody:_?.request.postData?.text,setRequestBody:G,responseHar:_?.response,setResponseHar:K,responseBody:J,sendRequest:en,httpVersion:a,setHttpVersion:u,proxyEnabled:f,setProxyEnabled:x,isSendingRequest:A,setIsSendingRequest:M,mimeType:_?.request.postData?.mimeType,setMimeType:W,transportError:_?.transportError,pathname:H,setPathname:z,responseBodyView:_?.ui.responseBodyView||"formatted",setResponseBodyView:Y,urlBase:m(n),setTransportError:Q,requestHar:_?.request||null,setRequestHeader:Z,requestHeaders:_?.request.headers||[],deleteRequestHeader:X,addRequestHeader:ee,responseHeaders:_?.response?.headers||[],setActiveRequestCollectionName:et}}],6656921)},417184,e=>{e.v({revealContainer:"vercel-agent-build-fix-status-module__qHDxCq__revealContainer",revealText:"vercel-agent-build-fix-status-module__qHDxCq__revealText",revealTextAnimate:"vercel-agent-build-fix-status-module__qHDxCq__revealTextAnimate",softReveal:"vercel-agent-build-fix-status-module__qHDxCq__softReveal"})},1303150,e=>{"use strict";var t=e.i(4205214),n=e.i(8660982),s=e.i(9722978),a=e.i(57106),i=e.i(6352514),r=e.i(1853611),l=e.i(1681029),o=e.i(4478191),d=e.i(8518548),u=e.i(6613731),c=e.i(5338940),m=e.i(6656921),p=e.i(1895466),h=e.i(2504781),g=e.i(5838627),f=e.i(9334091),x=e.i(5468328),y=e.i(5323212),b=e.i(3500331),j=e.i(4237893);function v(e){let{deployment:n,teamId:s}=e,{method:a,setMethod:i,pathname:r,setPathname:l,microViewTab:o,setMicroViewTab:d,requestTab:u,setRequestTab:c,responseTab:v,setResponseTab:C,requestBody:w,setRequestBody:S,responseHar:T,sendRequest:k,urlBase:E,requestHeaders:I,responseHeaders:N}=(0,m.useRequestBuilder)({deploymentId:n.id,deploymentUrl:`https://${n.url}`,teamId:s}),B=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tabs,{tabs:(0,p.makeTabs)(p.requestTabs),selected:u,setSelected:c,variant:"secondary",className:"my-1 shrink-0"}),"Body"===u?(0,t.jsx)(f.Textarea,{style:{fieldSizing:"content"},className:"flex grow font-mono h-full overflow-y-auto",value:w,onChange:e=>S(e.target.value)}):null,"Params"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:"not yet implemented"}):null,"Headers"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:(0,t.jsx)(g.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(I.reduce((e,t)=>{let{name:n,value:s}=t;return{...e,[n]:s}},{}),null,2)})}):null,"Snippets"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:"not yet implemented"}):null]}),L=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tabs,{tabs:(0,p.makeTabs)(p.responseTabs),selected:v,setSelected:C,variant:"secondary",className:"my-1 shrink-0"}),(0,t.jsxs)("div",{className:"overflow-y-scroll",children:["Body"===v?(0,t.jsx)(g.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(T,null,2)}):null,"Headers"===v?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:(0,t.jsx)(g.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(N.reduce((e,t)=>{let{name:n,value:s}=t;return{...e,[n]:s}},{}),null,2)})}):null]})]});return(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row",style:{borderBottom:"1px solid var(--ds-gray-400)"},children:[(0,t.jsx)(y.Select,{selectClassName:"px-2 w-[54px] rounded-none shadow-none",value:a,onChange:e=>i(e.target.value),size:"small",suffix:null,style:{borderRight:"1px solid var(--ds-gray-400)"},children:p.methods.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)(b.Input,{"aria-label":"request builder",innerWrapperClassName:"w-full rounded-none shadow-none border-l-1",prefix:(0,t.jsx)(x.Tooltip,{text:`The request will be sent with the base path: ${E}`,children:"/"}),value:r,onChange:e=>{l(e.target.value)},size:"small"}),(0,t.jsx)(x.Tooltip,{text:"Send Request",children:(0,t.jsx)(h.Button,{style:{borderRadius:0},size:"small",onClick:k,children:"Send"})})]}),(0,t.jsxs)("div",{className:"px-3",children:[(0,t.jsx)(j.Tabs,{className:"shrink-0",tabs:(0,p.makeTabs)(p.microViewTabs),selected:o,setSelected:d,tabClassName:"py-2"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 mt-1 max-h-full",children:["Request"===o?B:null,"Response"===o?L:null]})]})]})}var C=e.i(7087273),w=e.i(9318197),S=e.i(4450569);let T=e=>{let{title:n,message:s,link:i,action:r="Learn More",onDismiss:l}=e;return(0,t.jsxs)(S.default,{style:{padding:"var(--geist-gap)",width:"100%",height:"100%",position:"absolute"},children:[(0,t.jsx)("span",{className:"text-copy-16",children:n}),(0,t.jsx)(w.Spacer,{y:1/3}),(0,t.jsx)(S.default,{className:"min-h-0 break-words",children:(0,t.jsx)(C.Scroller,{children:(0,t.jsx)("p",{className:"text-copy-16 m-0",children:s})})}),(0,t.jsx)(w.Spacer,{y:2/3}),(0,t.jsxs)(S.default,{row:!0,style:{justifyContent:"center",alignItems:"flex-end"},children:[(0,t.jsx)(h.Button,{onClick:l,size:"small",style:{flex:"1"},type:"secondary",children:"Dismiss"}),i?(0,t.jsx)(w.Spacer,{x:.5}):null,i?(0,t.jsx)(a.ButtonLink,{href:i,size:"small",style:{flex:"1"},children:r}):null]})]})};var k=e.i(4597921),E=e.i(6159310);let I=["https://vercel.com/","https://zeit.ink/","https://vercel.link/","https://err.sh/","https://github.com/zeit/","https://github.com/vercel/"];var N=e.i(762945),B=e.i(6226725),L=e.i(2425341),R=e.i(2144405),A=e.i(1438473),M=e.i(8668470),D=e.i(3131132),O=e.i(4469437),P=e.i(1265647),q=e.i(7660824),F=e.i(417184);let U=e=>{let{vercelAgentBuildCodeSuggestion:s,buildFixTaskId:a,isLoading:i}=e,{team:r}=(0,c.useTeam)(),l=r?.vadeReview?.enabled??!1,[o,d]=(0,n.useState)("none"),[u,m]=(0,n.useState)(null),[p,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if("none"===o){if(i&&!u)m(Date.now()),h(!1);else if(!i&&u){let e=2e3-(Date.now()-u);if(e<=0)h(!0),m(null);else{let t=setTimeout(()=>{h(!0),m(null)},e);return()=>clearTimeout(t)}}}},[i,u,o]);let g="none"===o&&(i||u&&!p),f="none"!==o?o:l?g?"loading":a&&s?"build-fix-available":null:"disabled";return f?"disabled"===f?(0,t.jsxs)("div",{className:"relative mt-auto flex flex-row gap-2 justify-center",children:[null,(0,t.jsx)(E.DashboardButtonLink,{route:"/[teamSlug]/~/agent",size:"small",prefix:(0,t.jsx)(M.VercelAgent,{}),type:"secondary",className:"w-full",children:"Enable Vercel Agent to Fix Build Failures"})]}):(0,t.jsxs)("div",{className:"relative flex items-center justify-center",children:[null,(0,t.jsx)($,{status:f,buildFixTaskId:a,suggestionId:s?.id})]}):null},_=(0,n.memo)(function(e){let{status:n}=e;return(0,t.jsx)(O.AnimatePresence,{mode:"popLayout",initial:!1,children:"build-fix-available"===n?(0,t.jsx)(P.motion.span,{className:(0,s.default)(F.default.revealContainer,"relative z-0"),style:{"--duration-factor":.48999999999999994},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsxs)("span",{className:(0,s.default)(F.default.revealText,F.default.revealTextAnimate),children:["View Suggestion",(0,t.jsx)(A.ArrowRight,{className:"inline-block ml-2 -translate-y-px"})]})},"build-fix-available"):(0,t.jsx)(P.motion.span,{className:"relative inline-block z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.13999999999999999,ease:"easeOut"},children:"Investigating failed build…"},"loading")})}),$=e=>{let{status:a,buildFixTaskId:i,suggestionId:r}=e,[l,o]=(0,n.useState)(!1),d="build-fix-available"===a;(0,n.useEffect)(()=>{if(!d)return void o(!1);let e=setTimeout(()=>{o(!0)},1120);return()=>{clearTimeout(e)}},[d]);let u=d?l?"idle":"success":"fade";return(0,t.jsx)(x.Tooltip,{text:"build-fix-available"===a?void 0:"Vercel Agent is investigating why the build failed & will suggest a fix soon.",desktopOnly:!0,children:(0,t.jsxs)(P.motion.div,{layout:!0,transition:{ease:"easeInOut",duration:.4},className:"relative",children:[(0,t.jsx)(E.DashboardButtonLink,{route:"/[teamSlug]/~/agent/tasks/[taskId]",params:d?{taskId:i}:void 0,hash:d&&r?`#suggestion-${r}`:void 0,size:"small",type:"tertiary",className:(0,s.default)("isolate relative [&>span]:w-full [&>span]:!px-0 !px-3 !rounded-full","fade"===u||"success"===u?"!text-gray-100 shadow-none pointer-events-none":"!text-gray-1000 !opacity-100 !overflow-visible"),style:{"--height":"34px"},children:(0,t.jsxs)(q.MotionConfig,{transition:{ease:"easeInOut",duration:.7},children:[(0,t.jsx)(P.motion.div,{layout:!0,className:"absolute inset-0 z-0 pointer-events-none",animate:{width:d?"186px":"228px"},style:{transformOrigin:"center center"},transition:{width:{ease:"easeOut",duration:.35,delay:1.19*!!d}},children:(0,t.jsx)(P.motion.div,{className:"absolute inset-0",initial:{backgroundColor:"var(--ds-background-100)",borderColor:"fade"===u||"success"===u?"var(--ds-gray-400)":"var(--ds-gray-1000)",borderRadius:99},animate:{backgroundColor:d?"var(--ds-gray-1000)":"var(--ds-background-100)",width:d?"186px":"228px",borderColor:"fade"===u||"success"===u?"var(--ds-gray-400)":"var(--ds-gray-1000)",borderRadius:99},style:{transformOrigin:"center center",borderWidth:1,borderStyle:"solid"},transition:{backgroundColor:{ease:"easeOut",duration:.35,delay:1.26*!!d},borderColor:{ease:"easeOut",duration:.35,delay:.126*!!d},borderRadius:{ease:"easeOut",duration:.35,delay:1.19*!!d},width:{ease:"easeOut",duration:.35,delay:1.19*!!d}}})}),(0,t.jsxs)(P.motion.span,{className:"flex gap-1 items-center relative z-10 w-fit mx-auto",children:[(0,t.jsx)(P.motion.span,{layout:!0,transition:{delay:.7*!!d,ease:"easeInOut",duration:.7},children:(0,t.jsx)(D.AgentIndicator,{animation:u})}),(0,t.jsx)("span",{className:(0,s.default)("relative isolate h-5",{"w-[134px]":"idle"===u,"w-[176px]":"idle"!==u})})]})]})}),(0,t.jsx)("span",{className:(0,s.default)("absolute right-3 top-1/2 -translate-y-1/2 isolate h-6 pointer-events-none font-medium","idle"===u?"text-gray-100":"text-gray-1000",{"w-[134px]":"idle"===u,"w-[174px]":"idle"!==u}),children:(0,t.jsx)("span",{className:"absolute inset-0 isolate overflow-clip",children:(0,t.jsx)(_,{status:"fade"===u||"success"===u?"loading":"build-fix-available"})})})]})})},V=e=>{let{title:n,status:s,link:a,actionButton:i,buttonText:r,message:l,vercelAgentBuildCodeSuggestion:o,buildFixTaskId:d,isVercelAgentBuildFixLoading:u}=e;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"border-b border-solid border-gray-alpha-400 w-full p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["ERROR"===s?(0,t.jsx)("span",{className:"text-[var(--geist-error-light)]",children:(0,t.jsx)(N.Warning,{})}):null,"CANCELED"===s?(0,t.jsx)(B.CrossCircle,{color:"gray-900"}):null,"QUEUED"===s?(0,t.jsx)(L.Stopwatch,{color:"gray-900"}):null,"INITIALIZING"===s?(0,t.jsx)(L.Stopwatch,{color:"gray-900"}):null,(0,t.jsx)("h3",{className:"text-label-14 text-gray-1000 font-medium",children:n})]})}),(0,t.jsxs)("div",{className:"p-3 flex flex-col h-[calc(100%-45px)]",children:[(0,t.jsx)(C.Scroller,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",style:{overflowWrap:"anywhere"},children:l||"Your deployment has failed. Please check out the logs for more details."})}),(0,t.jsx)(H,{status:s,link:a,actionButton:i,buttonText:r,vercelAgentBuildCodeSuggestion:o,buildFixTaskId:d,isVercelAgentBuildFixLoading:u})]})]})},H=e=>{let{status:n,link:s,actionButton:a,buttonText:i,vercelAgentBuildCodeSuggestion:r,buildFixTaskId:l,isVercelAgentBuildFixLoading:o}=e,d=(0,k.useServerFlag)("project-agent-build-fix",!1);return"https://vercel.link/CVE-2025-66478"===s&&s?(0,t.jsxs)("div",{className:"mt-auto flex flex-row gap-2 *:flex-1",children:[(0,t.jsx)(G,{buttonText:i,link:s,status:n}),(0,t.jsx)(E.DashboardButtonLink,{route:"/[teamSlug]/[project]/fix/[fixType]",params:{fixType:"react2shell"},size:"small",children:"Upgrade"})]}):d&&(o||r&&l)?(0,t.jsx)(U,{vercelAgentBuildCodeSuggestion:r,buildFixTaskId:l,isLoading:o}):s||a?(0,t.jsxs)("div",{className:"mt-auto flex flex-col gap-y-2",children:[s?(0,t.jsx)(G,{buttonText:i,link:s,status:n}):(0,t.jsx)(w.Spacer,{y:1/6}),a??null]}):null},z=e=>{e.preventDefault();let t=document.querySelector("[data-status=error]");t&&("open"!==t.dataset.state&&t.querySelector("button")?.click(),t.scrollIntoView({behavior:"smooth"}))},G=e=>{let{status:n,link:s,buttonText:i}=e;return"string"==typeof s&&I.some(e=>s.startsWith(e))?(0,t.jsx)(a.ButtonLink,{href:s,size:"small",type:"secondary",children:"Learn More"}):"QUEUED"===n&&s?(0,t.jsx)(a.ButtonLink,{href:s,size:"small",children:i||"Add Concurrent Builds"}):(0,t.jsx)(h.Button,{passthroughOnClick:z,type:"secondary",children:"View Logs"})};var W=e.i(5255926),Q=e.i(5677444),K=e.i(6280036),Y=e.i(6677848);function J(e,t){switch(t.type){case"LIGHT_IMAGE_LOADING":return{...e,lightImage:"pending"};case"LIGHT_IMAGE_SUCCESS":return{...e,lightImage:"success"};case"LIGHT_IMAGE_FAILURE":return{...e,lightImage:"failure"};case"DARK_IMAGE_LOADING":return{...e,darkImage:"pending"};case"DARK_IMAGE_SUCCESS":return{...e,darkImage:"success"};case"DARK_IMAGE_FAILURE":return{...e,darkImage:"failure"};default:return e}}let Z={lightImage:"pending",darkImage:"pending"};function X(e,t,n,s,a){let i=new URL(a?"/api/screenshot/v2":"/api/screenshot","production"!==R.default.env.VERCEL_ENV&&R.default.env.VERCEL_URL?`https://${R.default.env.VERCEL_URL}`:"https://vercel.com");return t?(i.searchParams.set("dark","dark"===e?"1":"0"),i.searchParams.set("deploymentId",t),n&&i.searchParams.set("teamId",n),s&&i.searchParams.set("withStatus","1"),`${i.pathname}${i.search}`):""}function ee(e){let{srcLight:n,srcDark:s,onLoad:a,onError:i,alt:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{alt:r,className:"absolute block size-full dark:hidden",onError:()=>i("light"),onLoad:()=>a("light"),src:n}),(0,t.jsx)(et,{alt:r,className:"absolute hidden size-full dark:block",onError:()=>i("dark"),onLoad:()=>a("dark"),src:s})]})}function et(e){let{src:a,onLoad:i,renderScale:r=3,onError:l,className:o,alt:d}=e,u=(0,n.useRef)(null),c=(0,n.useRef)(null),[m,p]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=u.current;if(!e)return;c.current||(c.current=new Image);let t=c.current,n=()=>{let n=e.getContext("2d");if(!n)return;let s=e.offsetWidth,a=e.offsetHeight,i=s*r,l=a*r;e.width=i,e.height=l,n.scale(r,r),n.clearRect(0,0,i,l);let o=Math.min(s/t.width,a/t.height),d=s/2-t.width/2*o;n.drawImage(t,d,0,t.width*o,t.height*o)};if(t.src===a)return;t.src=a,t.onload=()=>{i(),p(!0),n()},t.onerror=()=>{l()};let s=()=>{n()};return window.addEventListener("resize",s),s(),()=>{window.removeEventListener("resize",s)}},[a,r]),(0,t.jsx)("canvas",{"aria-hidden":"true","aria-label":d,className:(0,s.clsx)(o,"size-full",{"animate-blurIn":m}),ref:u,role:"img",style:{width:"100%",height:"100%"}})}let en=n.default.memo(e=>{let{deployment:a,placeholder:i,noBorderRadius:r=!1,withReachable:l=!1,withImageWrapper:o=!0,onReady:d,height:u=400,width:c=640,onScreenshotFailed:m=()=>null}=e,p="string"==typeof a?.url?a.url:"",h="string"==typeof a?.id?a.id:void 0,g=c?{"--width":(0,Y.px)(c)}:{},{teamSlug:f=""}=(0,Q.useParams)()??{},x=(0,k.useServerFlag)("enable-screenshot-v2",!1),y=(0,n.useMemo)(()=>X("dark",h,f,l,x),[h,f,l,x]),b=(0,n.useMemo)(()=>X("light",h,f,l,x),[h,f,l,x]),[j,v]=(0,n.useReducer)(J,Z),{resolvedTheme:C}=(0,K.useTheme)(),w=(0,n.useCallback)(e=>{void 0===e?(v({type:"LIGHT_IMAGE_SUCCESS"}),v({type:"DARK_IMAGE_SUCCESS"})):v({type:"dark"===e?"DARK_IMAGE_SUCCESS":"LIGHT_IMAGE_SUCCESS"}),d?.(!0)},[d]),S=(0,n.useCallback)(e=>{y&&b&&(void 0===e?(v({type:"LIGHT_IMAGE_FAILURE"}),v({type:"DARK_IMAGE_FAILURE"}),d?.(!1)):("dark"===e?y:b)&&(v({type:"dark"===e?"DARK_IMAGE_FAILURE":"LIGHT_IMAGE_FAILURE"}),d?.(!1)))},[d,y,b]),T="dark"===C?"failure"===j.darkImage:"failure"===j.lightImage,E=i||("dark"===C?"pending"===j.darkImage:"pending"===j.lightImage);if(T||!E&&!a)return m();let I=(0,t.jsx)(ee,{alt:`Preview Screenshot of ${p}`,onError:S,onLoad:w,srcDark:y,srcLight:b});return(0,t.jsx)(W.Skeleton,{show:E,squared:r,style:{width:"100%",height:"100%"},children:o?(0,t.jsx)("div",{className:(0,s.clsx)("relative aspect-[var(--width,640)/var(--height,400)] size-full",{"rounded-none":r}),style:u?{"--height":(0,Y.px)(u),...g}:{},children:I}):I})});var es=e.i(7917902),ea=e.i(6060673),ei=e.i(5129431),er=e.i(6625227),el=e.i(5072965),eo=e.i(6891161),ed=e.i(455575),eu=e.i(277234),ec=e.i(4244280),em=e.i(1717203),ep=e.i(7557283),eh=e.i(7780974);function eg(e){let s=(0,Q.useRouter)(),[i,l]=(0,n.useState)(!1),o=(0,ed.useToasts)(),{can:d}=(0,em.default)(),u=d(ep.Action.Update,ep.Resource.BuildMachine),c=(0,n.useCallback)(async()=>{if(e.deploymentId&&e.teamId&&e.projectName){l(!0),r.analytics.track(eh.VercelActivityAction.DeploymentOverviewEnhancedBuildUpgrade,{},{send_to:{data_warehouse_legacy:!0}});{let t=new URLSearchParams;t.append("teamId",e.teamId),200===(await (0,eu.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v9")}/${e.projectName}?${t.toString()}`,{method:"PATCH",body:JSON.stringify({resourceConfig:{elasticConcurrencyEnabled:!0,buildMachineType:e.buildMachineType}}),throwOnHTTPError:!1,returnStatus:!0})).status?o.success(`Enabled ${e.buildMachineTypeLabel}`):(o.error("Something went wrong"),l(!1),e.onClose())}{let t=new URLSearchParams;t.append("teamId",e.teamId),t.append("forceNew","1"),t.append("withCache","1");let n=`${(0,ec.API_DEPLOYMENTS)("v13")}?${t.toString()}`,a=await (0,eu.fetchAPI)(n,{method:"POST",body:JSON.stringify({deploymentId:e.deploymentId,meta:{action:"redeploy",buildMachineUpgradeReason:e.upgradeReasonCode,buildMachineAfterUpgrade:e.buildMachineType},name:e.projectName}),throwOnHTTPError:!1,returnStatus:!0});if(200===a.status&&a.body.inspectorUrl){e.onSuccess?.();let t=new URL(a.body.inspectorUrl);s.push(t.pathname)}else o.error("Something went wrong")}l(!1)}},[e,o,s]);return(0,t.jsxs)(eo.Modal.Modal,{active:e.active,onClickOutside:e.onClose,width:"500px",children:[(0,t.jsxs)(eo.Modal.Body,{children:[(0,t.jsx)(eo.Modal.Header,{children:(0,t.jsx)(eo.Modal.Title,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:["Enable ",e.buildMachineTypeLabel]})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Overcome memory constraints by activating On-demand Concurrency with"," ",e.buildMachineTypeLabel,"."]}),e.teamId&&e.projectName?(0,t.jsxs)("p",{className:"text-copy-14",children:["Adjust this setting anytime via your project's"," ",(0,t.jsx)(a.Link,{as:`/${e.teamId}/${encodeURIComponent(e.projectName)}/settings/build-and-deployment#build-machine`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",variant:"highlight",children:"On-Demand Concurrent Builds"})," ","options."]}):null,(0,t.jsxs)("p",{className:"text-copy-14",children:['By clicking "Confirm & Redeploy" you agree to be charged for On-demand Concurrency.'," ",(0,t.jsx)(a.Link,{href:"/docs/deployments/managing-builds#build-machine-types",target:"_blank",variant:"highlight",children:"Learn more"})]})]})]}),(0,t.jsxs)(eo.Modal.Actions,{children:[(0,t.jsx)(eo.Modal.Action,{loading:!1,onClick:e.onClose,type:"secondary",children:"Close"}),(0,t.jsx)(x.Tooltip,{text:u?void 0:`You don't have permission to Enable ${e.buildMachineTypeLabel}.`,children:(0,t.jsx)(eo.Modal.Action,{disabled:i||!u,loading:i,onClick:c,children:"Confirm & Redeploy"})})]})]})}function ef(e){let{deploy:s,projectName:a,team:i,vercelAgentBuildCodeSuggestion:r,buildFixTaskId:l,isVercelAgentBuildFixLoading:o}=e,{errorMessage:d="Your deployment has failed. Please check out the logs for more details.",errorLink:u=""}=s,c=(0,Q.useRouter)(),m=(0,Q.useSearchParams)(),p=(0,ea.useProject)(a),g=!!m?.has("enabledEnhancedBuilds"),f=(0,n.useMemo)(()=>p.isLoading||!p.data?null:void 0===p.data.resourceConfig||!1===p.data.resourceConfig.elasticConcurrencyEnabled||void 0===p.data.resourceConfig.buildMachineType?"enhanced":"enhanced"===p.data.resourceConfig.buildMachineType?"turbo":null,[p]),x=(0,n.useCallback)(()=>{let e=new URLSearchParams(m?.toString());e.set("enabledEnhancedBuilds","1"),c.replace(`?${e.toString()}`)},[m,c]),y=(0,n.useCallback)(()=>{if(!m?.has("enabledEnhancedBuilds"))return;let e=new URLSearchParams(m?.toString());e.delete("enabledEnhancedBuilds"),c.replace(`?${e.toString()}`)},[m,c]);if(f){let e="out-of-memory"===s.oomReport,n="Your deployment's build step did not complete within the maximum of 45min"===d,r=`${f[0].toUpperCase()+f.slice(1)} Builds`,l=(0,el.createTrackingAttributes)({id:"enable-enhanced-builds-modal-opened",upgradeTarget:f??"",plan:i?.billing?.plan??""});if(e||n){let d,u,c;if(e)d="Build Failed (out of memory)",u=`Your build failed because it exceeded the amount of memory available. Enable ${r} to increase machine size and available memory.`,c=s.oomReport||"out-of-memory";else if(n)d="Build Failed (timed out)",u=`Your build exceeded the 45 minute limit. Enable ${r} to increase machine size and reduce build times.`,c="build-timed-out";else throw Error("This should never happen, satisfy typescript");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V,{title:d,message:u,status:"ERROR",actionButton:(0,t.jsxs)(h.Button,{className:"w-full",onClick:x,size:"small",type:"default",...l,children:["Enable ",r]}),isVercelAgentBuildFixLoading:o}),(0,t.jsx)(eg,{active:g,buildMachineType:f,buildMachineTypeLabel:r,deploymentId:s.id||null,onClose:y,upgradeReasonCode:c,projectName:a??null,teamId:i.slug})]})}}return(0,t.jsx)(V,{link:u,message:d,status:"ERROR",title:"Build Failed",vercelAgentBuildCodeSuggestion:r,buildFixTaskId:l,isVercelAgentBuildFixLoading:o})}e.i(6483798);var ex=e.i(8287059),ey=e.i(9041876);function eb(e){let{team:s,projectName:a}=e,i=(0,ea.useProject)(a),r=(0,n.useMemo)(()=>!i.isLoading&&i.data&&s?{enhancedBuilds:(0,ey.isUpgradedBuildMachine)(i.data,s),onDemandBuilds:i.data.resourceConfig?.elasticConcurrencyEnabled??!1}:null,[i,s]);return r&&s&&a?s?.billing?.plan==="hobby"?(0,t.jsx)(ej,{team:s}):r.onDemandBuilds&&r.enhancedBuilds?(0,t.jsx)(eC,{}):r.enhancedBuilds?(0,t.jsx)(ev,{upgradeMessage:"Enable On-Demand Concurrent Builds to skip all queueing and build instantly.",projectName:a,team:s,settings:r,settingsHash:"#on-demand-concurrent-builds",buttonText:"Configure"}):(0,t.jsx)(ev,{upgradeMessage:"Switch to Enhanced Build Machines for faster builds with more CPU and memory.",projectName:a,team:s,settings:r,settingsHash:"#build-machine",buttonText:"Get Faster Builds"}):(0,t.jsx)(eC,{})}function ej(e){let n,{team:s}=e,i=(0,ex.useOpenUpgradeModal)();return(0,t.jsx)(V,{message:"Upgrade to Pro for faster builds with more CPU and memory.",status:"BUILDING",title:"Building…",actionButton:(n=(0,el.createTrackingAttributes)({section:"deployment-status",onDemandBuildsEnabled:"0",id:"faster-builds",plan:s?.billing?.plan??""}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.ButtonLink,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",className:"w-full",size:"small",type:"secondary",children:"Read Docs"}),(0,t.jsx)(h.Button,{className:"w-full",size:"small",type:"default",onClick:()=>{i({teamHint:s.id,source:"deployment-building-status"})},...n,children:"Get Faster Builds with Pro"})]})),isVercelAgentBuildFixLoading:!1})}function ev(e){let n,{projectName:s,team:i,upgradeMessage:r,settings:l,settingsHash:o,buttonText:d}=e;return(0,t.jsx)(V,{message:r,status:"BUILDING",title:"Building…",actionButton:(n=(0,el.createTrackingAttributes)({section:"deployment-status",onDemandBuildsEnabled:l.onDemandBuilds?"1":"0",id:"faster-builds",plan:i?.billing?.plan??""}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.ButtonLink,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",className:"w-full",size:"small",type:"secondary",children:"Read Docs"}),(0,t.jsx)(a.ButtonLink,{href:`/${i.slug}/${encodeURIComponent(s)}/settings/build-and-deployment${o}`,className:"w-full",size:"small",type:"default",...n,children:d})]})),isVercelAgentBuildFixLoading:!1})}function eC(){return(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Building..."})}var ew=e.i(8366444),eS=e.i(380513),eT=e.i(5023172),ek=e.i(542164),eE=e.i(4411675);function eI(e,t){let n=t?.name||e.url;return!n||(0,ek.default)(n)?e.url:n}function eN(e){return null!=e&&"project"in e}function eB(){let e=(0,Q.useSearchParams)();return(0,n.useMemo)(()=>{let t=e?.get("fakeDeploymentStatus")??null,n=e?.get("fakeBillingPlan")??null;return{status:t?.toUpperCase(),plan:n?.toLowerCase()}},[e])}let eL=["nitro","express","fastapi","hono","xmcp"],eR=new Map([["enterprise-non-unbundled","Contact sales to enable On-Demand Concurrent Builds"],["pro-non-active","Upgrade to Pro to enable On-Demand Concurrent Builds"],["no-permission","Only project admins and team owners can trigger builds on-demand"]]);function eA(e){let{deploy:s,projectName:i,team:r,user:l,isInSystemBuildsQueue:o,isInConcurrentBuildsQueue:d,compact:u}=e,{data:c}=(0,eS.useFeatureFlag)("enable-team-deployments-page"),m=s.target?ep.Resource.Deployment:ep.Resource.DeploymentPreview,{can:p}=(0,em.default)(),h=p(ep.Action.Update,m),[g,f]=(0,n.useState)(null),x="string"==typeof s.id?s.id:void 0,{enabled:y,disabledReason:b}=(0,ew.useOnDemandConcurrentBuilds)(r,h),j=y||b&&eR.has(b),v=b?eR.get(b):void 0,[C,w]=(0,n.useState)(y),S=j?(0,t.jsx)(eP,{enabled:C,onClick:()=>f(x??null),reasonWhyStartBuildingNowIsDisabled:v}):null,T=eB();if(o)return(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Initializing..."});let k="Deployments",E=c?(0,t.jsx)(a.Link,{href:`/${r.slug}/~/deployments?status=building%2Cqueued`,underline:!0,children:k}):k;if(d){let e=T.plan?T.plan:r.billing?.plan;if("enterprise"===e)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eM,{team:r,user:l,deployments:E,projectName:i,startBuildNowButton:S}),(0,t.jsx)(eT.StartBuildingNowModal,{active:!!g,deploymentId:g,onClose:()=>{f(null)},onSuccess:()=>{w(!1)},projectName:i??null,teamId:r.slug})]});if("pro"===e)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eD,{team:r,deployments:E,projectName:i,startBuildNowButton:S}),(0,t.jsx)(eT.StartBuildingNowModal,{active:!!g,deploymentId:g,onClose:()=>{f(null)},onSuccess:()=>{w(!1)},projectName:i??null,teamId:r.slug})]});if("hobby"===e)return(0,t.jsx)(eO,{team:r,deployments:E})}return u?(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Deployment Queued"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V,{message:(0,t.jsxs)(t.Fragment,{children:["The build will start once other"," ",i?(0,t.jsx)(a.Link,{href:`/${r.slug}/${i}/deployments?status=building%2Cqueued`,underline:!0,children:k}):k," ","for this branch have finished."," ",(0,t.jsx)(a.Link,{href:"/docs/builds/build-queues#git-branch-queue",underline:!0,children:"Learn more."})]}),actionButton:S,status:"QUEUED",title:"Deployment Queued",isVercelAgentBuildFixLoading:!1}),(0,t.jsx)(eT.StartBuildingNowModal,{active:!!g,deploymentId:g,onClose:()=>{f(null)},onSuccess:()=>{w(!1)},projectName:i??null,teamId:r.slug})]})}function eM(e){let{team:n,user:s,deployments:i,projectName:r,startBuildNowButton:l}=e,o=new URLSearchParams({content:"I'd like to add extra concurrent builds to my contract."});return s?.email&&o.set("email",s.email),(0,t.jsx)(V,{actionButton:l,status:"QUEUED",title:"Deployment Queued",message:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsxs)("div",{children:["The build will start once your other ",i," have finished."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Link,{href:`/contact/sales?${o.toString()}`,underline:!0,children:"Contact Sales"})," ","to add concurrent build slots or use"," ",(0,t.jsx)(a.Link,{as:`/${n.slug}/${encodeURIComponent(r??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]})]}),isVercelAgentBuildFixLoading:!1})}function eD(e){let{team:n,deployments:s,projectName:i,startBuildNowButton:r}=e,l=(n?.billing?.invoiceItems?.concurrentBuilds?.quantity??1)>1,o=n.billing?.planIteration!=="plus"||l?(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",s," have finished. Add"," ",(0,t.jsx)(a.Link,{as:`/${n.slug}/~/settings/build-and-deployment#concurrent-builds`,href:"/[teamSlug]/~/settings/build-and-deployment#concurrent-builds",target:"_blank",underline:!0,children:"concurrent build slots"})," ","or use"," ",(0,t.jsx)(a.Link,{as:`/${n.slug}/${encodeURIComponent(i??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]}):(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",s," have finished. Use"," ",(0,t.jsx)(a.Link,{as:`/${n.slug}/${encodeURIComponent(i??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(V,{message:o,actionButton:r,status:"QUEUED",title:"Deployment Queued",isVercelAgentBuildFixLoading:!1})})}function eO(e){let{deployments:n,team:s}=e,a=(0,ex.useOpenUpgradeModal)();return(0,t.jsx)(V,{message:(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",n," have finished. Pro teams can use On-Demand Concurrent Builds to avoid the queue."]}),status:"QUEUED",title:"Another build is in progress",actionButton:(0,t.jsx)(h.Button,{onClick:()=>{a({teamHint:s.id,source:"concurrent-builds-queue"})},size:"small",type:"default",children:"Upgrade to Pro"}),isVercelAgentBuildFixLoading:!1})}function eP(e){let{onClick:n,enabled:s,reasonWhyStartBuildingNowIsDisabled:a}=e;return void 0!==a?(0,t.jsx)(x.Tooltip,{position:"right",style:{alignItems:"center",flex:"1",justifyContent:"center",width:"100%"},text:a,children:(0,t.jsx)(h.Button,{disabled:!0,size:"small",style:{alignItems:"center",flex:"1",justifyContent:"center"},children:"Start Building Now"})}):(0,t.jsx)(h.Button,{disabled:!s,onClick:n,size:"small",type:"default",children:"Start Building Now"})}let eq=e=>{let{deploy:n,projectName:s}=e,a=(0,ea.useProject)(s),{data:i}=(0,er.default)(n.id),{modal:r,open:l}=(0,ei.default)(a.data),o=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{children:"An unexpected error happened when running this build. This issue is likely temporary."}),(0,t.jsx)("p",{children:"Please try to redeploy in a few minutes."})]})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V,{message:o,status:"ERROR",title:"Build Failed",isVercelAgentBuildFixLoading:!1,actionButton:(0,t.jsx)(h.Button,{className:"w-full",disabled:!i,onClick:()=>{i&&l(i)},size:"small",type:"default",children:"Redeploy"})}),r]})};function eF(e){let{deploy:n,showError:s,isInConcurrentBuildsQueue:a,isInSystemBuildsQueue:i,compact:r,projectName:l,vercelAgentBuildCodeSuggestion:o,buildFixTaskId:d,isVercelAgentBuildFixLoading:u=!1}=e,{status:c,errorMessage:m,errorLink:p=""}=n,h=c,g=eB();g?.status&&(h=g.status);let{user:f,team:y}=(0,es.useAccount)();return y?"ERROR"===h?s?"temporary_failure"===n.errorCode?(0,t.jsx)(eq,{deploy:n,projectName:l}):(0,t.jsx)(ef,{deploy:n,team:y,projectName:l,vercelAgentBuildCodeSuggestion:o,buildFixTaskId:d,isVercelAgentBuildFixLoading:u}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-red-600",children:"Deployment Failed"}):"FROZEN"===h||"FAILED"===h?(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"No Screenshot Available"}):"NO_PRODUCTION"===h?(0,t.jsx)(x.Tooltip,{className:"m-auto text-center",delay:!1,text:"To deploy to production, push to the Repository Default branch.",children:(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"No Production Deployment"})}):"CANCELED"===h?s&&m?(0,t.jsx)(V,{link:p,message:m||"Deployment canceled.",status:h,title:"Build Canceled",isVercelAgentBuildFixLoading:!1}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Deployment Canceled"}):"QUEUED"===h||"INITIALIZING"===h?(0,t.jsx)(eA,{deploy:n,projectName:l,isInConcurrentBuildsQueue:a,isInSystemBuildsQueue:i,compact:r,user:f,team:y}):(0,t.jsx)(eb,{team:y,projectName:l}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Loading…"})}var eU=e.i(8783592),e_=e.i(4628083);e.s(["DeploymentPreview",0,function(e){let{deployment:m,ignoreAliasWarning:p=!0,placeholder:h,toolbarVia:g,customHref:f,compact:x,...y}=e,{showError:b=!1,link:j=!0,empty:C=!1,noHighlight:w,noBorder:S,noBorderRadius:E,useDeploymentUrl:I=!1,onClick:N}=y,B=eN(m)?m.project?.name:void 0,{domain:L}=(0,d.useBestProductionDomain)(B),R=L||y.projectDomain||null,A=(0,k.useServerFlag)("request-builder",!1),[M,D]=function(e){let t=(0,n.useMemo)(()=>e?new eE.LSCache(`show-deployment-warning:${e.uid||e.id}`,!0):null,[e]),[s,a]=(0,n.useState)(()=>{let e=t?.get();return"boolean"!=typeof e||e});return[s,e=>{t?.set(e),a(e)}]}(m),{onClick:O,...P}=(0,u.useWrappedToolbarAuthLinkHandler)({via:g??"project-screenshot",deployment:j?m:void 0}),{team:q}=(0,c.useTeam)(),F=function(e){if(!e||!("microfrontends"in e)||!e.microfrontends)return!1;let t=e.microfrontends;return!t.isDefaultApp&&!t.defaultRoute}(m),U=`/${q?.slug}/${B}/settings/microfrontends#default-route`,_=(()=>{let e=(0,Q.useParams)(),{data:t}=(0,ea.useProject)(e?.project);return!!t&&"framework"in t&&!!t.framework&&!!eL.includes(t?.framework)})(),$=eN(m)?m.uid||m.id:void 0,H=m?.readyState==="ERROR",{data:z,isEnabled:G}=(0,eU.useVadeTasksByDeployment)($,H),W=(0,e_.getVercelAgentBuildFixCodeSuggestion)(z)??void 0,K=z?.id,Y=H&&G&&void 0===W,J=(0,n.useMemo)(()=>{if(!m)return C?{status:"NO_PRODUCTION"}:null;let e=I?m.url:eI(m,R),t=m.readyStateReason||m.errorMessage;return m.readyStateReason?.startsWith("The deployment failed to build.")&&m.errorMessage&&(t=m.errorMessage),{id:m.uid||m.id,url:e,target:m.target,status:m.readyState,errorCode:m.errorCode,errorMessage:t,errorLink:m.errorLink,aliasWarning:m.aliasWarning,oomReport:m.oomReport}},[I,m,C,R]),Z=!p&&M&&J?.status==="READY"&&J?.aliasWarning?.code==="deprecated_now_sh",X=J&&"READY"!==J.status,ee=J?.status==="ERROR"||m?.aliasError,et=(0,n.useCallback)(()=>(0,t.jsx)(eF,{vercelAgentBuildCodeSuggestion:W,buildFixTaskId:K,deploy:{...J,status:"FAILED"},isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b,isVercelAgentBuildFixLoading:Y}),[J,b,B,m?.isInConcurrentBuildsQueue,m?.isInSystemBuildsQueue,W,K,Y]),es=(0,n.useMemo)(()=>m?.aliasError?(0,t.jsx)(V,{message:m.aliasError.message,status:"ERROR",title:"Domain Error",isVercelAgentBuildFixLoading:!1}):Z?(0,t.jsx)(T,{link:J.aliasWarning.link,message:J.aliasWarning.message,onDismiss:()=>D(!1),title:"Warning"}):X?(0,t.jsx)(eF,{compact:x,deploy:J,isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b,vercelAgentBuildCodeSuggestion:W,buildFixTaskId:K,isVercelAgentBuildFixLoading:Y}):F?(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"Default Route Missing"}),(0,t.jsxs)("p",{className:"text-copy-14 text-[var(--geist-secondary)]",children:[(0,t.jsx)(a.Link,{href:U,underline:!0,children:"Set the default route"})," ","for this microfrontend to screenshot the correct path. The default route is used anywhere that the microfrontend domain is referenced for this project."," ",(0,t.jsx)(a.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#set-a-default-route",tab:!0,type:"highlight",children:"Learn More"})]})]}):_&&A?(0,t.jsx)(v,{deployment:m,teamId:q?.id}):j&&m?.url?(0,t.jsx)(a.Link,{"aria-label":"Visit Deployment",href:f||(0,o.withDefaultRoute)((0,l.domainToUrl)(I?m.url:eI(m,R)),m.defaultRoute),...P,onClick:e=>{N?.(e),O?.(e),r.analytics.track(i.AnalyticsEvent.DEPLOYMENT_OVERVIEW_CLICKED_SCREENSHOT,{projectId:m.projectId||R?.projectId,deploymentId:m.id,deploymentTarget:m.target})},style:{width:"100%"},tab:!0,children:(0,t.jsx)(en,{deployment:J,onScreenshotFailed:et,placeholder:h,withReachable:!0,...y})}):(0,t.jsx)(en,{deployment:J,onScreenshotFailed:()=>(0,t.jsx)(eF,{vercelAgentBuildCodeSuggestion:W,buildFixTaskId:K,deploy:{...J,status:"FAILED"},isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b,isVercelAgentBuildFixLoading:Y}),placeholder:h,withReachable:!0,...y}),[J,m,j,R,y,D,X,Z,b,I,et,h,B,N]);return(0,t.jsx)("div",{className:(0,s.clsx)("geist-ratio","size-full p-0","relative after:absolute after:inset-0 after:ring-1 after:ring-inset after:ring-[var(--ds-gray-alpha-400)] after:rounded-[inherit] after:pointer-events-none","rounded-[var(--geist-radius)]","flex flex-none justify-center","overflow-hidden","aspect-[640/400]",{"w-screen max-w-full":X,"bg-[var(--ds-background-200)]":J?.status==="CANCELED"||J?.status==="QUEUED"||J?.status==="INITIALIZING"||J?.status==="FROZEN"||J?.status==="FAILED",group:!w,"after:ring-[var(--geist-error-light)]":ee,"after:ring-[var(--ds-amber-400)]":Z,"min-w-[108px]":J?.status==="NO_PRODUCTION","after:ring-0":S,"rounded-none":E}),style:{"--ratio":"62.5%"},children:es})}],1303150)}]);

//# debugId=95cf9c18-8bfa-7ea0-c2fd-c6a32b4d6870
//# sourceMappingURL=5ac450cd9f5e5f49.js.map