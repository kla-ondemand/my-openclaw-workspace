;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="fbdf3b4b-3ec8-3573-0c62-f0461a53cb39")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1935298,e=>{e.v({fakeSideBorders:"group-log-filters-module__iUXrVG__fakeSideBorders",filterContent:"group-log-filters-module__iUXrVG__filterContent",first:"group-log-filters-module__iUXrVG__first",last:"group-log-filters-module__iUXrVG__last",modalActiveButtonContainer:"group-log-filters-module__iUXrVG__modalActiveButtonContainer",modalActiveButtonDot:"group-log-filters-module__iUXrVG__modalActiveButtonDot",modalBody:"group-log-filters-module__iUXrVG__modalBody",modalMain:"group-log-filters-module__iUXrVG__modalMain",title:"group-log-filters-module__iUXrVG__title",titleContainer:"group-log-filters-module__iUXrVG__titleContainer"})},8300708,e=>{e.v({buttonLink:"group-details-panel-module__u1jj4W__buttonLink",buttonRule:"group-details-panel-module__u1jj4W__buttonRule",codeBlock:"group-details-panel-module__u1jj4W__codeBlock",copy:"group-details-panel-module__u1jj4W__copy",cta:"group-details-panel-module__u1jj4W__cta",detailsContainer:"group-details-panel-module__u1jj4W__detailsContainer",detailsHeader:"group-details-panel-module__u1jj4W__detailsHeader",detailsMain:"group-details-panel-module__u1jj4W__detailsMain",divider:"group-details-panel-module__u1jj4W__divider",drawer:"group-details-panel-module__u1jj4W__drawer",error:"group-details-panel-module__u1jj4W__error",fetchMetricRowContainer:"group-details-panel-module__u1jj4W__fetchMetricRowContainer",fetchMetricsContainer:"group-details-panel-module__u1jj4W__fetchMetricsContainer",ghostButton:"group-details-panel-module__u1jj4W__ghostButton",groupMessage:"group-details-panel-module__u1jj4W__groupMessage",info:"group-details-panel-module__u1jj4W__info",learnMore:"group-details-panel-module__u1jj4W__learnMore",logDetailRowSkeleton:"group-details-panel-module__u1jj4W__logDetailRowSkeleton",message:"group-details-panel-module__u1jj4W__message",modalBody:"group-details-panel-module__u1jj4W__modalBody",noLogsSelected:"group-details-panel-module__u1jj4W__noLogsSelected",root:"group-details-panel-module__u1jj4W__root",rowContainer:"group-details-panel-module__u1jj4W__rowContainer",setupLogDrain:"group-details-panel-module__u1jj4W__setupLogDrain",title:"group-details-panel-module__u1jj4W__title",tooltip:"group-details-panel-module__u1jj4W__tooltip",truncate:"group-details-panel-module__u1jj4W__truncate",warning:"group-details-panel-module__u1jj4W__warning"})},1255647,e=>{e.v({"child-fields-container":"json-message-module__Y739PW__child-fields-container",jsonBoolean:"json-message-module__Y739PW__jsonBoolean",jsonChild:"json-message-module__Y739PW__jsonChild",jsonClickableLabel:"json-message-module__Y739PW__jsonClickableLabel",jsonCollapseIcon:"json-message-module__Y739PW__jsonCollapseIcon",jsonCollapsedContent:"json-message-module__Y739PW__jsonCollapsedContent",jsonContainer:"json-message-module__Y739PW__jsonContainer",jsonExpandIcon:"json-message-module__Y739PW__jsonExpandIcon",jsonLabel:"json-message-module__Y739PW__jsonLabel",jsonNull:"json-message-module__Y739PW__jsonNull",jsonNumber:"json-message-module__Y739PW__jsonNumber",jsonSegmentWrapper:"json-message-module__Y739PW__jsonSegmentWrapper",jsonString:"json-message-module__Y739PW__jsonString"})},4410321,e=>{e.v({breakSpaces:"group-log-rows-module__JxqD1W__breakSpaces",colspan:"group-log-rows-module__JxqD1W__colspan",darkTheme:"group-log-rows-module__JxqD1W__darkTheme",darktheme:"group-log-rows-module__JxqD1W__darktheme",error:"group-log-rows-module__JxqD1W__error",fadeIn:"group-log-rows-module__JxqD1W__fadeIn",faded:"group-log-rows-module__JxqD1W__faded",fatal:"group-log-rows-module__JxqD1W__fatal",flash:"group-log-rows-module__JxqD1W__flash",header:"group-log-rows-module__JxqD1W__header",headerContainer:"group-log-rows-module__JxqD1W__headerContainer",info:"group-log-rows-module__JxqD1W__info",isNew:"group-log-rows-module__JxqD1W__isNew",isSelected:"group-log-rows-module__JxqD1W__isSelected",liveModeRow:"group-log-rows-module__JxqD1W__liveModeRow",loadingError:"group-log-rows-module__JxqD1W__loadingError",loadingNew:"group-log-rows-module__JxqD1W__loadingNew","move-in-indicator":"group-log-rows-module__JxqD1W__move-in-indicator","move-logs-down":"group-log-rows-module__JxqD1W__move-logs-down","move-logs-down-with-opacity":"group-log-rows-module__JxqD1W__move-logs-down-with-opacity","move-logs-up":"group-log-rows-module__JxqD1W__move-logs-up",moveUp:"group-log-rows-module__JxqD1W__moveUp",paused:"group-log-rows-module__JxqD1W__paused",previouslyFaded:"group-log-rows-module__JxqD1W__previouslyFaded",reverseBackground:"group-log-rows-module__JxqD1W__reverseBackground",rowContainer:"group-log-rows-module__JxqD1W__rowContainer",rowItem:"group-log-rows-module__JxqD1W__rowItem",screenReaderSelect:"group-log-rows-module__JxqD1W__screenReaderSelect",separated:"group-log-rows-module__JxqD1W__separated",tooltip:"group-log-rows-module__JxqD1W__tooltip",tooltipContainer:"group-log-rows-module__JxqD1W__tooltipContainer",truncate:"group-log-rows-module__JxqD1W__truncate",uppercase:"group-log-rows-module__JxqD1W__uppercase",warning:"group-log-rows-module__JxqD1W__warning"})},3327755,(e,t,r)=>{!function(e){"use strict";function t(e){var t={},r=e?e.split(/\.|-|_/):["0","0","0"];return t.info=r.join("."),t.major=r[0]||"0",t.minor=r[1]||"0",t.patch=r[2]||"0",t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var r=["crios","fxios","daumapps"],n=e.userAgent=function(e,n){var i,s,l,o,a=e?e.toLowerCase():"u">typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return{ua:a,browser:(i={},"webkit"===(s=/(dolfin)[ \/]([\w.]+)/.exec(a)||/(edge)[ \/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(tizen)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||["","unknown"])[1]?s=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(a)||/(android)[ \/]([\w._\-]+);/.exec(a)||[s[0],"safari",s[2]]:"mozilla"===s[1]?/trident/.test(a)?s[1]="msie":s[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(a)&&(s[1]="polaris"),i[s[1]]=!0,i.name=s[1],i.version=t(s[2]),i),platform:function(e){var t,r;if(!(!(t=e).match(/linux|windows (nt|98)|macintosh|cros/)||t.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)))return"pc";if((r=e).match(/ipad/)||r.match(/android/)&&!r.match(/mobi|mini|fennec/))return"tablet";return e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)?"mobile":""}(a),os:(l={},"iphone"===(o=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(a)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(a)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(a)||/(android)[ \/]([\w._\-]+);/.exec(a)||!!/android/.test(a)&&["","android","0.0.0"]||!!/(windows)/.test(a)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(a)||/(tizen)[ \/]([\w._\-]+);/.exec(a)||!!/(linux)/.test(a)&&["","linux","0.0.0"]||!!/webos/.test(a)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(a)||/(bada)[ \/]([\w._\-]+)/.exec(a)||!!/bada/.test(a)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(a)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"])[1]||"ipad"===o[1]||"ipod"===o[1]?o[1]="ios":"windows"===o[1]&&"98"===o[2]&&(o[2]="0.98.0"),"cros"===o[1]&&(o[1]="chrome"),l[o[1]]=!0,l.name=o[1],l.version=t(o[2]),l),app:function(e,n){var i={},s=null,l=r;Array.isArray(n)?l=r.concat(n):"string"==typeof n&&(l=r.concat([n]));for(var o=0,a=l.length;o<a&&!(s=RegExp("("+l[o]+")[ \\/]([\\w._\\-]+)").exec(e));o+=1);return s||(s=["",""]),s[1]?(i.isApp=!0,i.name=s[1],i.version=t(s[2])):i.isApp=!1,i}(a,n)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=n(window.navigator.userAgent)||null)}((r.daumtools=r,r.util=r,r))},2458511,e=>{e.v({combobox:"search-filter-module__SHqGLq__combobox",comboboxList:"search-filter-module__SHqGLq__comboboxList",comboboxWrapper:"search-filter-module__SHqGLq__comboboxWrapper",confirm:"search-filter-module__SHqGLq__confirm",empty:"search-filter-module__SHqGLq__empty",filter:"search-filter-module__SHqGLq__filter",firstOption:"search-filter-module__SHqGLq__firstOption",firstOptionInnerButton:"search-filter-module__SHqGLq__firstOptionInnerButton",hide:"search-filter-module__SHqGLq__hide",highlight:"search-filter-module__SHqGLq__highlight",input:"search-filter-module__SHqGLq__input",option:"search-filter-module__SHqGLq__option",suffix:"search-filter-module__SHqGLq__suffix",suggestions:"search-filter-module__SHqGLq__suggestions",textOverlay:"search-filter-module__SHqGLq__textOverlay"})},5431818,e=>{e.v({logRowsContainer:"logs-common-module__Gs96xq__logRowsContainer",logRowsWrapper:"logs-common-module__Gs96xq__logRowsWrapper"})},615673,e=>{e.v({container:"paginated-group-logs-module__kgOb4G__container",hasLogs:"paginated-group-logs-module__kgOb4G__hasLogs"})},7230346,e=>{e.v({logGradient:"group-logs-module__OaUHyW__logGradient",logHeader:"group-logs-module__OaUHyW__logHeader",show:"group-logs-module__OaUHyW__show"})},6687520,e=>{"use strict";let t,r;var n=e.i(2144405),i=e.i(4205214),s=e.i(8660982),l=e.i(8674454),o=e.i(6694387),a=e.i(4991687),u=e.i(5326905),d=e.i(8459493),c=e.i(2504781),f=e.i(455575),h=e.i(6143247),g=e.i(9722978),p=e.i(4004502),m=e.i(8139291),x=e.i(992159),y=e.i(5677444),_=e.i(7917902),v=e.i(3322724),C=e.i(2323372),b=e.i(1717203),j=e.i(7557283),S=e.i(6352514),w=e.i(1853611),k=e.i(9202779),N=e.i(6891161),E=e.i(3869476),T=e.i(7580732),L=e.i(850302),M=e.i(8042625),D=e.i(4244280),A=e.i(1138941),O=e.i(6060673),I=e.i(7033605),F=e.i(8306707),R=e.i(3813596);let P={rows:[]};function B(e){let{attributeName:t,attributeNameSearchQuery:r,forceEmpty:n=!1,allowRequestIds:i=!1,selectedValues:s,keepPreviousData:l=!0}=e,{data:o}=(0,O.useProject)((0,A.useProjectIdOrName)()),{user:a,team:u,isLoading:d}=(0,_.useAccount)(),{startDate:c,endDate:f,search:h,deploymentIds:g,requestIds:p,myLogs:m,hasTraces:x,useClickHouseLogs:y,useProgressiveChunking:v}=(0,I.useLogsApiParams)(),C=f??new Date,b=(0,R.useAbortableFetcher)(async(e,t)=>{let r=await fetch(e,{signal:t});if(!r.ok)throw Error((await r.json()).message);return r.json()},{rows:[]}),j=(0,L.default)(()=>{if(d||!t||n||!i&&p&&p.length>0||!o)return;let e=null!==u?u.id:null,l=null!==a?a?.uid:null,f=e||l;if(null===f)return;let _=(0,M.encode)({attributeName:t,attributeNameSearchQuery:r||void 0,...(0,F.buildLogsFilterParams)({projectId:o.id,ownerId:f,startDate:c.getTime(),endDate:C.getTime(),search:h,defaultDeploymentIds:g,myLogs:m,hasTraces:x,useClickHouseLogs:y,useProgressiveChunking:v}),selectedValues:function(e){if(e&&0!==e.length)return e.map(e=>e.includes(",")?`"${e}"`:e).join(",")}(s)});return`${D.API_LOGS}/request-logs/filter-values${_}`},b,{keepPreviousData:l,revalidateOnFocus:!1});return n?{...j,data:P}:j}var q=e.i(1935298),z=e.i(6818658),W=e.i(3196486);let $={hobby:"pastHour",pro:"pastDay",enterprise:"past3Days"},U=()=>{let{project:e}=(0,y.useParams)()??{},t=(0,O.useProject)(e),r=t.data?.id,{user:n,team:i}=(0,_.useAccount)(),l=i?.billing?.plan??"hobby",o=(0,s.useCallback)(()=>{r&&n?.uid&&(0,W.sendToSnowflake)(z.Topic.VercelAppV0LogPageVisited,{project_id:r,team_id:i?.id,user_id:n.uid},"vercel-app")},[r,n?.uid,i?.id]);return{trackLogPageVisit:o,trackFilterUse:(0,s.useCallback)(e=>{r&&n&&("timeline"===e.filter&&"maximum"===e.value[0]&&(e.value[0]=$[l]),(0,W.sendToSnowflake)(z.Topic.VercelAppV0LogFilterQuery,{project_id:r,team_id:i?.id,user_id:n.uid,event_trigger:e.eventTrigger,filter_terms:e.value.map(t=>({field:e.filter,operator:"=",value:t||void 0}))},"vercel-app"))},[r,n,i,l]),trackLogPresetRun:(0,s.useCallback)(e=>{let{presetId:t}=e;r&&n&&(0,W.sendToSnowflake)(z.Topic.VercelAppV0LogPresetRun,{project_id:r,team_id:i?.id,user_id:n.uid,preset_id:t,preset_type:t.endsWith("_t")?"team":"personal"},"vercel-app")},[r,n,i])}};var V=e.i(7209054),K=e.i(6209667);function H(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.levels||[],{data:o,isLoading:a}=B({attributeName:"level",search:n}),u=(0,s.useMemo)(()=>{let e;return e=o?.rows,V.GROUP_LEVEL_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return r||a||(r=0),{label:t.label,value:t.value,count:r}}).sort((e,t)=>Number(t.count)-Number(e.count))},[o,a]),d=u.length,{trackFilterUse:c}=U();return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length,"data-testid":(0,p.tid)("group-logs","level-filter"),defaultExpanded:!0,onClearFilter:()=>r("levels"),title:"Contains Console Level",children:(0,i.jsx)(K.LogFilter,{hideSearch:!0,isCountLoading:a,onChange:e=>{t("levels",e.sort()),c({eventTrigger:"filter click",filter:"levels",value:e.sort()})},options:u,selectedOptions:l,totalAvailableOptions:d})})}function G(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.sources??V.DEFAULT_SOURCES,[o,a]=(0,s.useState)(!1),{data:u,isLoading:d}=B({attributeName:"source",search:n,forceEmpty:!o}),{trackFilterUse:c}=U(),f=(0,s.useMemo)(()=>(e=>{let t=[];for(let r of V.SOURCE_OPTIONS){let n=e?.find(e=>e.attributeValue===r.value)?.total;(!r.optional||n)&&t.push({label:r.label,value:r.value,icon:r.icon,count:n??0})}return t})(u?.rows??[]),[u]),h=f.length,m=(0,s.useMemo)(()=>{if(l.length!==V.DEFAULT_SOURCES.length)return!0;let e=[...l].sort(),t=[...V.DEFAULT_SOURCES].sort();return!e.every((e,r)=>e===t[r])},[l]);return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,g.clsx)(q.default.filterContent),count:m?l.length:void 0,"data-testid":(0,p.tid)("logs","source-filter"),onClearFilter:()=>r("sources"),onExpand:()=>a(!0),title:"Resource",children:(0,i.jsx)(K.LogFilter,{hideSearch:!0,isCountLoading:d,onChange:e=>{t("sources",e.sort()),c({eventTrigger:"filter click",filter:"sources",value:e.sort()})},options:f,selectedOptions:l,totalAvailableOptions:h})})}function J(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.requestTags||[],[o,a]=(0,s.useState)(!1),{data:u,isLoading:d}=B({attributeName:"requestTags",search:n,forceEmpty:!o}),{trackFilterUse:c}=U(),f=(0,s.useMemo)(()=>{let e;return e=u?.rows??[],V.REQUEST_TAGS_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:r??0}})},[u]),h=f.length;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,g.clsx)(q.default.filterContent),count:l.length,"data-testid":(0,p.tid)("logs","request-tags-filter"),onClearFilter:()=>r("requestTags"),onExpand:()=>a(!0),title:"Request Type",children:(0,i.jsx)(K.LogFilter,{hideSearch:!0,isCountLoading:d,onChange:e=>{t("requestTags",e.sort()),c({eventTrigger:"filter click",filter:"requestTags",value:e.sort()})},options:f,selectedOptions:l,totalAvailableOptions:h})})}function Z(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.domains||[],[o,a]=(0,s.useState)(""),{trackFilterUse:u}=U(),[d,c]=(0,s.useState)(!1),{data:f,isLoading:h}=B({attributeName:"domain",attributeNameSearchQuery:o,search:n,forceEmpty:!d,selectedValues:l}),g=!f,m=(0,s.useMemo)(()=>{let e=f?.rows??[];return l.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(K.generateFilterOption)},[f,l]),x=f?.availableOptions??0;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length,"data-testid":(0,p.tid)("group-logs","domain-filter"),onClearFilter:()=>r("domains"),onExpand:()=>c(!0),title:"Host",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:g,isLoading:h,onChange:e=>{t("domains",e.sort()),u({eventTrigger:"filter click",filter:"domains",value:Array(e.length).fill("")})},onSearch:a,options:m,searchId:"search-hosts",searchLabel:"Search hosts",searchPlaceholder:"Search hosts…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:x})})}var X=e.i(3306538),Q=e.i(6094744),Y=e.i(3981247);e.i(3182268);var ee=e.i(7849855),et=e.i(4396019);function er(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.deploymentIds||[],{isDeploymentEditable:o}=(0,Q.usePageConfig)(),{trackFilterUse:a}=U(),[u,d]=(0,s.useState)(""),[c,f]=(0,s.useState)(!1),{data:h,isLoading:g}=B({attributeName:"deploymentId",attributeNameSearchQuery:u,search:n,forceEmpty:!o||!c,selectedValues:l}),{teamSlug:m,projectSlug:x}=(0,ee.useProjectAndTeamSlug)(),{data:y}=(0,Y.useRollingRelease)({teamIdOrSlug:m,projectSlug:x}),{deployment:_}=(0,et.useProjectProductionDeployment)(x??void 0),v=y?.rollingRelease,C=v?.canaryDeployment?.id,b=!l,j=(0,s.useMemo)(()=>{let e=[];return h?.rows?.forEach(t=>{let r=t.attributeValue,n=_?.id===r,s=C&&r===C;n?e.push({label:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,i.jsx)(X.Badge,{size:"sm",variant:"green-subtle",children:"Current"}),(0,i.jsx)("span",{children:r})]}),value:`${r}`,count:t.total}):s?e.push({label:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,i.jsx)(X.Badge,{size:"sm",variant:"blue-subtle",children:"Canary"}),(0,i.jsx)("span",{children:r})]}),value:`${r}`,count:t.total}):e.push({label:r,value:`${r}`,count:t.total})}),e.sort((e,t)=>{let r=_?.id===e.value,n=C&&e.value===C,i=_?.id===t.value,s=C&&t.value===C;return r&&!i?-1:!r&&i?1:n&&!s?-1:!n&&s?1:0})},[C,h?.rows,_?.id]),S=h?.availableOptions??0;return o?(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length||void 0,"data-testid":(0,p.tid)("logs","deployment-filter"),onClearFilter:()=>r("deploymentIds"),onExpand:()=>f(!0),title:"Deployment ID",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:b,isLoading:g,onChange:e=>{t("deploymentIds",e.sort()),a({eventTrigger:"filter click",filter:"deploymentIds",value:Array(e.length).fill("")})},onSearch:d,options:j,searchId:"search-deployment-ids",searchLabel:"Search deployment IDs",searchPlaceholder:"Search deployment IDs…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:S})}):null}function en(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.routes||[],[o,a]=(0,s.useState)(""),{trackFilterUse:u}=U(),{functionFilterDefaultExpanded:d}=(0,Q.usePageConfig)(),[c,f]=(0,s.useState)(d),h=(0,s.useMemo)(()=>l.map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e),[l]),{data:g,isLoading:m}=B({attributeName:"route",attributeNameSearchQuery:o,search:n,forceEmpty:!c,selectedValues:h}),x=!g,y=(0,s.useMemo)(()=>{let e=g?.rows??[];return h.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(K.generateFilterOption)},[g,h]),_=g?.availableOptions??0;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:h.length,"data-testid":(0,p.tid)("logs","route-filter"),defaultExpanded:d,onClearFilter:()=>r("routes"),onExpand:()=>f(!0),title:"Route",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:x,isLoading:m,onChange:e=>{t("routes",e.map(e=>e.includes(",")?`"${e}"`:e).sort()),u({eventTrigger:"filter click",filter:"routes",value:Array(e.length).fill("")})},onSearch:a,options:y,searchId:"search-routes",searchLabel:"Search Routes",searchPlaceholder:"Search Routes…",selectedOptions:h,showSelectedOptionsAtTop:!0,totalAvailableOptions:_})})}var ei=e.i(5627633),es=e.i(3793583),el=e.i(1794286),eo=e.i(5255926),ea=e.i(5338940),eu=e.i(8063555);e.i(6483798);var ed=e.i(8287059);e.i(6728635);var ec=e.i(2630141),ef=e.i(294613);function eh(){let e=(0,ed.useOpenUpgradeModal)(),t=(0,ec.useOpenEnableModal)(),{team:r}=(0,ea.useTeam)(),{maxTimeRange:n,maxRetention:s,isLoading:l,teamId:o,hasExtendedTimeline:a}=(0,eu.useUserRetention)(),{state:{startDate:u,endDate:d},setState:c}=(0,I.useLogsQueryState)(),{startDate:f,endDate:g,timeline:m}=(0,I.useLogsApiParams)(),{trackFilterUse:x}=U(),y=Date.now(),_=(0,es.sub)(y,n).getTime(),v=u&&d?void 0:m,{presets:C,presetValue:b}=(()=>{let i,s=(i=new Date,[{key:"past30Minutes",text:"Last 30 minutes",start:(0,es.sub)(i,{minutes:30}),end:i},{key:"pastHour",text:"Last hour",start:(0,es.sub)(i,{hours:1}),end:i},{key:"past12Hours",text:"Last 12 hours",start:(0,es.sub)(i,{hours:12}),end:i},{key:"pastDay",text:"Last day",start:(0,es.sub)(i,{days:1}),end:i},{key:"past3Days",text:"Last 3 days",start:(0,es.sub)(i,{days:3}),end:i},{key:"pastWeek",text:"Last week",start:(0,es.sub)(i,{weeks:1}),end:i},{key:"past2Weeks",text:"Last 2 weeks",start:(0,es.sub)(i,{weeks:2}),end:i}]),l=r?.billing?.plan??"hobby",u=s.map(e=>{let t=e.start.getTime(),r=!1,n=null;if(!a&&t<_)if(r=!0,"hobby"===l){let e=(0,ef.getMaxRetention)(!1,"pro");n=t>=(0,es.sub)(y,e).getTime()?"pro":"observability-plus"}else n="observability-plus";return{...e,key:e.start.getTime()===_?"maximum":e.key,needsUpgrade:r,upgradeType:n}});u.some(e=>e.start.getTime()===_)||u.push({key:"maximum",text:`Last ${(0,ei.formatDuration)(n)}`,start:new Date(_),end:new Date,needsUpgrade:!1,upgradeType:null});let d=v?u.find(e=>e.key===v):void 0,f=[{presets:u.filter(e=>!e.needsUpgrade)}];if("hobby"===l){let t=u.filter(e=>e.needsUpgrade&&"pro"===e.upgradeType).map(t=>({...t,onClick:()=>{e({teamHint:o,source:"logs-timeline-filter",onConversionSuccess:()=>{c({preset:null,timeline:t.key})}})}}));t.length>0&&f.push({title:"Upgrade to Pro",divider:!0,presets:t})}let h=u.filter(e=>e.needsUpgrade&&"observability-plus"===e.upgradeType).map(e=>({...e,onClick:()=>{t({via:"logs-date-range-select",upgradeUseCase:"retention"})}}));return h.length>0&&f.push({title:"Observability Plus",divider:!0,presets:h}),{presets:f,presetValue:d}})();return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,h.cn)(q.default.filterContent,"[&>*>:first-child]:max-w-[calc(100%_-_40px)]"),"data-testid":(0,p.tid)("logs","timeline-filter"),defaultExpanded:!0,title:"Timeline",children:"maximum"===m&&l?(0,i.jsx)(eo.Skeleton,{height:40,width:"100%"}):(0,i.jsx)(el.Calendar,{allowClear:!1,compact:!0,maxValue:y,minValue:(0,es.sub)(y,s).getTime(),maxDuration:n,value:b||{start:u??f,end:d??g},width:"100%",dataTestId:(0,p.tid)("group-logs","calendar"),onChange:(e,t)=>{x({eventTrigger:"filter click",filter:"timeline",value:[t||"custom"]}),t?c({preset:null,timeline:t}):c({preset:null,startDate:new Date(e.start),endDate:new Date(e.end)})},presets:C,presetKey:v})})}var eg=e.i(9338892),ep=e.i(5869491);function em(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.statusCodes||[],[o,a]=(0,s.useState)(""),{trackFilterUse:u}=U(),[d,c]=(0,s.useState)(!1),{data:f,isLoading:h}=B({attributeName:"statusCode",search:n,forceEmpty:!d,selectedValues:l}),g=!f,m=(0,s.useMemo)(()=>(f?.rows??[]).reduce((e,t)=>{if("-1"!==t.attributeValue){let r=(e=>{let{attributeValue:t,total:r}=e,n="None"!==t?ep.statusCodes[t]:void 0,i=n?.message??"";return{label:`${t} ${i}`,value:`${t}`,count:r}})(t);e.push(r)}return e},[]),[f?.rows]),x=m.length;l.filter(e=>!m.find(t=>String(t.value)===e)).forEach(e=>{m.push({label:e,value:e,count:0})});let y=(0,s.useMemo)(()=>o?(0,eg.matchSorter)(m,o,{keys:["label"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):m,[m,o]);return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length,"data-testid":(0,p.tid)("logs","status-filter"),onClearFilter:()=>r("statusCodes"),onExpand:()=>c(!0),title:"Status Code",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:g,isLoading:h,onChange:e=>{t("statusCodes",e.sort()),u({eventTrigger:"filter click",filter:"responseStatusCodes",value:e.sort()})},onSearch:a,options:y,searchId:"search-status",searchLabel:"Search status",searchPlaceholder:"Search status…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:x})})}function ex(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.requestPaths||[],[o,a]=(0,s.useState)(""),{trackFilterUse:u}=U(),[d,c]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>l.map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e),[l]),{data:h,isLoading:g}=B({attributeName:"requestPath",attributeNameSearchQuery:o,search:n,forceEmpty:!d,selectedValues:f}),m=!h,x=(0,s.useMemo)(()=>{let e=h?.rows??[];return f.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(K.generateFilterOption)},[h,f]),y=h?.availableOptions??0;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:f.length,"data-testid":(0,p.tid)("logs","request-path-filter"),onClearFilter:()=>r("requestPaths"),onExpand:()=>c(!0),title:"Request Path",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:m,isLoading:g,onChange:e=>{t("requestPaths",e.map(e=>e.includes(",")?`"${e}"`:e).sort()),u({eventTrigger:"filter click",filter:"requestPaths",value:Array(e.length).fill("")})},onSearch:a,options:x,searchId:"search-request-paths",searchLabel:"Search request paths",searchPlaceholder:"Search request paths…",selectedOptions:f,showSelectedOptionsAtTop:!0,totalAvailableOptions:y})})}function ey(e){let{isLoadingEnvs:t,allEnvironments:r}=e,{filters:n,setFilter:l,clearFilter:o,search:a}=(0,I.useLogsSearchState)(),u=n.environments||[];r=r.filter(e=>"production"===e.id||"preview"===e.id);let{trackFilterUse:d}=U(),[c,f]=(0,s.useState)(!1),{data:h,isLoading:g}=B({attributeName:"environment",search:a,forceEmpty:!c}),p=(0,s.useMemo)(()=>{let e;return e=h?.rows,r.map(t=>{let r=t.name??t.slug,n=e?.find(e=>e.attributeValue===t.id)?.total??0;return{label:r,value:t.id,count:n}}).sort((e,t)=>t.count-e.count)},[h,r]),m=(0,s.useMemo)(()=>g&&!!t,[g,t]),x=p.length;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:u.length,onClearFilter:()=>o("environments"),onExpand:()=>f(!0),title:"Environment",children:(0,i.jsx)(K.LogFilter,{hideSearch:!0,isCountLoading:m,onChange:e=>{l("environments",e.sort()),d({eventTrigger:"filter click",filter:"environments",value:e.sort()})},options:p,searchId:"search-environment",searchLabel:"Search environment",searchPlaceholder:"Search environment…",selectedOptions:u,totalAvailableOptions:x})})}function e_(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.branches||[],{trackFilterUse:o}=U(),[a,u]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),{data:f,isLoading:h}=B({attributeName:"branch",attributeNameSearchQuery:d,search:n,forceEmpty:!a,selectedValues:l}),g=!f,p=(0,s.useMemo)(()=>{let e=f?.rows??[];return l.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(K.generateFilterOption)},[f,l]),m=f?.availableOptions??0;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length,onClearFilter:()=>r("branches"),onExpand:()=>u(!0),title:"Branch",children:(0,i.jsx)(K.LogFilter,{isFirstLoading:g,isLoading:h,onChange:e=>{t("branches",e.sort()),o({eventTrigger:"filter click",filter:"branches",value:Array(e.length).fill("")})},onSearch:c,options:p,searchId:"search-branches",searchLabel:"Search branches",searchPlaceholder:"Search branches…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:m})})}function ev(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.caches||[],[o,a]=(0,s.useState)(!1),{data:u,isLoading:d}=B({attributeName:"cache",search:n,forceEmpty:!o}),c=!u,f=(0,s.useMemo)(()=>{let e=u?.rows??[];return l.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(K.generateFilterOption)},[u,l]),h=u?.availableOptions??0,{trackFilterUse:g}=U();return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:q.default.filterContent,count:l.length,onClearFilter:()=>r("caches"),onExpand:()=>a(!0),title:"Cache",children:(0,i.jsx)(K.LogFilter,{hideSearch:!0,isLoading:d,isFirstLoading:c,onChange:e=>{t("caches",e.sort()),g({eventTrigger:"filter click",filter:"vercelCaches",value:e.sort()})},options:f,searchId:"search-cache",searchLabel:"Search cache",searchPlaceholder:"Search cache…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:h})})}function eC(){let{filters:e,setFilter:t,clearFilter:r,search:n}=(0,I.useLogsSearchState)(),l=e.requestMethods||[],[o,a]=(0,s.useState)(""),{trackFilterUse:u}=U(),[d,c]=(0,s.useState)(!1),{data:f,isLoading:h}=B({attributeName:"requestMethod",search:n,forceEmpty:!d}),m=(0,s.useMemo)(()=>{let e,t=(e=f?.rows,V.REQUEST_METHOD_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:r??0}}).sort((e,t)=>t.count-e.count));return o?(0,eg.matchSorter)(t,o,{keys:["value"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):t},[o,f]),x=f?.availableOptions??0;return(0,i.jsx)(T.Disclosure,{buttonClassName:q.default.fakeSideBorders,contentClassName:(0,g.clsx)(q.default.filterContent),count:l.length,"data-testid":(0,p.tid)("logs","request-method-filter"),onClearFilter:()=>r("requestMethods"),onExpand:()=>c(!0),title:"Request Method",children:(0,i.jsx)(K.LogFilter,{isCountLoading:h,onChange:e=>{t("requestMethods",e.sort()),u({eventTrigger:"filter click",filter:"requestMethods",value:e.sort()})},onSearch:a,options:m,searchId:"search-request-method",searchLabel:"Search request methods",searchPlaceholder:"Search request methods…",selectedOptions:l,showSelectedOptionsAtTop:!0,totalAvailableOptions:x})})}function eb(e){let{isLoadingEnvs:t,allEnvironments:r}=e,{hasActiveFilters:n}=(0,I.useLogsQueryState)();return(0,i.jsxs)(E.SidebarPortal,{children:[(0,i.jsxs)("div",{className:(0,h.cn)(q.default.titleContainer,"flex flex-row justify-between items-center"),children:[(0,i.jsx)("div",{children:(0,i.jsx)(ek,{})}),(0,i.jsx)("div",{className:"flex flex-row gap-2",children:(0,i.jsx)(eE,{disabled:!n(),size:"small"})})]}),(0,i.jsx)(eN,{allEnvironments:r,isLoadingEnvs:t})]})}function ej(e){let{isLoadingEnvs:t,allEnvironments:r,active:n,...l}=e,[o,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!n){let e=setTimeout(()=>{a(!0)},500);return()=>clearTimeout(e)}let e=requestAnimationFrame(()=>{a(!1)});return()=>cancelAnimationFrame(e)},[n]),!n&&o)?null:(0,i.jsx)(eS,{active:n,allEnvironments:r,isLoadingEnvs:t,...l})}function eS(e){let{isLoadingEnvs:t,allEnvironments:r,active:n,onDismiss:s}=e,{hasActiveFilters:l}=(0,I.useLogsQueryState)();return(0,i.jsxs)(N.Modal.Modal,{active:n,"data-testid":(0,p.tid)("group-logs","filters-modal"),drawerHeight:"max",drawerVerticalScroll:!0,onClickOutside:s,children:[(0,i.jsx)(N.Modal.Body,{className:q.default.modalBody,children:(0,i.jsxs)("div",{className:q.default.modalMain,children:[(0,i.jsx)("div",{className:(0,g.clsx)("geist-show-on-mobile flex flex-col gap-2",q.default.filterContent,q.default.first),children:(0,i.jsx)(eE,{disabled:!l()})}),(0,i.jsx)(eN,{allEnvironments:r,isLoadingEnvs:t})]})}),(0,i.jsx)(N.Modal.Actions,{children:(0,i.jsx)(N.Modal.Action,{"data-testid":(0,p.tid)("group-logs","filters-modal-apply"),fullWidth:!0,onClick:s,children:"Apply"})})]})}function ew(e){let{className:t,onClick:r}=e,{hasActiveFilters:n}=(0,I.useLogsQueryState)();return(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)(c.Button,{"aria-label":"Log Filters",className:q.default.modalActiveButton,"data-testid":(0,p.tid)("group-logs","filters-modal-button"),passthroughOnClick:r,shape:"square",svgOnly:!0,type:"secondary",children:(0,i.jsx)(k.SettingsSliders,{})}),n()&&(0,i.jsx)("div",{className:q.default.modalActiveButtonDot})]})}function ek(){return(0,i.jsx)("div",{className:(0,h.cn)(q.default.title,"text-heading-14"),children:"Filters"})}function eN(e){let{isLoadingEnvs:t,allEnvironments:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eh,{}),(0,i.jsx)(H,{}),(0,i.jsx)(G,{}),(0,i.jsx)(ey,{allEnvironments:r,isLoadingEnvs:t}),(0,i.jsx)(en,{}),(0,i.jsx)(ex,{}),(0,i.jsx)(em,{}),(0,i.jsx)(J,{}),(0,i.jsx)(Z,{}),(0,i.jsx)(eC,{}),(0,i.jsx)(ev,{}),(0,i.jsx)(e_,{}),(0,i.jsx)(er,{})]})}function eE(e){let{onClick:t,...r}=e,{setState:n}=(0,I.useLogsQueryState)(),{isDeploymentEditable:s}=(0,Q.usePageConfig)();return(0,i.jsx)(c.Button,{onClick:e=>{let r;r={startDate:void 0,endDate:void 0,page:1,timeline:void 0,search:"",myLogs:void 0,hasTraces:void 0},s&&(r.deploymentDomains=void 0,r.deploymentIds=void 0),n(r),t?.(e)},touchEventWorkaround:!0,type:"secondary",...r,children:"Reset"})}var eT=e.i(1265647),eL=e.i(4469437),eM=e.i(7511168),eD=e.i(1201436),eA=e.i(1933683),eO=e.i(4141852),eI=e.i(4333930),eF=e.i(787358),eR=e.i(4796642),eP=e.i(9318476),eB=e.i(8004707),eq=e.i(8713146),ez=e.i(109803),eW=e.i(9138164),e$=e.i(1000031),eU=e.i(1802690),eV=e.i(2560270),eK=e.i(1438473),eH=e.i(3487134),eG=e.i(7399351),eJ=e.i(6942035),eZ=e.i(1230902),eX=e.i(8923565),eQ=e.i(5257834),eY=e.i(9334638);let e0=(0,eY.withNewIcon)(`<path d="M14.13 5.26096C14.0999 5.22807 14.0679 5.19523 14.0358 5.16429C14.0038 5.13332 13.9737 5.09853 13.9416 5.06759C13.9096 5.03666 13.8794 5.00187 13.8474 4.9709C13.8154 4.93996 13.7852 4.90517 13.7532 4.87423C13.7212 4.8433 13.691 4.80847 13.659 4.77753C13.627 4.7466 13.5968 4.71181 13.5648 4.68087C13.5328 4.64994 13.5026 4.61511 13.4706 4.58417C14.4052 5.52678 14.9406 6.80909 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644C5.71341 13.9644 3.76137 13.1464 2.46318 11.8644L3.12265 12.5412C4.41895 13.8773 6.41432 14.7378 8.64895 14.7378C12.5454 14.7378 15.7147 12.1312 15.7147 8.93683C15.7147 7.57169 15.1419 6.27808 14.13 5.26096Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M14.49 8.15373C14.49 11.0948 11.5375 13.479 7.89534 13.479C4.25319 13.479 1.30068 11.0948 1.30068 8.15373C1.30068 6.33028 2.43119 4.71954 4.16841 3.76433C5.90564 2.80909 6.98716 1.83066 7.89534 1.83066C8.80351 1.83066 9.57979 2.62926 11.6222 3.76433C13.3595 4.71954 14.49 6.33028 14.49 8.15373Z" fill="#FBF0DF" style="fill:#FBF0DF;fill:color(display-p3 0.9843 0.9412 0.8745);fill-opacity:1;"/>
<path d="M14.49 8.15373C14.489 7.77591 14.4385 7.39996 14.3394 7.03608C13.825 13.4751 6.17145 13.7845 3.1624 11.8586C4.51507 12.9346 6.18411 13.506 7.89534 13.479C11.5318 13.479 14.49 11.091 14.49 8.15373Z" fill="#F6DECE" style="fill:#F6DECE;fill:color(display-p3 0.9647 0.8706 0.8078);fill-opacity:1;"/>
<path d="M5.35734 3.41046C6.19956 2.89224 7.31875 1.91961 8.41915 1.91768C8.24984 1.86152 8.07322 1.83218 7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 8.23108 1.30068 8.30844 1.30068 8.38384C2.4425 4.24389 4.51699 3.92867 5.35734 3.41046Z" fill="#FFFEFC" style="fill:#FFFEFC;fill:color(display-p3 1.0000 0.9961 0.9882);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.35278 2.31988C7.35542 2.77646 7.26204 3.22825 7.07894 3.64439C6.89587 4.06053 6.62744 4.43122 6.29199 4.73117C6.23925 4.77951 6.2807 4.8723 6.34853 4.84523C6.98349 4.59192 7.84079 3.83392 7.47905 2.30441C7.46397 2.2174 7.35278 2.2406 7.35278 2.31988ZM7.78051 2.31988C8.01106 2.70592 8.15752 3.13856 8.20986 3.58814C8.26224 4.03773 8.21924 4.4936 8.08385 4.92454C8.06123 4.99221 8.14226 5.05022 8.1875 4.99413C8.60011 4.4527 8.95998 3.3776 7.88225 2.2174C7.82759 2.16712 7.74281 2.24447 7.78051 2.31215V2.31988ZM8.30053 2.28701C8.66158 2.54932 8.96359 2.88804 9.18623 3.28031C9.4089 3.67259 9.54698 4.10931 9.59119 4.56099C9.58928 4.57728 9.59355 4.59368 9.60311 4.60682C9.61267 4.61995 9.6268 4.62881 9.64254 4.63153C9.65832 4.63425 9.67447 4.63069 9.68771 4.62149C9.70095 4.61233 9.71026 4.59828 9.71368 4.58228C9.88703 3.90741 9.78904 2.75689 8.36272 2.15939C8.28736 2.12845 8.23837 2.23287 8.30053 2.27928V2.28701ZM4.82235 4.29803C5.25177 4.16636 5.64942 3.94331 5.98932 3.64348C6.32922 3.34364 6.60375 2.97369 6.79506 2.55772C6.82901 2.48811 6.93637 2.51518 6.91941 2.59253C6.59346 4.13947 5.50251 4.46237 4.82422 4.41985C4.75261 4.42177 4.75452 4.31929 4.82235 4.29803Z" fill="#CCBEA7" style="fill:#CCBEA7;fill:color(display-p3 0.8000 0.7451 0.6549);fill-opacity:1;"/>
<path d="M7.89529 13.9644C3.9988 13.9644 0.82959 11.3578 0.82959 8.15375C0.82959 6.2201 1.99401 4.41596 3.94413 3.33506C4.50939 3.02568 4.99362 2.71436 5.42511 2.44171C5.66254 2.29088 5.88672 2.14973 6.10344 2.01824C6.76477 1.61604 7.33003 1.34726 7.89529 1.34726C8.46055 1.34726 8.9542 1.5793 9.5722 1.95443C9.76063 2.06465 9.94903 2.18453 10.1506 2.31602C10.6198 2.61381 11.1492 2.95026 11.8464 3.33506C13.7965 4.41596 14.961 6.21812 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644ZM7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 11.091 4.2588 13.481 7.89529 13.481C11.5317 13.481 14.49 11.091 14.49 8.15373C14.49 6.39796 13.4179 4.75629 11.6222 3.76433C10.91 3.37759 10.3541 3.01408 9.90382 2.72789C9.69843 2.59834 9.51004 2.47845 9.33856 2.3721C8.76764 2.02404 8.35128 1.83066 7.89534 1.83066Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M9.22342 9.56532C9.13879 9.92111 8.94609 10.24 8.67324 10.4761C8.46837 10.6799 8.20317 10.8078 7.91955 10.8396C7.62743 10.8128 7.35293 10.6846 7.1414 10.4761C6.87131 10.2389 6.68137 9.92012 6.59876 9.56532C6.596 9.54428 6.59802 9.52284 6.60461 9.50268C6.61115 9.48253 6.62215 9.46421 6.63672 9.44909C6.65125 9.43398 6.66897 9.42246 6.68854 9.41547C6.70807 9.40849 6.72893 9.40617 6.74949 9.40871H9.07456C9.09498 9.40646 9.11561 9.40904 9.13492 9.41617C9.15423 9.42331 9.1717 9.43486 9.18605 9.44994C9.20036 9.46502 9.21117 9.48323 9.21765 9.50324C9.22412 9.52321 9.22611 9.54443 9.22342 9.56532Z" fill="#B71422" style="fill:#B71422;fill:color(display-p3 0.7176 0.0784 0.1333);fill-opacity:1;"/>
<path d="M7.14176 10.4916C7.35285 10.7002 7.62636 10.8297 7.91804 10.8589C8.20905 10.8292 8.48186 10.6998 8.69244 10.4916C8.75982 10.4271 8.82275 10.358 8.88087 10.2847C8.76479 10.1495 8.62299 10.0402 8.46424 9.96337C8.30546 9.88653 8.13306 9.84387 7.95761 9.83798C7.76988 9.84254 7.58608 9.89385 7.42196 9.9875C7.25784 10.0811 7.11837 10.2143 7.01553 10.3755C7.05886 10.4162 7.09656 10.4548 7.14176 10.4916Z" fill="#FF6164" style="fill:#FF6164;fill:color(display-p3 1.0000 0.3804 0.3922);fill-opacity:1;"/>
<path d="M7.17169 10.3388C7.26507 10.2149 7.38465 10.1143 7.52141 10.0446C7.65816 9.97496 7.80849 9.938 7.96117 9.93656C8.24332 9.9451 8.51215 10.0617 8.71482 10.2633C8.75815 10.215 8.7996 10.1647 8.83918 10.1144C8.59948 9.88018 8.28271 9.74696 7.95171 9.74125C7.77487 9.74284 7.60052 9.78454 7.44122 9.86344C7.28192 9.94234 7.1416 10.0565 7.03037 10.1976C7.07491 10.2473 7.1221 10.2944 7.17169 10.3388Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M7.91204 10.9556C7.59808 10.9274 7.30261 10.7911 7.07357 10.5689C6.78189 10.3157 6.57661 9.97363 6.4876 9.59239C6.4812 9.55848 6.48231 9.5235 6.49077 9.49003C6.49922 9.45659 6.51489 9.42548 6.53659 9.39903C6.56242 9.36703 6.595 9.3415 6.6319 9.32444C6.66883 9.30733 6.70903 9.29913 6.74949 9.30042H9.07456C9.11499 9.29954 9.15508 9.30796 9.1919 9.32503C9.22875 9.34205 9.26138 9.36736 9.28749 9.39903C9.30897 9.42559 9.32435 9.45674 9.33251 9.49021C9.34064 9.52368 9.34138 9.55863 9.33457 9.59239C9.24556 9.97363 9.04028 10.3157 8.7486 10.5689C8.52008 10.7907 8.22535 10.927 7.91204 10.9556ZM6.74949 9.52471C6.71933 9.52471 6.71182 9.53825 6.70991 9.54211C6.78958 9.8727 6.96974 10.1687 7.2243 10.3871C7.41045 10.5753 7.65248 10.6944 7.91204 10.7255C8.17091 10.6948 8.41268 10.5772 8.59975 10.391C8.85354 10.1722 9.033 9.87627 9.11226 9.54601C9.10814 9.53979 9.10244 9.5349 9.09579 9.53185C9.08917 9.52876 9.08181 9.52766 9.07456 9.52857L6.74949 9.52471Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M10.7631 9.68522C11.3718 9.68522 11.8653 9.3874 11.8653 9.02002C11.8653 8.65265 11.3718 8.35483 10.7631 8.35483C10.1543 8.35483 9.66084 8.65265 9.66084 9.02002C9.66084 9.3874 10.1543 9.68522 10.7631 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path d="M5.05995 9.68522C5.66872 9.68522 6.16222 9.3874 6.16222 9.02002C6.16222 8.65265 5.66872 8.35483 5.05995 8.35483C4.45121 8.35483 3.95772 8.65265 3.95772 9.02002C3.95772 9.3874 4.45121 9.68522 5.05995 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.57759 8.75319C5.78302 8.7536 5.98392 8.69144 6.15492 8.57458C6.32588 8.45773 6.45925 8.29147 6.53811 8.09682C6.61697 7.90218 6.63782 7.68789 6.59795 7.48106C6.55812 7.27428 6.4594 7.08426 6.31426 6.93504C6.16915 6.78585 5.98418 6.68419 5.78272 6.64292C5.58127 6.60165 5.37246 6.62265 5.18263 6.70321C4.99284 6.78379 4.83056 6.92036 4.71643 7.09563C4.60226 7.27086 4.54131 7.47694 4.54131 7.68774C4.54131 7.97 4.65044 8.24071 4.84472 8.44044C5.039 8.6402 5.30258 8.75268 5.57759 8.75319ZM10.2447 8.75319C10.4504 8.75474 10.6518 8.69353 10.8236 8.57741C10.9953 8.46126 11.1295 8.29541 11.2093 8.10087C11.289 7.90633 11.3106 7.69186 11.2714 7.48467C11.2322 7.27748 11.1339 7.08691 10.9891 6.93714C10.8442 6.78736 10.6592 6.68511 10.4576 6.64336C10.256 6.60165 10.0469 6.62229 9.85673 6.70269C9.66661 6.7831 9.50399 6.91967 9.3896 7.09504C9.27518 7.27042 9.21408 7.47669 9.21408 7.68774C9.21357 7.96916 9.32178 8.23928 9.51495 8.43897C9.70813 8.63869 9.97053 8.75165 10.2447 8.75319Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25759 7.75539C5.33479 7.7558 5.41042 7.73262 5.47479 7.68889C5.53919 7.64512 5.58947 7.58277 5.61926 7.50965C5.64909 7.43657 5.65707 7.35602 5.64225 7.27822C5.62739 7.20047 5.59039 7.12896 5.53592 7.0728C5.48144 7.01663 5.41196 6.97831 5.33627 6.96271C5.26053 6.94711 5.18204 6.95491 5.11065 6.98515C5.03929 7.01538 4.97827 7.06669 4.93531 7.13257C4.89239 7.19841 4.86943 7.27587 4.86943 7.35513C4.86943 7.46095 4.91026 7.56247 4.98302 7.63747C5.05577 7.7125 5.15449 7.75488 5.25759 7.75539ZM9.9247 7.75539C10.0019 7.7558 10.0775 7.73262 10.1419 7.68889C10.2063 7.64512 10.2566 7.58277 10.2864 7.50965C10.3162 7.43657 10.3242 7.35602 10.3094 7.27822C10.2945 7.20047 10.2575 7.12896 10.2031 7.0728C10.1486 7.01663 10.0791 6.97831 10.0034 6.96271C9.92768 6.94711 9.84915 6.95491 9.77779 6.98515C9.7064 7.01538 9.64538 7.06669 9.60242 7.13257C9.55949 7.19841 9.53658 7.27587 9.53658 7.35513C9.53658 7.46029 9.57689 7.56122 9.6488 7.63614C9.72074 7.71103 9.81847 7.75388 9.92095 7.75539H9.9247Z" fill="white" style="fill:white;fill-opacity:1;"/>`),e1=(0,eY.withNewIcon)(`<path d="M6.71709 5.81132H8.67935C9.8869 5.81132 9.8869 7.01887 8.67935 7.01887H6.71709V5.81132ZM2.03784 11.3962H8.07558V9.73585H6.71709V8.5283H8.22652C9.8869 8.5283 8.98124 11.3962 10.3397 11.3962H14.1133V8.5283H13.2077V8.83019C13.2077 10.0377 11.8492 9.88679 11.6982 9.13208C11.5473 8.37736 10.9435 7.77359 10.7926 7.77359C13.0567 6.56604 11.6982 4.15094 9.8869 4.15094H2.79256V5.81132H4.30199V9.73585H2.03784V11.3962Z" fill="currentColor" stroke="currentColor" stroke-width="0.150943" stroke-linejoin="round"/>
  <path d="M8.00009 14.4906C11.5847 14.4906 14.4907 11.5846 14.4907 8C14.4907 4.41536 11.5847 1.50943 8.00009 1.50943C4.41545 1.50943 1.50952 4.41536 1.50952 8C1.50952 11.5846 4.41545 14.4906 8.00009 14.4906Z" stroke="currentColor" stroke-width="1.35849" fill="transparent" />
  <path d="M14.9436 8.45283L15.6983 8L14.9436 7.54717V8.45283Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.7218 9.79872L15.5503 9.50183L14.8984 8.91046L14.7218 9.79872Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.2418 11.0755L15.1124 10.9459L14.5884 10.2388L14.2418 11.0755Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.5217 12.2341L14.4008 12.2768L14.0249 11.481L13.5217 12.2341Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.5896 13.2299L13.4434 13.4434L13.23 12.5895L12.5896 13.2299Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.4811 14.0248L12.2769 14.4007L12.2341 13.5216L11.4811 14.0248Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M10.239 14.5882L10.9461 15.1121L11.0757 14.2416L10.239 14.5882Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.91057 14.8983L9.50194 15.5502L9.79883 14.7216L8.91057 14.8983Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.54722 14.9434L8.00005 15.6981L8.45288 14.9434H7.54722Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.20134 14.7216L6.49823 15.5502L7.0896 14.8983L6.20134 14.7216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.92475 14.2416L5.0543 15.1121L5.76147 14.5882L4.92475 14.2416Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.76601 13.5216L3.72323 14.4007L4.51904 14.0248L3.76601 13.5216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.77025 12.5895L2.55678 13.4434L3.41064 13.2299L2.77025 12.5895Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.97536 11.481L1.59941 12.2768L2.47852 12.2341L1.97536 11.481Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.41196 10.2388L0.887987 10.9459L1.75854 11.0755L1.41196 10.2388Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.10188 8.91046L0.450006 9.50183L1.27856 9.79872L1.10188 8.91046Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.05664 7.54717L0.301924 8L1.05664 8.45284V7.54717Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.27849 6.20128L0.449934 6.49817L1.10181 7.08954L1.27849 6.20128Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.75845 4.92452L0.887888 5.05406L1.41187 5.76124L1.75845 4.92452Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.4785 3.76594L1.5994 3.72316L1.97534 4.51897L2.4785 3.76594Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.41066 2.77008L2.5568 2.55661L2.77026 3.41048L3.41066 2.77008Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.51914 1.9752L3.72333 1.59925L3.76611 2.47836L4.51914 1.9752Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M5.76128 1.41185L5.0541 0.887872L4.92456 1.75843L5.76128 1.41185Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.08967 1.10168L6.49831 0.449804L6.20142 1.27836L7.08967 1.10168Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.45302 1.05661L8.00019 0.301889L7.54736 1.05661L8.45302 1.05661Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M9.7989 1.27836L9.50201 0.449804L8.91064 1.10168L9.7989 1.27836Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.0755 1.75843L10.9459 0.887873L10.2388 1.41185L11.0755 1.75843Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.2342 2.47835L12.277 1.59925L11.4812 1.9752L12.2342 2.47835Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.23 3.41048L13.4435 2.55661L12.5896 2.77008L13.23 3.41048Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.0249 4.51897L14.4008 3.72316L13.5217 3.76594L14.0249 4.51897Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.5883 5.76124L15.1123 5.05406L14.2417 4.92452L14.5883 5.76124Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.8984 7.08954L15.5502 6.49817L14.7217 6.20128L14.8984 7.08954Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.94336 1.66038L7.99996 2.71698L9.05657 1.66038H6.94336Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M13.7026 5.03606L13.0243 6.36746L14.3557 7.04584L13.7026 5.03606Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M12.5811 12.5078L11.1052 12.2741L10.8714 13.7499L12.5811 12.5078Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M5.12842 13.7499L4.89466 12.274L3.4188 12.5078L5.12842 13.7499Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M1.64404 7.04584L2.97544 6.36746L2.29706 5.03606L1.64404 7.04584Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>`);var e2=e.i(57106),e3=e.i(9031150),e4=e.i(1637579),e5=e.i(4837983),e6=e.i(9307255),e9=e.i(545405),e8=e.i(1319302),e7=e.i(1542949),te=e.i(9375869),tt=e.i(349746);function tr(){return(0,i.jsxs)("svg",{fill:"none",height:"48",viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{fill:"#FAFAFA",height:"48",rx:"24",width:"48"}),(0,i.jsx)("path",{d:"M29 30.6667V22.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,i.jsx)("path",{d:"M24 30.6667V17.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,i.jsx)("path",{d:"M19 30.6667V25.6667",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}var tn=e.i(8300708),ti=e.i(7827812),ts=e.i(4465448);function tl(){let{state:e}=(0,I.useLogsQueryState)(),t=(0,ts.searchQueryToQueryState)(e.search??"");return(0,F.tokenizeSearchQuery)(t.searchQuery??"")}var to=e.i(3219703),ta=e.i(8735244),tu=e.i(1286423),td=e.i(516467);function tc(e){return+(0,td.toDate)(e)>Date.now()}var tf=e.i(277234),th=e.i(854682),tg=e.i(5797774),tp=e.i(2988836),tm=e.i(6982071),tx=e.i(4569307),ty=e.i(4099936),t_=e.i(8313680);function tv(e){let{type:t,className:r}=e,n={className:r};return"blob"===t?(0,i.jsx)(ty.Blob,{...n}):"edge-config"===t?(0,i.jsx)(t_.EdgeConfig,{...n}):null}function tC(e){let{requestMethod:t,icon:r}=e;return(0,i.jsxs)("span",{className:"inline-flex flex-row items-center gap-1 rounded-sm border border-gray-300 px-1 font-mono text-xs font-medium uppercase text-gray-800",children:[r,t]})}function tb(e){let{statusCode:t,reason:r}=e,n=(0,tx.getStatusCodeType)(t),s=null,l=null,o={fill:"none",height:"6",viewBox:"0 0 6 6",width:"6",xmlns:"http://www.w3.org/2000/svg"};return n===tx.StatusType["2XX"]?s=(0,i.jsx)("svg",{...o,children:(0,i.jsx)("circle",{cx:"3",cy:"3",fill:"#46A758",r:"2"})}):n===tx.StatusType["3XX"]?s=(0,i.jsx)("svg",{...o,children:(0,i.jsx)("circle",{cx:"3",cy:"3",fill:"#0070F3",r:"2"})}):n===tx.StatusType["4XX"]?s=(0,i.jsx)("svg",{...o,children:(0,i.jsx)("path",{d:"M3 0.5L5.59808 5H0.401924L3 0.5Z",fill:"#FF990A"})}):n===tx.StatusType["5XX"]?s=(0,i.jsx)("svg",{...o,children:(0,i.jsx)("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"#CA2A30"})}):-1===t&&(r?(s=(0,i.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-red-900)"}),(0,i.jsx)("line",{stroke:"var(--ds-red-900)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),l=`Fetch failed with reason: ${r}`):(s=(0,i.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-gray-800)"}),(0,i.jsx)("line",{stroke:"var(--ds-gray-800)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),l="Timed out while waiting for a response")),(0,i.jsx)(tg.ContextCard.Trigger,{content:(0,i.jsx)("span",{className:"block px-2 py-1 text-xs [&_span]:text-xs",children:l??(0,i.jsx)(to.StatusCodeBadge,{full:!0,monochrome:!0,statusCode:t})}),side:"top",noPadding:!0,className:"inline-flex items-center",children:s})}function tj(e){let{className:t}=e;return(0,i.jsxs)("div",{className:(0,h.cn)("flex items-center text-gray-300",t),children:[(0,i.jsx)("div",{className:"absolute h-[7px] w-full border-x border-current"}),(0,i.jsx)("div",{className:"absolute h-px w-full bg-current"})]})}function tS(e){let{startTime:t,endTime:r,className:n,traces:s}=e;return(0,i.jsx)("div",{className:(0,h.cn)("relative flex items-center text-gray-600",n),children:(0,i.jsxs)("div",{className:"relative mx-0.5 flex size-full items-center",children:[(0,i.jsx)(tj,{}),s.map((e,n)=>{let{traceStart:s,traceEnd:l,className:o}=e,a=(s-t)/(r-t)*100,u=(l-s)/(r-t)*100,d=`${a.toString()+u.toString()+n.toString()}`;return(0,i.jsxs)("div",{className:"relative ml-px mr-[2px] flex w-full",children:[(0,i.jsx)("div",{style:{width:`${a}%`}}),(0,i.jsx)(tg.ContextCard.Trigger,{content:(0,i.jsxs)("span",{className:"block text-xs px-3 py-2",children:["Started after ",s-t,"ms"]}),side:"top",noPadding:!0,className:"inline-flex items-center",children:(0,i.jsx)("div",{className:(0,g.clsx)("absolute my-6 mr-1 h-[5px] min-w-[2px] rounded-[1px] bg-current",o),style:{width:`${u}%`}})})]},d)})]})})}var tw=e.i(3848869),tk=e.i(7432042);let tN=["cache-get","cache-set","fetch-set","fetch-get"],tE={"cache-get":"GET","cache-set":"SET","fetch-get":"GET","fetch-set":"SET"};function tT(e){let{fetchType:t}=e;return tN.includes(t)?(0,i.jsxs)("span",{className:"relative inline-flex items-center gap-1 rounded-sm bg-gray-100 px-1 py-px font-mono text-xs uppercase text-gray-800",children:[(0,i.jsx)("svg",{fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipRule:"evenodd",d:"M2.47653 1.08941C3.40636 0.717474 4.65234 0.5 6 0.5C7.34766 0.5 8.59364 0.717474 9.52347 1.08941C9.98683 1.27475 10.3995 1.50951 10.7056 1.79898C11.0129 2.08957 11.25 2.47411 11.25 2.9375V6.5V10.0625C11.25 10.5259 11.0129 10.9104 10.7056 11.201C10.3995 11.4905 9.98683 11.7253 9.52347 11.9106C8.59364 12.2825 7.34766 12.5 6 12.5C4.65234 12.5 3.40636 12.2825 2.47653 11.9106C2.01317 11.7253 1.60045 11.4905 1.29437 11.201C0.987098 10.9104 0.75 10.5259 0.75 10.0625V6.5V2.9375C0.75 2.47411 0.987098 2.08957 1.29437 1.79898C1.60045 1.50951 2.01317 1.27475 2.47653 1.08941ZM1.875 4.49811V6.5C1.875 6.55438 1.90024 6.66309 2.06737 6.82115C2.23568 6.98033 2.50943 7.14959 2.89434 7.30356C3.66105 7.61024 4.75882 7.8125 6 7.8125C7.24118 7.8125 8.33895 7.61024 9.10566 7.30356C9.49057 7.14959 9.76432 6.98033 9.93263 6.82115C10.0998 6.66309 10.125 6.55438 10.125 6.5V4.49811C9.93882 4.60473 9.7365 4.70038 9.52347 4.78559C8.59364 5.15753 7.34766 5.375 6 5.375C4.65234 5.375 3.40636 5.15753 2.47653 4.78559C2.2635 4.70038 2.06118 4.60473 1.875 4.49811ZM10.125 2.9375C10.125 2.99188 10.0998 3.10059 9.93263 3.25865C9.76432 3.41783 9.49057 3.58709 9.10566 3.74106C8.33895 4.04774 7.24118 4.25 6 4.25C4.75882 4.25 3.66105 4.04774 2.89434 3.74106C2.50943 3.58709 2.23568 3.41783 2.06737 3.25865C1.90024 3.10059 1.875 2.99188 1.875 2.9375C1.875 2.88312 1.90024 2.77441 2.06737 2.61635C2.23568 2.45717 2.50943 2.28791 2.89434 2.13394C3.66105 1.82726 4.75882 1.625 6 1.625C7.24118 1.625 8.33895 1.82726 9.10566 2.13394C9.49057 2.28791 9.76432 2.45717 9.93263 2.61635C10.0998 2.77441 10.125 2.88312 10.125 2.9375ZM10.125 8.06061C9.93882 8.16723 9.7365 8.26288 9.52347 8.34809C8.59364 8.72003 7.34766 8.9375 6 8.9375C4.65234 8.9375 3.40636 8.72003 2.47653 8.34809C2.2635 8.26288 2.06118 8.16723 1.875 8.06061V10.0625C1.875 10.1169 1.90024 10.2256 2.06737 10.3836C2.23568 10.5428 2.50943 10.7121 2.89434 10.8661C3.66105 11.1727 4.75882 11.375 6 11.375C7.24118 11.375 8.33895 11.1727 9.10566 10.8661C9.49057 10.7121 9.76432 10.5428 9.93263 10.3836C10.0998 10.2256 10.125 10.1169 10.125 10.0625V8.06061Z",fill:"#8F8F8F",fillRule:"evenodd"})}),tE[t]]}):null}function tL(e){let{title:t,children:r}=e;return(0,i.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,i.jsx)("div",{className:"text-gray-700",children:t}),(0,i.jsx)("div",{children:r})]})}function tM(e){let{cache:t}=e,r=t.hit?"HIT":"MISS";return(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 p-3 max-w-[300px] text-xs",children:["VSC_GET"===t.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tL,{title:"Cache Status",children:t.stale>0?"Stale":r}),t.revalidated>0?(0,i.jsx)(tL,{title:"Revalidated",children:"YES"}):null,0!==t.age?(0,i.jsx)(tL,{title:"Age",children:(0,tk.default)(1e3*t.age)}):null]}):null,t.revalidate_after>0?(0,i.jsxs)(tL,{title:"Revalidate After",children:[(0,tw.formatDistanceStrict)(0,1e3*t.revalidate_after)," ",t.revalidate_after>1e3&&t.revalidate_after<1e5?(0,i.jsxs)("span",{className:"text-gray-700",children:["(",t.revalidate_after,"s)"]}):null]}):null,t.tags.length>0?(0,i.jsx)(tL,{title:"Tags",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:t.tags.map(e=>(0,i.jsx)(X.Badge,{className:"normal-case",size:"sm",variant:"blue",children:e},e))})}):null]})}let tD="inline-flex flex-1 items-center bg-transparent p-0 text-left text-[12px] font-mono min-w-0";function tA(e){let t,{request:r,additionalMetrics:n,startTime:s,endTime:l,createCopyHandler:o,longestMethodLength:a,shouldConnectToNext:u,lite:d,plan:c,onUpgradePressed:f}=e,h=(0,y.useParams)(),p=(0,tx.getStatusCodeType)(r.http_status),m=`${r.request_hostname}${r.request_path}`,{isRuntimeCache:x,requestType:_,requestAction:v}=(0,tx.resolveRuntimeCacheProps)(m,r),{store:C,isStore:b,isLoading:j}=(0,tx.useGetStoreFromHostname)(r.request_hostname,r.request_path),S=m;m.endsWith("_vercel/insights/event")&&(S="Web Analytics Event"),tx.SUSPENSE_CACHE_HOSTNAME_REGEX.test(m)&&(S="revalidate"===v?"Revalidate Cache":"invalidate"===v?"Invalidate Cache":"dangerously-delete"===v?"Dangerously Delete Cache":x?r.cache_item_id||"Runtime Cache":"Data Cache"),(tx.readFromCache.includes(r.fetch_type)||x&&"cache-get"===_)&&u&&(S=`Reading Cache${404===r.http_status?" (Miss)":""}`),(tx.writeToCache.includes(r.fetch_type)||x&&"cache-set"===_)&&(S="Updating Cache"),!j&&b&&C&&h&&(S=`${C.name}`,t=`/${h.teamSlug}/~/stores/${C.type}/${C.id}`);let w=tN.includes(r.fetch_type)||x&&!v&&!!_,k=!w,N=k?o(m):void 0,E=!u&&(tx.readFromCache.includes(r.fetch_type)||x&&"cache-get"===_),T=(0,i.jsxs)(i.Fragment,{children:[E?(0,i.jsx)("span",{className:"border-indigo-500 mr-1 shrink-0 border-r pr-1 text-gray-900",children:"Using cache"}):null,j?(0,i.jsx)(eo.Skeleton,{as:"span",className:"flex-1",height:12}):(0,i.jsx)("span",{className:(0,g.clsx)("truncate min-w-0",t&&"hover:underline",E?"text-gray-700":"text-gray-900"),children:S})]}),L=w&&r.cache?(0,i.jsx)(tg.ContextCard.Trigger,{className:"inline-flex items-center w-auto shrink-0",content:(0,i.jsx)(tM,{cache:r.cache}),side:"top",noPadding:!0,children:(0,i.jsx)(tp.InformationFillSmall,{className:"ml-2"})}):null;return(0,i.jsxs)("div",{className:(0,g.clsx)("grid-cols-[8fr,1fr]","group relative grid h-[24px] w-full  items-center gap-2 border-none bg-transparent transition-opacity duration-200 ease-in-out"),children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center gap-1 truncate",children:[(0,i.jsxs)("div",{className:"flex items-center",style:{...a&&{minWidth:`calc(${a}ch + 1px)`}},children:[u?(0,i.jsx)("div",{className:"absolute bottom-1 left-[9.5px] h-2 w-[1.5px] translate-y-full bg-gray-300"}):null,w?(0,i.jsx)(tT,{fetchType:x?_||"":r.fetch_type}):(0,i.jsx)(tC,{icon:C?(0,i.jsx)(tv,{className:"size-3",type:C.type}):void 0,requestMethod:r.request_method})]}),t?(0,i.jsx)(e2.Link,{className:(0,g.clsx)(tD,"no-underline cursor-pointer"),href:t,children:T}):k?(0,i.jsxs)("button",{className:(0,g.clsx)(tD,"flex cursor-pointer"),onClick:N,onKeyPress:N,type:"button",children:[T,L]}):(0,i.jsxs)("div",{className:(0,g.clsx)(tD,"flex"),children:[T,L]}),"hobby"!==c&&(0,i.jsx)("div",{className:"flex gap-1",children:d?(0,i.jsx)(i.Fragment,{children:-1===r.http_status?(0,i.jsx)(tg.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,i.jsx)("span",{children:"Timed out while waiting for a response"}),side:"top",children:(0,i.jsx)("span",{className:"relative text-xs tabular-nums text-red-900",children:"Timeout"})}):(0,i.jsx)(to.StatusCodeBadge,{statusCode:r.http_status,variant:"small"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tb,{reason:r.reason,statusCode:r.http_status}),(0,i.jsx)("span",{className:"relative text-xs tabular-nums text-gray-1000",children:(0,tx.formatMilliseconds)(r.duration)})]})})]}),d?(0,i.jsx)(tg.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,i.jsx)("span",{className:"text-sm",children:"hobby"===c?"Unlock external API insights with Pro & Observability Plus":"Unlock latency insights with Observability Plus"}),side:"top",children:(0,i.jsxs)("button",{"aria-label":"Upgrade to Observability Plus to unlock latency insights",className:"group/lock relative flex h-4 w-full cursor-pointer appearance-none items-center border-none bg-transparent p-0 text-gray-500 focus:outline-none",onClick:()=>{f&&f()},type:"button",children:[(0,i.jsx)("div",{className:"absolute left-1/2 z-10 mx-auto mb-0.5 flex size-4 -translate-x-1/2 justify-center rounded-sm px-1 transition-colors duration-100 ease-in-out group-hover/lock:bg-gray-300 group-hover/lock:text-gray-800",children:(0,i.jsx)(tm.LockClosedSmall,{})}),(0,i.jsx)(tj,{className:"transition-colors duration-100 ease-in-out group-hover/lock:text-gray-500"})]})}):(0,i.jsx)(tS,{className:(0,g.clsx)("min-w-[20px] flex-1",p===tx.StatusType["2XX"]&&"text-green-800",p===tx.StatusType["3XX"]&&"text-blue-700",p===tx.StatusType["4XX"]&&"text-amber-800",p===tx.StatusType["5XX"]&&"text-red-800",-1===r.http_status&&(r.reason?"text-red-900":"text-gray-800")),endTime:l,startTime:s,traces:n?n.map(e=>{let t=(0,tx.getStatusCodeType)(e.http_status);return{className:(0,g.clsx)(t===tx.StatusType["2XX"]&&"!bg-green-800",t===tx.StatusType["3XX"]&&"!bg-blue-700",t===tx.StatusType["4XX"]&&"!bg-amber-800",t===tx.StatusType["5XX"]&&"!bg-red-800"),traceStart:e.timestamp,traceEnd:e.timestamp+e.duration}}):[{traceStart:r.timestamp,traceEnd:r.timestamp+r.duration}]})]})}function tO(e){let{requests:t,startTime:r,endTime:n,createCopyHandler:l,longestMethodLength:o}=e,[a,u]=(0,s.useState)(!1),d={startTime:r,endTime:n,createCopyHandler:l,longestMethodLength:o};return 1===t.length?(0,i.jsx)(tA,{...d,request:t[0]}):(0,i.jsx)(i.Fragment,{children:t.map((e,r)=>(0,s.createElement)(tA,{...d,key:r,request:e,shouldConnectToNext:(0,tx.checkIfShouldConnectToNext)(t,r)}))})}function tI(e){let{requests:t,startTime:r,endTime:n,className:l}=e,o=(0,f.useToasts)(),a=(0,v.useIsMobile)(),u=(0,s.useCallback)(e=>t=>{a||"key"in t&&"Enter"!==t.key||((0,e9.copyToClipboard)(e),o.message("Request path copied to clipboard"))},[o,a]),{startTime:d,endTime:c}=(0,s.useMemo)(()=>({startTime:Math.min(...t.map(e=>e.timestamp),r),endTime:Math.max(...t.map(e=>e.timestamp+e.duration),n),totalTime:n-r}),[n,t,r]),h=(0,s.useMemo)(()=>{let e=!1,r=!1,n=t.reduce((t,n)=>(tN.includes(n.fetch_type)&&(e=!0),n.request_hostname.includes(".vercel-storage.com")&&(r=!0),n.request_method.length>t)?n.request_method.length:t,0);return r?n+2:e?n+1:n},[t]),p=(0,s.useMemo)(()=>{let e={};return t.forEach((t,r)=>{let n=-1===t.fetch_idx?`${t.request_hostname}${t.request_path}-${t.fetch_idx}-${r}`:`${t.fetch_idx}`;e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).sort((e,t)=>e[0].timestamp-t[0].timestamp)},[t]);return(0,i.jsx)("div",{className:(0,g.clsx)("relative",l),children:p.map(e=>(0,i.jsx)(tO,{createCopyHandler:u,endTime:c,longestMethodLength:Math.max(h,3),requests:e,startTime:d},`${e[0].timestamp}${e[0].fetch_idx}${e[0].request_path}${e[0].request_hostname}`))})}function tF(e){let{requests:t,className:r,plan:n,onUpgradePressed:l}=e,o=(0,f.useToasts)(),a=(0,v.useIsMobile)(),u=(0,s.useCallback)(e=>t=>{a||"key"in t&&"Enter"!==t.key||((0,e9.copyToClipboard)(e),o.message("Request path copied to clipboard"))},[o,a]);return(0,i.jsx)("div",{className:(0,g.clsx)("relative",r),children:t.map(e=>(0,i.jsx)(tA,{createCopyHandler:u,endTime:0,lite:!0,longestMethodLength:4,onUpgradePressed:l,plan:n,request:e,startTime:0},`${e.fetch_idx}${e.request_path}${e.request_hostname}`))})}function tR(e){let{projectId:t,requestId:r,source:n,startTime:l,endTime:o,enableDataCacheMetrics:a,disableHeader:u,pathType:d}=e,{team:c}=(0,_.useAccount)(),f=c?.billing?.plan,{hasObservabilityPlusAccessOnCurrentProject:h}=(0,th.useHasObservabilityPlus)(),p=(0,ec.useOpenEnableModal)(),{loading:m,data:x,isAwaitingData:y}=function(e){let{requestId:t,projectId:r,source:n,timestamp:i,pathType:s}=e,{team:l}=(0,_.useAccount)(),o=l?.billing?.plan,a=(0,tu.addSeconds)(new Date(i),20),u=(0,L.default)(()=>l&&r&&t&&o?`${D.API_LOGS_FETCH_METRICS}${(0,M.encode)({ownerId:l.id,requestId:t,projectId:r,source:n,pathType:s})}`:null,e=>(0,tf.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tc(a)});return{data:u.data?.data,loading:u.isValidating,error:u.error,isAwaitingData:tc(a)}}({projectId:t,requestId:r,source:"request"!==n?n:void 0,timestamp:l.getTime(),pathType:d}),v=x?.some(e=>e.fetch_type.startsWith("cache-")),{data:C}=function(e){let{requestId:t,projectId:r,timestamp:n,shouldLoad:i}=e,{team:s}=(0,_.useAccount)(),l=s?.billing?.plan,o=(0,tu.addSeconds)(new Date(n),15),a=(0,L.default)(()=>s&&r&&t&&l&&"hobby"!==l&&i?`${D.API_LOGS_CACHE_METRICS}${(0,M.encode)({ownerId:s.id,requestId:t,projectId:r})}`:null,e=>(0,tf.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tc(o)});return{data:a.data?.data,loading:a.isValidating,error:a.error,isAwaitingData:tc(o)}}({projectId:t,requestId:r,timestamp:l.getTime(),shouldLoad:a&&v}),b=(0,s.useMemo)(()=>{let e=[...C??[]];return C?x?.map(t=>{let r=e.find(e=>{if(t.cache_item_id===e.item_id&&t.fetch_type.startsWith("cache-")){let r=t.fetch_type.split("-")[1];return e.type.includes(r.toUpperCase())}return!1});return r?(e.splice(e.findIndex(e=>e.item_id===r.item_id),1),{...t,cache:r}):t}):x},[x,C]),j=x&&x.length>0,S=(0,s.useCallback)(()=>{p({from:"observability",via:"request-metrics",upgradeUseCase:"external-apis"})},[p]),w=(0,s.useMemo)(()=>y&&!j?(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial mr-0.5",children:[(0,i.jsx)(ta.Spinner,{size:16}),(0,i.jsx)("p",{className:"text-copy-14 text-gray-800",children:"Awaiting data"})]}):m&&!j?(0,i.jsx)(eo.Skeleton,{as:"dd",className:"ml-2",height:20,width:30}):j?h?(0,i.jsx)(tI,{className:"min-w-[50px] flex-1 rounded",endTime:o.getTime(),requests:b??[],startTime:l.getTime()}):(0,i.jsx)(tF,{className:"min-w-[50px] flex-1 rounded",endTime:o.getTime(),onUpgradePressed:S,plan:f,requests:b??[],startTime:l.getTime()}):(0,i.jsx)("p",{className:"text-copy-14 mr-0.5 text-right text-gray-800",children:"No outgoing requests"}),[y,m,j,h,o,b,l,S,f]);return(0,i.jsx)("div",{className:"tailwind-preflight",children:u?w:(0,i.jsxs)("div",{className:(0,g.default)("flex items-stretch justify-between gap-2 flex-initial w-full relative",j?"flex-col":"flex-row"),children:[(0,i.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:(0,i.jsx)("span",{className:"text-copy-14 text-gray-900",children:"External APIs"})}),w]})})}var tP=e.i(9886547),tB=e.i(8225664);function tq(e){let{title:t,params:r,hideCopyButton:n=!1}=e,l=(0,f.useToasts)(),o=`?${Object.keys(r).reduce((e,t)=>`${e}${t}${null===r[t]?"":`=${r[t]}`}&`,"").slice(0,-1)}
    `,a=(0,s.useCallback)((e,t)=>{"key"in e&&"Enter"!==e.key||((0,e9.copyToClipboard)(t),l.message("Copied value to clipboard"))},[l]),[u,d]=(0,s.useState)(!1),c=(0,s.useMemo)(()=>{let e=Object.keys(r),t=e.slice(0,10),n=e.length>t.length+1,s=n?(0,i.jsx)("li",{className:"inline-flex max-w-full overflow-hidden rounded-sm border border-gray-300 text-xs divide-x",children:(0,i.jsx)("span",{className:"inline-block whitespace-nowrap cursor-pointer font-medium bg-gray-100 p-1.5 px-2 text-left text-gray-900 text-[12px]",role:"button",onClick:()=>d(e=>!e),children:u?"Hide":"Show more"})}):null;return n&&!u?(0,i.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[t.map(e=>(0,i.jsx)(tz,{paramKey:e,paramValue:r[e],onCopy:a},e)),s]}):(0,i.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[e.map(e=>(0,i.jsx)(tz,{paramKey:e,paramValue:r[e],onCopy:a},e)),s]})},[u,r,a]);return(0,i.jsx)("div",{className:"border-b pt-2 pb-4 last:border-none",children:(0,i.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial relative",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial mx-2",children:[(0,i.jsx)("dt",{className:"text-copy-14 text-gray-900",style:{flexShrink:0},children:t}),!n&&(0,i.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:o,title:"Copy full search params to the clipboard",type:"tertiary"})]}),c]})})}function tz(e){let{paramKey:t,paramValue:r,onCopy:n}=e,s=t,l=r,o=t;try{s=decodeURIComponent(t),o=(l=r?decodeURIComponent(r):null)?new URLSearchParams({[s]:l}).toString():s}catch(e){}return(0,i.jsxs)("li",{className:"flex cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono divide-x",onClick:e=>n(e,o),onKeyDown:e=>n(e,o),children:[(0,i.jsx)("span",{className:(0,g.clsx)("truncate bg-transparent p-1.5 text-left text-[12px]",null!==l&&"shrink-0 max-w-[150px]"),title:t,children:t}),null!==l?(0,i.jsx)("span",{className:"truncate bg-background-200 p-1.5 text-left text-[12px] font-mono font-medium text-gray-900",title:l,children:l}):null]},t)}var tW=e.i(1551685),t$=e.i(4670733),tU=e.i(762945),tV=e.i(6226725),tK=e.i(2006677),tH=e.i(6401841),tG=e.i(8320377);let tJ=e=>!!e&&e instanceof Date,tZ=e=>"object"==typeof e&&null!==e,tX=e=>!!e&&e instanceof Object&&"function"==typeof e;function tQ(e,t){return void 0===t&&(t=!1),!e||t?`"${e}"`:e}function tY(e){let{field:t,value:r,data:n,lastElement:i,openBracket:l,closeBracket:o,level:a,style:u,shouldExpandNode:d,clickToExpandNode:c,outerRef:f,beforeExpandChange:h}=e,g=(0,s.useRef)(!1),[p,m]=(0,s.useState)(()=>d(a,r,t)),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{g.current?m(d(a,r,t)):g.current=!0},[d]);let y=(0,s.useId)();if(0===n.length)return function(e){let{field:t,openBracket:r,closeBracket:n,lastElement:i,style:l}=e;return(0,s.createElement)("div",{className:l.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||""===t)&&(0,s.createElement)("span",{className:l.label},tQ(t,l.quotesForFieldNames),":"),(0,s.createElement)("span",{className:l.punctuation},r),(0,s.createElement)("span",{className:l.punctuation},n),!i&&(0,s.createElement)("span",{className:l.punctuation},","))}({field:t,openBracket:l,closeBracket:o,lastElement:i,style:u});let _=p?u.collapseIcon:u.expandIcon,v=p?u.ariaLables.collapseJson:u.ariaLables.expandJson,C=a+1,b=n.length-1,j=e=>{p!==e&&(!h||h({level:a,value:r,field:t,newExpandValue:e}))&&m(e)},S=e=>{if("ArrowRight"===e.key||"ArrowLeft"===e.key)e.preventDefault(),j("ArrowRight"===e.key);else if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let t="ArrowUp"===e.key?-1:1;if(!f.current)return;let r=f.current.querySelectorAll("[role=button]"),n=-1;for(let e=0;e<r.length;e++)if(0===r[e].tabIndex){n=e;break}if(n<0)return;let i=(n+t+r.length)%r.length;r[n].tabIndex=-1,r[i].tabIndex=0,r[i].focus()}},w=()=>{var e;j(!p);let t=x.current;if(!t)return;let r=null==(e=f.current)?void 0:e.querySelector('[role=button][tabindex="0"]');r&&(r.tabIndex=-1),t.tabIndex=0,t.focus()};return(0,s.createElement)("div",{className:u.basicChildStyle,role:"treeitem","aria-expanded":p,"aria-selected":void 0},(0,s.createElement)("span",{className:_,onClick:w,onKeyDown:S,role:"button","aria-label":v,"aria-expanded":p,"aria-controls":p?y:void 0,ref:x,tabIndex:0===a?0:-1}),(t||""===t)&&(c?(0,s.createElement)("span",{className:u.clickableLabel,onClick:w,onKeyDown:S},tQ(t,u.quotesForFieldNames),":"):(0,s.createElement)("span",{className:u.label},tQ(t,u.quotesForFieldNames),":")),(0,s.createElement)("span",{className:u.punctuation},l),p?(0,s.createElement)("ul",{id:y,role:"group",className:u.childFieldsContainer},n.map((e,t)=>(0,s.createElement)(t3,{key:e[0]||t,field:e[0],value:e[1],style:u,lastElement:t===b,level:C,shouldExpandNode:d,clickToExpandNode:c,beforeExpandChange:h,outerRef:f}))):(0,s.createElement)("span",{className:u.collapsedContent,onClick:w,onKeyDown:S}),(0,s.createElement)("span",{className:u.punctuation},o),!i&&(0,s.createElement)("span",{className:u.punctuation},","))}function t0(e){let{field:t,value:r,style:n,lastElement:i,shouldExpandNode:s,clickToExpandNode:l,level:o,outerRef:a,beforeExpandChange:u}=e;return tY({field:t,value:r,lastElement:i||!1,level:o,openBracket:"{",closeBracket:"}",style:n,shouldExpandNode:s,clickToExpandNode:l,data:Object.keys(r).map(e=>[e,r[e]]),outerRef:a,beforeExpandChange:u})}function t1(e){let{field:t,value:r,style:n,lastElement:i,level:s,shouldExpandNode:l,clickToExpandNode:o,outerRef:a,beforeExpandChange:u}=e;return tY({field:t,value:r,lastElement:i||!1,level:s,openBracket:"[",closeBracket:"]",style:n,shouldExpandNode:l,clickToExpandNode:o,data:r.map(e=>[void 0,e]),outerRef:a,beforeExpandChange:u})}function t2(e){let t,{field:r,value:n,style:i,lastElement:l}=e,o=i.otherValue;if(null===n)t="null",o=i.nullValue;else if(void 0===n)t="undefined",o=i.undefinedValue;else if("string"==typeof n||n instanceof String){var a;a=!i.noQuotesForStringValues,t=i.stringifyStringValues?JSON.stringify(n):a?`"${n}"`:n,o=i.stringValue}else if("boolean"==typeof n||n instanceof Boolean)t=n?"true":"false",o=i.booleanValue;else if("number"==typeof n||n instanceof Number)t=n.toString(),o=i.numberValue;else"bigint"==typeof n||n instanceof BigInt?(t=`${n.toString()}n`,o=i.numberValue):t=tJ(n)?n.toISOString():tX(n)?"function() { }":n.toString();return(0,s.createElement)("div",{className:i.basicChildStyle,role:"treeitem","aria-selected":void 0},(r||""===r)&&(0,s.createElement)("span",{className:i.label},tQ(r,i.quotesForFieldNames),":"),(0,s.createElement)("span",{className:o},t),!l&&(0,s.createElement)("span",{className:i.punctuation},","))}function t3(e){let t=e.value;return Array.isArray(t)?(0,s.createElement)(t1,Object.assign({},e)):!tZ(t)||tJ(t)||tX(t)?(0,s.createElement)(t2,Object.assign({},e)):(0,s.createElement)(t0,Object.assign({},e))}let t4={container:"_2IvMF _GzYRV",basicChildStyle:"_2bkNM",childFieldsContainer:"_1BXBN",label:"_1MGIk",clickableLabel:"_2YKJg _1MGIk _1MFti",nullValue:"_2T6PJ",undefinedValue:"_1Gho6",stringValue:"_vGjyY",booleanValue:"_3zQKs",numberValue:"_1bQdo",otherValue:"_1xvuR",punctuation:"_3uHL6 _3eOF8",collapseIcon:"_oLqym _f10Tu _1MFti _1LId0",expandIcon:"_2AXVT _f10Tu _1MFti _1UmXx",collapsedContent:"_2KJWg _1pNG9 _1MFti",noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:{collapseJson:"collapse JSON",expandJson:"expand JSON"},stringifyStringValues:!1},t5=()=>!0,t6=e=>{let{data:t,style:r=t4,shouldExpandNode:n=t5,clickToExpandNode:i=!1,beforeExpandChange:l,compactTopLevel:o,...a}=e,u=(0,s.useRef)(null);return(0,s.createElement)("div",Object.assign({"aria-label":"JSON view"},a,{className:r.container,ref:u,role:"tree"}),o&&tZ(t)?Object.entries(t).map(e=>{let[t,o]=e;return(0,s.createElement)(t3,{key:t,field:t,value:o,style:{...t4,...r},lastElement:!0,level:1,shouldExpandNode:n,clickToExpandNode:i,beforeExpandChange:l,outerRef:u})}):(0,s.createElement)(t3,{value:t,style:{...t4,...r},lastElement:!0,level:0,shouldExpandNode:n,clickToExpandNode:i,outerRef:u,beforeExpandChange:l}))};var t9=e.i(1255647);let t8="json-search-highlight-styles";function t7(){return"u">typeof CSS&&"highlights"in CSS&&"u">typeof Highlight}function re(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rt(e){return e<3}let rr={container:t9.default.jsonContainer,basicChildStyle:t9.default.jsonChild,label:t9.default.jsonLabel,clickableLabel:t9.default.jsonClickableLabel,nullValue:t9.default.jsonNull,booleanValue:t9.default.jsonBoolean,numberValue:t9.default.jsonNumber,stringValue:t9.default.jsonString,expandIcon:t9.default.jsonExpandIcon,collapseIcon:t9.default.jsonCollapseIcon,collapsedContent:t9.default.jsonCollapsedContent,noQuotesForStringValues:!1,childFieldsContainer:t9.default.jsonChildFieldsContainer,quotesForFieldNames:!1};function rn(e){let t,r,n,{data:l,searchWords:o}=e,a=(t=(0,s.useRef)(null),r=(0,s.useId)(),n=`json-search-${r.replace(/:/g,"")}`,(0,s.useEffect)(()=>{if(t7())return function(e){let t=`${t8}-${e}`;if(document.getElementById(t))return;let r=document.createElement("style");r.id=t,r.textContent=`
    ::highlight(${e}) {
      background: var(--geist-highlight-yellow);
      color: var(--geist-foreground);
    }
    .dark-theme ::highlight(${e}) {
      color: var(--geist-background);
    }
  `,document.head.appendChild(r)}(n),()=>{var e;let t;e=n,t=`${t8}-${e}`,document.getElementById(t)?.remove()}},[n]),(0,s.useEffect)(()=>{if(!t.current||!t7())return;let e=o.filter(e=>e.length>1);if(0===e.length)return void CSS.highlights.delete(n);let r=function(e,t){let r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),i=RegExp(`(${t.map(re).join("|")})`,"gi");for(;;){let e=n.nextNode();if(!e)break;let t=e.textContent;if(t)for(i.lastIndex=0;;){let n=i.exec(t);if(!n)break;let s=document.createRange();s.setStart(e,n.index),s.setEnd(e,n.index+n[0].length),r.push(s)}}return r}(t.current,e);if(0===r.length)return void CSS.highlights.delete(n);let i=new Highlight(...r);return CSS.highlights.set(n,i),()=>{CSS.highlights.delete(n)}},[o,n]),t);return(0,i.jsx)("span",{className:t9.default.jsonSegmentWrapper,ref:a,children:(0,i.jsx)(t6,{clickToExpandNode:!0,data:l,shouldExpandNode:rt,style:rr})})}function ri(e){let{message:t,searchWords:r,enableAnsiLogs:n,enableJsonRendering:s=!1}=e;if(!s)return(0,i.jsx)(rs,{enableAnsiLogs:n,searchWords:r,text:t});let l=function(e){if(!e)return[];if(!e.includes("{")&&!e.includes("["))return[{type:"text",content:e}];let t=[],r=0,n=0;for(;n<e.length;){let i=e[n];if("{"===i||"["===i){if(!function(e,t,r){var n,i;let s=t+1;for(;s<e.length&&(" "===(n=e[s])||"	"===n||"\n"===n||"\r"===n);)s++;if(s>=e.length)return!1;let l=e[s];return"{"===r?'"'===l||"}"===l:'"'===l||"{"===l||"["===l||"]"===l||"-"===l||"t"===l||"f"===l||"n"===l||(i=l)>="0"&&i<="9"}(e,n,i)){n++;continue}let s=function(e,t){let r=0,n=!1,i=!1;for(let s=t;s<e.length;s++){let t=e[s];if(i){i=!1;continue}if("\\"===t&&n){i=!0;continue}if('"'===t){n=!n;continue}if(!n){if("{"===t||"["===t)r++;else if(("}"===t||"]"===t)&&0==--r)return s}}return -1}(e,n);if(-1!==s){let i=e.slice(n,s+1);try{let l=JSON.parse(i);n>r&&t.push({type:"text",content:e.slice(r,n)}),t.push({type:"json",content:i,parsed:l}),r=n=s+1;continue}catch{}}}n++}return r<e.length&&t.push({type:"text",content:e.slice(r)}),t}(t);return 1===l.length&&"text"===l[0].type?(0,i.jsx)(rs,{enableAnsiLogs:n,searchWords:r,text:t}):(0,i.jsx)(i.Fragment,{children:l.map((e,t)=>"text"===e.type?(0,i.jsx)(rs,{enableAnsiLogs:n,searchWords:r,text:e.content},`text-${t}-${e.content.slice(0,32)}`):(0,i.jsx)(rn,{data:e.parsed,searchWords:r},`json-${t}-${e.content.slice(0,32)}`))})}function rs(e){let{text:t,searchWords:r,enableAnsiLogs:n}=e;return n?(0,i.jsx)(tG.Ansi,{newLines:!0,renderText:e=>(0,i.jsx)(e5.HighlightText,{as:"span",search:r,text:e}),children:t}):(0,i.jsx)(e5.HighlightText,{as:"span",search:r,text:t})}var rl=e.i(846089),ro=e.i(8654638),ra=e.i(6280036);function ru(e){let{text:t,className:r,tooltipContainerClassName:n,tooltipClassName:l,children:o}=e,[a,u]=(0,s.useState)(!1),d=(0,s.useRef)(null),c=(0,v.useIsMobile)();(0,s.useLayoutEffect)(()=>{if(!d.current||c)return;let e=new ResizeObserver(e=>{for(let t of e){let e=t.target;u(e.offsetWidth<e.scrollWidth)}});return e.observe(d.current),()=>{e.disconnect()}},[d,c]);let f=a&&!c;return(0,i.jsx)("div",{className:n,style:{display:"flex",alignItems:"center",minWidth:0},children:(0,i.jsx)(tg.ContextCard.Trigger,{content:f?(0,i.jsx)("span",{className:`block px-3 py-2 text-xs ${l||""}`,role:"tooltip",children:t}):void 0,noPadding:!0,side:"top",children:(0,i.jsx)("div",{className:`truncate ${r||""}`,ref:d,children:o??t})})})}var rd=e.i(8087928),rc=e.i(8161149),rf=e.i(248550),rh=e.i(2259462),rg=e.i(4535059),rp=e.i(1568600),rm=e.i(1474855),rx=e.i(4410321);let ry=(0,s.forwardRef)(function(e,t){return(0,i.jsx)("div",{className:rx.default.headerContainer,ref:t,children:(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-row items-center justify-start flex-initial",rx.default.rowContainer,rx.default.header),children:[(0,i.jsx)("div",{className:rx.default.rowItem,style:{flexShrink:0,paddingLeft:16,width:166},children:"Time"}),(0,i.jsx)("div",{className:rx.default.rowItem,style:{flexShrink:0,width:"72px"},children:"Status"}),(0,i.jsx)("div",{className:(0,g.clsx)(rx.default.rowItem,rx.default.truncate),style:{minWidth:"12%",maxWidth:"12%"},children:"Host"}),(0,i.jsx)("div",{className:(0,g.clsx)(rx.default.rowItem,rx.default.truncate),style:{paddingLeft:"35px",minWidth:"calc(max(12%,180px) + 50px)",maxWidth:"calc(400px + 50px)"},children:"Request"}),(0,i.jsx)("div",{className:(0,g.clsx)(rx.default.rowItem,rx.default.truncate),children:"Messages"})]})})});function r_(e){let{logRows:t=[],selectedLogId:r,onRowSelect:n}=e,{state:{live:l,paused:o}}=(0,I.useLogsQueryState)(),a=(0,s.useRef)(!1),u=tl(),d=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{t.length>0&&(d.current=new Date(t[0].timestamp).getTime()+1)},[t]);let[c,f]=(0,s.useState)({state:"disabled"});(0,s.useEffect)(()=>{l?f(e=>"enabled"!==e.state?{state:"enabled",ts:d.current||Date.now()}:e):o?f(e=>({state:"paused",ts:e.ts||Date.now()})):f(e=>({state:"disabled",ts:e.ts}))},[l,o]);let h="disabled"!==c.state&&c.ts?t.findIndex(e=>new Date(e.timestamp).getTime()<c.ts):t.length;"paused"===c.state&&0===h&&(h=t.length);let m=t.slice(0,h),x=t.slice(h);(0,s.useEffect)(()=>{function e(e){"Tab"===e.key&&(a.current=!0)}function t(e){"Tab"===e.key&&(a.current=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]);let{teamSlug:y,projectSlug:_}=(0,ee.useProjectAndTeamSlug)(),{data:v}=(0,Y.useRollingRelease)({teamIdOrSlug:y,projectSlug:_}),C=v?.rollingRelease?.state==="ACTIVE"?v.rollingRelease.canaryDeployment:null;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{"data-testid":(0,p.tid)("group-logs","log-rows"),onFocus:e=>{a.current&&e.target.scrollIntoView({block:"center"})},className:"flex flex-col items-stretch justify-start flex-auto tailwind-preflight",children:[m.map(e=>{let t=e.requestId===r;return(0,s.createElement)(rC,{...e,highlightedWords:u,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,moveUp:!!(c.ts&&new Date(e.timestamp).getTime()<c.ts),onSelect:n})}),x.length>0?(0,i.jsx)("div",{className:(0,g.clsx)(rx.default.liveModeRow,{[rx.default.paused]:"paused"===c.state}),children:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,i.jsx)(rp.PlayFill,{size:10})," Live Mode"]})},c.ts):null,x.map(e=>{let t=e.requestId===r;return(0,s.createElement)(rC,{...e,faded:"enabled"===c.state,highlightedWords:u,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,onSelect:n,previouslyFaded:!!(c.ts&&new Date(e.timestamp).getTime()<c.ts),reverseBackground:!0})})]})})}function rv(e){let{level:t}=e;switch(t){case"fatal":return(0,i.jsx)(tH.Stop,{"aria-hidden":"true"});case"warning":return(0,i.jsx)(tU.Warning,{"aria-hidden":"true"});case"error":return(0,i.jsx)(tV.CrossCircle,{"aria-hidden":"true"});default:return(0,i.jsx)("div",{style:{width:"16px",height:"16px"}})}}let rC=(0,s.memo)(function(e){let{onSelect:t,isCanary:r,isSelected:n,highlightedWords:l,isNew:o,faded:a,previouslyFaded:u,moveUp:d,reverseBackground:c,...f}=e,h=(0,s.useRef)(null),{value:p}=(0,t$.useEnableAnsiLogs)();(0,s.useEffect)(()=>{h.current&&h.current.scrollIntoView({block:"center"})},[h]);let{resolvedTheme:m}=(0,ra.useTheme)(),x=new Date(f.timestamp),y=new Set([...f.events.map(e=>{let t=e.source;return"static"===t&&f.events.some(e=>"PRERENDER"===e.cache)&&(t="data-cache"),"serverless"===t&&"middleware"===e.pathType&&(t="serverless-middleware"),t}),...f.logs.map(e=>e.source)]),_=()=>void(0,e3.awaitPaint)().then(()=>t(f)),v=(0,s.useMemo)(()=>f.hasFunctionCrashed?"fatal":f.statusCode>=500?"error":f.statusCode>=400?"warning":"info",[f.statusCode,f.hasFunctionCrashed]),C=(0,s.useMemo)(()=>{let e,t=f.logs.toSorted((e,t)=>{let{timestamp:r}=e,{timestamp:n}=t;return new Date(r).getTime()-new Date(n).getTime()}).reverse();return(l.length>0&&(e=t.find(e=>{let{message:t}=e,r=t.toLowerCase();return l.some(e=>r.includes(e.toLowerCase()))})),e||(e=t.find(e=>{let{level:t}=e;return"error"===t})||t.find(e=>{let{level:t}=e;return"warning"===t})||t[0]),e)?{style:"error"===e.level?"text-red-900":"warning"===e.level?"text-amber-900":"text-gray-1000",text:e.message}:{style:"text-gray-1000",text:""}},[f.logs,l]);return(0,i.jsxs)("div",{className:(0,g.clsx)("flex items-center py-[3px]",rx.default.rowContainer,rx.default[v],{[rx.default.faded]:a,[rx.default.previouslyFaded]:u,[rx.default.moveUp]:d,[rx.default.reverseBackground]:c,[rx.default.isSelected]:n,[rx.default.isNew]:o,[rx.default.darkTheme]:"dark"===m},f.className),"data-log-row-id":f.requestId,onClick:()=>_(),onKeyDown:e=>{"Enter"===e.key&&_()},ref:n?h:void 0,tabIndex:0,children:[(0,i.jsx)("div",{className:"relative flex items-center justify-center pl-2",children:(0,i.jsx)(rv,{level:v})}),(0,i.jsx)("div",{className:(0,g.clsx)(rx.default.rowItem,rx.default.uppercase,rx.default.truncate),style:{flexShrink:0},children:(0,i.jsx)(rm.TimestampTooltip,{content:{timestamp:x.getTime()},showRelativeToNow:!0,children:(0,i.jsxs)("span",{className:"whitespace-nowrap",children:[(0,i.jsx)("span",{className:"opacity-60",children:(0,eZ.format)(x,"MMM dd ")}),(0,i.jsx)("span",{className:"opacity-100",children:(0,eZ.format)(x,"HH:mm:ss")}),(0,i.jsx)("span",{className:"opacity-60",children:(0,eZ.format)(x,".SS")})]})})}),(0,i.jsxs)("div",{className:rx.default.rowItem,style:{flexShrink:0,width:"72px",justifyContent:"space-between"},children:[(0,i.jsx)(to.RequestMethodBadge,{method:f.requestMethod,variant:"small"}),(0,i.jsx)(to.StatusCodeBadge,{statusCode:f.statusCode,errorCode:f.errorCode,variant:"small"})]}),(0,i.jsxs)("div",{className:(0,g.clsx)(rx.default.rowItem),style:{minWidth:"12%",maxWidth:"12%"},children:[r?(0,i.jsx)("div",{style:{opacity:.6,paddingRight:"3px"},children:(0,i.jsx)(X.Badge,{size:"sm",variant:"green-subtle",children:"Canary"})}):null,(0,i.jsx)(ru,{text:f.domain,tooltipContainerClassName:rx.default.tooltipContainer,tooltipClassName:rx.default.tooltip})]}),(0,i.jsx)("div",{className:"ml-4 px-2",children:(0,i.jsx)("div",{className:"-space-x-px flex justify-end",style:{width:"25px",height:"16px",opacity:.6},children:Array.from(y).sort((e,t)=>{let r=["edge-middleware","serverless-middleware","static","edge-cache","lambda","serverless","edge-function","data-cache"],n=r.indexOf(e),i=r.indexOf(t);return(-1===n?999:n)-(-1===i?999:i)}).map((e,t,r)=>(0,i.jsx)("div",{style:t!==r.length-1?{clipPath:"path('M13.7639 0H0V16.7324C0.294173 16.9026 0.635713 17 1 17H15C15.1543 17 15.3045 16.9825 15.4487 16.9495C14.0552 16.6906 13 15.4685 13 14V2C13 1.23165 13.2889 0.530757 13.7639 0Z')"}:{},children:(0,i.jsx)(tg.ContextCard.Trigger,{content:(0,i.jsx)("span",{className:"block px-3 py-2 text-xs",children:rT(e)}),noPadding:!0,side:"top",children:(0,i.jsx)(rE,{type:e})})},e))})}),(0,i.jsx)("div",{className:"flex min-w-[max(12%,180px)]  max-w-[400px] items-center justify-start truncate pr-2",children:(0,i.jsx)(ru,{text:f.requestPath,className:"truncate",children:(0,i.jsx)(e5.HighlightText,{as:"span",search:l,text:f.requestPath})})}),f.logs.length>0&&(0,i.jsxs)("div",{className:(0,g.clsx)(rx.default.rowItem,rx.default.separated,rx.default.truncate,"shrink",C.style),children:[f.logs.length>1&&(0,i.jsx)("div",{className:"mr-2 rounded-full bg-gray-300 px-1 text-[11px] text-gray-800",children:f.logs.length}),p?(0,i.jsx)(tG.Ansi,{newLines:!0,renderNewLine:()=>(0,i.jsx)("span",{className:rx.default.breakSpaces,children:" "}),renderText:e=>(0,i.jsx)(e5.HighlightText,{as:"span",className:rx.default.breakSpaces,search:l,text:e}),children:C.text}):(0,i.jsx)(e5.HighlightText,{search:l,text:C.text})]})]})});function rb(){let e=ti.LOGS_PAGE_SIZE;return(0,i.jsx)("div",{className:"py-1",children:[...Array(e)].map((e,t)=>(0,i.jsx)(rj,{},`${Date.now()}-${t}`))})}function rj(){return(0,i.jsx)("div",{className:(0,g.clsx)("px-2 py-0.5"),children:(0,i.jsx)("div",{className:(0,g.clsx)("flex flex-row items-stretch justify-start flex-initial border-b-transparent!",rx.default.rowContainer),children:(0,i.jsx)(eo.Skeleton,{className:rx.default.rowItem,height:24,width:"100%"})})})}function rS(){let{team:e}=(0,ea.useTeam)(),{maxRetention:t,billingPlan:r}=(0,eu.useUserRetention)(),{setState:n}=(0,I.useLogsQueryState)(),s=`You have reached your ${(0,ei.formatDuration)(t)} of maximum retention limit.`;return(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",rx.default.loadingError),children:[(0,i.jsx)(rL,{}),(0,i.jsxs)("p",{className:"text-copy-14 text-gray-900",style:{maxWidth:"380px"},children:[s," ",(0,i.jsx)(e2.Link,{external:!0,href:"/docs/runtime-logs",type:"highlight",children:"Learn more"})]}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:"pro"===r&&e?(0,i.jsx)(e2.ButtonLink,{href:`/${e.slug}/~/settings/billing`,size:"small",touchEventWorkaround:!0,children:"Upgrade to Enterprise"}):(0,i.jsx)(c.Button,{onClick:()=>n({timeline:"past30Minutes"}),prefix:(0,i.jsx)(rd.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset timeline to past 30 mins"})})]})}function rw(e){let t,{errorName:r}=e;return t="WrongRequestIdFormat"===r?(0,i.jsxs)(i.Fragment,{children:["You may have input the wrong format for request id. At least a partial string is required, example:"," ",(0,i.jsx)("code",{className:"text-[10px] before:text-gray-500 before:content-['ID='] ",children:"abcde-1678961364403-a1b2c3d4f5e6"})]}):`We could not find logs for the selected filters, we've been notified
    of the issue, try to clear your filters. If the issue persists,
    contact our support.`,(0,i.jsx)("p",{className:`text-copy-14 text-gray-900 ${rx.default.screenReaderSelect}`,style:{maxWidth:"380px"},tabIndex:0,children:t})}function rk(e){let{error:t}=e,{setState:r}=(0,I.useLogsQueryState)(),{isDeploymentEditable:n}=(0,Q.usePageConfig)();return"ExceedsBillingLimitError"===t.name?(0,i.jsx)(rS,{}):(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",rx.default.loadingError),children:[(0,i.jsx)(rL,{}),(0,i.jsx)(rw,{errorName:t.name}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,i.jsx)(c.Button,{onClick:()=>{let e={timeline:"past30Minutes",search:"",myLogs:void 0,hasTraces:void 0};n&&(e.deploymentDomains=void 0,e.deploymentIds=void 0),r(e)},prefix:(0,i.jsx)(rd.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset filters"})})]})}function rN(){let{state:{hasTraces:e},hasActiveFilters:t,setState:r}=(0,I.useLogsQueryState)(),{mutate:n,isValidating:s}=(0,ti.useGroupLogs)(),l=t();return l&&e?(0,i.jsxs)("div",{"data-testid":(0,p.tid)("group-logs","no-logs"),className:(0,g.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",rx.default.loadingError),children:[(0,i.jsx)(rL,{icon:"traces"}),(0,i.jsx)("p",{className:`text-[16px] leading-[24px] font-medium text-gray-900 ${(0,g.clsx)(rx.default.screenReaderSelect,"max-w-[420px] text-center")}`,tabIndex:0,children:"No traces found for the selected filters"}),(0,i.jsx)("div",{className:"flex flex-col gap-3 max-w-[420px] text-left",children:(0,i.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:"Start tracing in 3 steps:"}),(0,i.jsxs)("ol",{className:"list-decimal list-inside space-y-1 marker:text-gray-600",children:[(0,i.jsxs)("li",{children:["Open the"," ",(0,i.jsx)(e2.Link,{href:"/docs/vercel-toolbar/in-production-and-localhost/add-to-production",type:"highlight",children:"Vercel Toolbar"})," ","on your deployment"]}),(0,i.jsxs)("li",{children:["Select ",(0,i.jsx)("strong",{children:"Run Page Trace"})," and wait for the page to reload"]}),(0,i.jsx)("li",{children:"Click the notification to view the trace"})]})]})}),(0,i.jsxs)("div",{className:"flex flex-col @md-page:flex-row items-stretch justify-start gap-4 flex-initial",children:[(0,i.jsx)(e2.ButtonLink,{href:"/docs/tracing/session-tracing",size:"small",children:"Learn More about Tracing"}),(0,i.jsx)(c.Button,{disabled:s,onClick:()=>void n(),prefix:s?(0,i.jsx)(ta.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]})]}):(0,i.jsxs)("div",{"data-testid":(0,p.tid)("group-logs","no-logs"),className:(0,g.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",rx.default.loadingError),children:[(0,i.jsx)(rL,{icon:l?"logs":"function"}),(0,i.jsx)("p",{className:`text-copy-14 text-gray-900 ${rx.default.screenReaderSelect}`,style:{maxWidth:"380px"},tabIndex:0,children:l?"No logs found for the selected filters":"There are no runtime logs in this time range"}),(0,i.jsx)("div",{className:"flex flex-col @md-page:flex-row items-stretch justify-start gap-4 flex-initial",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Button,{onClick:()=>r({},{replace:!0,override:!0}),size:"small",children:"Reset Filters"}),(0,i.jsx)(c.Button,{disabled:s,onClick:()=>void n(),prefix:s?(0,i.jsx)(ta.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Button,{disabled:s,onClick:()=>void n(),prefix:s?(0,i.jsx)(ta.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",children:"Refresh Query"}),(0,i.jsx)(e2.ButtonLink,{href:"/docs/runtime-logs",size:"small",tab:!0,type:"secondary",children:"Learn More"})]})})]})}function rE(e){let{type:t}=e;switch(t){case"request":return(0,i.jsx)(rh.File,{size:16});case"serverless":return(0,i.jsx)(eI.FunctionSquare,{size:16});case"serverless-middleware":case"edge-middleware":return(0,i.jsx)(eF.FunctionMiddleware,{size:16});case"edge-function":return(0,i.jsx)(eR.FunctionEdge,{size:16});case"data-cache":return(0,i.jsx)(eq.DataCache,{size:16});case"external":return(0,i.jsx)(eB.ArrowGlobe,{size:16});case"redirect":return(0,i.jsx)(eK.ArrowRight,{size:16});default:return(0,i.jsx)(eP.EdgeCache,{size:16})}}function rT(e){switch(e){case"request":return"Request";case"serverless":return"Vercel Function";case"serverless-middleware":case"edge-middleware":return"Middleware";case"edge-function":return"Edge Function";case"data-cache":case"static":return"Cache";case"external":return"Rewrite";case"redirect":return"Redirect";default:return e}}function rL(e){let{icon:t="logs"}=e;return(0,i.jsx)(rc.EmptyState.Icon,{icon:"function"===t?(0,i.jsx)(eI.FunctionSquare,{}):"traces"===t?(0,i.jsx)(rg.Traces,{}):(0,i.jsx)(rf.Logs,{}),size:40})}var rM=e.i(4597921);function rD(){return(0,rM.useServerFlag)("enable-observability-error-dashboard",!1)}var rA=e.i(9224004);let rO=()=>{let{selectedTrace:e}=(0,rA.useLogs)();return e};var rI=e.i(5851942);function rF(e){let{level:t}=e;switch(t){case"fatal":return(0,i.jsx)(tH.Stop,{"aria-hidden":"true",className:"-ml-1"});case"warning":return(0,i.jsx)(tU.Warning,{"aria-hidden":"true"});case"error":return(0,i.jsx)(tV.CrossCircle,{"aria-hidden":"true"});default:return(0,i.jsx)("div",{style:{width:"16px",height:"16px"}})}}function rR(e){return e.includes("process exited with")&&e.includes("The logs above can help with debugging the issue.")}function rP(e){let{timestamp:t,message:r,level:n,error:s,onShowError:l,invocationId:o,concurrency:a,handleViewConcurrentRequests:u,isInvocationFiltered:d}=e,c=tl(),f=`${r.replaceAll("\r","\n")}`,{value:h}=(0,t$.useEnableAnsiLogs)(),m=rD(),x=(0,rM.useServerFlag)("enable-logs-json-rendering",!1);return(0,i.jsxs)("div",{className:(0,g.clsx)("log-message","group -mt-px flex flex-col border-y py-1.5 pl-4 pr-2 font-mono text-[13px] @[480px]:flex-row @[480px]:gap-3",{info:"text-gray-1000 bg-background-200",error:"-my-px border-y border-red-300 bg-red-100 text-red-900",warning:"-my-px border-y border-amber-300 bg-amber-100 text-amber-900",fatal:"border-l-4 border-l-red-900 -my-px border-y border-red-300 text-red-900 bg-gradient-to-r from-red-400 to-red-100 to-5%"}[n]),children:[(0,i.jsxs)("div",{className:"flex items-center @[480px]:items-start",children:[(0,i.jsx)("div",{className:(0,g.clsx)("mr-2  mt-[2px] flex @[480px]:mt-[5px] @[480px]:size-4","info"===n&&"hidden @[480px]:block"),children:(0,i.jsx)(rF,{level:n})}),(0,i.jsxs)("span",{className:"select-none whitespace-nowrap pt-px font-mono",children:[(0,tW.isToday)(new Date(t))?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"uppercase opacity-65",children:(0,eZ.format)(new Date(t),"MMM dd")})," "]}),(0,i.jsx)("span",{className:"opacity-75",children:(0,eZ.format)(new Date(t),"HH:mm:ss")}),(0,i.jsx)("span",{className:"opacity-50",children:(0,eZ.format)(new Date(t),".SSS")})]}),(0,i.jsx)("div",{className:"flex flex-1 justify-end @[480px]:hidden",children:(0,i.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:f,title:"Copy message to the clipboard",type:"tertiary"})})]}),(0,i.jsx)("span",{className:"flex-1 whitespace-pre-wrap break-all pt-px","data-testid":(0,p.tid)("group-logs","detail-message"),children:(0,i.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,i.jsx)(ri,{enableAnsiLogs:h,enableJsonRendering:x,message:f,searchWords:c}),rR(f)&&void 0!==a&&a>1&&o&&u&&!d&&(0,i.jsx)("span",{className:"block w-full mt-2 mb-2 text-xs",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,i.jsx)(tK.Question,{size:14,className:"color-gray-700 flex-shrink-0"}),(0,i.jsxs)("span",{className:"text-gray-700",children:["This error may be caused by other concurrent requests."," ",(0,i.jsx)("button",{type:"button",className:"text-gray-900 underline hover:text-black bg-transparent border-none p-0 m-0 cursor-pointer font-medium",onClick:()=>u(o),children:"View concurrent requests"})]})]})})]})}),m&&"error"===n&&s?(0,i.jsxs)("button",{className:"sticky top-11 -mx-1 -mr-2 flex h-[30px] cursor-pointer flex-row items-center gap-1 whitespace-nowrap rounded-md border border-[hsla(var(--ds-red-700-value),0.2)] bg-[hsla(var(--ds-red-800-value),0.1)] px-2 py-1 font-sans text-red-900 transition-colors duration-100 ease-in-out hover:bg-[hsla(var(--ds-red-800-value),0.3)]",onClick:()=>l?.(s),type:"button",children:[(0,i.jsx)(eA.Eye,{size:16}),(0,i.jsxs)("span",{children:["Seen ",new Intl.NumberFormat().format(s.countErrors)," times"]})]}):null,"fatal"===n?(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(X.Badge,{variant:"red",size:"sm",children:"Fatal"})}):null,(0,i.jsx)("div",{className:(0,g.clsx)("-my-0.5 hidden opacity-0 group-hover:opacity-100 @[480px]:block focus-within:focus-visible:opacity-100"),children:(0,i.jsx)(tB.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:f,title:"Copy message to the clipboard",type:"tertiary"})})]})}function rB(e){let{logs:t,source:r,onShowError:n,invocationId:s,concurrency:l,handleViewConcurrentRequests:o,isInvocationFiltered:a}=e;return(0,i.jsxs)("div",{className:"relative flex flex-col",children:[(0,i.jsxs)("div",{className:"sticky -top-px z-10 -mt-px flex select-none flex-row gap-2 border-y bg-background-100 px-4 py-2",children:[(0,i.jsx)(rE,{type:r}),(0,i.jsx)("p",{className:"text-[13px] leading-[18px] font-medium text-gray-1000",children:rT(r)})]}),(0,i.jsx)("div",{className:"flex flex-col @container",children:t.map((e,t)=>(0,i.jsx)(rP,{error:e.error,level:e.level,message:e.message,onShowError:n,timestamp:e.timestamp,invocationId:s,concurrency:l,handleViewConcurrentRequests:o,isInvocationFiltered:a},`${e.timestamp}-${t}`))})]})}function rq(e){let{onToggleCollapse:t,collapsed:r}=e,[n,l]=(0,s.useState)(!1),{data:o}=(0,tt.useSelectedLog)(),a=rO(),{filters:u,setFilter:d}=(0,I.useLogsSearchState)(),f=(0,y.useParams)(),h=(0,s.useMemo)(()=>{let e=a?.spans.find(e=>e.spanId===a.rootSpanId);if(!e)return"";let[t,r]=e.duration,n=1e3*t+r/1e6;return n>1e3?`${new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(.001*n)}s`:`${Math.round(n)}ms`},[a]),p=!!(o?.traceId&&o.sessionId),m=n&&p?"trace":"logs",[x,_]=(0,s.useState)(null),[v,C]=(0,s.useState)(null),b=rD(),{data:j}=(0,rl.useErrors)({skip:!o||!b}),k=(0,s.useCallback)(()=>{let e=!r;t?.(e)},[r,t]),N=(0,s.useCallback)(e=>{d("invocationIds",[e])},[d]);if((0,s.useEffect)(()=>{if(!o)return;let e=o.logs.some(e=>null===x||e.level===x);x&&!e&&_(null)},[o,x]),(0,s.useEffect)(()=>{let e=e=>{if(r)return;let t=document.activeElement,n=t&&(["input","select","textarea"].includes(t.tagName.toLowerCase())||"true"===t.getAttribute("contenteditable"));if((e.metaKey||e.ctrlKey)&&"a"===e.key&&!n){e.preventDefault();let t=document.querySelectorAll(".log-message"),r=document.createRange();if(t.length>0){r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]);let e=window.getSelection();e?.removeAllRanges(),e?.addRange(r)}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),!o)return null;let E=o.logs.reduce((e,t)=>{e[t.source]||(e[t.source]=[]);let r=j?.rows.find(e=>rz(t.message)===rz(e.errorName)),n={...t,error:r};return e[t.source].push(n),e},{}),T=o.logs.reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{info:0,warning:0,error:0,fatal:0}),L=Object.values(T).filter(e=>e>0).length,M=L>1||1===L&&T.info>0,D=Object.entries(Object.entries(E).reduce((e,t)=>{let[r,n]=t,i=x?n.filter(e=>e.level===x):n;return i.length>0&&(e[r]=i),e},{})).sort((e,t)=>{let[,r]=e,[,n]=t,i=r[0]?.timestamp??"",s=n[0]?.timestamp??"";return new Date(i).getTime()-new Date(s).getTime()}),A=D.find(e=>{let[,t]=e;return t.some(e=>rR(e.message))})?.[0],O=o.events?.find(e=>"serverless"===A&&"middleware"===e.pathType?void 0:e.source===A)?.invocationId;O||(O=o.events?.[0]?.invocationId);let F=o.events?.reduce((e,t)=>t.concurrency&&t.concurrency>e?t.concurrency:e,0),R=!!t;return(0,i.jsx)("div",{className:(0,g.clsx)("flex h-full flex-1 flex-col transition-all duration-200 ease-in-out @sm-page:flex-initial"),children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:(0,g.clsx)("flex items-center justify-between border-b bg-background-100 py-2 pr-2",v?"pl-4":"pl-1"),onClick:e=>{e.target!==e.currentTarget||v||k()},children:[(0,i.jsx)("div",{className:"flex items-center gap-2",children:R?v?(0,i.jsxs)("header",{className:"text-heading-14",children:["Error Details",(0,i.jsx)(X.Badge,{className:"ml-2",children:"Internal"})]}):(0,i.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,i.jsx)("div",{className:"flex flex-row items-center gap-1",children:(0,i.jsx)("button",{className:(0,g.clsx)("text-button-14 rounded px-3 py-1.5 transition-colors",p&&"cursor-pointer hover:bg-gray-200",p&&"logs"===m?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),l(!1),r&&k(),w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"logs-tab",action:"View Logs"})},type:"button",children:"Logs"})}),p?(0,i.jsx)("button",{className:(0,g.clsx)("text-button-14 cursor-pointer rounded px-3 py-1.5 transition-colors hover:bg-gray-200","trace"===m?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),l(!0),r&&k(),w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"trace-tab",action:"View Trace"})},type:"button",children:"Trace"}):null]}):null}),R?(0,i.jsx)("div",{className:"flex items-center gap-1",children:v?(0,i.jsx)(c.Button,{"aria-label":"Close Error Details",onClick:()=>C(null),svgOnly:!0,size:"small",type:"tertiary",shape:"square",children:(0,i.jsx)(eJ.Cross,{size:16})}):(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["logs"===m?(0,i.jsxs)(i.Fragment,{children:[M?(0,i.jsxs)(X.Badge,{className:"cursor-pointer",onClick:()=>_(null),size:"sm",variant:"gray-subtle",children:[o.logs.length," Total"]}):null,T.warning>0&&(0,i.jsxs)(X.Badge,{className:"cursor-pointer",onClick:()=>_("warning"===x?null:"warning"),size:"sm",variant:"warning"===x?"amber":"amber-subtle",children:[T.warning," Warning"]}),T.error>0&&(0,i.jsxs)(X.Badge,{className:"cursor-pointer",onClick:()=>_("error"===x?null:"error"),size:"sm",variant:"error"===x?"red":"red-subtle",children:[T.error," Error"]}),T.fatal>0&&(0,i.jsxs)(X.Badge,{className:`cursor-pointer border ${"fatal"===x?"border-red-900":"border-red-700"}`,onClick:()=>_("fatal"===x?null:"fatal"),size:"sm",variant:"red",children:[T.fatal," Fatal"]}),o.logs.length>0?(0,i.jsx)(tB.CopyButton,{label:"Copy Logs",shape:"square",style:{width:"28px",height:"28px"},textToCopy:o.logs.map(e=>`${e.timestamp} [${e.level}] ${e.message}`).join("\n"),title:"Copy full logs to clipboard",type:"tertiary"}):null]}):(0,i.jsxs)(i.Fragment,{children:[a?(0,i.jsx)(X.Badge,{size:"sm",variant:"gray-subtle",children:h}):null,f&&p?(0,i.jsx)(e2.ButtonLink,{"aria-label":"Open Trace in New tab",className:"-mr-2",href:`/${f.teamSlug}/${f.project}/logs/traces/${o.traceId}`,svgOnly:!0,target:"_blank",type:"tertiary",width:42,children:(0,i.jsx)(ez.External,{})}):null]}),(0,i.jsx)(c.Button,{"aria-label":r?"Expand Logs Panel":"Collapse Logs Panel",onClick:k,svgOnly:!0,type:"tertiary",size:"small",shape:"square",children:r?(0,i.jsx)(eG.ChevronUp,{size:16}):(0,i.jsx)(eV.ChevronDown,{size:16})})]})}):null]}),v?(0,i.jsx)(ro.ErrorCard,{row:v,showGoToErrors:!0,className:"sticky z-50 w-4/5 inset-0 rounded-none font-sans h-full text-gray-1000 shadow-none border-none"}):null,"trace"===m?(0,i.jsx)(rI.TraceViewerTimeline,{trace:a,height:"100%"}):o.logs.length>0&&!r?(0,i.jsx)("div",{className:(0,g.clsx)("relative flex flex-1 flex-col overflow-y-auto"),children:D.map(e=>{let[t,r]=e;return(0,i.jsx)(rB,{logs:r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),onShowError:e=>C(e),source:t,invocationId:O,concurrency:F,handleViewConcurrentRequests:N,isInvocationFiltered:(u.invocationIds?.length??0)>0},t)})}):!r&&(0,i.jsx)("div",{className:"flex h-full items-center justify-center bg-background-200 p-8",children:(0,i.jsx)("p",{className:"text-copy-14 text-gray-900",children:"No logs found for this request"})})]})})}function rz(e){let t="";for(let r of[/^\s*⨯ \[(.{3,}?)\] {/,/^\s*⨯ (.{3,}?)(\r\n|\r|\n|$)/,/^\s*(.{3,}?)(\r\n|\r|\n|$)/]){let n=e.match(r);if(n?.[1]){t=n[1];break}}if(!t)return e;let r=t.replace(/\s+/g," ").trim();return(r=(r=r.replace(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/g,"<url>")).replace(/-?\d+\s*(milliseconds?|seconds?|minutes?|mins?|hours?|days?|ms|s|m|h|d)/gi,"<duration>")).replace(/-?\d+/g,"<number>")}function rW(){let e=rO();return(0,i.jsx)(rI.TraceViewer,{height:"100%",trace:e})}function r$(e){return!!e&&("string"==typeof e&&"-"!==e&&""!==e||"number"==typeof e&&-1!==e)}let rU=e=>"STALE"===e.cache||"PRERENDER"===e.cache;function rV(e){let{className:t}=e;return(0,i.jsx)("div",{className:(0,g.default)("absolute left-6 h-16 w-3.5 border-[1.5px] border-r-0 border-gray-400 ",t)})}function rK(e){let{direction:t,through:r,lineClassName:n,className:s,children:l}=e;return(0,i.jsxs)("div",{className:(0,g.default)("relative flex items-center overflow-hidden",l?"h-10 pl-9":"h-2",s),children:["straight"===t?(0,i.jsx)(rV,{className:(0,g.default)(n)}):(0,i.jsxs)(i.Fragment,{children:[r?(0,i.jsx)(rV,{className:(0,g.default)("h-40 rounded-none border-y-0","up"===t?"top-0":"bottom-[47.5%]","dashed"===r&&"top-[55%] border-dashed")}):null,("up"===t||"both"===t)&&(0,i.jsx)(rV,{className:(0,g.default)(n,"bottom-1/2 translate-y-[0.5px] rounded-l")}),("down"===t||"both"===t)&&(0,i.jsx)(rV,{className:(0,g.default)(n,"top-1/2 -translate-y-px rounded-l-md","dashed"===r&&"border-dashed border-t-0 rounded-tl-none translate-y-2")})]}),(0,i.jsx)("div",{className:"relative flex items-center",children:l})]})}function rH(e){let{hasFunctionCrashed:t,requestDurationMs:r}=e;return(0,i.jsx)(rK,{className:"mb-2",direction:"up",children:(0,i.jsx)(to.RequestFinishedBadge,{hasFunctionCrashed:t,requestDurationMs:r})})}var rG=e.i(9893476);function rJ(e){let{requestId:t,projectId:r,eventTime:n}=e,{team:i}=(0,_.useAccount)(),s=i?.billing?.plan,l=(0,L.default)(()=>i&&r&&t&&n&&s&&"hobby"!==s?`/api/logs/tag-state-lookup${(0,M.encode)({ownerId:i.id,requestId:t,projectId:r,eventTime:n})}`:null,e=>(0,tf.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1});return{data:l.data?.data,loading:l.isValidating,error:l.error}}function rZ(e){let{requestId:t,projectId:r,eventTime:n}=e,{loading:s,data:l}=rJ({requestId:t,projectId:r,eventTime:n});if(s)return null;let o=l?.filter(e=>!e.tagName.startsWith("_N_T_")&&!e.tagName.startsWith("_vc_"));if(!o||0===o.length)return null;let a={};for(let e of o)a[e.tagName]=null;return(0,i.jsx)(tq,{title:"Tags",params:a,hideCopyButton:!0})}function rX(e,t){if("string"==typeof e)try{return(0,eM.default)(BigInt(e),t)}catch{return"unknown"}return(0,eM.default)(e,t)}let rQ=new Map([["nodejs",{name:"Node.js",logo:(0,i.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useId)(),r=`${t}_mask0`,n=`${t}_mask1`,l=`${t}_mask2`,o=`${t}_paint0_linear`,a=`${t}_paint1_linear`,u=`${t}_paint2_linear`;return(0,i.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 14 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{clipRule:"evenodd",d:"M6.91226 6.4202C6.95713 6.39383 7.01268 6.39383 7.05755 6.4202L8.26282 7.11829C8.30789 7.14449 8.33546 7.19271 8.33546 7.24481V8.64248C8.33546 8.69458 8.30789 8.7428 8.26282 8.769L7.05755 9.46709C7.01268 9.49346 6.95713 9.49346 6.91226 9.46709L5.70773 8.769C5.66213 8.74331 5.63381 8.69498 5.63361 8.64248V7.24481C5.63361 7.19271 5.66029 7.14449 5.70625 7.11829L6.91226 6.4202Z",fill:"#689F63",fillRule:"evenodd"}),(0,i.jsx)("mask",{height:"16",id:r,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,i.jsx)("path",{d:"M6.62322 0.101176L0.377445 3.72068C0.143899 3.85581 -1.28246e-05 4.10586 8.5718e-10 4.3765V11.6206C8.5718e-10 11.891 0.143506 12.1409 0.377445 12.2764L6.62367 15.8987C6.85722 16.0338 7.14471 16.0338 7.37826 15.8987L13.6234 12.2764C13.8564 12.1408 13.9999 11.8909 14 11.6206V4.3765C14 4.10619 13.8562 3.85613 13.622 3.72068L7.37767 0.101176C7.14355 -0.0337253 6.85571 -0.0337253 6.62159 0.101176",fill:"white"})}),(0,i.jsxs)("g",{mask:`url(#${r})`,children:[(0,i.jsx)("path",{d:"M20.2158 3.09495L2.61633 -5.56644L-6.40765 12.9165L11.1914 21.5783L20.2158 3.09495Z",fill:`url(#${o})`}),(0,i.jsx)("mask",{height:"16",id:n,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,i.jsx)("path",{d:"M0.148193 12.0591C0.207938 12.137 0.282656 12.2044 0.370569 12.255L5.72833 15.3622L6.62079 15.8772C6.75422 15.9546 6.90632 15.9873 7.05576 15.9762C7.10557 15.9721 7.15538 15.9628 7.20401 15.9489L13.7914 3.83876C13.741 3.78368 13.6819 3.73754 13.6158 3.69884L9.5262 1.32771L7.36442 0.0788888C7.303 0.0439129 7.23718 0.0173793 7.16873 0L0.148193 12.0591Z",fill:"white"})}),(0,i.jsx)("g",{mask:`url(#${n})`,children:(0,i.jsx)("path",{d:"M-7.45789 5.63936L4.96918 22.5265L21.4042 10.335L8.97638 -6.55164L-7.45789 5.63936Z",fill:`url(#${a})`})}),(0,i.jsx)("mask",{height:"16",id:l,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,i.jsx)("path",{d:"M6.82612 0.00282809C6.7199 0.0136004 6.61712 0.0466642 6.52444 0.0998762L0.296448 3.70896L7.01218 15.9903C7.10558 15.9769 7.19749 15.9457 7.28051 15.8974L13.5263 12.2751C13.7171 12.1642 13.8503 11.9753 13.891 11.7577L7.04479 0.0151824C6.99451 0.00512223 6.94337 3.71091e-05 6.8921 0C6.87134 0 6.85058 0.00104193 6.82983 0.00297693",fill:"white"})}),(0,i.jsx)("g",{mask:`url(#${l})`,children:(0,i.jsx)("path",{d:"M-0.0454712 -0.00238037V16.0731H14.0383V-0.00238037H-0.0454712Z",fill:`url(#${u})`})})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:o,x1:"11.2743",x2:"2.24575",y1:"-1.24934",y2:"17.0954",children:[(0,i.jsx)("stop",{offset:"0.3",stopColor:"#3E863D"}),(0,i.jsx)("stop",{offset:"0.5",stopColor:"#55934F"}),(0,i.jsx)("stop",{offset:"0.8",stopColor:"#5AAD45"})]}),(0,i.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:a,x1:"-1.114",x2:"15.2951",y1:"14.1796",y2:"2.10394",children:[(0,i.jsx)("stop",{offset:"0.57",stopColor:"#3E863D"}),(0,i.jsx)("stop",{offset:"0.72",stopColor:"#619857"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#76AC64"})]}),(0,i.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:u,x1:"-0.0406827",x2:"14.041",y1:"8.03582",y2:"8.03582",children:[(0,i.jsx)("stop",{offset:"0.16",stopColor:"#6BBF47"}),(0,i.jsx)("stop",{offset:"0.38",stopColor:"#79B461"}),(0,i.jsx)("stop",{offset:"0.47",stopColor:"#75AC64"}),(0,i.jsx)("stop",{offset:"0.7",stopColor:"#659E5A"}),(0,i.jsx)("stop",{offset:"0.9",stopColor:"#3E863D"})]})]})]})},{"aria-hidden":"true"})}],["bun",{name:"Bun",logo:(0,i.jsx)(e0,{"aria-hidden":"true"})}],["go",{name:"Go",logo:(0,i.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsx)("svg",{height:"10px",version:"1.1",viewBox:"0 0 261 99",width:"29px",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,i.jsxs)("g",{fill:"#2DBCAF",fillRule:"nonzero",id:"Go-Logo_Aqua",children:[(0,i.jsx)("path",{d:"M19.5076142,29.4191457 C19,29.4191457 18.8730964,29.1559878 19.1269036,28.761251 L21.7918782,25.2086194 C22.0456853,24.8138825 22.680203,24.5507246 23.1878173,24.5507246 L68.4923858,24.5507246 C69,24.5507246 69.1269036,24.9454615 68.8730964,25.3401983 L66.715736,28.761251 C66.4619289,29.1559878 65.8274112,29.5507246 65.4467005,29.5507246 L19.5076142,29.4191457 Z",id:"Path"}),(0,i.jsx)("path",{d:"M0.509858443,41.5507246 C0,41.5507246 -0.127464611,41.2804544 0.127464611,40.875049 L2.80422144,37.2264003 C3.05915066,36.8209949 3.69647371,36.5507246 4.20633215,36.5507246 L62.3301946,36.5507246 C62.8400531,36.5507246 63.0949823,36.95613 62.9675177,37.3615354 L61.9478008,40.6047787 C61.8203362,41.1453192 61.3104777,41.4155895 60.8006193,41.4155895 L0.509858443,41.5507246 Z",id:"Path"}),(0,i.jsx)("path",{d:"M31.5021645,53.4191457 C31,53.4191457 30.8744589,53.0244088 31.1255411,52.629672 L32.8831169,49.3401983 C33.1341991,48.9454615 33.6363636,48.5507246 34.1385281,48.5507246 L59.2467532,48.5507246 C59.7489177,48.5507246 60,48.9454615 60,49.4717773 L59.7489177,52.629672 C59.7489177,53.1559878 59.2467532,53.5507246 58.8701299,53.5507246 L31.5021645,53.4191457 Z",id:"Path"}),(0,i.jsx)("g",{id:"CXHf1q_1_",transform:"translate(69.000000, 0.550725)",children:(0,i.jsxs)("g",{id:"Group",children:[(0,i.jsx)("path",{d:"M94.0875,27.3038462 C86.0881579,29.3346154 80.6282895,30.8576923 72.7559211,32.8884615 C70.8513158,33.3961538 70.7243421,33.5230769 69.0736842,31.6192308 C67.1690789,29.4615385 65.7723684,28.0653846 63.1059211,26.7961538 C55.1065789,22.8615385 47.3611842,24.0038462 40.1236842,28.7 C31.4894737,34.2846154 27.0453947,42.5346154 27.1723684,52.8153846 C27.2993421,62.9692308 34.2828947,71.3461538 44.3138158,72.7423077 C52.9480263,73.8846154 60.1855263,70.8384615 65.8993421,64.3653846 C67.0421053,62.9692308 68.0578947,61.4461538 69.3276316,59.6692308 C64.7565789,59.6692308 59.0427632,59.6692308 44.8217105,59.6692308 C42.1552632,59.6692308 41.5203947,58.0192308 42.4092105,55.8615385 C44.0598684,51.9269231 47.1072368,45.3269231 48.8848684,42.0269231 C49.2657895,41.2653846 50.1546053,39.9961538 52.0592105,39.9961538 C58.5348684,39.9961538 82.4059211,39.9961538 98.2776316,39.9961538 C98.0236842,43.4230769 98.0236842,46.85 97.5157895,50.2769231 C96.1190789,59.4153846 92.6907895,67.7923077 87.1039474,75.1538462 C77.9618421,87.2115385 66.0263158,94.7 50.9164474,96.7307692 C38.4730263,98.3807692 26.9184211,95.9692308 16.7605263,88.3538462 C7.36447368,81.2461538 2.03157895,71.8538462 0.634868421,60.1769231 C-1.01578947,46.3423077 3.04736842,33.9038462 11.4276316,22.9884615 C20.4427632,11.1846154 32.3782895,3.69615385 46.9802632,1.03076923 C58.9157895,-1.12692308 70.3434211,0.269230769 80.6282895,7.25 C87.3578947,11.6923077 92.1828947,17.7846154 95.3572368,25.1461538 C96.1190789,26.2884615 95.6111842,26.9230769 94.0875,27.3038462 Z",id:"Path"}),(0,i.jsx)("path",{d:"M136.115789,97.4923077 C124.561184,97.2384615 114.022368,93.9384615 105.134211,86.3230769 C97.6427632,79.85 92.9447368,71.6 91.4210526,61.8269231 C89.1355263,47.4846154 93.0717105,34.7923077 101.705921,23.4961538 C110.975,11.3115385 122.148684,4.96538462 137.258553,2.3 C150.209868,0.0153846154 162.399342,1.28461538 173.446053,8.77307692 C183.476974,15.6269231 189.698684,24.8923077 191.349342,37.0769231 C193.507895,54.2115385 188.555921,68.1730769 176.747368,80.1038462 C168.367105,88.6076923 158.082237,93.9384615 146.273684,96.35 C142.845395,96.9846154 139.417105,97.1115385 136.115789,97.4923077 Z M166.335526,46.2153846 C166.208553,44.5653846 166.208553,43.2961538 165.954605,42.0269231 C163.669079,29.4615385 152.114474,22.3538462 140.051974,25.1461538 C128.243421,27.8115385 120.625,35.3 117.831579,47.2307692 C115.546053,57.1307692 120.371053,67.1576923 129.513158,71.2192308 C136.496711,74.2653846 143.480263,73.8846154 150.209868,70.4576923 C160.240789,65.2538462 165.700658,57.1307692 166.335526,46.2153846 Z",id:"Shape"})]})})]})})})},{"aria-hidden":"true"})}],["python",{name:"Python",logo:(0,i.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useId)(),r=`${t}_linearGradient-1`,n=`${t}_linearGradient-2`;return(0,i.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 98 99",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:r,x1:"0.959176447%",x2:"74.0505936%",y1:"9.14856261e-08%",y2:"64.1103734%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#5A9FD4"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#306998"})]}),(0,i.jsxs)("linearGradient",{id:n,x1:"49.9999998%",x2:"24.2424815%",y1:"82.2756107%",y2:"44.914431%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFD43B"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#FFE873"})]})]}),(0,i.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,i.jsxs)("g",{fillRule:"nonzero",id:"Group",children:[(0,i.jsx)("path",{d:"M48.3285309,0.000808961017 C44.2949163,0.0195514649 40.4429046,0.363560535 37.053531,0.963308956 C27.0688609,2.72727229 25.2560319,6.41939877 25.256031,13.228309 L25.256031,22.2208089 L48.8510309,22.2208089 L48.8510309,25.2183089 L25.256031,25.2183089 L16.4010311,25.2183089 C9.5436672,25.2183089 3.53916305,29.3399799 1.66103098,37.1808088 C-0.505370605,46.1682189 -0.601462292,51.776509 1.66103098,61.1608087 C3.33824788,68.1461184 7.34366897,73.1233087 14.2010311,73.1233087 L22.313531,73.1233087 L22.313531,62.3433087 C22.313531,54.555395 29.0518177,47.6858106 37.053531,47.6858088 L60.6210308,47.6858088 C67.1813877,47.6858088 72.4185308,42.2842245 72.4185308,35.6958089 L72.4185308,13.228309 C72.4185308,6.83393069 67.0241484,2.03050484 60.6210308,0.963308956 C56.5677623,0.288590695 52.3621455,-0.0179335429 48.3285309,0.000808961017 Z M35.568531,7.23330901 C38.0057323,7.23330901 39.996031,9.25611748 39.996031,11.743309 C39.996031,14.2216847 38.0057323,16.225809 35.568531,16.225809 C33.1225921,16.225809 31.141031,14.2216838 31.141031,11.743309 C31.141031,9.25611836 33.1225921,7.23330901 35.568531,7.23330901 Z",fill:`url(#${r})`,id:"path1948"}),(0,i.jsx)("path",{d:"M75.3610308,25.2183089 L75.3610308,35.6958089 C75.3610308,43.8188732 68.4742432,50.6558079 60.6210308,50.6558088 L37.053531,50.6558088 C30.597998,50.6558088 25.256031,56.1808738 25.256031,62.6458087 L25.256031,85.1133059 C25.256031,91.5076851 30.8163884,95.2687875 37.053531,97.1033059 C44.5223822,99.2994427 51.6846194,99.6963403 60.6210308,97.1033059 C66.5611672,95.3834427 72.4185334,91.9222091 72.4185308,85.1133059 L72.4185308,76.1208086 L48.8510309,76.1208086 L48.8510309,73.1233087 L72.4185308,73.1233087 L84.2160342,73.1233087 C91.073399,73.1233087 93.6287342,68.3401496 96.0135254,61.1608087 C98.4769358,53.7697891 98.372119,46.6621259 96.0135254,37.1808088 C94.318839,30.3542608 91.0821198,25.2183089 84.2160342,25.2183089 L75.3610308,25.2183089 Z M62.1060308,82.1158086 C64.5519715,82.1158086 66.5335308,84.1199356 66.5335308,86.5983059 C66.5335308,89.0854939 64.5519688,91.1083059 62.1060308,91.1083059 C59.6688268,91.1083059 57.6785309,89.0854939 57.6785309,86.5983059 C57.6785309,84.1199356 59.6688242,82.1158086 62.1060308,82.1158086 Z",fill:`url(#${n})`,id:"path1950"})]})})]})},{"aria-hidden":"true"})}],["ruby",{name:"Ruby",logo:(0,i.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useId)(),r=Array(15).fill().map((e,r)=>`${t}_linearGradient-${r}`);return(0,i.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 100 100",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:r[0],x1:"84.7503645%",x2:"58.2543962%",y1:"111.399353%",y2:"64.5837087%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,i.jsx)("stop",{offset:"41%",stopColor:"#E42B1E"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#990000"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#990000"})]}),(0,i.jsxs)("linearGradient",{id:r[1],x1:"116.651024%",x2:"1.74616041%",y1:"60.8903211%",y2:"19.2879503%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,i.jsxs)("linearGradient",{id:r[2],x1:"75.7744024%",x2:"38.9781357%",y1:"219.327131%",y2:"7.82868176%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,i.jsxs)("linearGradient",{id:r[3],x1:"50.012428%",x2:"66.4830414%",y1:"7.23449921%",y2:"79.1354134%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"23%",stopColor:"#E57252"}),(0,i.jsx)("stop",{offset:"46%",stopColor:"#DE3B20"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#A60003"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#A60003"})]}),(0,i.jsxs)("linearGradient",{id:r[4],x1:"46.1741749%",x2:"49.9323342%",y1:"16.347907%",y2:"83.0468449%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"23%",stopColor:"#E4714E"}),(0,i.jsx)("stop",{offset:"56%",stopColor:"#BE1A0D"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,i.jsxs)("linearGradient",{id:r[5],x1:"36.9653573%",x2:"49.5282324%",y1:"15.5936471%",y2:"92.4776332%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"18%",stopColor:"#E46342"}),(0,i.jsx)("stop",{offset:"40%",stopColor:"#C82410"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,i.jsxs)("linearGradient",{id:r[6],x1:"13.6086166%",x2:"85.7636612%",y1:"58.3456855%",y2:"-46.7167814%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"54%",stopColor:"#C81F11"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#BF0905"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#BF0905"})]}),(0,i.jsxs)("linearGradient",{id:r[7],x1:"27.6242038%",x2:"50.7445145%",y1:"21.1345847%",y2:"79.0557818%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"31%",stopColor:"#DE4024"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#BF190B"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#BF190B"})]}),(0,i.jsxs)("linearGradient",{id:r[8],x1:"-20.6671297%",x2:"104.241521%",y1:"122.281897%",y2:"-6.34211007%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,i.jsx)("stop",{offset:"7%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"17%",stopColor:"#FFFFFF"}),(0,i.jsx)("stop",{offset:"27%",stopColor:"#C82F1C"}),(0,i.jsx)("stop",{offset:"33%",stopColor:"#820C01"}),(0,i.jsx)("stop",{offset:"46%",stopColor:"#A31601"}),(0,i.jsx)("stop",{offset:"72%",stopColor:"#B31301"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#E82609"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#E82609"})]}),(0,i.jsxs)("linearGradient",{id:r[9],x1:"58.7919609%",x2:"11.9636556%",y1:"65.2049657%",y2:"50.1275621%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,i.jsx)("stop",{offset:"54%",stopColor:"#990C00"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#A80D0E"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#A80D0E"})]}),(0,i.jsxs)("linearGradient",{id:r[10],x1:"79.3194899%",x2:"23.088288%",y1:"62.7538068%",y2:"17.8876818%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#9E0C00"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#9E0C00"})]}),(0,i.jsxs)("linearGradient",{id:r[11],x1:"92.8800277%",x2:"59.8414537%",y1:"74.1223655%",y2:"39.7039965%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#9E120B"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#9E120B"})]}),(0,i.jsxs)("radialGradient",{cx:"32.0008013%",cy:"40.2100469%",fx:"32.0008013%",fy:"40.2100469%",gradientTransform:"translate(0.320008,0.402100),scale(0.522539,1.000000),translate(-0.320008,-0.402100)",id:r[12],r:"133.14407%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#7E0E08"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#7E0E08"})]}),(0,i.jsxs)("radialGradient",{cx:"13.5493795%",cy:"40.859922%",fx:"13.5493795%",fy:"40.859922%",gradientTransform:"translate(0.135494,0.408599),scale(0.778453,1.000000),translate(-0.135494,-0.408599)",id:r[13],r:"113.540881%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#800E08"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#800E08"})]}),(0,i.jsxs)("linearGradient",{id:r[14],x1:"56.5701955%",x2:"3.10480737%",y1:"101.716594%",y2:"11.9932603%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,i.jsx)("stop",{offset:"43%",stopColor:"#9E100A"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#B3100C"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#B3100C"})]}),(0,i.jsxs)("linearGradient",{id:r[15],x1:"30.8698732%",x2:"92.4707626%",y1:"35.5989756%",y2:"100.693616%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,i.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,i.jsx)("stop",{offset:"44%",stopColor:"#910F08"}),(0,i.jsx)("stop",{offset:"99%",stopColor:"#791C12"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"#791C12"})]})]}),(0,i.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,i.jsxs)("g",{fillRule:"nonzero",id:"ruby",children:[(0,i.jsx)("polygon",{fill:`url(#${r[0]})`,id:"Path",points:"77.0122645 65.4278136 20.2589918 99.1275777 93.7437433 94.1410964 99.4035175 20.0432571"}),(0,i.jsx)("polygon",{fill:`url(#${r[1]})`,id:"Path",points:"93.8641535 94.0904237 87.5481442 50.4969668 70.3440559 73.2143305"}),(0,i.jsx)("polygon",{fill:`url(#${r[2]})`,id:"Path",points:"93.9494437 94.0904237 47.6773646 90.458054 20.504829 99.032755"}),(0,i.jsx)("polygon",{fill:`url(#${r[3]})`,id:"Path",points:"20.5700511 99.0422874 32.1294164 61.1733249 6.69279222 66.6123474"}),(0,i.jsx)("polygon",{fill:`url(#${r[4]})`,id:"Path",points:"70.3395405 73.3397576 59.7033189 31.6778786 29.2646604 60.2100448"}),(0,i.jsx)("polygon",{fill:`url(#${r[5]})`,id:"Path",points:"96.9902992 32.2648777 68.2173133 8.76484857 60.2050274 34.6680617"}),(0,i.jsx)("polygon",{fill:`url(#${r[6]})`,id:"Path",points:"83.5344758 0.386315593 66.6118459 9.73816318 55.9354878 0.260888453"}),(0,i.jsx)("polygon",{fill:`url(#${r[7]})`,id:"Path",points:"0 79.3151066 7.08914198 66.3860772 1.35461312 50.9836241"}),(0,i.jsx)("path",{d:"M0.973314611,50.4969668 L6.74296307,66.8627001 L31.81334,61.2380454 L60.4358134,34.6374574 L68.5133214,8.98058328 L55.7945075,0 L34.1708685,8.09255913 C27.3581679,14.4291382 14.1381473,26.9668352 13.6615241,27.2026383 C13.1899181,27.4434584 4.93179515,43.0516119 0.973314611,50.4969668 L0.973314611,50.4969668 Z",fill:"#FFFFFF",id:"Path"}),(0,i.jsx)("path",{d:"M21.2323064,21.0968451 C35.9975894,6.4569892 55.0324123,-2.19246642 62.3372889,5.17763237 C69.6376501,12.5477311 61.8957855,30.4587268 47.1305023,45.0935658 C32.3652194,59.7284045 13.5661995,68.8544832 6.26633995,61.4843842 C-1.03853672,54.1193026 6.46702339,35.7316838 21.2323064,21.0968451 L21.2323064,21.0968451 Z",fill:`url(#${r[8]})`,id:"Path"}),(0,i.jsx)("path",{d:"M20.5700511,99.0272361 L32.0391088,61.0378639 L70.1288227,73.2745355 C56.356923,86.188514 41.0397605,97.1056924 20.5700511,99.0272361 L20.5700511,99.0272361 Z",fill:`url(#${r[9]})`,id:"Path"}),(0,i.jsx)("path",{d:"M60.4859842,34.5627029 L70.2642842,73.2946038 C81.7684617,61.1984105 92.0936236,48.1941244 97.1503443,32.109348 L60.4859842,34.5627029 L60.4859842,34.5627029 Z",fill:`url(#${r[10]})`,id:"Path"}),(0,i.jsx)("path",{d:"M97.0505043,32.3050143 C100.963831,20.4947948 101.866907,3.55209662 83.4135641,0.406383936 L68.2719995,8.76986569 L97.0505043,32.3050143 L97.0505043,32.3050143 Z",fill:`url(#${r[11]})`,id:"Path"}),(0,i.jsx)("path",{d:"M0,79.1445256 C0.541845246,98.636405 14.6047363,98.9268942 20.5951365,99.0979771 L6.75801434,66.7824268 L0,79.1445256 L0,79.1445256 Z",fill:"#9E1209",id:"Path"}),(0,i.jsx)("path",{d:"M60.5406704,34.6229079 C69.3807754,40.0564118 87.1969484,50.9685728 87.5581785,51.1692563 C88.1195901,51.4853326 95.2393364,39.1633702 96.8548382,32.1996556 L60.5406704,34.6229079 L60.5406704,34.6229079 Z",fill:`url(#${r[12]})`,id:"Path"}),(0,i.jsx)("path",{d:"M32.0240575,61.0378639 L47.3562714,90.6186006 C56.422145,85.7018568 63.5213212,79.7114565 70.0234642,73.2946038 L32.0240575,61.0378639 L32.0240575,61.0378639 Z",fill:`url(#${r[13]})`,id:"Path"}),(0,i.jsx)("path",{d:"M6.69780929,66.8225633 L4.52541124,92.6906571 C8.62437017,98.2897247 14.2635744,98.7763819 20.1787184,98.3398954 C15.8991444,87.6886226 7.35003046,66.3910942 6.69780929,66.8225633 L6.69780929,66.8225633 Z",fill:`url(#${r[14]})`,id:"Path"}),(0,i.jsx)("path",{d:"M68.1821938,8.83508781 L98.6409204,13.1096448 C97.0153848,6.22118618 92.0233846,1.77604831 83.5144071,0.386315593 L68.1821938,8.83508781 L68.1821938,8.83508781 Z",fill:`url(#${r[15]})`,id:"Path"})]})})]})},{"aria-hidden":"true"})}],["v8",{name:"Edge"}],["rust",{name:"Rust",logo:(0,i.jsx)(e1,{"aria-hidden":"true"})}]]);function rY(e){let{runtime:t,runtimeLanguage:r}=e,[n,s,l]=t?.match(/(v8|[^0-9]*)([0-9].*)?/)||[],o=rQ.get("executable"===s&&void 0!==r?r:s),a=t;return n&&o&&(a=o.name,l&&(a+=` ${l}`)),{text:a,reactNode:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[o?.logo,(0,i.jsx)("p",{className:"text-copy-13-mono",children:a})]})}}function r0(e){let{requestMethod:t,requestPath:r,responseStatusCode:n,errorCode:s,onUp:l,onDown:o,onClose:a,isScrolled:u=!1}=e;return(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-row items-center justify-between gap-1 flex-initial ml-px p-4",u&&"border-b border-gray-300"),children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:[(0,i.jsx)("p",{className:`text-copy-13 ${tn.default.title}`,children:(0,i.jsx)(to.RequestMethodBadge,{method:t})}),(0,i.jsx)("p",{className:`text-copy-13 truncate ${tn.default.title}`,children:r})]}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-1",style:{display:l||o?void 0:"none"},children:[(0,i.jsx)(to.StatusCodeBadge,{statusCode:n,errorCode:s}),(0,i.jsx)(c.Button,{"aria-label":"Up",className:tn.default.ghostButton,disabled:!l,onClick:l,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,i.jsx)(eG.ChevronUp,{color:"gray-700",size:16})}),(0,i.jsx)(c.Button,{"aria-label":"Down",className:tn.default.ghostButton,disabled:!o,onClick:o,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,i.jsx)(eV.ChevronDown,{color:"gray-700",size:16})})]}),(0,i.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial geist-hide-on-mobile",children:(0,i.jsx)("div",{className:tn.default.buttonRule})}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,i.jsx)(c.Button,{"aria-label":"Close",onClick:a,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,i.jsx)(eJ.Cross,{color:"gray-700",size:16})})})]})]})}function r1(e){let{selectedLogId:t,onClose:r}=e,n=(0,v.useIsMobile)(),[l,o]=(0,s.useState)(!1),[a,u]=(0,s.useState)(!1),{logRows:d}=(0,ti.useGroupLogs)(),{onUp:c,onDown:f,selectedLog:h}=r4({logRows:d,selectedLogId:t,onClose:r}),g=(0,s.useMemo)(()=>(0,e3.withAwaitPaint)(r),[r]);if(!n)return null;let m=!!(h?.traceId&&h?.sessionId),x=h?(0,i.jsx)(no,{logGroup:h}):null;return(0,i.jsxs)(N.Modal.Modal,{active:!!t,"data-testid":(0,p.tid)("group-logs","details-panel"),drawerClassname:"h-full [&>div]:flex [&>div]:flex-col  [&>div]:flex-1",drawerHeight:"max",onClickOutside:g,children:[h&&(0,i.jsx)(r0,{onClose:r,onDown:f,onUp:c,requestMethod:h.requestMethod,requestPath:h.requestPath,responseStatusCode:h.statusCode,errorCode:h.errorCode}),(0,i.jsx)(N.Modal.Header,{children:(0,i.jsx)(eX.Switch,{className:"mx-4 -mb-2",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eX.Switch.Control,{checked:!l&&(!m||!a),label:m?"Request":"Request Details",onClick:()=>{o(!1),u(!1)},size:"large",value:"details"}),(0,i.jsx)(eX.Switch.Control,{checked:l,label:"Logs",onClick:()=>{o(!0),u(!1)},size:"large",value:"logs"}),m&&(0,i.jsx)(eX.Switch.Control,{checked:a,label:"Trace",onClick:()=>{o(!1),u(!0)},size:"large",value:"trace"})]})})}),(0,i.jsx)(N.Modal.Body,{className:"flex flex-1 flex-col !p-0 [&>div:first-child]:flex-1",children:m&&a?(0,i.jsx)(rW,{}):l?(0,i.jsx)(rq,{collapsed:!1}):x})]})}let r2=(0,s.memo)(function(e){let{onClose:t,selectedLogId:r}=e,{logRows:n}=(0,ti.useGroupLogs)(),{data:s}=(0,tt.useSelectedLog)(),{onUp:l,onDown:o,selectedLog:a}=r4({logRows:n,selectedLogId:r,onClose:t}),u=s??a;return u?(0,i.jsx)(na,{...u,onClose:t,onDown:o,onUp:l}):(0,i.jsx)(r3,{onClose:t})});function r3(e){let{onClose:t}=e,{data:r,error:n}=(0,tt.useSelectedLog)();return n?(0,i.jsx)(nc,{error:n}):r?(0,i.jsx)(na,{...r,onClose:t}):(0,i.jsx)(nf,{onClose:t})}function r4(e){let{logRows:t,selectedLogId:r,onClose:n}=e,{setState:i}=(0,I.useLogsQueryState)(),l=(0,s.useRef)(null),o=r?t.findIndex(e=>e.requestId===r):-1;o>-1&&(l.current=t[o]);let a=(0,s.useRef)(o);(0,s.useEffect)(()=>{(-1===o||o>=0&&o<t.length)&&(a.current=o)},[o,t]);let u=(0,s.useRef)(t);u.current=t;let d=(0,s.useRef)(n);d.current=n;let c=(0,s.useRef)(null),f=(0,s.useMemo)(()=>o>0?()=>i({selectedLogId:t[o-1].requestId}):void 0,[i,t,o]),h=(0,s.useMemo)(()=>o<t.length-1&&-1!==o?()=>i({selectedLogId:t[o+1].requestId}):void 0,[i,t,o]);return(0,s.useEffect)(()=>{function e(e){let t=e.target,r=t?.tagName.toLowerCase();if("input"===r||"textarea"===r||t?.isContentEditable)return;let n=a.current,i=u.current;if(-1!==n)switch(e.key){case"ArrowUp":if(n>0){e.preventDefault();let t=n-1;if(t>=0&&t<i.length){a.current=t;let e=i[t],r=document.querySelector(`[data-log-row-id="${e.requestId}"]`);r&&(r.focus(),r.scrollIntoView({block:"center"})),c.current=e.requestId}}break;case"ArrowDown":if(n<i.length-1){e.preventDefault();let t=n+1;if(t>=0&&t<i.length){a.current=t;let e=i[t],r=document.querySelector(`[data-log-row-id="${e.requestId}"]`);r&&(r.focus(),r.scrollIntoView({block:"center"})),c.current=e.requestId}}break;case"Escape":e.preventDefault(),d.current()}}function t(e){("ArrowUp"===e.key||"ArrowDown"===e.key)&&c.current&&(u.current.some(e=>e.requestId===c.current)&&i({selectedLogId:c.current}),c.current=null)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[i]),{onUp:f,onDown:h,selectedLog:l.current}}function r5(e){let{requestPath:t}=e,r=tl();return(0,i.jsx)("p",{className:"text-copy-13-mono truncate","data-testid":(0,p.tid)("logs","detail-requestPath"),children:(0,i.jsx)(e5.HighlightText,{as:"span",search:r,text:t})})}function r6(e){let{used:t,max:r,format:n,className:s}=e;return(0,i.jsxs)("p",{className:`text-copy-13-mono ${(0,h.cn)("font-mono text-[13px]",s)}`,children:[(0,i.jsxs)("span",{className:(0,h.cn)(!!r&&t>=.8*r&&"text-amber-900",!!r&&t>=r&&"text-red-900"),children:[n(t)," "]}),(0,i.jsxs)("span",{className:"text-gray-700",children:["/",r?` ${n(r)}`:(0,i.jsx)(eo.Skeleton,{className:"inline-block translate-y-0.5",height:14,width:22})]})]})}function r9(e){let{icon:t,title:r,description:n,subtitle:s,additionalInfo:u,children:d,contextActions:c,isFluidEnabled:f,event:h}=e,p=(0,i.jsxs)("div",{className:(0,g.clsx)("flex w-full items-center gap-2 overflow-hidden px-2 pt-2",d?"pb-0.5":"pb-2"),children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[t&&(0,i.jsx)("div",{className:"text-gray-800",children:t}),(0,i.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,i.jsx)("p",{className:"text-[14px] leading-[20px] font-medium truncate",children:r}),s&&(0,i.jsx)("p",{className:"text-copy-14 text-gray-800 leading-tighter -mt-0.5",children:s})]})]}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)("p",{className:"text-copy-13 text-gray-900 inline-flex items-center gap-2 truncate",children:n}),u&&(0,i.jsx)("p",{className:"text-label-12 text-gray-700",children:u})]})]});return(0,i.jsxs)("div",{className:"flex flex-col rounded-md border border-gray-300 bg-background-200",children:[(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-col rounded-md border-gray-300 bg-background-100 px-2",s?"py-px":"py-1",f&&"border-b border-l border-r -mx-px"),children:[r&&(c?.length?(0,i.jsxs)(a.MenuContainer,{position:"bottom-start",children:[(0,i.jsx)(o.MenuButton,{className:"-mx-1 rounded-sm !px-1 hover:bg-gray-100 [&>span]:px-0",variant:"unstyled",children:p}),(0,i.jsx)(l.Menu,{width:180,children:c.map(e=>(0,i.jsx)(nu,{...e},e.label))})]}):p),(0,i.jsx)("div",{className:"flex flex-col",children:d})]}),f&&h?(0,i.jsx)(nh,{event:h,children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(nr,{event:h}),(0,i.jsx)(nt,{event:h}),(0,i.jsx)(r7,{isFluidEnabled:f,event:h}),(0,i.jsx)(ne,{event:h}),(0,i.jsx)(nn,{event:h})]})}):null]})}function r8(e){let{event:t}=e,{getProjectUrl:r}=(0,e6.useDashboardNavigation)(),{data:n}=(0,tt.useSelectedLog)(),{deploymentId:s}=n??{},l=-1!==t.durationMs&&("serverless"===t.source||"serverless-middleware"===t.source),{getFunctionMetadata:o}=(0,tP.useFunctionMetadata)("serverless"===t.source||"serverless-middleware"===t.source?s:void 0);if(!l||!t.durationMs)return null;let a=o(t.route),u=a&&"lambda"===a.type&&a.lambda.timeout&&1e3*a.lambda.timeout||-1,d=-1!==u;return(0,i.jsx)(nd,{contextActions:[{icon:(0,i.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Max Duration",href:r("/settings/functions#function-max-duration")}],label:`Execution Duration${d?" / Maximum":""}`,value:`${rX(t.durationMs,{secondsDecimalDigits:t.durationMs>=6e4?0:2})}${d?" ":""}`,valueLabel:"Execution Duration",children:(0,i.jsx)(r6,{format:e=>rX(e,{secondsDecimalDigits:e>=6e4?0:2}),max:d?u:void 0,used:t.durationMs})})}function r7(e){let{event:t,isFluidEnabled:r}=e,{getProjectUrl:n}=(0,e6.useDashboardNavigation)(),s=r?"Peak Memory":"Memory Used";return r$(t.functionMaxMemoryUsed)?(0,i.jsx)(nd,{contextActions:[{icon:(0,i.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function CPU & Memory",href:n("/settings/functions#function-cpu")}],label:`${s} / Maximum`,value:`${t.functionMaxMemoryUsed} MB`,valueLabel:s,children:(0,i.jsx)(r6,{format:e=>`${e} MB`,max:t.functionMemorySize,used:t.functionMaxMemoryUsed})}):null}function ne(e){let{event:t}=e,{data:r}=(0,tt.useSelectedLog)(),{deploymentId:n}=r??{},s=-1!==t.durationMs&&("serverless"===t.source||"serverless-middleware"===t.source),{getFunctionMetadata:l}=(0,tP.useFunctionMetadata)("serverless"===t.source||"serverless-middleware"===t.source?n:void 0),{getProjectUrl:o}=(0,e6.useDashboardNavigation)(),a=l(t.route),u=!a&&!t.functionRuntime&&("serverless"===t.source||"serverless-middleware"===t.source),d=null;return(t.functionRuntime?d=rY({runtime:t.functionRuntime,runtimeLanguage:a?.lambda?.runtimeLanguage}):a?.type==="lambda"&&(d=rY({runtime:a.lambda.runtime,runtimeLanguage:a.lambda.runtimeLanguage})),d&&s)?(0,i.jsx)(nd,{contextActions:d?.text.includes("Node.js")?[{icon:(0,i.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Node.js Version",href:o("/settings/build-and-deployment#node.js-version")}]:void 0,isLoading:u,label:"Runtime",value:d?.text,children:d?.reactNode}):null}function nt(e){let{event:t}=e,{concurrency:r}=t;return void 0===r||r<1?null:(0,i.jsx)(nd,{label:"Peak Concurrency",valueLabel:"Concurrency",value:`${r} Request${1===r?"":"s"}`})}function nr(e){let{event:t}=e,{handleFilter:r}=np(),{invocationId:n}=t;return n?(0,i.jsx)(nd,{label:"Invocation ID",onFilter:()=>r("invocationIds",n),value:n}):null}function nn(e){let t,{event:r}=e,{functionStartType:n,functionColdStartDurationMs:s}=r;if(!n||""===n||"unknown"===n)return null;if("prewarmed"===n)t="Hot (prewarmed)";else if("cold"===n&&r$(s)){let e=rX(s,{secondsDecimalDigits:2});t=`Cold (${e})`}else t="cold"===n?"Cold":"Hot";return(0,i.jsx)(nd,{label:"Start Type",value:t})}function ni(e){let{event:t,onClick:r,groupLog:n,projectId:l,children:o,additionalInfo:a,hasExternalApiAccess:u}=e,d=(0,e7.useO11yNavigation)(),{handleFilter:c}=np(),f=(0,y.useParams)(),{data:h}=(0,rG.useDashboardDeployment)({teamSlug:f?.teamSlug,projectName:f?.project,deploymentId:n.deploymentId},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),g=(0,rM.useServerFlag)("enable-logs-show-cache-details",!1),{pathType:p,source:m,httpStatus:x,cache:_,invocationId:v}=t,C=!!(h?.config?.functionType!=="standard"&&v&&("serverless"===m||"serverless-middleware"===m)),b=null,j=m,S="",w="",k=!1;"serverless"===m?(j="Function Invocation","background_func"===p?(j="ISR Function Invocation",b=(0,i.jsx)(eI.FunctionSquare,{color:"gray-900",size:16}),S=a?.isServingRevalidation?"Dynamic Rendering":"Background Revalidation",k=!0):"middleware"===p?(b=(0,i.jsx)(eF.FunctionMiddleware,{color:"gray-900",size:16}),j="Middleware"):b=(0,i.jsx)(eI.FunctionSquare,{color:"gray-900",size:16})):"middleware"===p?(b=(0,i.jsx)(eF.FunctionMiddleware,{color:"gray-900",size:16}),j="Middleware"):"edge-function"===m?(b=(0,i.jsx)(eR.FunctionEdge,{color:"gray-900",size:16}),j="Edge Function Invocation"):"static"===m?(b=(0,i.jsx)(eP.EdgeCache,{color:"gray-900",size:16}),j="Cache","PRERENDER"===_?(j="ISR Cache",b=(0,i.jsx)(eq.DataCache,{color:"gray-900",size:16})):"HIT"===_&&(w=""),"partial_prerender"===p&&(j="Cache",S="Partial Prerender")):"external"===m?(b=(0,i.jsx)(eB.ArrowGlobe,{color:"gray-800",size:16}),j="Rewrite"):"redirect"===m?(b=(0,i.jsx)(eK.ArrowRight,{color:"gray-800",size:16}),j="Redirect"):b=(0,i.jsx)(eA.Eye,{color:"gray-900",size:16});let N="serverless"===m||"edge-function"===m,E="static"===m&&"MISS"!==_,T=N?null:(0,i.jsx)(to.StatusCodeBadge,{className:"shrink !flex-row-reverse",errorCode:n.errorCode,full:200!==x,statusCode:x}),L=(0,s.useMemo)(()=>[{icon:(0,i.jsx)(eA.Eye,{className:"mr-2 shrink-0 text-gray-800"}),label:"Open in Observability",href:d(`/route/${encodeURIComponent(t.route)}`,{removeExistingParams:!0,additionalParams:"edge-function"===t.source?{type:"edge"}:void 0})}],[d,t.route,t.source]),M=(0,s.useMemo)(()=>{try{let e=new URLSearchParams(t.targetQuery??"");return{...r$(t.route)?{[t.route]:null}:{},...Object.fromEntries(e.entries())}}catch{return{}}},[t.route,t.targetQuery]);return(0,i.jsxs)(r9,{description:(0,i.jsxs)(i.Fragment,{children:[w,T]}),icon:b,isFluidEnabled:C,onClick:r,subtitle:S,title:j,event:t,children:[o,r$(t.route)&&N&&"middleware"!==p&&(0,i.jsx)(nd,{contextActions:L,label:"Route",onFilter:()=>c("routes",t.route),value:t.route,children:(0,i.jsx)(e8.RouteHighlighter,{route:t.route})}),r$(_)&&E&&(0,i.jsx)(nd,{label:"Status",onFilter:()=>c("caches",_),value:_}),"external"===m&&t.externalRewriteTargetHost&&t.externalRewriteTargetPath&&(0,i.jsx)(nd,{label:"Target",value:`${t.externalRewriteTargetHost}${t.externalRewriteTargetPath}`}),"redirect"===m&&t.redirectLocation&&(0,i.jsx)(nd,{label:"Redirect Location",value:t.redirectLocation}),g&&E&&Object.keys(M).length>0&&(0,i.jsx)(tq,{title:"Key",params:M,hideCopyButton:!0}),g&&E&&(0,i.jsx)(rZ,{requestId:n.requestId,projectId:l??"",eventTime:t.timestamp}),g&&k&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(nx,{requestId:n.requestId,projectId:l??"",eventTime:t.timestamp,isServingRevalidation:a?.isServingRevalidation})}),!C&&(0,i.jsx)(ne,{event:t}),(0,i.jsx)(r8,{event:t}),!C&&(0,i.jsx)(r7,{isFluidEnabled:C,event:t}),"static"!==m&&"HIT"!==_&&"STALE"!==_&&"external"!==m&&"redirect"!==m&&u&&(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)(tR,{enableDataCacheMetrics:!0,endTime:new Date(new Date(t.timestamp).getTime()+Number(t.durationMs??5e3)),projectId:l??"",requestId:n.requestId,source:m,startTime:new Date(t.timestamp),pathType:p})})]})}function ns(e){let{events:t,groupLog:r,projectId:n,hasExternalApiAccess:l}=e,o=(0,s.useMemo)(()=>{let e=[...t].sort((e,t)=>{let r=new Date(e.timestamp).getTime(),n=new Date(t.timestamp).getTime(),i="middleware"===e.pathType,s="middleware"===t.pathType,l="static"===e.source||"redirect"===e.source||"external"===e.source,o="static"===t.source||"redirect"===t.source||"external"===t.source;return i&&o?-1:s&&l?1:r===n?"background_func"===e.pathType?1:"background_func"===t.pathType?-1:0:r-n}),r=Math.max(...e.map(e=>"background_func"===e.pathType?e.httpStatus:-1));return e.filter(e=>"background_func"!==e.pathType||"static"!==e.source).map(e=>"background_func"===e.pathType?{...e,httpStatus:r}:e)},[t]);return 0===t.length?(0,i.jsx)(rK,{direction:"up",children:(0,i.jsx)(to.RequestInProgressBadge,{})}):(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:o.map((e,t)=>{var a,u,d,c;let f,h,g,p=t===o.length-1,m=null,x=o[t-1],y=!o.some(e=>"static"===e.source&&"prerender"===e.pathType&&"REVALIDATED"!==e.cache)&&"serverless"===e.source&&"background_func"===e.pathType;if("partial_prerender"!==e.pathType||p)if(rU(e))m=p?(0,i.jsx)(rH,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0}):(0,i.jsx)(rK,{direction:"up",through:"dashed",children:(0,i.jsx)(to.RequestFinishedBadge,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})});else if(p){let t=x&&rU(x)&&"background_func"===e.pathType,n=x&&"MISS"===x.cache&&"serverless"===x.source&&"middleware"!==x.pathType&&"background_func"===e.pathType,s=200===(a=e.httpStatus)||404===a||301===a||308===a||307===a||302===a;m=t||n?s?(0,i.jsx)(rK,{className:"mb-2",direction:"up",lineClassName:"border-dashed",children:(0,i.jsx)(to.DataCacheUpdatedBadge,{})}):null:y?(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(rK,{direction:"up",through:s?"dashed":void 0,children:(0,i.jsx)(to.RequestFinishedBadge,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})}),s?(0,i.jsx)(rK,{className:"h-5",direction:"up",lineClassName:"border-dashed",children:(0,i.jsx)(to.DataCacheUpdatedBadge,{})}):null]}):(0,i.jsx)(rH,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})}else m=(0,i.jsx)(rK,{direction:"straight"});else m="STALE"===e.cache||"PRERENDER"===e.cache||"HIT"===e.cache?(0,i.jsx)(rK,{direction:"up",through:!0,children:(0,i.jsx)(to.ResponseStreamingStartedBadge,{})}):(0,i.jsx)(rK,{direction:"up",through:"dashed"});let _=(u=e,d=x,c=r,f=d?.region,h=u.region,g=c.clientRegion,nl(u)?null:(d&&nl(d)&&(f=g),nm(u.region)&&"middleware"!==u.pathType&&f!==h&&g!==h)?h:null);return(0,i.jsxs)(s.default.Fragment,{children:[_&&(0,i.jsx)(rK,{direction:"both",className:"-mt-2",lineClassName:x&&nl(x)?"border-dashed h-[30px]":"",children:(0,i.jsx)(to.RegionBadge,{region:_})}),(0,i.jsx)(ni,{additionalInfo:{isServingRevalidation:y},event:e,groupLog:r,hasExternalApiAccess:l,projectId:n}),m]},`${e.timestamp}-${e.source}-${t}`)})})}function nl(e){return"prerender"===e.pathType&&"static"===e.source||"streaming_func"===e.pathType&&"static"===e.source}function no(e){let t,{logGroup:r}=e,{timestamp:n,clientUserAgent:l,requestReferer:o,events:a,domain:u,requestPath:d,deploymentId:c,requestId:f,requestSearchParams:h,environment:p,branch:m,traceId:x,sessionId:_,clientRegion:v,microfrontendsResponseReason:C,microfrontendsMatchedPath:b,microfrontendsDefaultAppDeploymentId:j,errorCode:S}=r,w=(0,y.useParams)(),{data:k}=(0,O.useProject)(w?.project),{team:N}=(0,ea.useTeam)(),E=k?.id,T=(0,e7.useO11yNavigation)(),{getProjectUrl:L}=(0,e6.useDashboardNavigation)(),M=f.split("::").at(-1)??f,{data:D}=(0,rG.useDashboardDeployment)({deploymentId:c,teamSlug:w?.teamSlug,projectName:w?.project},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),A=(0,te.useDeploymentLink)(D),{isDeploymentEditable:I}=(0,Q.usePageConfig)(),{handleFilter:F}=np(),R=(0,s.useMemo)(()=>[{icon:(0,i.jsx)(ez.External,{size:16}),label:"Visit Path",onClick:()=>window.open(`https://${u}${d}`,"_blank","noopener")},{icon:(0,i.jsx)(eA.Eye,{}),label:"Open in Observability",href:T(`/requestPath/${encodeURIComponent(d)}`,{removeExistingParams:!0})}],[T,d,u]),P=(0,s.useMemo)(()=>S?[{icon:(0,i.jsx)(ez.External,{size:16}),label:"Error Documentation",onClick:()=>window.open(`https://vercel.com/docs/errors/${S}`,"_blank","noopener")}]:[],[S]),B=(0,s.useMemo)(()=>[{icon:(0,i.jsx)(eW.SettingsGear,{size:16}),label:"Configure Rules",href:L("/firewall/configure")}],[L]),q=(0,s.useMemo)(()=>[{icon:(0,i.jsx)(e$.Linked,{size:16}),label:"Open Deployment",href:A}],[A]),{data:z}=(0,Y.useRollingRelease)({teamIdOrSlug:N?.id,projectSlug:E}),W=z?.rollingRelease!==null,$=!1;W&&"production"===p&&(z?.rollingRelease?.state==="ACTIVE"&&c===z.rollingRelease.canaryDeployment?.id?(t="Current Canary",$=!0):z?.rollingRelease?.state==="ACTIVE"&&c===z.rollingRelease.currentDeployment?.id?(t="Current Base",$=!0):(z?.rollingRelease?.state,t="Unspecified"));let U=new Date(n);return(0,i.jsxs)("div",{tabIndex:-1,className:(0,g.clsx)("flex flex-col items-stretch justify-start flex-initial min-h-full pb-4"),children:[(0,i.jsxs)("div",{className:"flex-1 px-3",children:[(0,i.jsxs)("div",{className:"ml-1 flex items-center justify-between gap-2 p-1",children:[(0,i.jsx)(to.RequestStartedBadge,{}),(0,i.jsx)(rm.TimestampTooltip,{content:{timestamp:U.getTime()},showRelativeToNow:!0,children:(0,i.jsx)("span",{className:"text-right font-mono text-[13px] leading-tight",children:(0,i.jsxs)("span",{children:[(0,i.jsxs)("span",{className:"uppercase text-gray-900",children:[(0,eZ.format)(U,"MMM dd")," ",(0,eZ.format)(U,"HH:mm:ss"),(0,i.jsxs)("span",{className:"text-gray-900",children:[".",(0,eZ.format)(U,"SS")]})]}),(0,i.jsx)("span",{className:"inline-bock ml-1.5 rounded-sm px-1 py-px font-mono text-gray-900",children:(0,eZ.format)(U,"OO")})]})})})]}),(0,i.jsxs)(r9,{children:[(0,i.jsx)(nd,{label:"Request ID",onFilter:()=>F("requestIds",M,{override:!0}),value:M||"No request ID"}),(0,i.jsx)(nd,{contextActions:R,label:"Path",onFilter:()=>F("requestPaths",d),value:d,children:(0,i.jsx)(r5,{requestPath:d})}),(0,i.jsx)(nd,{label:"Host",onFilter:()=>F("domains",u),value:u}),r$(l)&&(0,i.jsx)(nd,{label:"User Agent",value:l}),r$(o)&&(0,i.jsx)(nd,{label:"Referer",value:o}),Object.keys(h).length>0&&(0,i.jsx)(tq,{title:"Search Params",params:h}),r$(x)&&r$(_)&&(0,i.jsx)(nd,{label:"Trace ID",onFilter:()=>F("traceIds",x),value:x}),r$(_)&&(0,i.jsx)(nd,{label:"Session ID",onFilter:()=>F("sessionIds",_),value:_}),S&&""!==S&&(0,i.jsx)(nd,{contextActions:P,label:"Error",value:S,valueClassName:"text-red-900",valueLabel:"Error Code"})]}),nm(v)?(0,i.jsx)(rK,{direction:"both",children:(0,i.jsx)(to.RegionBadge,{isEdgeRegion:!0,region:v})}):(0,i.jsx)(rK,{direction:"straight"}),(0,i.jsx)(r9,{contextActions:B,description:(0,i.jsx)("span",{className:"px-1",children:"Allowed"}),icon:(0,i.jsx)(eO.FirewallFlame,{color:"gray-900",size:16}),title:"Firewall"}),(0,i.jsx)(ny,{microfrontendsResponseReason:C,microfrontendsMatchedPath:b,microfrontendsDefaultAppDeploymentId:j}),(0,i.jsx)(rK,{direction:"straight"}),(0,i.jsx)(ns,{events:a,groupLog:r,hasExternalApiAccess:!0,projectId:E})]}),(0,i.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,i.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mb-2 pl-2",children:"Deployment Information"}),(0,i.jsx)(nd,{contextActions:q,isLoading:!D,label:"Deployment ID",onFilter:I?()=>F("deploymentIds",c):void 0,value:c}),r$(p)&&(0,i.jsx)(nd,{label:"Environment",onFilter:()=>F("environments",p),value:p}),t&&(0,i.jsx)(nd,{label:"Rolling Release",onFilter:$?()=>F("deploymentIds",c):void 0,value:t}),r$(m)&&(0,i.jsx)(nd,{label:"Branch",onFilter:()=>F("branches",m),value:m})]})]})}function na(e){let{onClose:t,onDown:r,onUp:n,...l}=e,{requestMethod:o,requestPath:a,statusCode:u,errorCode:d}=l,[c,f]=(0,s.useState)(!1);return(0,i.jsxs)("div",{"data-testid":(0,p.tid)("group-logs","details-panel"),className:(0,g.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial dark:bg-background-200",tn.default.root),children:[(0,i.jsx)(r0,{isScrolled:c,onClose:t,onDown:r,onUp:n,requestMethod:o,requestPath:a,responseStatusCode:u,errorCode:d}),(0,i.jsx)("div",{onScroll:e=>{f(e.currentTarget.scrollTop>0)},className:"flex-1 overflow-y-auto",children:(0,i.jsx)(no,{logGroup:l})})]})}function nu(e){let{icon:t,label:r,onClick:n,href:s}=e,l=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"mr-2 flex size-4 shrink-0 items-center text-gray-900",children:t}),r]});return s?(0,i.jsx)(eQ.MenuLink,{className:"flex items-center",href:s,onMouseUp:()=>n?.(),children:l}):(0,i.jsx)(d.MenuItem,{className:"flex items-center",icon:!0,onClick:n,children:l})}function nd(e){let{label:t,value:r,valueLabel:n,isLoading:u=!1,children:d,onFilter:c,contextActions:h=[],styleProps:p={},valueClassName:m}=e,y=(0,f.useToasts)(),_=n??t,v=(0,s.useCallback)(()=>{r&&!u&&"string"==typeof _&&((0,e9.copyToClipboard)(r),y.message(`${_} copied to clipboard`))},[_,r,y,u]),C=(0,s.useCallback)(e=>{"string"==typeof _&&w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:_,action:e})},[_]);return(0,i.jsx)("div",{className:"border-b py-1 last:border-none",children:(0,i.jsxs)(a.MenuContainer,{position:"bottom-start",children:[(0,i.jsxs)(o.MenuButton,{className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:w-full [&>span]:items-center [&>span]:justify-between [&>span]:gap-4",disabled:u,style:p,variant:"unstyled",children:[(0,i.jsx)("dt",{className:"text-copy-14 text-gray-900",style:{flexShrink:0},children:t}),(0,i.jsx)(eo.Skeleton,{as:"dd",className:(0,g.clsx)(tn.default.logDetailRowSkeleton,"!flex"),show:u,children:(0,i.jsx)("span",{className:(0,g.clsx)("truncate font-mono !text-[13px] text-gray-1000",m),title:r,children:d||r})})]}),(0,i.jsxs)(l.Menu,{width:Math.max(200,70+7*Math.max(...h.map(e=>e.label.length))),children:[c&&(0,i.jsx)(nu,{icon:(0,i.jsx)(x.Filter,{}),label:"Add Filter",onClick:()=>{c(),C("Add Filter")}}),h.map(e=>(0,i.jsx)(nu,{...e,onClick:()=>{e.onClick?.(),C(e.label)}},e.label)),"string"==typeof _&&(0,i.jsx)(nu,{icon:(0,i.jsx)(eD.Copy,{}),label:`Copy ${_}`,onClick:()=>{v(),C("Copy")}})]})]})})}function nc(e){let{error:t}=e,{maxRetention:r}=(0,eu.useUserRetention)();return(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-col items-center justify-start gap-5 flex-initial",tn.default.noLogsSelected),children:[(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-center",style:{flex:"1 0 auto"},children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 flex-initial",children:[(0,i.jsx)(tr,{}),(0,i.jsx)("p",{className:"text-copy-14 text-inherit text-center",children:t?.name==="ExceedsBillingLimitError"?t.message:"Error loading selected log or the selected log does not exist, please try again"})]})}),(0,i.jsx)("div",{className:(0,g.clsx)("flex flex-col items-stretch justify-start flex-initial",tn.default.setupLogDrain),children:(0,i.jsxs)("p",{className:"text-label-12 text-inherit",children:["To store logs for longer than ",(0,ei.formatDuration)(r),", set up a Log Drain.",(0,i.jsxs)(e2.Link,{className:tn.default.learnMore,href:"/docs/deployments/logs",tab:!0,children:["Learn more ",(0,i.jsx)(ez.External,{align:"top",size:16})]})]})})]})}function nf(e){let{onClose:t}=e;return(0,i.jsxs)("div",{"data-testid":(0,p.tid)("group-logs","details-panel"),className:(0,g.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial",tn.default.root),children:[(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1 flex-initial ml-px p-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:(0,i.jsx)(eo.Skeleton,{className:"w-16",show:!0,children:(0,i.jsx)("p",{className:`text-copy-13 ${tn.default.title}`,children:"GET"})})}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,i.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:(0,i.jsx)("div",{className:tn.default.buttonRule})}),(0,i.jsx)(c.Button,{"aria-label":"Close",onClick:t,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,i.jsx)(eJ.Cross,{color:"gray-700",size:20})})]})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,i.jsxs)("div",{tabIndex:-1,className:"flex flex-col items-stretch justify-start flex-initial min-h-full pb-4",children:[(0,i.jsxs)("div",{className:"flex-1 px-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 px-1 py-2",children:[(0,i.jsx)(to.RequestStartedBadge,{}),(0,i.jsx)(eo.Skeleton,{className:"w-48",show:!0,children:(0,i.jsx)("span",{className:"text-right text-[13px] tabular-nums leading-tight",children:"Loading timestamp..."})})]}),(0,i.jsxs)(r9,{children:[(0,i.jsx)(nd,{isLoading:!0,label:"Request ID",value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:"Path",value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:"Host",value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:"User Agent",value:"Loading"})]}),(0,i.jsx)(rK,{direction:"both",children:(0,i.jsx)(to.AnatomyBadge,{className:"font-normal text-gray-800 text-sm",icon:(0,i.jsx)(to.GlobeSmallIcon,{className:"text-gray-800"}),children:(0,i.jsxs)("div",{className:"w-full flex gap-1",children:[(0,i.jsx)("span",{children:"Received in"})," ",(0,i.jsx)(eo.Skeleton,{show:!0,children:"Region"})]})})}),(0,i.jsx)(r9,{description:(0,i.jsx)(eo.Skeleton,{className:"w-16",show:!0,children:(0,i.jsx)("span",{children:"Allowed"})}),icon:(0,i.jsx)(eO.FirewallFlame,{color:"gray-800",size:16}),title:"Firewall"}),(0,i.jsx)(rK,{direction:"straight"}),(0,i.jsxs)(r9,{description:(0,i.jsx)(eo.Skeleton,{className:"w-24",show:!0,children:(0,i.jsx)("span",{children:"Description"})}),icon:(0,i.jsx)(eo.Skeleton,{height:16,width:16}),title:(0,i.jsx)(eo.Skeleton,{show:!0,children:"Function Invocation"}),children:[(0,i.jsx)(nd,{isLoading:!0,label:(0,i.jsx)(eo.Skeleton,{show:!0,children:"Route"}),value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:(0,i.jsx)(eo.Skeleton,{show:!0,children:"Runtime"}),value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:(0,i.jsx)(eo.Skeleton,{show:!0,children:"Execution Duration"}),value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:(0,i.jsx)(eo.Skeleton,{show:!0,children:"Memory Used / Maximum"}),value:"Loading"})]})]}),(0,i.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,i.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mb-2 pl-2",children:"Deployment Information"}),(0,i.jsx)(nd,{isLoading:!0,label:"Deployment ID",value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:"Environment",value:"Loading"}),(0,i.jsx)(nd,{isLoading:!0,label:"Branch",value:"Loading"})]})]})})]})}function nh(e){let{children:t,event:r}=e,[n,l]=(0,s.useState)(!1);return(0,i.jsxs)("div",{className:"rounded-md overflow-hidden text-gray-800 px-2 cursor-pointer",children:[(0,i.jsxs)("button",{type:"button",className:"w-full flex items-center justify-between py-2 text-xs bg-inherit cursor-pointer",onClick:()=>l(!n),children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(eU.Fluid,{color:"gray-700",className:"size-3"}),(0,i.jsx)("p",{className:"text-label-12 text-gray-800",children:"Fluid"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[r?.functionMaxMemoryUsed&&r.functionMaxMemoryUsed>0&&r?.functionMemorySize&&r.functionMemorySize>0&&(0,i.jsxs)("div",{className:(0,g.clsx)("flex items-center gap-2 text-gray-500 transition-all duration-100",n&&"opacity-0 translate-y-1"),children:[(0,i.jsx)(ng,{usage:r.functionMaxMemoryUsed,max:r.functionMemorySize}),(0,i.jsxs)("span",{className:"text-gray-900 text-xs font-regular font-mono",children:[r.functionMaxMemoryUsed," MB"]})]}),(0,i.jsx)(eV.ChevronDown,{color:"gray-900",size:12,className:(0,g.clsx)("transform transition-transform",{"rotate-180":n})})]})]}),(0,i.jsx)(eL.AnimatePresence,{initial:!1,children:n&&(0,i.jsx)(eT.motion.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"overflow-hidden",children:(0,i.jsx)("div",{className:"border-gray-200 space-y-1",children:t})},"content")})]})}let ng=e=>{let{usage:t,max:r}=e,n=r>0?Math.max(0,Math.min(100,t/r*100)):0;return(0,i.jsx)("div",{className:"w-[2px] h-[10px] rounded-full bg-gray-300 flex items-end overflow-hidden",children:(0,i.jsx)("div",{className:(0,h.cn)("w-full bg-gray-900 rounded-full",n>80&&"bg-amber-700",n>99&&"bg-red-700"),style:{height:`${n}%`}})})},np=()=>{let{setFilter:e}=(0,I.useLogsSearchState)();return{handleFilter:(0,s.useCallback)(function(t,r){let{replace:n=!1,override:i=!1,additionalParams:s={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(t,["string"==typeof r&&r.includes(",")?`"${r}"`:String(r)])},[e])}};function nm(e){return r$(e)&&""!==e&&e in e4.regions}function nx(e){let{requestId:t,projectId:r,eventTime:n,isServingRevalidation:s}=e,{loading:l,data:o}=rJ({requestId:t,projectId:r,eventTime:n}),a=s?"Invocation Reason":"Revalidation Reason";if(l)return(0,i.jsx)(nd,{label:a,value:"Loading...",isLoading:!0});let u=o?.[0]?.triggeringTag;return u?(0,i.jsxs)(nd,{label:a,value:u,children:["Tag"," ",(0,i.jsx)("span",{className:"inline-flex max-w-full cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono p-1",children:u})]}):s?(0,i.jsx)(nd,{label:a,value:"ISR Cache Miss",valueClassName:"font-sans"}):(0,i.jsx)(nd,{label:a,value:"Time-based",valueClassName:"font-sans"})}function ny(e){let{microfrontendsResponseReason:t,microfrontendsMatchedPath:r,microfrontendsDefaultAppDeploymentId:n}=e;return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(rK,{direction:"straight"}),(0,i.jsx)(r9,{description:(0,i.jsx)("span",{className:"px-1",children:t}),icon:(0,i.jsx)(eH.Microfrontends,{color:"gray-900",size:16}),title:"Microfrontends",children:(0,i.jsxs)("div",{className:"mt-2",children:[r?(0,i.jsx)(nd,{label:"Matched Path",value:r}):null,n?(0,i.jsx)(nd,{label:"Default App Deployment ID",value:n}):null]})})]}):null}var n_=e.i(3327755),nv=e.i(1991452),nC=e.i(3734840),nb=e.i(6357175),nj=e.i(3162826),nS=e.i(6881349),nw=e.i(2458511);function nk(e,t){let[r,n]=function(e,t){let r=e=>/\s/.exec(e),n=t-1,i=t;for(;n>=0&&!r(e[n]);)n-=1;for(n=Math.max(0,n+1);i<e.length&&!r(e[i]);)i+=1;return i=Math.max(n,i),[n,i]}(e,t);return e.substr(r,n)+e.substr(n)}function nN(e,t,r,n){return void 0!==n&&n!==t?e.substr(0,t)+r+e.substr(n):e.substr(0,t)+r+e.substr(t)}let nE=["requestId","sessionId","traceId","deploymentId","invocationId"];function nT(){let e=(0,nv.useRouter)(),{state:{search:t},setState:r}=(0,I.useLogsQueryState)(),{trackFilterUse:n}=U(),{isDeploymentEditable:l}=(0,Q.usePageConfig)(),o=V.FILTERS_WITHOUT_DEPLOYMENT;l&&(o=V.FILTERS);let{isLoading:a}=(0,ti.useGroupLogs)(),[u,d]=(0,s.useState)(null),[c,f]=(0,s.useState)(""),[h,g]=(0,s.useState)(!0),[m,x]=(0,s.useState)(""),[y,_]=(0,s.useState)(0),v=(0,s.useRef)(null),C=(0,s.useRef)({}),b=(0,s.useRef)(null),j=(0,s.useRef)(null),S=(0,s.useRef)(""),w=(0,nb.useDebouncedCallback)(e=>f(e),300),[k,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=n_.daumtools.userAgent();N("safari"===e?.browser?.name)},[]);let E=(0,s.useCallback)(e=>{x(e),v.current?.setValue(e)},[]),T=(0,s.useMemo)(()=>u?.attributeName==="source"||u?.attributeName==="requestTags"||u?.attributeName==="level"||u?.attributeName==="statusCode"||u?.attributeName==="cache"||u?.attributeName==="requestMethod"||u?.attributeName==="environment",[u]),L=(0,s.useMemo)(()=>!!u?.attributeName&&nE.includes(u.attributeName),[u]),{data:M,isLoading:D}=B({attributeName:!u||L?null:u.attributeName,attributeNameSearchQuery:c,search:t}),A=(0,s.useMemo)(()=>{if(u?.attributeName!=="requestId")return M?.rows?.map(e=>({label:String(e.attributeValue),value:String(e.attributeValue)}))},[u,M]),O=(0,s.useCallback)(()=>{x(""),r({search:"",preset:null})},[r]),F=(0,s.useCallback)(()=>{let e={levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionIds:[],traceIds:[],invocationIds:[]},t=(b.current?.value||"").split(" "),r=t.filter(e=>!o.find(t=>e.includes(`${t.name}:`))&&!/^\s*$/.test(e)).join(" ");return t.map(e=>{if(e.includes(":")){let t=e.indexOf(":"),r=e.slice(0,t),n=e.slice(t+1),i=o.find(e=>e.name===r);if(""!==n&&i)return{name:nM(i.attributeName),filterValue:n.split(",")}}return null}).filter(e=>null!==e).forEach(t=>{let{name:r,filterValue:n}=t;r in e?e[r]=[...e[r],...n]:e[r]=n}),{query:e,search:r}},[o]);(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,r=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!b.current||t&&r||(e.preventDefault(),b.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{let e=b.current;if(e&&!k){let t=()=>{_(e.scrollLeft)};return e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}},[k]),(0,s.useEffect)(()=>{(0,nC.default)(C.current,e.query)||setTimeout(()=>{t?E(t.replaceAll("+"," ")):E("")}),C.current=e.query},[e.query,t,E]);let R=(0,s.useCallback)(()=>{let e=b.current?.value||"";e&&e!==S.current&&n({eventTrigger:"search bar",filter:"search",value:[""]}),r({search:e,preset:null}),S.current=e},[r,n]),P=(0,s.useCallback)(()=>{let e=b.current?.selectionStart||0,t=nk(b.current?.value||"",e);if(t.includes(":")){let[e]=t.split(":"),r=o.find(t=>t.name===e);r&&d(r)}else d(null);f("")},[o]),q=(0,s.useCallback)((e,r)=>{let n=b.current?.selectionStart||0;if(u&&!T)return e;let i=t=>{let r=(0,eg.matchSorter)(e,t,{keys:["value","label"]}),n=e.find(e=>"confirm search"===e.label);return n&&r.unshift(n),r};if(u){let e=nk(r,n).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$");return i(e[e.length-1].split(" ")[0])}if(r.includes(" ")){let e=nk(r,n),s=nk(r,n-e.length-1),l=!s.includes(":")&&!t.includes(s.split(" ")[0]);return(o.find(e=>s.includes(e.name)),l)?[]:i(e.split(" ")[0])}return i(r)},[u,t,T,o]),z=(0,s.useMemo)(()=>{if(!A||!u||0===A.length||"requestId"===u.attributeName)return null;g(!0);let{query:e}=F(),t=e[nM(u.attributeName)];return A.filter(e=>!t.includes(e.value))},[u,F,A]),W=z&&u&&!D||c&&h&&u,$=m.includes(":");return(0,i.jsxs)("div",{className:nw.default.comboboxWrapper,style:{"--word-gap":$?"10px":"0px"},children:[(0,i.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,i.jsxs)(nS.Combobox,{className:nw.default.combobox,filter:q,noNegativeIndex:!0,noTextSelection:!0,onChange:e=>{let t=b.current?.selectionStart||0,r=b.current?.value||"";if(v.current?.setSelectedIndex(0),!e)return;let n=o.find(t=>t.name===e.split(":")[0]);if(""===r){E(e),n&&d(n);return}if(n){let i=nk(r,t);if(r.includes(`${n.name}:`)){let e=r.split(" ").find(e=>e.includes(n.name))||"",{query:t}=F(),s=t[nM(n.attributeName)].length>0;E(r.replace(e,`${e}${s?",":""}`).split(" ").filter(e=>e!==i).join(" ")),d(n);return}if(i){let n=r.slice(0,t-i.length),s=r.slice(t-i.length,r.length+i.length);E(n+(s=s.replace(i,e)))}else{let n=0===t;E(nN(r,t,e)),n&&setTimeout(()=>{b.current?.setSelectionRange(e.length,e.length)})}d(n);return}if(u){let n=nk(r,t).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$"),i=n[n.length-1];if(i){let n=i.split(" ")[0],s=/^\s*$/.test(n),l=nk(r,t),o=l.split(":")[0];if(r.split(":").filter(e=>e.includes(o)).length>1){let t=r.split(" ").find(e=>e.includes(u.name))||"";E(r.replace(t,`${t},${e}`).split(" ").filter(e=>e!==l).join(" "))}else E(r.replace(s?" ":i,`${e} `))}else E(nN(r,t,`${e} `));v.current?.setSelectedIndex(-1),d(null),setTimeout(()=>{R()})}},onChangeOpen:e=>{v.current?.setSelectedValue(null),!e&&(f(""),j.current||v.current?.close())},onClear:O,placeholder:"Search logs…",ref:v,shouldContinue:!0,children:[(0,i.jsx)(nS.Combobox.Input,{className:nw.default.input,"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",loading:!!(D&&u||a),onBlur:()=>{d(null)},onPaste:e=>{try{let t=e.clipboardData.getData("text/plain"),r=/[a-z0-9]{5}-\d{13}-[a-z0-9]{12}/i.exec(t),n=e.currentTarget,i=n.selectionStart||0,s=n.selectionEnd||i,l=n.value.substring(i,s);if(r&&!t.includes("requestId")&&(!n.value.includes("requestId:")||l.includes("requestId"))){e.preventDefault();let r=nN(n.value,i,`requestId:${t}`,s);E(r)}}catch(e){}},onChange:e=>{if(x(e.target.value),""===e.target.value){d(null),t&&(O(),E(""));return}E(e.target.value);let r=e.target.selectionStart||0;P();let n=nk(e.target.value,r);if(n.includes(":")){let e=o.find(e=>e.name===n.split(":")[0]);if(e){let t=n.split(":")[1].split(",");w((t=t[t.length-1]).split(" ")[0]),d(e)}else d(null)}},onClick:P,onKeyDown:e=>{let t=b.current?.value||"",r=j.current;if("Enter"===e.key&&r&&R(),"ArrowLeft"===e.key||"ArrowRight"===e.key){let r=e.target.selectionStart||0;/^\s*$/.test(t.split("")[r-1])&&d(null)}},ref:b}),(0,i.jsx)(nS.Combobox.List,{className:nw.default.comboboxList,emptyMessage:(0,i.jsxs)("button",{className:nw.default.confirm,onClick:()=>{v.current?.close(),R()},ref:j,type:"button",children:["Confirm search"," ",(0,i.jsx)("kbd",{className:nw.default.suffix,children:(0,i.jsx)(nj.CornerDownRight,{})})]}),hideOptions:!0,children:W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nD,{onSelect:()=>{v.current?.close(),R()}}),z?z.map(e=>(0,i.jsx)(nS.Combobox.Option,{className:nw.default.option,value:e.value,children:`${e.value}`},e.value)):[]]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nD,{onSelect:()=>{v.current?.close(),R()}},"first-option"),o.map(e=>(0,i.jsxs)(nS.Combobox.Option,{className:nw.default.option,value:`${e.name}:`,children:[(0,i.jsx)("span",{className:nw.default.filter,children:`${e.name}:`}),(0,i.jsx)("div",{className:nw.default.suggestions,children:e.suggestions.map(e=>(0,i.jsxs)("span",{children:["[",e,"]"]},e))})]},e.name))]})})]}),!k&&(0,i.jsx)("div",{"aria-hidden":!0,className:nw.default.textOverlay,style:{transform:`translateX(-${y}px)`},children:m.split(/\s/).map((e,t)=>e.includes(":")?(0,i.jsxs)("span",{className:nw.default.highlight,children:[e," "]},e):(0,i.jsx)("span",{style:""===e&&0===t?{marginLeft:-4,marginRight:0}:{},children:e},`${e}${t}`))})]})}function nL(){return(0,i.jsxs)(nS.Combobox,{className:(0,g.clsx)(nw.default.combobox,"geist-show-on-desktop"),placeholder:"Search logs…",children:[(0,i.jsx)(nS.Combobox.Input,{className:nw.default.input,id:"search-logs"}),(0,i.jsx)(nS.Combobox.List,{className:nw.default.comboboxList})]})}function nM(e){return"requestTags"===e?e:"branch"===e?`${e}es`:`${e}s`}function nD(e){let{onSelect:t}=e;return(0,i.jsx)(nS.Combobox.Option,{label:"confirm search",onCustomSelect:t,value:"",children:(0,i.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial w-full",children:[(0,i.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Confirm search"})," ",(0,i.jsx)(nj.CornerDownRight,{})]})})}let nA=(0,s.createContext)(null);function nO(){let e=(0,s.useContext)(nA);return null==e&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function nI(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function nF(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);i.search=s.toString(),console.warn(`Minified Lexical warning #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let nR="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,nP=nR&&"documentMode"in document?document.documentMode:null,nB=nR&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),nq=nR&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),nz=!(!nR||!("InputEvent"in window)||nP)&&"getTargetRanges"in new window.InputEvent("input"),nW=nR&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),n$=nR&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,nU=nR&&/Android/.test(navigator.userAgent),nV=nR&&/^(?=.*Chrome).*/i.test(navigator.userAgent),nK=nR&&nU&&nV,nH=nR&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&nB&&!nV;function nG(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))n.push(t);return n}let nJ=nW||n$||nH?" ":"​",nZ=nq?" ":nJ,nX="֑-߿יִ-﷽ﹰ-ﻼ",nQ="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",nY=(RegExp("^[^"+nQ+"]*["+nX+"]"),RegExp("^[^"+nX+"]*["+nQ+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),n0={directionless:1,unmergeable:2},n1={center:2,end:6,justify:4,left:1,right:3,start:5},n2={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},n3={normal:0,segmented:2,token:1},n4={0:"normal",2:"segmented",1:"token"},n5="$config",n6=!1,n9=0;function n8(e){n9=e.timeStamp}function n7(e,t,r){let n="BR"===e.nodeName,i=t.__lexicalLineBreak;return i&&(e===i||n&&e.previousSibling===i)||n&&void 0!==o3(e,r)}function ie(e,t,r){n6=!0;let n=performance.now()-n9>100;try{op(e,()=>{let i=lZ()||e.getEditorState().read(()=>{let e=lZ();return null!==e?e.clone():null}),s=new Map,l=e.getRootElement(),o=e._editorState,a=e._blockCursorElement,u=!1,d="";for(let r=0;r<t.length;r++){let c=t[r],f=c.type,h=c.target,g=function(e,t,r,n){var i;for(let s=e;s&&(i=s,!0!==i.__lexicalUnmanaged);s=av(s)){let e=o3(s,t);if(void 0!==e){let t=o1(e,r);if(t)return ob(t)||!aA(s)?void 0:[s,t]}else if(s===n)return[n,o8(r)]}}(h,e,o,l);if(!g)continue;let[p,m]=g;if("characterData"===f)n&&lS(m)&&oG(h)&&function(e,t,r){if(lO(e)){let t=e.anchor.getNode();if(t.is(r)&&e.format!==t.getFormat())return!1}return oG(t)&&r.isAttached()}(i,h,m)&&function(e,t,r){let n=aD(ak(r)),i=null,s=null;null!==n&&n.anchorNode===e&&(i=n.anchorOffset,s=n.focusOffset);let l=e.nodeValue;null!==l&&al(t,l,i,s,!1)}(h,m,e);else if("childList"===f){u=!0;let t=c.addedNodes;for(let r=0;r<t.length;r++){let n=t[r],i=o2(n),s=n.parentNode;if(null!=s&&n!==a&&null===i&&!n7(n,s,e)){if(nq){let e=(aA(n)?n.innerText:null)||n.nodeValue;e&&(d+=e)}s.removeChild(n)}}let r=c.removedNodes,n=r.length;if(n>0){let t=0;for(let i=0;i<n;i++){let n=r[i];(n7(n,h,e)||a===n)&&(h.appendChild(n),t++)}n!==t&&s.set(p,m)}}}if(s.size>0)for(let[t,r]of s)r.reconcileObservedMutation(t,e);let c=r.takeRecords();if(c.length>0){for(let t=0;t<c.length;t++){let r=c[t],n=r.addedNodes,i=r.target;for(let t=0;t<n.length;t++){let r=n[t],s=r.parentNode;null==s||"BR"!==r.nodeName||n7(r,i,e)||s.removeChild(r)}}r.takeRecords()}null!==i&&(u&&o7(i),nq&&am(e)&&i.insertRawText(d))})}finally{n6=!1}}function it(e){let t=e._observer;null!==t&&ie(e,t.takeRecords(),t)}function ir(e){0===n9&&ak(e).addEventListener("textInput",n8,!0),e._observer=new MutationObserver((t,r)=>{ie(e,t,r)})}class ii{node;knownState;unknownState;sharedNodeState;size;constructor(e,t,r,n=new Map,i){this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=n;const{sharedConfigMap:s}=this.sharedNodeState,l=void 0!==i?i:function(e,t,r){let n=r.size;if(t)for(let i in t){let t=e.get(i);t&&r.has(t)||n++}return n}(s,r,n);this.size=l}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(r=e.parse(t)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,r]of this.knownState)t.isEqual(r,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(r);for(let r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return il(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:r}=this,n=new Map(this.knownState);return new ii(e,t,function(e,t,r){let n;if(r)for(let[i,s]of Object.entries(r)){let r=e.get(i);r?t.has(r)||t.set(r,r.parse(s)):(n=n||{})[i]=s}return n}(t.sharedConfigMap,n,r),n,this.size)}updateFromKnown(e,t){let r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);let{knownState:n,unknownState:i}=this;n.has(e)||i&&r in i||(i&&(delete i[r],this.unknownState=il(i)),this.size++),n.set(e,t)}updateFromUnknown(e,t){let r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,r]of Object.entries(e))this.updateFromUnknown(t,r)}}function is(e){return e.__state?e.__state.sharedNodeState:oP(os(),e.getType()).sharedNodeState}function il(e){if(e)for(let t in e)return e}function io(e,t,r){for(let[n,i]of t.knownState){if(e.has(n.key))continue;e.add(n.key);let t=r?r.getValue(n):n.defaultValue;if(t!==i&&!n.isEqual(t,i))return!0}return!1}function ia(e,t,r){let{unknownState:n}=t,i=r?r.unknownState:void 0;if(n){for(let[t,r]of Object.entries(n))if(!e.has(t)&&(e.add(t),r!==(i?i[t]:void 0)))return!0}return!1}function iu(e,t){let r=e.__state;return r&&r.node===e?r.getWritable(t):r}function id(e,t){let r=e.__mode,n=e.__format,i=e.__style,s=t.__mode,l=t.__format,o=t.__style,a=e.__state,u=t.__state;return(null===r||r===s)&&(null===n||n===l)&&(null===i||i===o)&&(null===e.__state||a===u||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let r=new Set;return!(e&&io(r,e,t)||t&&io(r,t,e)||e&&ia(r,e,t)||t&&ia(r,t,e))}(a,u))}function ic(e,t){let r=e.mergeWithSibling(t),n=os()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function ih(e){let t,r,n=e;if(""!==n.__text||!n.isSimpleText()||n.isUnmergeable()){for(;null!==(t=n.getPreviousSibling())&&lS(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){id(t,n)&&(n=ic(t,n));break}t.remove()}for(;null!==(r=n.getNextSibling())&&lS(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(""!==r.__text){id(n,r)&&(n=ic(n,r));break}r.remove()}}else n.remove()}function ig(e){return ip(e.anchor),ip(e.focus),e}function ip(e){for(;"element"===e.type;){let t,r,n=e.getNode(),i=e.offset;if(i===n.getChildrenSize()?(t=n.getChildAtIndex(i-1),r=!0):(t=n.getChildAtIndex(i),r=!1),lS(t)){e.set(t.__key,r?t.getTextContentSize():0,"text",!0);break}if(!o_(t))break;e.set(t.__key,r?t.getChildrenSize():0,"element",!0)}}let im,ix,iy,i_,iv,iC,ib,ij,iS,iw,ik="",iN=null,iE=null,iT="",iL=!1,iM=!1;function iD(e,t){let r=ib.get(e);if(null!==t){let r=iV(e);r.parentNode===t&&t.removeChild(r)}if(ij.has(e)||ix._keyToDOMMap.delete(e),o_(r)){let e=iW(r,ib);iA(e,0,e.length-1,null)}void 0!==r&&ag(iw,iy,i_,r,"destroyed")}function iA(e,t,r,n){let i=t;for(;i<=r;++i){let t=e[i];void 0!==t&&iD(t,n)}}function iO(e,t){e.setProperty("text-align",t)}function iI(e,t){let r=im.theme.indent;if("string"==typeof r){let n=e.classList.contains(r);t>0&&!n?e.classList.add(r):t<1&&n&&e.classList.remove(r)}let n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${n})`)}function iF(e,t){let r=e.style;0===t?iO(r,""):1===t?iO(r,"left"):2===t?iO(r,"center"):3===t?iO(r,"right"):4===t?iO(r,"justify"):5===t?iO(r,"start"):6===t&&iO(r,"end")}function iR(e,t){let r=function(e){let t=e.__dir;if(null!==t)return t;if(oS(e))return null;let r=e.getParentOrThrow();return oS(r)&&null===r.__dir?"auto":null}(t);null!==r?e.dir=r:e.removeAttribute("dir")}function iP(e,t){var r;let n,i=ij.get(e);void 0===i&&nI(60);let s=i.createDOM(im,ix);if(n=(r=ix)._keyToDOMMap,s[`__lexicalKey_${r._key}`]=e,n.set(e,s),lS(i)?s.setAttribute("data-lexical-text","true"):ob(i)&&s.setAttribute("data-lexical-decorator","true"),o_(i)){let e=i.__indent,t=i.__size;iR(s,i),0!==e&&iI(s,e),0!==t&&iB(iW(i,ij),i,0,t-1,i.getDOMSlot(s));let r=i.__format;0!==r&&iF(s,r),i.isInline()||iz(null,i,s),ay(i)&&(ik+="\n\n",iT+="\n\n")}else{let t=i.getTextContent();if(ob(i)){let t=i.decorate(ix,im);null!==t&&i$(e,t),s.contentEditable="false"}ik+=t,iT+=t}return null!==t&&t.insertChild(s),ag(iw,iy,i_,i,"created"),s}function iB(e,t,r,n,i){let s=ik;ik="";let l=r;for(;l<=n;++l){iP(e[l],i);let t=ij.get(e[l]);null!==t&&lS(t)&&null===iN&&(iN=t.getFormat(),iE=t.getStyle())}ay(t)&&(ik+="\n\n"),i.element.__lexicalTextContent=ik,ik=s+ik}function iq(e,t){if(e){let r=e.__last;if(r){let e=t.get(r);if(e)return lo(e)?"line-break":ob(e)&&e.isInline()?"decorator":null}return"empty"}return null}function iz(e,t,r){let n=iq(e,ib),i=iq(t,ij);n!==i&&t.getDOMSlot(r).setManagedLineBreak(i)}function iW(e,t){let r=[],n=e.__first;for(;null!==n;){let e=t.get(n);void 0===e&&nI(101),r.push(n),n=e.__next}return r}function i$(e,t){let r=ix._pendingDecorators,n=ix._decorators;if(null===r){if(n[e]===t)return;r=o5(ix)}r[e]=t}function iU(e){let t=e.nextSibling;return null!==t&&t===ix._blockCursorElement&&(t=t.nextSibling),t}function iV(e){let t=iS.get(e);return void 0===t&&nI(75,e),t}function iK(e){return{type:e}}let iH=iK("SELECTION_CHANGE_COMMAND"),iG=(iK("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),iK("CLICK_COMMAND")),iJ=iK("BEFORE_INPUT_COMMAND"),iZ=iK("INPUT_COMMAND"),iX=iK("COMPOSITION_START_COMMAND"),iQ=iK("COMPOSITION_END_COMMAND"),iY=iK("DELETE_CHARACTER_COMMAND"),i0=iK("INSERT_LINE_BREAK_COMMAND"),i1=iK("INSERT_PARAGRAPH_COMMAND"),i2=iK("CONTROLLED_TEXT_INSERTION_COMMAND"),i3=iK("PASTE_COMMAND"),i4=iK("REMOVE_TEXT_COMMAND"),i5=iK("DELETE_WORD_COMMAND"),i6=iK("DELETE_LINE_COMMAND"),i9=iK("FORMAT_TEXT_COMMAND"),i8=iK("UNDO_COMMAND"),i7=iK("REDO_COMMAND"),se=iK("KEYDOWN_COMMAND"),st=iK("KEY_ARROW_RIGHT_COMMAND"),sr=iK("MOVE_TO_END"),sn=iK("KEY_ARROW_LEFT_COMMAND"),si=iK("MOVE_TO_START"),ss=iK("KEY_ARROW_UP_COMMAND"),sl=iK("KEY_ARROW_DOWN_COMMAND"),so=iK("KEY_ENTER_COMMAND"),sa=iK("KEY_SPACE_COMMAND"),su=iK("KEY_BACKSPACE_COMMAND"),sd=iK("KEY_ESCAPE_COMMAND"),sc=iK("KEY_DELETE_COMMAND"),sf=iK("KEY_TAB_COMMAND"),sh=(iK("INSERT_TAB_COMMAND"),iK("INDENT_CONTENT_COMMAND"),iK("OUTDENT_CONTENT_COMMAND"),iK("DROP_COMMAND")),sg=(iK("FORMAT_ELEMENT_COMMAND"),iK("DRAGSTART_COMMAND")),sp=iK("DRAGOVER_COMMAND"),sm=iK("DRAGEND_COMMAND"),sx=iK("COPY_COMMAND"),sy=iK("CUT_COMMAND"),s_=iK("SELECT_ALL_COMMAND"),sv=iK("CLEAR_EDITOR_COMMAND"),sC=iK("CLEAR_HISTORY_COMMAND"),sb=iK("CAN_REDO_COMMAND"),sj=iK("CAN_UNDO_COMMAND"),sS=iK("FOCUS_COMMAND"),sw=iK("BLUR_COMMAND"),sk=iK("KEY_MODIFIER_COMMAND"),sN=Object.freeze({}),sE=[["keydown",function(e,t){sT=e.timeStamp,sL=e.key,t.isComposing()||ax(t,se,e)}],["pointerdown",function(e,t){let r=e.target,n=e.pointerType;aO(r)&&"touch"!==n&&"pen"!==n&&0===e.button&&op(t,()=>{ob(o4(r))||(sF=!0)})}],["compositionstart",function(e,t){ax(t,iX,e)}],["compositionend",function(e,t){nq?sP=!0:!n$&&(nW||nH)?(sB=!0,sq=e.data):ax(t,iQ,e)}],["input",function(e,t){e.stopPropagation(),op(t,()=>{t.dispatchCommand(iZ,e)},{event:e}),sD=null}],["click",function(e,t){op(t,()=>{let r=lZ(),n=aD(ak(t)),i=lX();if(n){if(lO(r)){let t=r.anchor,s=t.getNode();if("element"===t.type&&0===t.offset&&r.isCollapsed()&&!oS(s)&&1===o9().getChildrenSize()&&s.getTopLevelElementOrThrow().isEmpty()&&null!==i&&r.is(i))n.removeAllRanges(),r.dirty=!0;else if(3===e.detail&&!r.isCollapsed()&&s!==r.focus.getNode()){let e=aU(s,e=>o_(e)&&!e.isInline());o_(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let r=n.anchorNode;(aA(r)||oG(r))&&o7(lJ(i,n,t,e))}}ax(t,iG,e)})}],["cut",sN],["copy",sN],["dragstart",sN],["dragover",sN],["dragend",sN],["paste",sN],["focus",sN],["blur",sN],["drop",sN]];nz&&sE.push(["beforeinput",(e,t)=>{let r;"deleteCompositionText"===(r=e.inputType)||nq&&am(t)||"insertCompositionText"!==r&&ax(t,iJ,e)}]);let sT=0,sL=null,sM=0,sD=null,sA=new WeakMap,sO=new WeakMap,sI=!1,sF=!1,sR=!1,sP=!1,sB=!1,sq="",sz=null,sW=[0,"",0,"root",0];function s$(e,t,r,n,i){let s=e.anchor,l=e.focus,o=s.getNode(),a=os(),u=aD(ak(a)),d=null!==u?u.anchorNode:null,c=s.key,f=a.getElementByKey(c),h=r.length;return c!==l.key||!lS(o)||(!i&&(!nz||sM<n+50)||o.isDirty()&&h<2||at(r))&&s.offset!==l.offset&&!o.isComposing()||oH(o)||o.isDirty()&&h>1||(i||!nz)&&null!==f&&!o.isComposing()&&d!==oJ(f)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){let r;if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let n=e.anchor.offset,i=t.getParentOrThrow(),s=oK(t);return 0===n?!t.canInsertTextBefore()||!i.canInsertTextBefore()&&!t.isComposing()||s||(lS(r=t.getPreviousSibling())||o_(r)&&r.isInline())&&!r.canInsertTextAfter():n===t.getTextContentSize()&&(!t.canInsertTextAfter()||!i.canInsertTextAfter()&&!t.isComposing()||s)}(e,o)}function sU(e,t){return oG(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function sV(e,t,r){let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:l}=e;sI&&(sI=!1,sU(n,i)&&sU(s,l)&&!sz)||op(t,()=>{if(!r)return void o7(null);if(!oW(t,n,s))return;let o=lZ();if(sz&&lO(o)&&o.isCollapsed()){let e=o.anchor,t=sz.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&o7(o=sz.clone())}if(sz=null,lO(o)){let r=o.anchor,n=r.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);let i=ak(t).event,s=i?i.timeStamp:performance.now(),[l,a,u,d,c]=sW,f=o9(),h=!1===t.isComposing()&&""===f.getTextContent();if(s<c+200&&r.offset===u&&r.key===d)sK(o,l,a);else if("text"===r.type)lS(n)||nI(141),sH(o,n);else if("element"===r.type&&!h){o_(n)||nI(259);let e=r.getNode();e.isEmpty()?sK(o,e.getTextFormat(),e.getTextStyle()):sK(o,0,"")}}else{let e=r.key,t=o.focus.key,n=o.getNodes(),s=n.length,a=o.isBackward(),u=a?l:i,d=a?i:l,c=a?t:e,f=a?e:t,h=2047,g=!1;for(let e=0;e<s;e++){let t=n[e],r=t.getTextContentSize();if(lS(t)&&0!==r&&(0!==e||t.__key!==c||u!==r)&&(e!==s-1||t.__key!==f||0!==d)&&(g=!0,0==(h&=t.getFormat())))break}o.format=g?h:0}}ax(t,iH,void 0)})}function sK(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function sH(e,t){sK(e,t.getFormat(),t.getStyle())}function sG(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function sJ(e){var t;let r=e.inputType,n=sG(e),i=os(),s=lZ();if("deleteContentBackward"===r){if(null===s){let e=lX();if(!lO(e))return!0;o7(e.clone())}if(lO(s)){let r=s.anchor.key===s.focus.key;if(t=e.timeStamp,"MediaLast"===sL&&t<sT+30&&i.isComposing()&&r){if(oY(null),sT=0,setTimeout(()=>{op(i,()=>{oY(null)})},30),lO(s)){let e=s.anchor.getNode();e.markDirty(),lS(e)||nI(142),sH(s,e)}}else{oY(null),e.preventDefault();let t=s.anchor.getNode(),n=t.getTextContent(),l=t.canInsertTextAfter(),o=0===s.anchor.offset&&s.focus.offset===n.length,a=nK&&r&&!o&&l;if(a&&s.isCollapsed()&&(a=!ob(function(e,t){let r=e.offset;if("element"===e.type)return ap(e.getNode(),t,r);{let n=e.getNode();if(t&&0===r||!t&&r===n.getTextContentSize()){let e=t?n.getPreviousSibling():n.getNextSibling();return null===e?ap(n.getParentOrThrow(),t,n.getIndexWithinParent()+ +!t):e}}return null}(s.anchor,!0))),!a){ax(i,iY,!0);let e=lZ();nK&&lO(e)&&e.isCollapsed()&&(sz=e,setTimeout(()=>sz=null))}}return!0}}if(!lO(s))return!0;let l=e.data;null!==sD&&as(!1,i,sD),s.dirty&&null===sD||!s.isCollapsed()||oS(s.anchor.getNode())||null===n||s.applyDOMRange(n),sD=null;let o=s.anchor,a=s.focus,u=o.getNode(),d=a.getNode();if("insertText"===r||"insertTranspose"===r){if("\n"===l)e.preventDefault(),ax(i,i0,!1);else if("\n\n"===l)e.preventDefault(),ax(i,i1,void 0);else if(null==l&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),s.insertRawText(t)}else null!=l&&s$(s,n,l,e.timeStamp,!0)?(e.preventDefault(),ax(i,i2,l)):sD=l;return sM=e.timeStamp,!0}switch(e.preventDefault(),r){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ax(i,i2,e);break;case"insertFromComposition":oY(null),ax(i,i2,e);break;case"insertLineBreak":oY(null),ax(i,i0,!1);break;case"insertParagraph":oY(null),sR&&!n$?(sR=!1,ax(i,i0,!1)):ax(i,i1,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ax(i,i3,e);break;case"deleteByComposition":(u!==d||o_(u)||o_(d)||!oK(u)||!oK(d))&&ax(i,i4,e);break;case"deleteByDrag":case"deleteByCut":ax(i,i4,e);break;case"deleteContent":ax(i,iY,!1);break;case"deleteWordBackward":ax(i,i5,!0);break;case"deleteWordForward":ax(i,i5,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ax(i,i6,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ax(i,i6,!1);break;case"formatStrikeThrough":ax(i,i9,"strikethrough");break;case"formatBold":ax(i,i9,"bold");break;case"formatItalic":ax(i,i9,"italic");break;case"formatUnderline":ax(i,i9,"underline");break;case"historyUndo":ax(i,i8,void 0);break;case"historyRedo":ax(i,i7,void 0)}return!0}function sZ(e){if(aA(e.target)&&ob(o4(e.target)))return!0;let t=os(),r=lZ(),n=e.data,i=sG(e);if(null!=n&&lO(r)&&s$(r,i,n,e.timeStamp,!1)){sP&&(sY(t,n),sP=!1);let i=r.anchor.getNode(),s=aD(ak(t));if(null===s)return!0;let l=r.isBackward(),o=l?r.anchor.offset:r.focus.offset,a=l?r.focus.offset:r.anchor.offset;nz&&!r.isCollapsed()&&lS(i)&&null!==s.anchorNode&&i.getTextContent().slice(0,o)+n+i.getTextContent().slice(o+a)===ai(s.anchorNode)||ax(t,i2,n);let u=n.length;nq&&u>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(r.anchor.offset-=u),nW||n$||nH||!t.isComposing()||(sT=0,oY(null))}else as(!1,t,null!==n?n:void 0),sP&&(sY(t,n||void 0),sP=!1);return or(),it(os()),!0}function sX(e){let t=os(),r=lZ();if(lO(r)&&!t.isComposing()){let n=r.anchor,i=r.anchor.getNode();oY(n.key),(e.timeStamp<sT+30||"element"===n.type||!r.isCollapsed()||i.getFormat()!==r.format||lS(i)&&i.getStyle()!==r.style)&&ax(t,i2,nZ)}return!0}function sQ(e){return sY(os(),e.data),!0}function sY(e,t){let r=e._compositionKey;if(oY(null),null!==r&&null!=t){if(""===t){let t=o1(r),n=oJ(e.getElementByKey(r));return void(null!==n&&null!==n.nodeValue&&lS(t)&&al(t,n.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=lZ();if(lO(t)){let r=t.focus;return t.anchor.set(r.key,r.offset,r.type),void ax(e,so,null)}}}as(!0,e,t)}function s0(e){let t=os();if(null==e.key)return!0;if(sB&&af(e))return op(t,()=>{sY(t,sq)}),sB=!1,sq="",!0;if(au(e,"ArrowRight",{shiftKey:"any"}))ax(t,st,e);else if(au(e,"ArrowRight",ad))ax(t,sr,e);else if(au(e,"ArrowLeft",{shiftKey:"any"}))ax(t,sn,e);else if(au(e,"ArrowLeft",ad))ax(t,si,e);else if(au(e,"ArrowUp",{altKey:"any",shiftKey:"any"}))ax(t,ss,e);else if(au(e,"ArrowDown",{altKey:"any",shiftKey:"any"}))ax(t,sl,e);else if(au(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))sR=!0,ax(t,so,e);else if(" "===e.key)ax(t,sa,e);else if(nB&&au(e,"o",{ctrlKey:!0}))e.preventDefault(),sR=!0,ax(t,i0,!0);else if(au(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))sR=!1,ax(t,so,e);else if(au(e,"Backspace",{shiftKey:"any"})||nB&&au(e,"h",{ctrlKey:!0}))af(e)?ax(t,su,e):(e.preventDefault(),ax(t,iY,!0));else if("Escape"===e.key)ax(t,sd,e);else if(au(e,"Delete",{})||nB&&au(e,"d",{ctrlKey:!0}))"Delete"!==e.key?(e.preventDefault(),ax(t,iY,!1)):ax(t,sc,e);else if(au(e,"Backspace",ac))e.preventDefault(),ax(t,i5,!0);else if(au(e,"Delete",ac))e.preventDefault(),ax(t,i5,!1);else if(nB&&au(e,"Backspace",{metaKey:!0}))e.preventDefault(),ax(t,i6,!0);else if(nB&&(au(e,"Delete",{metaKey:!0})||au(e,"k",{ctrlKey:!0})))e.preventDefault(),ax(t,i6,!1);else if(au(e,"b",ad))e.preventDefault(),ax(t,i9,"bold");else if(au(e,"u",ad))e.preventDefault(),ax(t,i9,"underline");else if(au(e,"i",ad))e.preventDefault(),ax(t,i9,"italic");else if(au(e,"Tab",{shiftKey:"any"}))ax(t,sf,e);else if(au(e,"z",ad))e.preventDefault(),ax(t,i8,void 0);else if(nB?au(e,"z",{metaKey:!0,shiftKey:!0}):au(e,"y",{ctrlKey:!0})||au(e,"z",{ctrlKey:!0,shiftKey:!0}))e.preventDefault(),ax(t,i7,void 0);else{let r=t._editorState._selection;null===r||lO(r)?au(e,"a",ad)&&(e.preventDefault(),ax(t,s_,e)):au(e,"c",ad)?(e.preventDefault(),ax(t,sx,e)):au(e,"x",ad)?(e.preventDefault(),ax(t,sy,e)):au(e,"a",ad)&&(e.preventDefault(),ax(t,s_,e))}return(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&t.dispatchCommand(sk,e),!0}function s1(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let s2=new Map;function s3(e){let t,r=(t=aw(e.target))?t.getSelection():null;if(null===r)return;let n=oU(r.anchorNode);if(null===n)return;sF&&(sF=!1,op(n,()=>{let t=lX(),i=r.anchorNode;(aA(i)||oG(i))&&o7(lJ(t,r,n,e))}));let i=ar(n),s=i[i.length-1],l=s._key,o=s2.get(l),a=o||s;a!==n&&sV(r,a,!1),sV(r,n,!0),n!==s?s2.set(l,n):o&&s2.delete(l)}function s4(e){e._lexicalHandled=!0}function s5(e){return!0===e._lexicalHandled}let s6=()=>{};function s9(e,t,r){or();let n=e.__key,i=e.getParent();if(null===i)return;let s=function(e){let t=lZ();if(!lO(t)||!o_(e))return t;let{anchor:r,focus:n}=t,i=r.getNode(),s=n.getNode();return aS(i,e)&&r.set(e.__key,0,"element"),aS(s,e)&&n.set(e.__key,0,"element"),t}(e),l=!1;if(lO(s)&&t){let t=s.anchor,r=s.focus;t.key===n&&(l0(t,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0),r.key===n&&(l0(r,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0)}else lF(s)&&t&&e.isSelected()&&e.selectPrevious();if(lO(s)&&t&&!l){let t=e.getIndexWithinParent();oX(e),lQ(s,i,t,-1)}else oX(e);r||aN(i)||i.canBeEmpty()||!i.isEmpty()||s9(i,t),t&&s&&oS(i)&&i.isEmpty()&&i.selectEnd()}let s8=Symbol.for("ephemeral");function s7(e){return e[s8]||!1}class le{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=a$(this);return void 0===e&&nI(64,this.name),e}static clone(e){nI(65,this.name)}$config(){return{}}config(e,t){let r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(e,t){let r,n=(r=oF,oF=null,r);if(null!=(t=t||n&&n.__key))return e.__key=t;or(),on();let i=os(),s=oi(),l=""+oR++;s._nodeMap.set(l,e),o_(e)?i._dirtyElements.set(l,!0):i._dirtyLeaves.add(l),i._cloneNotNeeded.add(l),i._dirtyType=1,e.__key=l}(this,e)}getType(){return this.__type}isInline(){nI(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=o1(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||lZ();if(null==t)return!1;let r=t.getNodes().some(e=>e.__key===this.__key);if(lS(this))return r;if(lO(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(ob(this)&&this.isInline()&&e){let r=t.isBackward()?t.focus:t.anchor;if(e.is(r.getNode())&&r.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),r=0;for(;null!==t;){if(this.is(t))return r;r++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:o1(e)}getParentOrThrow(){let e=this.getParent();return null===e&&nI(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(aN(t))return o_(e)||e===this&&ob(e)||nI(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&nI(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:o1(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let r=t.getFirstChild();for(;null!==r&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:o1(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=o_(this)?this:this.getParent(),r=o_(e)?e:e.getParent(),n=t&&r?uo(t,r):null;return n?n.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let t=uo(this,e);return null!==t&&("descendant"===t.type||("branch"===t.type?-1===us(t):("same"!==t.type&&"ancestor"!==t.type&&nI(279),!1)))}isParentOf(e){let t=uo(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let t=this.isBefore(e),r=[],n=new Set,i=this;for(;null!==i;){let s=i.__key;if(n.has(s)||(n.add(s),r.push(i)),i===e)break;let l=o_(i)?t?i.getFirstChild():i.getLastChild():null;if(null!==l){i=l;continue}let o=t?i.getNextSibling():i.getPreviousSibling();if(null!==o){i=o;continue}let a=i.getParentOrThrow();if(n.has(a.__key)||r.push(a),a===e)break;let u=null,d=a;do{if(null===d&&nI(68),u=t?d.getNextSibling():d.getPreviousSibling(),null===(d=d.getParent()))break;null!==u||n.has(d.__key)||r.push(d)}while(null===u)i=u}return t||r.reverse(),r}isDirty(){let e=os()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(s7(this))return this;let e=o1(this.__key);return null===e&&nI(113),e}getWritable(){if(s7(this))return this;or();let e=oi(),t=os(),r=e._nodeMap,n=this.__key,i=this.getLatest(),s=t._cloneNotNeeded,l=lZ();if(null!==l&&l.setCachedNodes(null),s.has(n))return oQ(i),i;let o=az(i);return s.add(n),oQ(o),r.set(n,o),o}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){nI(70)}updateDOM(e,t,r){nI(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){nI(18,this.name)}updateFromJSON(e){return function(e,t){let r,n,i=e.getWritable(),s=t.$,l=s;for(let e of is(i).flatKeys)e in t&&(void 0!==l&&l!==s||(l={...s}),l[e]=t[e]);return(i.__state||l)&&(n=(r=e.getWritable()).__state?r.__state.getWritable(r):new ii(r,is(r)),r.__state=n,n).updateFromJSON(l),i}(this,e)}static transform(){return null}remove(e){s9(this,!0,e)}replace(e,t){or();let r=lZ();null!==r&&(r=r.clone()),aT(this,e);let n=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),o=this.getParentOrThrow().getWritable(),a=o.__size;oX(l);let u=n.getPreviousSibling(),d=n.getNextSibling(),c=n.__prev,f=n.__next,h=n.__parent;if((s9(n,!1,!0),null===u)?o.__first=s:u.getWritable().__next=s,(l.__prev=c,null===d)?o.__last=s:d.getWritable().__prev=s,l.__next=f,l.__parent=h,o.__size=a,t&&(o_(this)&&o_(l)||nI(139),this.getChildren().forEach(e=>{l.append(e)})),lO(r)){o7(r);let e=r.anchor,t=r.focus;e.key===i&&lD(e,l),t.key===i&&lD(t,l)}return o0()===i&&oY(s),l}insertAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];or(),aT(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.getParent(),s=lZ(),l=!1,o=!1;if(null!==i){let t=e.getIndexWithinParent();if(oX(n),lO(s)){let e=i.__key,r=s.anchor,n=s.focus;l="element"===r.type&&r.key===e&&r.offset===t+1,o="element"===n.type&&n.key===e&&n.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=n.__key,c=r.__next;if(null===a?u.__last=d:a.getWritable().__prev=d,u.__size++,r.__next=d,n.__next=c,n.__prev=r.__key,n.__parent=r.__parent,t&&lO(s)){let e=this.getIndexWithinParent();lQ(s,u,e+1);let t=u.__key;l&&s.anchor.set(t,e+2,"element"),o&&s.focus.set(t,e+2,"element")}return e}insertBefore(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];or(),aT(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.__key;oX(n);let s=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),o=r.__prev,a=this.getIndexWithinParent();null===s?l.__first=i:s.getWritable().__next=i,l.__size++,r.__prev=i,n.__prev=o,n.__next=r.__key,n.__parent=r.__parent;let u=lZ();return t&&lO(u)&&lQ(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return oM()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){or();let r=this.getPreviousSibling(),n=this.getParentOrThrow();if(null===r)return n.select(0,0);if(o_(r))return r.select();if(!lS(r)){let e=r.getIndexWithinParent()+1;return n.select(e,e)}return r.select(e,t)}selectNext(e,t){or();let r=this.getNextSibling(),n=this.getParentOrThrow();if(null===r)return n.select();if(o_(r))return r.select(0,0);if(!lS(r)){let e=r.getIndexWithinParent();return n.select(e,e)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let lt="historic",lr="history-merge",ln="skip-dom-selection";class li extends le{static getType(){return"linebreak"}static clone(e){return new li(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&aF(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&la(r)){let r=t.lastChild;if(r===e||r.previousSibling===e&&la(r))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&aF(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&la(r))return!1;let n=t.lastChild;if(n===e||n.previousSibling===e&&la(n))return!0}return!1}(e)?null:{conversion:ls,priority:0}}}static importJSON(e){return ll().updateFromJSON(e)}}function ls(e){return{node:ll()}}function ll(){return aE(new li)}function lo(e){return e instanceof li}function la(e){return oG(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function lu(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function ld(e,t){return 1&t?"strong":2&t?"em":"span"}function lc(e,t,r,n,i){let s=n.classList,l=ah(i,"base");void 0!==l&&s.add(...l);let o=!1,a=8&t&&4&t;for(let e in void 0!==(l=ah(i,"underlineStrikethrough"))&&(8&r&&4&r?(o=!0,a||s.add(...l)):a&&s.remove(...l)),nY){let n=nY[e];if(void 0!==(l=ah(i,e)))if(r&n){if(o&&("underline"===e||"strikethrough"===e)){t&n&&s.remove(...l);continue}(0==(t&n)||a&&"underline"===e||"strikethrough"===e)&&s.add(...l)}else t&n&&s.remove(...l)}}function lf(e,t,r){let n=t.firstChild,i=r.isComposing(),s=e+(i?nJ:"");if(null==n)t.textContent=s;else{let e=n.nodeValue;if(e!==s)if(i||nq){let[t,r,i]=function(e,t){let r=e.length,n=t.length,i=0,s=0;for(;i<r&&i<n&&e[i]===t[i];)i++;for(;s+i<r&&s+i<n&&e[r-s-1]===t[n-s-1];)s++;return[i,r-i-s,t.slice(i,n-s)]}(e,s);0!==r&&n.deleteData(t,r),n.insertData(t,i)}else n.nodeValue=s}}function lh(e,t,r,n,i,s){lf(i,e,t);let l=s.theme.text;void 0!==l&&lc(0,0,n,e,l)}function lg(e,t){let r=document.createElement(t);return r.appendChild(e),r}class lp extends le{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new lp(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return n4[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===o0()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=nY[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return oZ(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let r=this.__format,n=lu(0,r),i=ld(0,r),s=null===n?i:n,l=document.createElement(s),o=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),null!==n&&(o=document.createElement(i),l.appendChild(o)),lh(o,this,0,r,this.__text,e);let a=this.__style;return""!==a&&(l.style.cssText=a),l}updateDOM(e,t,r){let n=this.__text,i=e.__format,s=this.__format,l=lu(0,i),o=lu(0,s),a=ld(0,i),u=ld(0,s);if((null===l?a:l)!==(null===o?u:o))return!0;if(l===o&&a!==u){let e=t.firstChild;null==e&&nI(48);let i=document.createElement(u);return lh(i,this,0,s,n,r),t.replaceChild(i,e),!1}let d=t;null!==o&&null!==l&&null==(d=t.firstChild)&&nI(49),lf(n,d,this);let c=r.theme.text;void 0!==c&&i!==s&&lc(0,i,s,d,c);let f=e.__style,h=this.__style;return f!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:l_,priority:0}),b:()=>({conversion:lx,priority:0}),code:()=>({conversion:lb,priority:0}),em:()=>({conversion:lb,priority:0}),i:()=>({conversion:lb,priority:0}),mark:()=>({conversion:lb,priority:0}),s:()=>({conversion:lb,priority:0}),span:()=>({conversion:lm,priority:0}),strong:()=>({conversion:lb,priority:0}),sub:()=>({conversion:lb,priority:0}),sup:()=>({conversion:lb,priority:0}),u:()=>({conversion:lb,priority:0})}}static importJSON(e){return lj().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return aA(t)||nI(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=lg(t,"b")),this.hasFormat("italic")&&(t=lg(t,"i")),this.hasFormat("strikethrough")&&(t=lg(t,"s")),this.hasFormat("underline")&&(t=lg(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?nY[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?n0[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=oZ(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=n3[e];if(this.__mode===t)return this;let r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){or();let r=e,n=t,i=lZ(),s=this.getTextContent(),l=this.__key;if("string"==typeof s){let e=s.length;void 0===r&&(r=e),void 0===n&&(n=e)}else r=0,n=0;if(!lO(i))return lK(l,r,l,n,"text","text");{let e=o0();e!==i.anchor.key&&e!==i.focus.key||oY(l),i.setTextNodeRange(this,r,this,n)}return i}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,n){let i=this.getWritable(),s=i.__text,l=r.length,o=e;o<0&&(o=l+o)<0&&(o=0);let a=lZ();if(n&&lO(a)){let t=e+l;a.setTextNodeRange(i,t,i,t)}return i.__text=s.slice(0,o)+r+s.slice(o+t),i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(){let e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];or();let i=this.getLatest(),s=i.getTextContent();if(""===s)return[];let l=i.__key,o=o0(),a=s.length;r.sort((e,t)=>e-t),r.push(a);let u=[],d=r.length;for(let e=0,t=0;e<a&&t<=d;t++){let n=r[t];n>e&&(u.push(s.slice(e,n)),e=n)}let c=u.length;if(1===c)return[i];let f=u[0],h=i.getParent(),g=i.getFormat(),p=i.getStyle(),m=i.__detail,x=!1,y=null,_=null,v=lZ();if(lO(v)){let[e,t]=v.isBackward()?[v.focus,v.anchor]:[v.anchor,v.focus];"text"===e.type&&e.key===l&&(y=e),"text"===t.type&&t.key===l&&(_=t)}i.isSegmented()?((e=lj(f)).__format=g,e.__style=p,e.__detail=m,e.__state=iu(i,e),x=!0):e=i.setTextContent(f);let C=[e];for(let e=1;e<c;e++){let t=lj(u[e]);t.__format=g,t.__style=p,t.__detail=m,t.__state=iu(i,t);let r=t.__key;o===l&&oY(r),C.push(t)}let b=y?y.offset:null,j=_?_.offset:null,S=0;for(let e of C){if(!y&&!_)break;let t=S+e.getTextContentSize();if(null!==y&&null!==b&&b<=t&&b>=S&&(y.set(e.getKey(),b-S,"text"),b<t&&(y=null)),null!==_&&null!==j&&j<=t&&j>=S){_.set(e.getKey(),j-S,"text");break}S=t}if(null!==h){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&oQ(e),null!==t&&oQ(t);let r=h.getWritable(),n=this.getIndexWithinParent();x?(r.splice(n,0,C),this.remove()):r.splice(n,1,C),lO(v)&&lQ(v,h,n,c-1)}return C}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||nI(50);let r=this.__key,n=e.__key,i=this.__text,s=i.length;o0()===n&&oY(r);let l=lZ();if(lO(l)){let i=l.anchor,o=l.focus;null!==i&&i.key===n&&l1(i,t,r,e,s),null!==o&&o.key===n&&l1(o,t,r,e,s)}let o=e.__text,a=t?o+i:i+o;this.setTextContent(a);let u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function lm(e){return{forChild:lw(e.style),node:null}}function lx(e){let t="normal"===e.style.fontWeight;return{forChild:lw(e.style,t?void 0:"bold"),node:null}}let ly=new WeakMap;function l_(e){null===e.parentElement&&nI(129);let t=e.textContent||"";if(null!==function(e){let t,r=e.parentNode,n=[e];for(;null!==r&&void 0===(t=ly.get(r))&&!function(e){if(!aA(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(r);)n.push(r),r=r.parentNode;let i=void 0===t?r:t;for(let e=0;e<n.length;e++)ly.set(n[e],i);return i}(e)){let e=t.split(/(\r?\n|\t)/),r=[],n=e.length;for(let t=0;t<n;t++){let n=e[t];"\n"===n||"\r\n"===n?r.push(ll()):"	"===n?r.push(lN()):""!==n&&r.push(lj(n))}return{node:r}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let r=e,n=!0;for(;null!==r&&null!==(r=lv(r,!1));){let e=r.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),n=!1;break}}n&&(t=t.slice(1))}if(" "===t[t.length-1]){let r=e,n=!0;for(;null!==r&&null!==(r=lv(r,!0));)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){n=!1;break}n&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:lj(t)}}function lv(e,t){let r=e;for(;;){let e;for(;null===(e=t?r.nextSibling:r.previousSibling);){let e=r.parentElement;if(null===e)return null;r=e}if(aA(r=e)){let e=r.style.display;if(""===e&&!function(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}(r)||""!==e&&!e.startsWith("inline"))return null}let n=r;for(;null!==(n=t?r.firstChild:r.lastChild);)r=n;if(oG(r))return r;if("BR"===r.nodeName)return null}}let lC={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function lb(e){let t=lC[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:lw(e.style,t),node:null}}function lj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return aE(new lp(e))}function lS(e){return e instanceof lp}function lw(e,t){let r=e.fontWeight,n=e.textDecoration.split(" "),i="700"===r||"bold"===r,s=n.includes("line-through"),l="italic"===e.fontStyle,o=n.includes("underline"),a=e.verticalAlign;return e=>(lS(e)&&(i&&!e.hasFormat("bold")&&e.toggleFormat("bold"),s&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),l&&!e.hasFormat("italic")&&e.toggleFormat("italic"),o&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class lk extends lp{static getType(){return"tab"}static clone(e){return new lk(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),r=ah(e.theme,"tab");return void 0!==r&&t.classList.add(...r),t}static importJSON(e){return lN().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&nF(126),super.setTextContent("	")}spliceText(e,t,r,n){return""===r&&0===t||"	"===r&&1===t||nI(286),this}setDetail(e){return 2!==e&&nI(127),this}setMode(e){return"normal"!==e&&nI(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function lN(){return aE(new lk)}function lE(e){return e instanceof lk}class lT{key;offset;type;_selection;constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>ui(up(ua(this,"next")),up(ua(e,"next")))}getNode(){let e=o1(this.key);return null===e&&nI(20),e}set(e,t,r,n){let i=this._selection,s=this.key;n&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,ot()||(o0()===s&&oY(e),null!==i&&(i.setCachedNodes(null),i.dirty=!0)))}}function lL(e,t,r){return new lT(e,t,r)}function lM(e,t){let r=t.__key,n=e.offset,i="element";if(lS(t)){i="text";let e=t.getTextContentSize();n>e&&(n=e)}else if(!o_(t)){let e=t.getNextSibling();if(lS(e))r=e.__key,n=0,i="text";else{let e=t.getParent();e&&(r=e.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,i)}function lD(e,t){if(o_(t)){let r=t.getLastDescendant();o_(r)||lS(r)?lM(e,r):lM(e,t)}else lM(e,t)}class lA{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!lF(e))return!1;let t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(e=>r.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new lA(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,r=this.getNodes(),n=r.length,i=r[n-1];if(lS(i))t=i.select();else{let e=i.getIndexWithinParent()+1;t=i.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<n;e++)r[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,r=[];for(let e of t){let t=o1(e);null!==t&&r.push(t)}return ot()||(this._cachedNodes=r),r}getTextContent(){let e=this.getNodes(),t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((lZ()||lX())===this&&e[0]){var t;let r,n,i=a4(e[0],"next");t=ur(i,i),ud(n=lO(r=lZ())?r:lH(),t),o7(n)}for(let t of e)t.remove()}}function lO(e){return e instanceof lI}class lI{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,r,n){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=n,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!lO(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[r,n]=e.getTextSlices();r&&t.push(r.caret.origin);let i=new Set,s=new Set;for(let r of e)if(a0(r)){let{origin:e}=r;0===t.length?i.add(e):(s.add(e),t.push(e))}else{let{origin:e}=r;o_(e)&&s.has(e)||t.push(e)}if(n&&t.push(n.caret.origin),aY(e.focus)&&o_(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let r=a9(e.focus.origin,"previous");a0(r)&&i.has(r.origin)&&!r.origin.isEmpty()&&r.origin.is(t[t.length-1]);r=a8(r))i.delete(r.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!o_(e)||s.has(e)||e.isEmpty()||i.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let r=up(e.anchor),n=up(e.anchor.getFlipped()),i=e=>aQ(e)?e.origin:e.getNodeAtCaret(),s=i(r)||i(n)||(e.anchor.getNodeAtCaret()?r.origin:n.origin);t.push(s)}return t}(uy(uc(this),"next"));return ot()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,n){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,n,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],r=e[e.length-1],n=this.anchor,i=this.focus,s=n.isBefore(i),[l,o]=lP(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(o_(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,lS(c)){let e=c.getTextContent();c===t?c===r?"element"===n.type&&"element"===i.type&&i.offset!==n.offset||(e=l<o?e.slice(l,o):e.slice(o,l)):e=s?e.slice(l):e.slice(o):c===r&&(e=s?e.slice(0,o):e.slice(0,l)),a+=e}else!ob(c)&&!lo(c)||c===r&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=os(),r=t.getEditorState()._selection,n=lV(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(null===n)return;let[i,s]=n;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(s.key,s.offset,s.type,!0),ig(this)}clone(){let e=this.anchor,t=this.focus;return new lI(lL(e.key,e.offset,e.type),lL(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=oZ(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=nY[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),r=[],n=t.length;for(let e=0;e<n;e++){let n=t[e];"\n"===n||"\r\n"===n?r.push(ll()):"	"===n?r.push(lN()):r.push(lj(n))}this.insertNodes(r)}insertText(e){let t=this.anchor,r=this.focus,n=this.format,i=this.style,s=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(s=r,l=t),"element"===s.type&&function(e,t,r,n){let i=e.getNode(),s=i.getChildAtIndex(e.offset),l=lj();if(l.setFormat(r),l.setStyle(n),oD(s))s.splice(0,0,[l]);else{let e=oS(i)?oM().append(l):l;null===s?i.append(e):s.insertBefore(e)}e.is(t)&&t.set(l.__key,0,"text"),e.set(l.__key,0,"text")}(s,l,n,i),"element"===l.type&&uu(l,up(ua(l,"next")));let o=s.offset,a=l.offset,u=this.getNodes(),d=u.length,c=u[0];lS(c)||nI(26);let f=c.getTextContent().length,h=c.getParentOrThrow(),g=u[d-1];if(1===d&&"element"===l.type&&(a=f,l.set(s.key,a,"text")),this.isCollapsed()&&o===f&&(oH(c)||!c.canInsertTextAfter()||!h.canInsertTextAfter()&&null===c.getNextSibling())){let t=c.getNextSibling();if(lS(t)&&t.canInsertTextBefore()&&!oH(t)||((t=lj()).setFormat(n),t.setStyle(i),h.canInsertTextAfter()?c.insertAfter(t):h.insertAfter(t)),t.select(0,0),c=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===o&&(oH(c)||!c.canInsertTextBefore()||!h.canInsertTextBefore()&&null===c.getPreviousSibling())){let t=c.getPreviousSibling();if(lS(t)&&!oH(t)||((t=lj()).setFormat(n),h.canInsertTextBefore()?c.insertBefore(t):h.insertBefore(t)),t.select(),c=t,""!==e)return void this.insertText(e)}else if(c.isSegmented()&&o!==f){let e=lj(c.getTextContent());e.setFormat(n),c.replace(e),c=e}else if(!this.isCollapsed()&&""!==e){let t=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||o_(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),lU(this.anchor,this.focus,null),void this.insertText(e)}if(1===d){if(oK(c)){let t=lj(e);return t.select(),void c.replace(t)}let t=c.getFormat(),r=c.getStyle();if(o!==a||t===n&&r===i){if(lE(c)){let t=lj(e);return t.setFormat(n),t.setStyle(i),t.select(),void c.replace(t)}}else{if(""!==c.getTextContent()){let t=lj(e);if(t.setFormat(n),t.setStyle(i),t.select(),0===o)c.insertBefore(t,!1);else{let[e]=c.splitText(o);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}c.setFormat(n),c.setStyle(i)}let s=a-o;""===(c=c.spliceText(o,s,e,!0)).getTextContent()?c.remove():"text"===this.anchor.type&&(c.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=r))}else{let t=new Set([...c.getParentKeys(),...g.getParentKeys()]),r=o_(c)?c:c.getParentOrThrow(),n=o_(g)?g:g.getParentOrThrow(),i=g;if(!r.is(n)&&n.isInline())do i=n,n=n.getParentOrThrow();while(n.isInline())if("text"===l.type&&(0!==a||""===g.getTextContent())||"element"===l.type&&g.getIndexWithinParent()<a)if(lS(g)&&!oK(g)&&a!==g.getTextContentSize()){if(g.isSegmented()){let e=lj(g.getTextContent());g.replace(e),g=e}oS(l.getNode())||"text"!==l.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{let e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);let s=n.getChildren(),h=new Set(u),p=r.is(n),m=r.isInline()&&null===c.getNextSibling()?r:c;for(let e=s.length-1;e>=0;e--){let t=s[e];if(t.is(c)||o_(t)&&t.isParentOf(c))break;t.isAttached()&&(!h.has(t)||t.is(i)?p||m.insertAfter(t,!1):t.remove())}if(!p){let e=n,r=null;for(;null!==e;){let n=e.getChildren(),i=n.length;(0===i||n[i-1].is(r))&&(t.delete(e.__key),r=e),e=e.getParent()}}if(oK(c))if(o===f)c.select();else{let t=lj(e);t.select(),c.replace(t)}else""===(c=c.spliceText(o,f-o,e,!0)).getTextContent()?c.remove():c.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<d;e++){let r=u[e],n=r.__key;t.has(n)||r.remove()}}}removeText(){let e=lZ()===this;ud(this,function(e){let t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"removeEmptySlices";if(e.isCollapsed())return e;let i="root",s="next",l=n,o=uy(e,s),a=uh(o.anchor,i),u=uh(o.focus.getFlipped(),i),d=new Set,c=[];for(let e of o.iterNodeCarets(i))if(a0(e))d.add(e.origin.getKey());else if(aY(e)){let{origin:t}=e;o_(t)&&!d.has(t.getKey())||c.push(t)}for(let e of c)e.remove();for(let e of o.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,r=t.getTextContentSize(),n=uf(a4(t,s)),i=t.getMode();if(Math.abs(e.distance)===r&&"removeEmptySlices"===l||"token"===i&&0!==e.distance)n.remove();else if(0!==e.distance){l="removeEmptySlices";let t=e.removeTextSlice(),r=e.caret.origin;if("segmented"===i){let e=t.origin,r=lj(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());n.replaceOrInsert(r),t=a5(r,s,t.offset)}r.is(a[0].origin)&&(a[0]=t),r.is(u[0].origin)&&(u[0]=t.getFlipped())}}for(let e of a)if(ug(e)){t=up(e);break}for(let e of u)if(ug(e)){r=up(e);break}let f=function(e,t,r){let n;if(!e||!t)return null;let i=e.getParentAtCaret(),s=t.getParentAtCaret();if(!i||!s)return null;let l=i.getParents().reverse();l.push(i);let o=s.getParents().reverse();o.push(s);let a=Math.min(l.length,o.length);for(n=0;n<a&&l[n]===o[n];n++);let u=(e,t)=>{let r;for(let i=n;i<e.length;i++){let n=e[i];if(aN(n))return;!r&&t(n)&&(r=n)}return r},d=u(l,aR),c=d&&u(o,e=>r.has(e.getKey())&&aR(e));return d&&c?[d,c]:null}(t,r,d);if(f){let[e,t]=f;a9(e,"previous").splice(0,t.getChildren()),t.remove()}let h=[t,r,...a,...u].find(ug);if(h){var g;return ur(g=ux(up(h),e.direction),g)}nI(269,JSON.stringify(a.map(e=>e.origin.__key)))}(uc(this))),e&&lZ()!==this&&o7(this)}formatText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isCollapsed())return this.toggleFormat(e),void oY(null);let r=this.getNodes(),n=[];for(let e of r)lS(e)&&n.push(e);let i=t=>{r.forEach(r=>{if(o_(r)){let n=r.getFormatFlags(e,t);r.setTextFormat(n)}})},s=n.length;if(0===s)return this.toggleFormat(e),oY(null),void i(t);let l=this.anchor,o=this.focus,a=this.isBackward(),u=a?o:l,d=a?l:o,c=0,f=n[0],h="element"===u.type?0:u.offset;if("text"===u.type&&h===f.getTextContentSize()&&(c=1,f=n[1],h=0),null==f)return;let g=f.getFormatFlags(e,t);i(g);let p=s-1,m=n[p],x="text"===d.type?d.offset:m.getTextContentSize();if(f.is(m)){if(h===x)return;if(oH(f)||0===h&&x===f.getTextContentSize())f.setFormat(g);else{let e=f.splitText(h,x),t=0===h?e[0]:e[1];t.setFormat(g),"text"===u.type&&u.set(t.__key,0,"text"),"text"===d.type&&d.set(t.__key,x-h,"text")}return void(this.format=g)}0===h||oH(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);let y=m.getFormatFlags(e,g);x>0&&(x===m.getTextContentSize()||oH(m)||([m]=m.splitText(x)),m.setFormat(y));for(let t=c+1;t<p;t++){let r=n[t],i=r.getFormatFlags(e,y);r.setFormat(i)}"text"===u.type&&u.set(f.__key,h,"text"),"text"===d.type&&d.set(m.__key,x,"text"),this.format=g|y}insertNodes(e){var t;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let t=lZ();return lO(t)||nI(134),t.insertNodes(e)}let r=(this.isBackward()?this.focus:this.anchor).getNode(),n=aU(r,aR),i=e[e.length-1];if(o_(n)&&"__language"in n){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=l3(this);n.splice(t,0,e),i.selectEnd()}return}if(!e.some(e=>(o_(e)||ob(e))&&!e.isInline())){o_(n)||nI(211,r.constructor.name,r.getType());let t=l3(this);return n.splice(t,0,e),void i.selectEnd()}let s=function(e){let t=oM(),r=null;for(let n=0;n<e.length;n++){let i=e[n],s=lo(i);if(s||ob(i)&&i.isInline()||o_(i)&&i.isInline()||lS(i)||i.isParentRequired()){if(null===r&&(r=i.createParentElementNode(),t.append(r),s))continue;null!==r&&r.append(i)}else t.append(i),r=null}return t}(e),l=s.getLastDescendant(),o=s.getChildren(),a=o_(n)&&n.isEmpty()?null:this.insertParagraph(),u=o[o.length-1],d=o[0];o_(t=d)&&aR(t)&&!t.isEmpty()&&o_(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(o_(n)||nI(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(null===n&&nI(212,r.constructor.name,r.getType()),function(e,t){let r=t.getParentOrThrow().getLastChild(),n=t,i=[t];for(;n!==r;)n.getNextSibling()||nI(140),i.push(n=n.getNextSibling());let s=e;for(let e of i)s=s.insertAfter(e)}(n,d));let c=aU(l,aR);a&&o_(c)&&(a.canMergeWhenEmpty()||aR(u))&&(c.append(...a.getChildren()),a.remove()),o_(n)&&n.isEmpty()&&n.remove(),l.selectEnd();let f=o_(n)?n.getLastChild():null;lo(f)&&c!==n&&f.remove()}insertParagraph(){if("root"===this.anchor.key){let e=oM();return o9().splice(this.anchor.offset,0,[e]),e.select(),e}let e=l3(this),t=aU(this.anchor.getNode(),aR);o_(t)||nI(213);let r=t.getChildAtIndex(e),n=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...n),i.selectStart(),i):null}insertLineBreak(e){let t=ll();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),r=t.getIndexWithinParent();e.select(r,r)}}extract(){let e=[...this.getNodes()],t=e.length,r=e[0],n=e[t-1],[i,s]=lP(this),l=this.isBackward(),[o,a]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=l?[s,i]:[i,s];if(0===t)return[];if(1===t){if(lS(r)&&!this.isCollapsed()){let e=r.splitText(u,d),t=0===u?e[0]:e[1];return t?(o.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[r]}if(lS(r)&&(u===r.getTextContentSize()?e.shift():0!==u&&([,r]=r.splitText(u),e[0]=r,o.set(r.getKey(),0,"text"))),lS(n)){let t=n.getTextContent().length;0===d?e.pop():d!==t&&([n]=n.splitText(d),e[e.length-1]=n,a.set(n.getKey(),n.getTextContentSize(),"text"))}return e}modify(e,t,r){var n;if(l4(this,e,t,r))return;let i="move"===e,s=os(),l=aD(ak(s));if(!l)return;let o=s._blockCursorElement,a=s._rootElement,u=this.focus.getNode();if(null===a||null===o||!o_(u)||u.isInline()||u.canBeEmpty()||aM(o,s,a),this.dirty){let e=a_(s,this.anchor.key),t=a_(s,this.focus.key);"text"===this.anchor.type&&(e=oJ(e)),"text"===this.focus.type&&(t=oJ(t)),e&&t&&l2(l,e,this.anchor.offset,t,this.focus.offset)}if(n=t?"backward":"forward",l.modify(e,n,r),l.rangeCount>0){let e=l.getRangeAt(0),r=this.anchor.getNode(),n=oS(r)?r:function(e){let t=e.getParentOrThrow();for(;null!==t&&!aN(t);)t=t.getParentOrThrow();return t}(r);if(this.applyDOMRange(e),this.dirty=!0,!i){let r,i,s,o,a,u=this.getNodes(),d=[],c=!1;for(let e=0;e<u.length;e++){let t=u[e];aS(t,n)?d.push(t):c=!0}if(c&&d.length>0)if(t){let e=d[0];o_(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=d[d.length-1];o_(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}l.anchorNode===e.startContainer&&l.anchorOffset===e.startOffset||(r=this.focus,s=(i=this.anchor).key,o=i.offset,a=i.type,i.set(r.key,r.offset,r.type,!0),r.set(s,o,a,!0))}}"lineboundary"===r&&l4(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&("element"===e.type&&o_(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),r=t.getNextSibling()||(null===e?null:e.getNextSibling());if(o_(r)&&r.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;let n=ut(ua(t,e?"previous":"next"));if(n.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of n.iterNodeCarets("shadowRoot"))if(a0(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(o_(n.anchor.origin)&&n.anchor.origin.isEmpty()){let e=up(t);ud(this,ur(e,e)),n.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(aY(t)){if(o_(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(n.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(ob(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&o_(n.anchor.origin)&&n.anchor.origin.isEmpty()){n.anchor.origin.remove();let e=lG();e.add(t.origin.getKey()),o7(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:r}=e;return ud(this,ur(!t.origin.isEmpty()&&r.isEmpty()?uf(a4(r,t.direction)):n.anchor,t)),this.removeText()}}let i=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&lB(this,t.getNode()))return}else{let n="text"===i.type?i.getNode():null;if(r="text"===t.type?t.getNode():null,null!==n&&n.isSegmented()){let t=i.offset,s=n.getTextContentSize();if(n.is(r)||e&&t!==s||!e&&0!==t)return void lz(n,e,t)}else if(null!==r&&r.isSegmented()){let i=t.offset,s=r.getTextContentSize();if(r.is(n)||e&&0!==i||!e&&i!==s)return void lz(r,e,i)}!function(e,t){let r=e.anchor,n=e.focus,i=r.getNode();if(i===n.getNode()&&"text"===r.type&&"text"===n.type){var s;let e=r.offset,l=n.offset,o=e<l,a=o?e:l,u=o?l:e,d=u-1;a===d||at(s=i.getTextContent().slice(a,u))||lq(s)||(t?n.set(n.key,d,n.type):r.set(r.key,d,r.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&oS(e.getParent())&&null===e.getPreviousSibling()&&lB(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function lF(e){return e instanceof lA}function lR(e){let t=e.offset;if("text"===e.type)return t;let r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function lP(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[r,n]=t;return"element"===r.type&&"element"===n.type&&r.key===n.key&&r.offset===n.offset?[0,0]:[lR(r),lR(n)]}function lB(e,t){for(let r=t;r;r=r.getParent()){if(o_(r)){if(r.collapseAtStart(e))return!0;if(aN(r))break}if(r.getPreviousSibling())break}return!1}let lq=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function lz(e,t,r){let n=e.getTextContent().split(/(?=\s)/g),i=n.length,s=0,l=0;for(let e=0;e<i;e++){let o=e===i-1;if(l=s,s+=n[e].length,t&&s===r||s>r||o){n.splice(e,1),o&&(l=void 0);break}}let o=n.join("").trim();""===o?e.remove():(e.setTextContent(o),e.select(l,l))}function lW(e,t,r,n){let i,s=t;if(aA(e)){let l=!1,o=e.childNodes,a=o.length,u=n._blockCursorElement;s===a&&(l=!0,s=a-1);let d=o[s],c=!1;if(d===u)d=o[s+1],c=!0;else if(null!==u){let r=u.parentNode;e===r&&t>Array.prototype.indexOf.call(r.children,u)&&s--}if(lS(i=ae(d)))s=a6(i,l?"next":"previous");else{let o=ae(e);if(null===o)return null;if(o_(o)){let a,u=n.getElementByKey(o.getKey());null===u&&nI(214);let d=o.getDOMSlot(u);[o,s]=d.resolveChildIndex(o,u,e,t),o_(o)||nI(215),l&&s>=o.getChildrenSize()&&(s=Math.max(0,o.getChildrenSize()-1));let f=o.getChildAtIndex(s);if(o_(f)&&(a=f.getParent(),null===r||null===a||!a.canBeEmpty()||a!==r.getNode())){let e=l?f.getLastDescendant():f.getFirstDescendant();o=null===e||o_(f=e)?f:f.getParentOrThrow(),s=0}lS(f)?(i=f,o=null,s=a6(f,l?"next":"previous")):f!==o&&l&&!c&&(o_(o)||nI(216),s=Math.min(o.getChildrenSize(),s+1))}else{let r=o.getIndexWithinParent();s=0===t&&ob(o)&&ae(e)===o?r:r+1,o=o.getParentOrThrow()}if(o_(o))return lL(o.__key,s,"element")}}else i=ae(e);return lS(i)?lL(i.__key,a6(i,s,"clamp"),"text"):null}function l$(e,t,r){let n=e.offset,i=e.getNode();if(0===n){let n=i.getPreviousSibling(),s=i.getParent();if(t){if((r||!t)&&null===n&&o_(s)&&s.isInline()){let t=s.getPreviousSibling();lS(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else o_(n)&&!r&&n.isInline()?e.set(n.__key,n.getChildrenSize(),"element"):lS(n)&&e.set(n.__key,n.getTextContent().length,"text")}else if(n===i.getTextContent().length){let n=i.getNextSibling(),s=i.getParent();if(t&&o_(n)&&n.isInline())e.set(n.__key,0,"element");else if((r||t)&&null===n&&o_(s)&&s.isInline()&&!s.canInsertTextAfter()){let t=s.getNextSibling();lS(t)&&e.set(t.__key,0,"text")}}}function lU(e,t,r){if("text"===e.type&&"text"===t.type){let n=e.isBefore(t),i=e.is(t);l$(e,n,i),l$(t,!n,i),i&&t.set(e.key,e.offset,e.type);let s=os();if(s.isComposing()&&s._compositionKey!==e.key&&lO(r)){let n=r.anchor,i=r.focus;e.set(n.key,n.offset,n.type,!0),t.set(i.key,i.offset,i.type,!0)}}}function lV(e,t,r,n,i,s){if(null===e||null===r||!oW(i,e,r))return null;let l=lW(e,t,lO(s)?s.anchor:null,i);if(null===l)return null;let o=lW(r,n,lO(s)?s.focus:null,i);if(null===o)return null;if("element"===l.type&&"element"===o.type){let t=ae(e),n=ae(r);if(ob(t)&&ob(n))return null}return lU(l,o,s),[l,o]}function lK(e,t,r,n,i,s){let l=oi(),o=new lI(lL(e,t,i),lL(r,n,s),0,"");return o.dirty=!0,l._selection=o,o}function lH(){return new lI(lL("root",0,"element"),lL("root",0,"element"),0,"")}function lG(){return new lA(new Set)}function lJ(e,t,r,n){let i,s,l,o,a=r._window;if(null===a)return null;let u=n||a.event,d=u?u.type:void 0,c="selectionchange"===d,f=!n6&&(c||"beforeinput"===d||"compositionstart"===d||"compositionend"===d||"click"===d&&u&&3===u.detail||"drop"===d||void 0===d);if(lO(e)&&!f)return e.clone();if(null===t)return null;if(i=t.anchorNode,s=t.focusNode,l=t.anchorOffset,o=t.focusOffset,(c||void 0===d)&&lO(e)&&!oW(r,i,s))return e.clone();let h=lV(i,l,s,o,r,e);if(null===h)return null;let[g,p]=h;return new lI(g,p,lO(e)?e.format:0,lO(e)?e.style:"")}function lZ(){return oi()._selection}function lX(){return os()._editorState._selection}function lQ(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.anchor,s=e.focus,l=i.getNode(),o=s.getNode();if(!t.is(l)&&!t.is(o))return;let a=t.__key;if(e.isCollapsed()){let t=i.offset;if(r<=t&&n>0||r<t&&n<0){let r=Math.max(0,t+n);i.set(a,r,"element"),s.set(a,r,"element"),lY(e)}}else{let l=e.isBackward(),o=l?s:i,u=o.getNode(),d=l?i:s,c=d.getNode();if(t.is(u)){let e=o.offset;(r<=e&&n>0||r<e&&n<0)&&o.set(a,Math.max(0,e+n),"element")}if(t.is(c)){let e=d.offset;(r<=e&&n>0||r<e&&n<0)&&d.set(a,Math.max(0,e+n),"element")}}lY(e)}function lY(e){let t=e.anchor,r=t.offset,n=e.focus,i=n.offset,s=t.getNode(),l=n.getNode();if(e.isCollapsed()){if(!o_(s))return;let e=s.getChildrenSize(),i=r>=e,l=i?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(lS(l)){let e=0;i&&(e=l.getTextContentSize()),t.set(l.__key,e,"text"),n.set(l.__key,e,"text")}return}if(o_(s)){let e=s.getChildrenSize(),n=r>=e,i=n?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(lS(i)){let e=0;n&&(e=i.getTextContentSize()),t.set(i.__key,e,"text")}}if(o_(l)){let e=l.getChildrenSize(),t=i>=e,r=t?l.getChildAtIndex(e-1):l.getChildAtIndex(i);if(lS(r)){let e=0;t&&(e=r.getTextContentSize()),n.set(r.__key,e,"text")}}}function l0(e,t,r,n,i){let s=null,l=0,o=null;null!==n?(s=n.__key,lS(n)?(l=n.getTextContentSize(),o="text"):o_(n)&&(l=n.getChildrenSize(),o="element")):null!==i&&(s=i.__key,lS(i)?o="text":o_(i)&&(o="element")),null!==s&&null!==o?e.set(s,l,o):(-1===(l=t.getIndexWithinParent())&&(l=r.getChildrenSize()),e.set(r.__key,l,"element"))}function l1(e,t,r,n,i){"text"===e.type?e.set(r,e.offset+(t?0:i),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function l2(e,t,r,n,i){try{e.setBaseAndExtent(t,r,n,i)}catch(e){}}function l3(e){let t=e;e.isCollapsed()||t.removeText();let r=lZ();lO(r)&&(t=r),lO(t)||nI(161);let n=t.anchor,i=n.getNode(),s=n.offset;for(;!aR(i);){let e=i;if([i,s]=function(e,t){let r=e.getParent();if(!r){let e=oM();return o9().append(e),e.select(),[o9(),0]}if(lS(e)){let n=e.splitText(t);if(0===n.length)return[r,e.getIndexWithinParent()];let i=+(0!==t);return[r,n[0].getIndexWithinParent()+i]}if(!o_(e)||0===t)return[r,e.getIndexWithinParent()];let n=e.getChildAtIndex(t);if(n){let r=new lI(lL(e.__key,t,"element"),lL(e.__key,t,"element"),0,""),i=e.insertNewAfter(r);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}(i,s),e.is(i))break}return s}function l4(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"decorators-and-blocks";if("move"===t&&"character"===n&&!e.isCollapsed()){let[t,n]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return n.set(t.key,t.offset,t.type),!0}let s=ua(e.focus,r?"previous":"next"),l="lineboundary"===n,o="move"===t,a=s,u="decorators-and-blocks"===i;if(!um(a)){for(let e of a){u=!1;let{origin:t}=e;if(!ob(t)||t.isIsolated()||(a=e,!l||!t.isInline()))break}if(u)for(let e of ut(s).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(a0(e))e.origin.isInline()||(a=e);else{if(o_(e.origin))continue;ob(e.origin)&&!e.origin.isInline()&&(a=e)}break}}if(a===s)return!1;if(o&&!l&&ob(a.origin)&&a.origin.isKeyboardSelectable()){let e=lG();return e.add(a.origin.getKey()),o7(e),!0}return a=up(a),o&&uu(e.anchor,a),uu(e.focus,a),u||!l}let l5=null,l6=null,l9=!1,l8=!1,l7=0,oe={characterData:!0,childList:!0,subtree:!0};function ot(){return l9||null!==l5&&l5._readOnly}function or(){l9&&nI(13)}function on(){l7>99&&nI(14)}function oi(){return null===l5&&nI(195,ol()),l5}function os(){return null===l6&&nI(196,ol()),l6}function ol(){let e=0,t=new Set,r=oI.version;if("u">typeof window)for(let n of document.querySelectorAll("[contenteditable]")){let i=oV(n);if(o$(i))e++;else if(i){let e=String(i.constructor.version||"<0.17.1");e===r&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function oo(e,t,r){let n=t.__type,i=oP(e,n),s=r.get(n);void 0===s&&(s=Array.from(i.transforms),r.set(n,s));let l=s.length;for(let e=0;e<l&&(s[e](t),t.isAttached());e++);}function oa(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function ou(e,t){if(!t)return;let r=e._updateTags,n=t;for(let e of(Array.isArray(t)||(n=[t]),n))r.add(e)}function od(e,t,r){let n=l5,i=l9,s=l6;l5=t,l9=!0,l6=e;try{return r()}finally{l5=n,l9=i,l6=s}}function oc(e,t){let r,n,i=e._pendingEditorState,s=e._rootElement,l=e._headless||null===s;if(null===i)return;let o=e._editorState,a=o._selection,u=i._selection,d=0!==e._dirtyType,c=l5,f=l9,h=l6,g=e._updating,p=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=i,!l&&d&&null!==p){l6=e,l5=i,l9=!1,e._updating=!0;try{let t,r=e._dirtyType,n=e._dirtyElements,s=e._dirtyLeaves;p.disconnect(),ik="",iT="",iL=2===r,ix=e,im=e._config,iy=e._nodes,i_=ix._listeners.mutation,iv=n,iC=s,ib=o._nodeMap,ij=i._nodeMap,iM=i._readOnly,iS=new Map(e._keyToDOMMap),iw=t=new Map,function e(t,r){let n=ib.get(t),i=ij.get(t);void 0!==n&&void 0!==i||nI(61);let s=iL||iC.has(t)||iv.has(t),l=a_(ix,t);if(n===i&&!s){if(o_(n)){let e=l.__lexicalTextContent;void 0!==e&&(ik+=e,iT+=e)}else{let e=n.getTextContent();iT+=e,ik+=e}return l}if(n!==i&&s&&ag(iw,iy,i_,i,"updated"),i.updateDOM(n,l,im)){let e=iP(t,null);return null===r&&nI(62),r.replaceChild(e,l),iD(t,null),e}if(o_(n)&&o_(i)){let t=i.__indent;(iL||t!==n.__indent)&&iI(l,t);let r=i.__format;if((iL||r!==n.__format)&&iF(l,r),s&&(function(t,r,n){iN=null,iE=null,function(t,r,n){let i=ik,s=t.__size,l=r.__size;ik="";let o=n.element;if(1===s&&1===l){let n=t.__first,i=r.__first;if(n===i)e(n,o);else{let e=iV(n),t=iP(i,null);try{o.replaceChild(t,e)}catch(r){if("object"==typeof r&&null!=r)throw Error(`${r.toString()} Parent: ${o.tagName}, new child: {tag: ${t.tagName} key: ${i}}, old child: {tag: ${e.tagName}, key: ${n}}.`);throw r}iD(n,null)}let s=ij.get(i);lS(s)&&null===iN&&(iN=s.getFormat(),iE=s.getStyle())}else{let i=iW(t,ib),a=iW(r,ij);if(i.length!==s&&nI(227),a.length!==l&&nI(228),0===s)0!==l&&iB(a,r,0,l-1,n);else if(0===l){if(0!==s){let e=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;iA(i,0,s-1,e?null:o),e&&(o.textContent="")}}else!function(t,r,n,i,s,l){let o=i-1,a=s-1,u,d,c=l.getFirstChild(),f=0,h=0;for(;f<=o&&h<=a;){let t=r[f],i=n[h];if(t===i)c=iU(e(i,l.element)),f++,h++;else{void 0===u&&(u=new Set(r)),void 0===d&&(d=new Set(n));let s=d.has(t),o=u.has(i);if(s)if(o){let t=a_(ix,i);t===c?c=iU(e(i,l.element)):(l.withBefore(c).insertChild(t),e(i,l.element)),f++,h++}else iP(i,l.withBefore(c)),h++;else c=iU(iV(t)),iD(t,l.element),f++}let s=ij.get(i);null!==s&&lS(s)&&null===iN&&(iN=s.getFormat(),iE=s.getStyle())}let g=f>o,p=h>a;if(g&&!p){let e=n[a+1],r=void 0===e?null:ix.getElementByKey(e);iB(n,t,h,a,l.withBefore(r))}else p&&!g&&iA(r,f,o,l.element)}(r,i,a,s,l,n)}ay(r)&&(ik+="\n\n"),o.__lexicalTextContent=ik,ik=i+ik}(t,r,r.getDOMSlot(n)),null==iN||iN===r.__textFormat||iM||r.setTextFormat(iN),null==iE||iE===r.__textStyle||iM||r.setTextStyle(iE)}(n,i,l),oS(i)||i.isInline()||iz(n,i,l)),ay(i)&&(ik+="\n\n",iT+="\n\n"),(iL||i.__dir!==n.__dir)&&(iR(l,i),oS(i)&&!iL))for(let e of i.getChildren())o_(e)&&iR(a_(ix,e.getKey()),e)}else{let e=i.getTextContent();if(ob(i)){let e=i.decorate(ix,im);null!==e&&i$(t,e)}ik+=e,iT+=e}if(!iM&&oS(i)&&i.__cachedText!==iT){let e=i.getWritable();e.__cachedText=iT,i=e}return l}("root",null),ix=void 0,iy=void 0,iv=void 0,iC=void 0,ib=void 0,ij=void 0,im=void 0,iS=void 0,iw=void 0,m=t}catch(t){if(t instanceof Error&&e._onError(t),l8)throw t;return oA(e,null,s,i),ir(e),e._dirtyType=2,l8=!0,oc(e,o),void(l8=!1)}finally{p.observe(s,oe),e._updating=g,l5=c,l9=f,l6=h}}i._readOnly||(i._readOnly=!0);let x=e._dirtyLeaves,y=e._dirtyElements,_=e._normalizedNodes,v=e._updateTags,C=e._deferred;d&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let r,n=e._decorators,i=e._pendingDecorators||n,s=t._nodeMap;for(r in i)s.has(r)||(i===n&&(i=o5(e)),delete i[r])}(e,i);let b=l?null:aD(ak(e));if(e._editable&&null!==b&&(d||null===u||u.dirty||!u.is(a))&&null!==s&&!v.has(ln)){l6=e,l5=i;try{if(null!==p&&p.disconnect(),d||null===u||u.dirty){let t=e._blockCursorElement;null!==t&&aM(t,e,s),function(e,t,r,n,i,s,l){let o=n.anchorNode,a=n.focusNode,u=n.anchorOffset,d=n.focusOffset,c=document.activeElement;if(i.has("collaboration")&&c!==s||null!==c&&oz(c))return;if(!lO(t))return null!==e&&oW(r,o,a)&&n.removeAllRanges();let f=t.anchor,h=t.focus,g=f.key,p=h.key,m=a_(r,g),x=a_(r,p),y=f.offset,_=h.offset,v=t.format,C=t.style,b=t.isCollapsed(),j=m,S=x,w=!1;if("text"===f.type){j=oJ(m);let e=f.getNode();w=e.getFormat()!==v||e.getStyle()!==C}else lO(e)&&"text"===e.anchor.type&&(w=!0);if("text"===h.type&&(S=oJ(x)),null!==j&&null!==S&&(b&&(null===e||w||lO(e)&&(e.format!==v||e.style!==C))&&(sW=[v,C,y,g,performance.now()]),u!==y||d!==_||o!==j||a!==S||"Range"===n.type&&b||(null!==c&&s.contains(c)||i.has("skip-selection-focus")||s.focus({preventScroll:!0}),"element"===f.type))){if(l2(n,j,y,S,_),!i.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==s&&s===document.activeElement){let e=lO(t)&&"element"===t.anchor.type?j.childNodes[y]||null:n.rangeCount>0?n.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let r=document.createRange();r.selectNode(e),t=r.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,r){let n=aC(r),i=aw(n);if(null===n||null===i)return;let{top:s,bottom:l}=t,o=0,a=0,u=r;for(;null!==u;){let t=u===n.body;if(t)o=0,a=ak(e).innerHeight;else{let e=u.getBoundingClientRect();o=e.top,a=e.bottom}let r=0;if(s<o?r=-(o-s):l>a&&(r=l-a),0!==r)if(t)i.scrollBy(0,r);else{let e=u.scrollTop;u.scrollTop+=r;let t=u.scrollTop-e;s-=t,l-=t}if(t)break;u=av(u)}}(r,t,s)}}sI=!0}}(a,u,e,b,v,s)}!function(e,t,r){let n=e._blockCursorElement;if(lO(r)&&r.isCollapsed()&&"element"===r.anchor.type&&t.contains(document.activeElement)){let i=r.anchor,s=i.getNode(),l=i.offset,o=!1,a=null;if(l===s.getChildrenSize())aL(s.getChildAtIndex(l-1))&&(o=!0);else{let t=s.getChildAtIndex(l);if(null!==t&&aL(t)){let r=t.getPreviousSibling();(null===r||aL(r))&&(o=!0,a=e.getElementByKey(t.__key))}}if(o){let r,i,l,o=e.getElementByKey(s.__key);return null===n&&(r=e._config.theme,(i=document.createElement("div")).contentEditable="false",i.setAttribute("data-lexical-cursor","true"),l=r.blockCursor,void 0!==l&&("string"==typeof l&&(l=r.blockCursor=nG(l)),void 0!==l&&i.classList.add(...l)),e._blockCursorElement=n=i),t.style.caretColor="transparent",null===a?o.appendChild(n):o.insertBefore(n,a)}}null!==n&&aM(n,e,t)}(e,s,u)}finally{null!==p&&p.observe(s,oe),l6=h,l5=c}}null!==m&&function(e,t,r,n,i){let s=Array.from(e._listeners.mutation),l=s.length;for(let e=0;e<l;e++){let[l,o]=s[e];for(let e of o){let s=t.get(e);void 0!==s&&l(s,{dirtyLeaves:n,prevEditorState:i,updateTags:r})}}}(e,m,v,x,o),lO(u)||null===u||null!==a&&a.is(u)||e.dispatchCommand(iH,void 0);let j=e._pendingDecorators;null!==j&&(e._decorators=j,e._pendingDecorators=null,of("decorator",e,!0,j)),r=o6(t||o),r!==(n=o6(i))&&of("textcontent",e,!0,n),of("update",e,!0,{dirtyElements:y,dirtyLeaves:x,editorState:i,mutatedNodes:m,normalizedNodes:_,prevEditorState:t||o,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){let r=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=r}}}(e,C),function(e){let t=e._updates;if(0!==t.length){let r=t.shift();if(r){let[t,n]=r;og(e,t,n)}}}(e)}function of(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),s=3;s<n;s++)i[s-3]=arguments[s];let l=t._updating;t._updating=r;try{let r=Array.from(t._listeners[e]);for(let e=0;e<r.length;e++)r[e].apply(null,i)}finally{t._updating=l}}function oh(e,t){let r=e._updates,n=t||!1;for(;0!==r.length;){let t=r.shift();if(t){let r,[i,s]=t,l=e._pendingEditorState;void 0!==s&&(r=s.onUpdate,s.skipTransforms&&(n=!0),s.discrete&&(null===l&&nI(191),l._flushSync=!0),r&&e._deferred.push(r),ou(e,s.tag)),null==l?og(e,i,s):i()}}return n}function og(e,t,r){let n=e._updateTags,i,s=!1,l=!1;void 0!==r&&(i=r.onUpdate,ou(e,r.tag),s=r.skipTransforms||!1,l=r.discrete||!1),i&&e._deferred.push(i);let o=e._editorState,a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=ow(a||o),u=!0),a._flushSync=l;let d=l5,c=l9,f=l6,h=e._updating;l5=a,l9=!1,e._updating=!0,l6=e;let g=e._headless||null===e.getRootElement();oF=null;try{var p;let n,i;u&&(g?null!==o._selection&&(a._selection=o._selection.clone()):a._selection=(p=r&&r.event||null,n=e.getEditorState()._selection,i=aD(ak(e)),lO(n)||null==n?lJ(n,i,e,p):n.clone()));let l=e._compositionKey;t(),s=oh(e,s),function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(lO(n)){let e,t=n.anchor,i=n.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(r,n),"text"===i.type){let t=i.getNode();e!==t&&t.selectionTransform(r,n)}}}(a,e),0!==e._dirtyType&&(s?function(e,t){let r=t._dirtyLeaves,n=e._nodeMap;for(let e of r){let t=n.get(e);lS(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&ih(t)}}(a,e):function(e,t){let r=t._dirtyLeaves,n=t._dirtyElements,i=e._nodeMap,s=o0(),l=new Map,o=r,a=o.size,u=n,d=u.size;for(;a>0||d>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,o)){let n=i.get(e);lS(n)&&n.isAttached()&&n.isSimpleText()&&!n.isUnmergeable()&&ih(n),void 0!==n&&oa(n,s)&&oo(t,n,l),r.add(e)}if((a=(o=t._dirtyLeaves).size)>0){l7++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u.delete("root")&&u.set("root",!0),u)){let r=e[0],o=e[1];if(n.set(r,o),!o)continue;let a=i.get(r);void 0!==a&&oa(a,s)&&oo(t,a,l)}a=(o=t._dirtyLeaves).size,d=(u=t._dirtyElements).size,l7++}t._dirtyLeaves=r,t._dirtyElements=n}(a,e),oh(e),function(e,t,r,n){let i=e._nodeMap,s=t._nodeMap,l=[];for(let[e]of n){let t=s.get(e);void 0!==t&&(t.isAttached()||(o_(t)&&function e(t,r,n,i,s,l){let o=t.getFirstChild();for(;null!==o;){let t=o.__key;o.__parent===r&&(o_(o)&&e(o,t,n,i,s,l),n.has(t)||l.delete(t),s.push(t)),o=o.getNextSibling()}}(t,e,i,s,l,n),i.has(e)||n.delete(e),l.push(e)))}for(let e of l)s.delete(e);for(let e of r){let t=s.get(e);void 0===t||t.isAttached()||(i.has(e)||r.delete(e),s.delete(e))}}(o,a,e._dirtyLeaves,e._dirtyElements)),l!==e._compositionKey&&(a._flushSync=!0);let d=a._selection;if(lO(d)){let e=a._nodeMap,t=d.anchor.key,r=d.focus.key;void 0!==e.get(t)&&void 0!==e.get(r)||nI(19)}else lF(d)&&0===d._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=o,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void oc(e)}finally{l5=d,l9=c,l6=f,e._updating=h,l7=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(null!==n){if(n.dirty||!n.is(r))return!0}else if(null!==r)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,oc(e)):u&&oq(()=>{oc(e)}):(a._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function op(e,t,r){l6===e&&void 0===r?t():og(e,t,r)}class om{element;before;after;constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new om(this.element,e,this.after)}withAfter(e){return new om(this.element,this.before,e)}withElement(e){return this.element===e?this:new om(e,this.before,this.after)}insertChild(e){let t=this.before||this.getManagedLineBreak();return null!==t&&t.parentElement!==this.element&&nI(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&nI(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&nI(224),this.element.replaceChild(e,t),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(nH||n$||nW))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,r="IMG"===e.nodeName?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let r=this.element,n=this.before,i=document.createElement("br");if(r.insertBefore(i,n),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",r.insertBefore(e,i),r.__lexicalLineBreak=e}else r.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,n){if(r===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,n))]}let i=ox(t,r);i.push(n);let s=ox(t,this.element),l=e.getIndexWithinParent();for(let e=0;e<s.length;e++){let t=i[e],r=s[e];if(void 0===t||t<r)break;if(t>r){l+=1;break}}return[e.getParentOrThrow(),l]}}function ox(e,t){let r=[],n=t;for(;n!==e&&null!==n;n=n.parentNode){let e=0;for(let t=n.previousSibling;null!==t;t=t.previousSibling)e++;r.push(e)}return n!==e&&nI(225),r.reverse()}class oy extends le{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return n2[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=os()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(lS(t)&&e.push(t),o_(t)){let r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;o_(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;o_(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),r=t.length;if(e>=r){let e=t[r-1];return o_(e)&&e.getLastDescendant()||e||null}let n=t[e];return o_(n)&&n.getFirstDescendant()||n||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:o1(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&nI(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:o1(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&nI(96,this.__key),e}getChildAtIndex(e){let t,r,n=this.getChildrenSize();if(e<n/2){for(t=this.getFirstChild(),r=0;null!==t&&r<=e;){if(r===e)return t;t=t.getNextSibling(),r++}return null}for(t=this.getLastChild(),r=n-1;null!==t&&r>=e;){if(r===e)return t;t=t.getPreviousSibling(),r--}return null}getTextContent(){let e="",t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContent(),o_(i)&&n!==r-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContentSize(),o_(i)&&n!==r-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=n1[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=nY[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return oZ(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){or();let r=lZ(),n=e,i=t,s=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(lS(e)||o_(e))return e.select(0,0)}else if((void 0===e||e===s)&&(void 0===t||t===s)){let e=this.getLastChild();if(lS(e)||o_(e))return e.select()}}void 0===n&&(n=s),void 0===i&&(i=s);let l=this.__key;return lO(r)?(r.anchor.set(l,n,"element"),r.focus.set(l,i,"element"),r.dirty=!0,r):lK(l,n,l,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.splice(this.getChildrenSize(),0,t)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?n1[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){s7(this)&&nI(324,this.__key,this.__type);let n=this.getChildrenSize(),i=this.getWritable();e+t<=n||nI(226,String(e),String(t),String(n));let s=i.__key,l=[],o=[],a=this.getChildAtIndex(e+t),u=null,d=n-t+r.length;if(0!==e)if(e===n)u=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(u=t.getPreviousSibling())}if(t>0){let e=null===u?this.getFirstChild():u.getNextSibling();for(let r=0;r<t;r++){null===e&&nI(100);let t=e.getNextSibling(),r=e.__key;oX(e.getWritable()),o.push(r),e=t}}let c=u;for(let e of r){null!==c&&e.is(c)&&(u=c=c.getPreviousSibling());let t=e.getWritable();t.__parent===s&&d--,oX(t);let r=e.__key;if(null===c)i.__first=r,t.__prev=null;else{let e=c.getWritable();e.__next=r,t.__prev=e.__key}e.__key===s&&nI(76),t.__parent=s,l.push(r),c=e}if(e+t===n)null!==c&&(c.getWritable().__next=null,i.__last=c.__key);else if(null!==a){let e=a.getWritable();if(null!==c){let t=c.getWritable();e.__prev=c.__key,t.__next=a.__key}else e.__prev=null}if(i.__size=d,o.length){let e=lZ();if(lO(e)){let t=new Set(o),r=new Set(l),{anchor:n,focus:i}=e;ov(n,t,r)&&l0(n,n.getNode(),this,u,a),ov(i,t,r)&&l0(i,i.getNode(),this,u,a),0!==d||this.canBeEmpty()||aN(this)||this.remove()}}return i}getDOMSlot(e){return new om(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(aA(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let r=this.getDirection();r&&(t.dir=r)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return 0===t&&""===r||aN(this)||this.getChildren().some(lS)||(0!==t&&(e.textFormat=t),""!==r&&(e.textStyle=r)),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let r=this.getDOMSlot(e),n=r.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let i=t.getElementByKey(e.getKey());null!==i&&(null==n?(r.insertChild(i),n=i):n!==i&&r.replaceChild(i,n),n=n.nextSibling)}}}function o_(e){return e instanceof oy}function ov(e,t,r){let n=e.getNode();for(;n;){let e=n.__key;if(t.has(e)&&!r.has(e))return!0;n=n.getParent()}return!1}class oC extends le{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function ob(e){return e instanceof oC}class oj extends oy{__cachedText;static getType(){return"root"}static clone(){return new oj}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){nI(51)}getTextContent(){let e=this.__cachedText;return(ot()||0===os()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){nI(52)}replace(e){nI(53)}insertBefore(e){nI(54)}insertAfter(e){nI(55)}updateDOM(e,t){return!1}splice(e,t,r){for(let e of r)o_(e)||ob(e)||nI(282);return super.splice(e,t,r)}static importJSON(e){return o9().updateFromJSON(e)}collapseAtStart(){return!0}}function oS(e){return e instanceof oj}function ow(e){return new oN(new Map(e._nodeMap))}function ok(){return new oN(new Map([["root",new oj]]))}class oN{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return od(t&&t.editor||null,this,e)}clone(e){let t=new oN(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return od(null,this,()=>({root:function e(t){let r=t.exportJSON(),n=t.constructor;if(r.type!==n.getType()&&nI(130,n.name),o_(t)){let i=r.children;Array.isArray(i)||nI(59,n.name);let s=t.getChildren();for(let t=0;t<s.length;t++){let r=e(s[t]);i.push(r)}}return r}(o9())}))}}class oE extends oy{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class oT extends oy{static getType(){return"paragraph"}static clone(e){return new oT(e.__key)}createDOM(e){let t=document.createElement("p"),r=ah(e.theme,"paragraph");return void 0!==r&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:oL,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(aA(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return oM().updateFromJSON(e)}exportJSON(){let e=super.exportJSON();if(void 0===e.textFormat||void 0===e.textStyle){let t=this.getChildren().find(lS);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){let r=oM();r.setTextFormat(e.format),r.setTextStyle(e.style);let n=this.getDirection();return r.setDirection(n),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){let e=this.getChildren();if(0===e.length||lS(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function oL(e){var t,r;let n,i=oM();return e.style&&(i.setFormat(e.style.textAlign),t=e,r=i,n=Math.round((parseInt(t.style.paddingInlineStart,10)||0)/40),r.setIndent(n)),{node:i}}function oM(){return aE(new oT)}function oD(e){return e instanceof oT}function oA(e,t,r,n){let i=e._keyToDOMMap;i.clear(),e._editorState=ok(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let s=e._observer;null!==s&&(s.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==r&&(r.textContent="",i.set("root",r))}function oO(e){var t,r;let n,i,s,l,o=e||{},a=l6,u=o.theme||{},d=void 0===e?a:o.parentEditor||null,c=o.disableEvents||!1,f=ok(),h=o.namespace||(null!==d?d._config.namespace:an()),g=o.editorState,p=[oj,lp,li,lk,oT,oE,...o.nodes||[]],{onError:m,html:x}=o,y=void 0===o.editable||o.editable;if(void 0===e&&null!==a)n=a._nodes;else{n=new Map;for(let e=0;e<p.length;e++){let t=p[e],r=null,i=null;if("function"!=typeof t){let e=t;t=e.replace,r=e.with,i=e.withKlass||null}a$(t);let s=t.getType(),l=function(e){let t=new Set,r=new Set,n=e;for(;n;){let{ownNodeConfig:e}=a$(n),i=n.transform;if(!r.has(i)){r.add(i);let e=n.transform();e&&t.add(e)}if(e){let r=e.$transform;r&&t.add(r),n=e.extends}else{let e=Object.getPrototypeOf(n);n=e.prototype instanceof le&&e!==le?e:void 0}}return t}(t);n.set(s,{exportDOM:x&&x.export?x.export.get(t):void 0,klass:t,replace:r,replaceWithKlass:i,sharedNodeState:function(e){let t=new Map,r=new Set;for(let n="function"==typeof e?e:e.replace;n.prototype&&void 0!==n.prototype.getType;n=Object.getPrototypeOf(n)){let{ownNodeConfig:e}=a$(n);if(e&&e.stateConfigs)for(let n of e.stateConfigs){let e;"stateConfig"in n?(e=n.stateConfig,n.flat&&r.add(e.key)):e=n,t.set(e.key,e)}}return{flatKeys:r,sharedConfigMap:t}}(p[e]),transforms:l})}}let _=new oI(f,d,n,{disableEvents:c,namespace:h,theme:u},m||console.error,(t=n,r=x?x.import:void 0,i=new Map,s=new Set,l=e=>{Object.keys(e).forEach(t=>{let r=i.get(t);void 0===r&&(r=[],i.set(t,r)),r.push(e[t])})},t.forEach(e=>{let t=e.klass.importDOM;if(null==t||s.has(t))return;s.add(t);let r=t.call(e.klass);null!==r&&l(r)}),r&&l(r),i),y,e);return void 0!==g&&(_._pendingEditorState=g,_._dirtyType=2),_.registerCommand(iJ,sJ,0),_.registerCommand(iZ,sZ,0),_.registerCommand(iX,sX,0),_.registerCommand(iQ,sQ,0),_.registerCommand(se,s0,0),_}class oI{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,r,n,i,s,l,o){this._createEditorArgs=o,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=n,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=an(),this._onError=i,this._htmlConversions=s,this._editable=l,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){void 0===r&&nI(35);let n=this._commands;n.has(e)||n.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=n.get(e);void 0===i&&nI(36,String(e));let s=i[r];return s.add(t),()=>{s.delete(t),i.every(e=>0===e.size)&&n.delete(e)}}registerMutationListener(e,t,r){let n=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation,s=i.get(t);void 0===s&&(s=new Set,i.set(t,s)),s.add(n);let l=r&&r.skipInitialization;return void 0!==l&&l||this.initializeMutationListener(t,n),()=>{s.delete(n),0===s.size&&i.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&nI(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let r=this._editorState,n=aq(r).get(t.getType());if(!n)return;let i=new Map;for(let e of n.keys())i.set(e,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){let r=this.registerNodeTransformToKlass(e,t),n=[r],i=r.replaceWithKlass;if(null!=i){let e=this.registerNodeTransformToKlass(i,t);n.push(e)}return function(e,t){let r=aq(e.getEditorState()),n=[];for(let e of t){let t=r.get(e);t&&n.push(t)}0!==n.length&&e.update(()=>{for(let e of n)for(let t of e.keys()){let e=o1(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:lr}:void 0)}(this,n.map(e=>e.klass.getType())),()=>{n.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return ax(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let r=ah(this._config.theme,"root"),n=this._pendingEditorState||this._editorState;if(this._rootElement=e,oA(this,t,e,n),null!==t&&(this._config.disableEvents||function(e){let t=sA.get(e);if(void 0===t)return s6();let r=sO.get(t);if(void 0===r)return s6();let n=r-1;n>=0||nI(164),sA.delete(e),sO.set(t,n),0===n&&t.removeEventListener("selectionchange",s3);let i=oV(e);o$(i)?(!function(e){if(null!==e._parentEditor){let t=ar(e),r=t[t.length-1]._key;s2.get(r)===e&&s2.delete(r)}else s2.delete(e._key)}(i),e.__lexicalEditor=null):i&&nI(198);let s=s1(e);for(let e=0;e<s.length;e++)s[e]();e.__lexicalEventHandles=[]}(t),null!=r&&t.classList.remove(...r)),null!==e){let t=aw(e),n=e.style;n.userSelect="text",n.whiteSpace="pre-wrap",n.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,ir(this),this._updateTags.add(lr),oc(this),this._config.disableEvents||function(e,t){let r=e.ownerDocument;sA.set(e,r);let n=sO.get(r)??0;n<1&&r.addEventListener("selectionchange",s3),sO.set(r,n+1),e.__lexicalEditor=t;let i=s1(e);for(let r=0;r<sE.length;r++){let[n,s]=sE[r],l="function"==typeof s?e=>{s5(e)||(s4(e),(t.isEditable()||"click"===n)&&s(e,t))}:e=>{if(s5(e))return;s4(e);let r=t.isEditable();switch(n){case"cut":return r&&ax(t,sy,e);case"copy":return ax(t,sx,e);case"paste":return r&&ax(t,i3,e);case"dragstart":return r&&ax(t,sg,e);case"dragover":return r&&ax(t,sp,e);case"dragend":return r&&ax(t,sm,e);case"focus":return r&&ax(t,sS,e);case"blur":return r&&ax(t,sw,e);case"drop":return r&&ax(t,sh,e)}};e.addEventListener(n,l),i.push(()=>{e.removeEventListener(n,l)})}}(e,this),null!=r&&e.classList.add(...r)}else this._window=null,this._updateTags.add(lr),oc(this);of("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&nI(38);let r=e;r._readOnly&&((r=ow(e))._selection=e._selection?e._selection.clone():null),it(this);let n=this._pendingEditorState,i=this._updateTags,s=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=s&&i.add(s),oc(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&i.add(s),this._updating||oc(this)}parseEditorState(e,t){return function(e,t,r){let n=ok(),i=l5,s=l9,l=l6,o=t._dirtyElements,a=t._dirtyLeaves,u=t._cloneNotNeeded,d=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,l5=n,l9=!1,l6=t,oF=null;try{let i=t._nodes;(function e(t,r){let n=t.type,i=r.get(n);void 0===i&&nI(17,n);let s=i.klass;t.type!==s.getType()&&nI(18,s.name);let l=s.importJSON(t),o=t.children;if(o_(l)&&Array.isArray(o))for(let t=0;t<o.length;t++){let n=e(o[t],r);l.append(n)}return l})(e.root,i),r&&r(),n._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=o,t._dirtyLeaves=a,t._cloneNotNeeded=u,t._dirtyType=d,l5=i,l9=s,l6=l}return n}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return oc(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):og(this,e,t)}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._rootElement;null!==r&&(r.setAttribute("autocapitalize","off"),op(this,()=>{let n=lZ(),i=o9();null!==n?n.dirty||o7(n.clone()):0!==i.getChildrenSize()&&("rootStart"===t.defaultSelection?i.selectStart():i.selectEnd()),ab("focus"),aj(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),null===this._pendingEditorState&&r.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=aD(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,of("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}oI.version="0.39.0+prod.esm";let oF=null,oR=1;function oP(e,t){let r=oB(e,t);return void 0===r&&nI(30,t),r}function oB(e,t){return e._nodes.get(t)}let oq="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function oz(e){let t=document.activeElement;if(!aA(t))return!1;let r=t.nodeName;return ob(o4(e))&&("INPUT"===r||"TEXTAREA"===r||"true"===t.contentEditable&&null==oV(t))}function oW(e,t,r){let n=e.getRootElement();try{return null!==n&&n.contains(t)&&n.contains(r)&&null!==t&&!oz(t)&&oU(t)===e}catch(e){return!1}}function o$(e){return e instanceof oI}function oU(e){let t=e;for(;null!=t;){let e=oV(t);if(o$(e))return e;t=av(t)}return null}function oV(e){return e?e.__lexicalEditor:null}function oK(e){return lE(e)||e.isToken()}function oH(e){return oK(e)||e.isSegmented()}function oG(e){return aO(e)&&3===e.nodeType}function oJ(e){let t=e;for(;null!=t;){if(oG(t))return t;t=t.firstChild}return null}function oZ(e,t,r){let n=nY[t];if(null!==r&&(e&n)==(r&n))return e;let i=e^n;return"subscript"===t?i&=~nY.superscript:"superscript"===t?i&=~nY.subscript:"lowercase"===t?(i&=~nY.uppercase,i&=~nY.capitalize):"uppercase"===t?(i&=~nY.lowercase,i&=~nY.capitalize):"capitalize"===t&&(i&=~nY.lowercase,i&=~nY.uppercase),i}function oX(e){let t=e.getParent();if(null!==t){let r=e.getWritable(),n=t.getWritable(),i=e.getPreviousSibling(),s=e.getNextSibling(),l=null!==s?s.__key:null,o=null!==i?i.__key:null,a=null!==i?i.getWritable():null,u=null!==s?s.getWritable():null;null===i&&(n.__first=l),null===s&&(n.__last=o),null!==a&&(a.__next=l),null!==u&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function oQ(e){on(),s7(e)&&nI(323,e.__key,e.__type);let t=e.getLatest(),r=t.__parent,n=oi(),i=os(),s=n._nodeMap,l=i._dirtyElements;null!==r&&function(e,t,r){let n=e;for(;null!==n;){if(r.has(n))return;let e=t.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}}(r,s,l);let o=t.__key;i._dirtyType=1,o_(e)?l.set(o,!0):i._dirtyLeaves.add(o)}function oY(e){or();let t=os(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,null!==r){let e=o1(r);null!==e&&e.getWritable()}if(null!==e){let t=o1(e);null!==t&&t.getWritable()}}}function o0(){return ot()?null:os()._compositionKey}function o1(e,t){let r=(t||oi())._nodeMap.get(e);return void 0===r?null:r}function o2(e,t){let r=o3(e,os());return void 0!==r?o1(r,t):null}function o3(e,t){return e[`__lexicalKey_${t._key}`]}function o4(e,t){let r=e;for(;null!=r;){let e=o2(r,t);if(null!==e)return e;r=av(r)}return null}function o5(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function o6(e){return e.read(()=>o9().getTextContent())}function o9(){return o8(oi())}function o8(e){return e._nodeMap.get("root")}function o7(e){or();let t=oi();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function ae(e){let t=os(),r=function(e,t){let r=e;for(;null!=r;){let e=o3(r,t);if(void 0!==e)return e;r=av(r)}return null}(e,t);return null===r?e===t.getRootElement()?o1("root"):null:o1(r)}function at(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function ar(e){let t=[],r=e;for(;null!==r;)t.push(r),r=r._parentEditor;return t}function an(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function ai(e){return oG(e)?e.nodeValue:null}function as(e,t,r){let n=aD(ak(t));if(null===n)return;let i=n.anchorNode,{anchorOffset:s,focusOffset:l}=n;if(null!==i){let t=ai(i),n=o4(i);if(null!==t&&lS(n)){if(t===nJ&&r){let e=r.length;t=r,s=e,l=e}null!==t&&al(n,t,s,l,e)}}}function al(e,t,r,n,i){let s=e;if(s.isAttached()&&(i||!s.isDirty())){let l=s.isComposing(),o=t;(l||i)&&t[t.length-1]===nJ&&(o=t.slice(0,-1));let a=s.getTextContent();if(i||o!==a){if(""===o){if(oY(null),nW||n$||nH)s.remove();else{let e=os();setTimeout(()=>{e.update(()=>{s.isAttached()&&s.remove()})},20)}return}let t=s.getParent(),i=lX(),a=s.getTextContentSize(),u=o0(),d=s.getKey();if(s.isToken()||null!==u&&d===u&&!l||lO(i)&&(null!==t&&!t.canInsertTextBefore()&&0===i.anchor.offset||i.anchor.key===e.__key&&0===i.anchor.offset&&!s.canInsertTextBefore()&&!l||i.focus.key===e.__key&&i.focus.offset===a&&!s.canInsertTextAfter()&&!l))return void s.markDirty();let c=lZ();if(!lO(c)||null===r||null===n)return void ao(s,o,c);if(c.setTextNodeRange(s,r,s,n),s.isSegmented()){let e=lj(s.getTextContent());s.replace(e),s=e}ao(s,o,c)}}}function ao(e,t,r){if(e.setTextContent(t),lO(r)){let t=e.getKey();for(let n of["anchor","focus"]){let i=r[n];"text"===i.type&&i.key===t&&(i.offset=a6(e,i.offset,"clamp"))}}}function aa(e,t,r){let n=t[r]||!1;return"any"===n||n===e[r]}function au(e,t,r){return aa(e,r,"altKey")&&aa(e,r,"ctrlKey")&&aa(e,r,"shiftKey")&&aa(e,r,"metaKey")&&e.key.toLowerCase()===t.toLowerCase()}let ad={ctrlKey:!nB,metaKey:nB},ac={altKey:nB,ctrlKey:!nB};function af(e){return"Backspace"===e.key}function ah(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let r=e.__lexicalClassNameCache,n=r[t];if(void 0!==n)return n;let i=e[t];if("string"==typeof i){let e=nG(i);return r[t]=e,e}return i}function ag(e,t,r,n,i){if(0===r.size)return;let s=n.__type,l=n.__key,o=t.get(s);void 0===o&&nI(33,s);let a=o.klass,u=e.get(a);void 0===u&&(u=new Map,e.set(a,u));let d=u.get(l),c="destroyed"===d&&"created"===i;(void 0===d||c)&&u.set(l,c?"updated":i)}function ap(e,t,r){let n=e.getParent(),i=r,s=e;return null!==n&&(t&&0===r?(i=s.getIndexWithinParent(),s=n):t||r!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=n)),s.getChildAtIndex(t?i-1:i)}function am(e){let t=ak(e).event,r=t&&t.inputType;return"insertFromPaste"===r||"insertFromPasteAsQuotation"===r}function ax(e,t,r){return function(e,t,r){let n=ar(e);for(let i=4;i>=0;i--)for(let s=0;s<n.length;s++){let l=n[s],o=l._commands.get(t);if(void 0!==o){let t=o[i];if(void 0!==t){let n=Array.from(t),i=n.length,s=!1;if(op(l,()=>{for(let t=0;t<i;t++)if(n[t](r,e))return void(s=!0)}),s)return s}}}return!1}(e,t,r)}function ay(e){return!oS(e)&&!e.isLastChild()&&!e.isInline()}function a_(e,t){let r=e._keyToDOMMap.get(t);return void 0===r&&nI(75,t),r}function av(e){let t=e.assignedSlot||e.parentElement;return aI(t)?t.host:t}function aC(e){return aO(e)&&9===e.nodeType?e:aA(e)?e.ownerDocument:null}function ab(e){or(),os()._updateTags.add(e)}function aj(e){or(),os()._deferred.push(e)}function aS(e,t){let r=e.getParent();for(;null!==r;){if(r.is(t))return!0;r=r.getParent()}return!1}function aw(e){let t=aC(e);return t?t.defaultView:null}function ak(e){let t=e._window;return null===t&&nI(78),t}function aN(e){return oS(e)||o_(e)&&e.isShadowRoot()}function aE(e){let t=os(),r=e.getType(),n=oB(t,r);void 0===n&&nI(200,e.constructor.name,r);let{replace:i,replaceWithKlass:s}=n;if(null!==i){let t=i(e),n=t.constructor;return null!==s?t instanceof s||nI(201,s.name,s.getType(),n.name,n.getType(),e.constructor.name,r):t instanceof e.constructor&&n!==e.constructor||nI(202,n.name,n.getType(),e.constructor.name,r),t.__key===e.__key&&nI(203,e.constructor.name,r,n.name,n.getType()),t}return e}function aT(e,t){!oS(e.getParent())||o_(t)||ob(t)||nI(99)}function aL(e){return(ob(e)||o_(e)&&!e.canBeEmpty())&&!e.isInline()}function aM(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;let n=e.parentElement;null!==n&&n.removeChild(e)}function aD(e){return nR?(e||window).getSelection():null}function aA(e){return aO(e)&&1===e.nodeType}function aO(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function aI(e){return aO(e)&&11===e.nodeType}function aF(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function aR(e){if(ob(e)&&!e.isInline())return!0;if(!o_(e)||aN(e))return!1;let t=e.getFirstChild(),r=null===t||lo(t)||lS(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&r}let aP=new WeakMap,aB=new Map;function aq(e){if(!e._readOnly&&e.isEmpty())return aB;e._readOnly||nI(192);let t=aP.get(e);return t||(t=function(e){let t=new Map;for(let[r,n]of e._nodeMap){let e=n.__type,i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(r,n)}return t}(e),aP.set(e,t)),t}function az(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function aW(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==le[t]}function a$(e){let t=n5 in e.prototype?e.prototype[n5]():void 0,r=function(e){if(!(e===le||e.prototype instanceof le)){let t="<unknown>",r="<unknown>";try{t=e.getType()}catch(e){}try{oI.version&&(r=JSON.parse(oI.version))}catch(e){}nI(290,e.name,t,r)}return e===oC||e===oy||e===le}(e),n=!r&&aW(e,"getType")?e.getType():void 0,i,s=n;if(t)if(n)i=t[n];else for(let[e,r]of Object.entries(t))s=e,i=r;if(!r&&s&&(aW(e,"getType")||(e.getType=()=>s),aW(e,"clone")||(e.clone=t=>(oF=t,new e)),aW(e,"importJSON")||(e.importJSON=i&&i.$importJSON||(t=>(new e).updateFromJSON(t))),!aW(e,"importDOM")&&i)){let{importDOM:t}=i;t&&(e.importDOM=()=>t)}return{ownNodeConfig:i,ownNodeType:s}}let aU=(e,t)=>{let r=e;for(;null!=r&&!oS(r);){if(t(r))return r;r=r.getParent()}return null},aV={next:"previous",previous:"next"};class aK{origin;constructor(e){this.origin=e}[Symbol.iterator](){return un({hasNext:aY,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return a4(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return a4(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(null===r?this.insert(e):r.replace(e,t)),this}splice(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",n=r===this.direction?t:Array.from(t).reverse(),i=this,s=this.getParentAtCaret(),l=new Map;for(let t=i.getAdjacentCaret();null!==t&&l.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();l.set(e.getKey(),e)}for(let e of n){if(l.size>0){let t=i.getNodeAtCaret();if(t)if(l.delete(t.getKey()),l.delete(e.getKey()),t.is(e)||i.origin.is(e));else{let r=e.getParent();r&&r.is(s)&&e.remove(),t.replace(e)}else null===t&&nI(263,Array.from(l).join(" "))}else i.insert(e);i=a4(e,this.direction)}for(let e of l.values())e.remove();return this}}class aH extends aK{type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:a9(e,this.direction)}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return a4(aJ(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=aV[this.direction];return a4(this.getNodeAtCaret(),e)||a9(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof aH&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let aG={root:oS,shadowRoot:aN};function aJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";return aG[t](e)?null:e}class aZ extends aK{type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:a4(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return o_(this.origin)?a9(this.origin,this.direction):null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return a4(aJ(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=aV[this.direction];return a4(this.getNodeAtCaret(),e)||a9(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof aZ&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof aZ||e instanceof aX)&&this.direction===e.direction&&this.origin.is(e.origin)}}class aX extends aK{type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:a5(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return a4(aJ(this.getParentAtCaret(),e),this.direction)}getFlipped(){return a5(this.origin,aV[this.direction],this.offset)}isSamePointCaret(e){return e instanceof aX&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof aZ||e instanceof aX)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return a4(this.origin,this.direction)}}function aQ(e){return e instanceof aX}function aY(e){return e instanceof aZ}function a0(e){return e instanceof aH}let a1={next:class extends aX{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends aX{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},a2={next:class extends aZ{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends aZ{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},a3={next:class extends aH{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends aH{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function a4(e,t){return e?new a2[t](e):null}function a5(e,t,r){return e?new a1[t](e,a6(e,r)):null}function a6(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",n=e.getTextContentSize(),i="next"===t?n:"previous"===t?0:t;return(i<0||i>n)&&("clamp"!==r&&nF(284,String(t),String(n),e.getKey()),i=i<0?0:n),i}function a9(e,t){return o_(e)?new a3[t](e):null}function a8(e){var t;return e&&((t=e.getAdjacentCaret())&&t.getChildCaret()||t)}class a7{type="node-caret-range";direction;anchor;focus;constructor(e,t,r){this.anchor=e,this.focus=t,this.direction=r}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new a7(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return aQ(t)?function(e,t){let{direction:r,origin:n}=e;return new ue(e,a6(n,"focus"===t?aV[r]:r)-e.offset)}(t,e):null},t=e("anchor"),r=e("focus");if(t&&r){let{caret:e}=t,{caret:n}=r;if(e.isSameNodeCaret(n))return[new ue(e,n.offset-e.offset),null]}return[t,r]}iterNodeCarets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=aQ(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),n=aQ(r),i=t=>t.isSameNodeCaret(r)?null:a8(t)||t.getParentCaret(e);return un({hasNext:e=>null!==e&&!(n&&r.isSameNodeCaret(e)),initial:t.isSameNodeCaret(r)?null:i(t),map:e=>e,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class ue{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[r,n]=this.getSliceIndices(),i=e.getTextContent();return a5(e.setTextContent(i.slice(0,r)+i.slice(n)),t,r)}}function ut(e){return ur(e,a4(o9(),e.direction))}function ur(e,t){return e.direction!==t.direction&&nI(265),new a7(e,t,e.direction)}function un(e){let{initial:t,hasNext:r,step:n,map:i}=e,s=t;return{[Symbol.iterator](){return this},next(){if(!r(s))return{done:!0,value:void 0};let e={done:!1,value:i(s)};return s=n(s),e}}}function ui(e,t){let r=uo(e.origin,t.origin);switch(null===r&&nI(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{let r="text"===e.type,n="text"===t.type;return r&&n?Math.sign(e.offset-t.offset):e.type===t.type?0:r?-1:n?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===t.type?1:-1;case"branch":return us(r)}}function us(e){let{a:t,b:r}=e,n=t.__key,i=r.__key,s=t,l=r;for(;s&&l;s=s.getNextSibling(),l=l.getNextSibling()){if(s.__key===i)return -1;if(l.__key===n)return 1}return null===s?1:-1}function ul(e){return o_(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function uo(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};let r=new Map;for(let[t,n]=ul(e);t;n=t,t=t.getParent())r.set(t,n);for(let[n,i]=ul(t);n;i=n,n=n.getParent()){let s=r.get(n);if(void 0!==s)return null===s?(n.is(e)||nI(276),{commonAncestor:n,type:"ancestor"}):null===i?(n.is(t)||nI(277),{commonAncestor:n,type:"descendant"}):((o_(s)||s.is(e))&&(o_(i)||i.is(t))&&n.is(s.getParent())&&n.is(i.getParent())||nI(278),{a:s,b:i,commonAncestor:n,type:"branch"})}return null}function ua(e,t){var r;let n,{type:i,key:s,offset:l}=e,o=(null===(n=o1(r=e.key))&&nI(63,r),n);return"text"===i?(lS(o)||nI(266,o.getType(),s),a5(o,t,l)):(o_(o)||nI(267,o.getType(),s),function(e,t,r){let n=a9(e,"next");for(let e=0;e<t;e++){let e=n.getAdjacentCaret();if(null===e)break;n=e}return ux(n,r)}(o,e.offset,t))}function uu(e,t){let{origin:r,direction:n}=t,i="next"===n;aQ(t)?e.set(r.getKey(),t.offset,"text"):aY(t)?lS(r)?e.set(r.getKey(),a6(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+ +!!i,"element"):(a0(t)&&o_(r)||nI(268),e.set(r.getKey(),i?0:r.getChildrenSize(),"element"))}function ud(e,t){uu(e.anchor,t.anchor),uu(e.focus,t.focus)}function uc(e){let{anchor:t,focus:r}=e,n=ua(t,"next"),i=ua(r,"next"),s=0>=ui(n,i)?"next":"previous";return ur(ux(n,s),ux(i,s))}function uf(e){let{direction:t,origin:r}=e,n=a4(r,aV[t]).getNodeAtCaret();return n?a4(n,t):a9(r.getParentOrThrow(),t)}function uh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",r=[e];for(let n=a0(e)?e.getParentCaret(t):e.getSiblingCaret();null!==n;n=n.getParentCaret(t))r.push(uf(n));return r}function ug(e){return!!e&&e.origin.isAttached()}function up(e){let t=function(e){let t=e;for(;a0(t);){let e=a8(t);if(!a0(e))break;t=e}return t}(e.getLatest()),{direction:r}=t;if(lS(t.origin))return aQ(t)?t:a5(t.origin,r,r);let n=t.getAdjacentCaret();return aY(n)&&lS(n.origin)?a5(n.origin,r,aV[r]):t}function um(e){return aQ(e)&&e.offset!==a6(e.origin,e.direction)}function ux(e,t){return e.direction===t?e:e.getFlipped()}function uy(e,t){return e.direction===t?e:ur(ux(e.focus,t),ux(e.anchor,t))}function u_(e,t){if(!t||e===t)return e;for(let r in t)if(e[r]!==t[r])return{...e,...t};return e}let uv="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,uC=uv?s.useLayoutEffect:s.useEffect,ub={tag:lr};function uj(e){let{initialConfig:t,children:r}=e,n=(0,s.useMemo)(()=>{let{theme:e,namespace:r,nodes:n,onError:i,editorState:s,html:l}=t,o={getTheme:function(){return null!=e?e:null}},a=oO({editable:t.editable,html:l,namespace:r,nodes:n,onError:e=>i(e,a),theme:e});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=o9();if(t.isEmpty()){let r=oM();t.append(r);let n=uv?document.activeElement:null;(null!==lZ()||null!==n&&n===e.getRootElement())&&r.select()}},ub);else if(null!==t)switch(typeof t){case"string":{let r=e.parseEditorState(t);e.setEditorState(r,ub);break}case"object":e.setEditorState(t,ub);break;case"function":e.update(()=>{o9().isEmpty()&&t(e)},ub)}}}(a,s),[a,o]},[]);return uC(()=>{let e=t.editable,[r]=n;r.setEditable(void 0===e||e)},[]),(0,i.jsx)(nA.Provider,{value:n,children:r})}let uS="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;function uw(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function uk(e){let t=os().getElementByKey(e.getKey());if(null===t)return null;let r=t.ownerDocument.defaultView;return null===r?null:r.getComputedStyle(t)}function uN(e){let t=uE(e);return null!==t&&"vertical-rl"===t.writingMode}function uE(e){let t=e.anchor.getNode();return o_(t)?uk(t):uk(oS(t)?t:t.getParentOrThrow())}function uT(e,t){let r=uN(e)?!t:t;uL(e)&&(r=!r);let n=ua(e.focus,r?"previous":"next");if(um(n))return!1;for(let e of ut(n)){if(a0(e))return!e.origin.isInline();if(!o_(e.origin)){if(ob(e.origin))return!0;break}}return!1}function uL(e){let t=uE(e);return null!==t&&"rtl"===t.direction}function uM(e,t,r){let n,i=uL(e);n=uN(e)||i?!r:r,e.modify(t?"extend":"move",n,"character")}let uD="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,uA=uD&&"documentMode"in document?document.documentMode:null;uD&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),uD&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),uD&&"InputEvent"in window&&!uA&&new window.InputEvent("input"),uD&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),uD&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,uD&&/Android/.test(navigator.userAgent),uD&&/^(?=.*Chrome).*/i.test(navigator.userAgent);function uO(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function uI(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))n.push(t);return n}(...r);i.length>0&&e.classList.add(...i)}uD&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function uF(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}let uR=Symbol.for("preact-signals");function uP(){if(uq>1)return void uq--;let e,t=!1;for(;void 0!==r;){let n=r;for(r=void 0,uz++;void 0!==n;){let r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&uV(n))try{n.c()}catch(r){t||(e=r,t=!0)}n=r}}if(uz=0,uq--,t)throw e}function uB(e){let r=t;t=void 0;try{return e()}finally{t=r}}let uq=0,uz=0,uW=0;function u$(e){if(void 0===t)return;let r=e.n;return void 0===r||r.t!==t?(r={i:0,S:e,p:t.s,n:void 0,t:t,e:void 0,x:void 0,r:r},void 0!==t.s&&(t.s.n=r),t.s=r,e.n=r,32&t.f&&e.S(r),r):-1===r.i?(r.i=0,void 0!==r.n&&(r.n.p=r.p,void 0!==r.p&&(r.p.n=r.n),r.p=t.s,r.n=void 0,t.s.n=r,t.s=r),r):void 0}function uU(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function uV(e){for(let t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function uK(e){for(let t=e.s;void 0!==t;t=t.n){let r=t.S.n;if(void 0!==r&&(t.r=r),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function uH(e){let t,r=e.s;for(;void 0!==r;){let e=r.p;-1===r.i?(r.S.U(r),void 0!==e&&(e.n=r.n),void 0!==r.n&&(r.n.p=e)):t=r,r.S.n=r.r,void 0!==r.r&&(r.r=void 0),r=e}e.s=t}function uG(e,t){uU.call(this,void 0),this.x=e,this.s=void 0,this.g=uW-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function uJ(e){let r=e.u;if(e.u=void 0,"function"==typeof r){uq++;let n=t;t=void 0;try{r()}catch(t){throw e.f&=-2,e.f|=8,uZ(e),t}finally{t=n,uP()}}}function uZ(e){for(let t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,uJ(e)}function uX(e){if(t!==this)throw Error("Out-of-order effect");uH(this),t=e,this.f&=-2,8&this.f&&uZ(this),uP()}function uQ(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==t?void 0:t.name}function uY(e,t){let r=new uQ(e,t);try{r.c()}catch(e){throw r.d(),e}let n=r.d.bind(r);return n[Symbol.dispose]=n,n}function u0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(let n in e){let i=t[n],s=new uU(void 0===i?e[n]:i,void 0);r[n]=s}return r}uU.prototype.brand=uR,uU.prototype.h=function(){return!0},uU.prototype.S=function(e){let t=this.t;t!==e&&void 0===e.e&&(e.x=t,this.t=e,void 0!==t?t.e=e:uB(()=>{var e;null==(e=this.W)||e.call(this)}))},uU.prototype.U=function(e){if(void 0!==this.t){let t=e.e,r=e.x;void 0!==t&&(t.x=r,e.e=void 0),void 0!==r&&(r.e=t,e.x=void 0),e===this.t&&(this.t=r,void 0===r&&uB(()=>{var e;null==(e=this.Z)||e.call(this)}))}},uU.prototype.subscribe=function(e){return uY(()=>{let r=this.value,n=t;t=void 0;try{e(r)}finally{t=n}},{name:"sub"})},uU.prototype.valueOf=function(){return this.value},uU.prototype.toString=function(){return this.value+""},uU.prototype.toJSON=function(){return this.value},uU.prototype.peek=function(){let e=t;t=void 0;try{return this.value}finally{t=e}},Object.defineProperty(uU.prototype,"value",{get(){let e=u$(this);return void 0!==e&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(uz>100)throw Error("Cycle detected");this.v=e,this.i++,uW++,uq++;try{for(let e=this.t;void 0!==e;e=e.x)e.t.N()}finally{uP()}}}}),uG.prototype=new uU,uG.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===uW))return!0;if(this.g=uW,this.f|=1,this.i>0&&!uV(this))return this.f&=-2,!0;let e=t;try{uK(this),t=this;let e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return t=e,uH(this),this.f&=-2,!0},uG.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(let e=this.s;void 0!==e;e=e.n)e.S.S(e)}uU.prototype.S.call(this,e)},uG.prototype.U=function(e){if(void 0!==this.t&&(uU.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(let e=this.s;void 0!==e;e=e.n)e.S.U(e)}},uG.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(uG.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let e=u$(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),uQ.prototype.c=function(){let e=this.S();try{if(8&this.f||void 0===this.x)return;let e=this.x();"function"==typeof e&&(this.u=e)}finally{e()}},uQ.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,uJ(this),uK(this),uq++;let e=t;return t=this,uX.bind(this,e)},uQ.prototype.N=function(){2&this.f||(this.f|=2,this.o=r,r=this)},uQ.prototype.d=function(){this.f|=8,1&this.f||uZ(this)},uQ.prototype.dispose=function(){this.d()};function u1(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let u2=new Set;class u3{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(e,t){this.builder=e,this.extension=t,this.configs=new Set,this.state={id:0}}mergeConfigs(){let e=this.extension.config||{},t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):u_;for(let r of this.configs)e=t(e,r);return e}init(e){let t,r=this.state;2===r.id||u1(306,String(r.id));let n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i={...n,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},s=Object.assign(r,{config:this.mergeConfigs(),id:3,registerState:n});this.state=s,this.extension.init&&(t=this.extension.init(e,s.config,n)),this.state=Object.assign(s,{id:4,initResult:t,registerState:i})}build(e){let t,r=this.state;4!==r.id&&u1(307,String(r.id),String(5)),this.extension.build&&(t=this.extension.build(e,r.config,r.registerState));let n={...r.registerState,getOutput:()=>t,getSignal:this.getSignal.bind(this)};this.state=Object.assign(r,{id:5,output:t,registerState:n})}register(e,t){this._signal=t;let r=this.state;5!==r.id&&u1(308,String(r.id),String(5));let n=this.extension.register&&this.extension.register(e,r.config,r.registerState);return this.state=Object.assign(r,{id:6}),()=>{let e=this.state;7!==e.id&&u1(309,String(r.id),String(7)),this.state=Object.assign(e,{id:5}),n&&n()}}afterRegistration(e){let t,r=this.state;return 6!==r.id&&u1(310,String(r.id),String(6)),this.extension.afterRegistration&&(t=this.extension.afterRegistration(e,r.config,r.registerState)),this.state=Object.assign(r,{id:7}),t}getSignal(){return void 0===this._signal&&u1(311),this._signal}getInitResult(){void 0===this.extension.init&&u1(312,this.extension.name);let e=this.state;return e.id>=4||u1(313,String(e.id),String(4)),e.initResult}getInitPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){let e=this.state;return e.id>=3||u1(314,String(e.id),String(3)),{config:e.config}}getPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&u1(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&u1(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){let e=this.state;return e.id>=7||u1(316,String(e.id),String(7)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||u2}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(e=>{let[t]=e;return t})),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){let e=this.state;e.id>=5||u1(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}let u4={tag:lr};function u5(){let e=o9();e.isEmpty()&&e.append(oM())}let u6={config:{setOptions:u4,updateOptions:u4},init:e=>{let{$initialEditorState:t=u5}=e;return{$initialEditorState:t,initialized:!1}},afterRegistration(e,t,r){let{updateOptions:n,setOptions:i}=t,s=r.getInitResult();if(!s.initialized){s.initialized=!0;let{$initialEditorState:t}=s;if(t instanceof oN)e.setEditorState(t,i);else if("function"==typeof t)e.update(()=>{t(e)},n);else if(t&&("string"==typeof t||"object"==typeof t)){let r=e.parseEditorState(t);e.setEditorState(r,i)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[oj,lp,li,lk,oT]},u9=Symbol.for("@lexical/extension/LexicalBuilder");function u8(){}function u7(e){throw e}function de(e){return Array.isArray(e)?e:[e]}let dt="0.39.0+prod.esm";class dr{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(e){for(const t of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=dt,this.roots=e,e))this.addExtension(t)}static fromExtensions(e){let t=[de(u6)];for(let r of e)t.push(de(r));return new dr(t)}static maybeFromEditor(e){let t=e[u9];return t&&(t.PACKAGE_VERSION!==dt&&u1(292,t.PACKAGE_VERSION,dt),t instanceof dr||u1(293)),t}static fromEditor(e){let t=dr.maybeFromEditor(e);return void 0===t&&u1(294),t}constructEditor(){let{$initialEditorState:e,onError:t,...r}=this.buildCreateEditorArgs(),n=Object.assign(oO({...r,...t?{onError:e=>{t(e,n)}}:{}}),{[u9]:this});for(let e of this.sortedExtensionReps())e.build(n);return n}buildEditor(){let e=u8;function t(){try{e()}finally{e=u8}}let r=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=uO(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){let t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&u1(295,e.name),t}addEdge(e,t,r){let n=this.outgoingConfigEdges.get(e);n?n.set(t,r):this.outgoingConfigEdges.set(e,new Map([[t,r]]));let i=this.incomingEdges.get(t);i?i.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){void 0!==this._sortedExtensionReps&&u1(296);let[t]=de(e);"string"!=typeof t.name&&u1(297,typeof t.name);let r=this.extensionNameMap.get(t.name);if(void 0!==r&&r.extension!==t&&u1(298,t.name),!r){r=new u3(this,t),this.extensionNameMap.set(t.name,r);let e=this.conflicts.get(t.name);for(let r of("string"==typeof e&&u1(299,t.name,e),t.conflictsWith||[]))this.extensionNameMap.has(r)&&u1(299,t.name,r),this.conflicts.set(r,t.name);for(let e of t.dependencies||[]){let r=de(e);this.addEdge(t.name,r[0].name,r.slice(1)),this.addExtension(r)}for(let[e,r]of t.peerDependencies||[])this.addEdge(t.name,e,r?[r]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let e=[],t=(r,n)=>{var i,s;let l=r.state;if(2===l.id)return;let o=r.extension.name;0===l.id||u1(300,o,n||"[unknown]"),0===(i=l).id||u1(304,String(i.id),String(0)),r.state=l=Object.assign(i,{id:1});let a=this.outgoingConfigEdges.get(o);if(a)for(let e of a.keys()){let r=this.extensionNameMap.get(e);r&&t(r,o)}1===(s=l).id||u1(305,String(s.id),String(1)),r.state=l=Object.assign(s,{id:2}),e.push(r)};for(let e of this.extensionNameMap.values())0===e.state.id&&t(e);for(let t of e)for(let[e,r]of this.outgoingConfigEdges.get(t.extension.name)||[])if(r.length>0){let t=this.extensionNameMap.get(e);if(t)for(let e of r)t.configs.add(e)}for(let[e,...t]of this.roots)if(t.length>0){let r=this.extensionNameMap.get(e.name);for(let n of(void 0===r&&u1(301,e.name),t))r.configs.add(n)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){let t=this.sortedExtensionReps(),r=new AbortController,n=[()=>r.abort()],i=r.signal;for(let r of t){let t=r.register(e,i);t&&n.push(t)}for(let r of t){let t=r.afterRegistration(e);t&&n.push(t)}return uO(...n)}buildCreateEditorArgs(){let e={},t=new Set,r=new Map,n=new Map,i={},s={},l=this.sortedExtensionReps();for(let o of l){let{extension:l}=o;if(void 0!==l.onError&&(e.onError=l.onError),void 0!==l.disableEvents&&(e.disableEvents=l.disableEvents),void 0!==l.parentEditor&&(e.parentEditor=l.parentEditor),void 0!==l.editable&&(e.editable=l.editable),void 0!==l.namespace&&(e.namespace=l.namespace),void 0!==l.$initialEditorState&&(e.$initialEditorState=l.$initialEditorState),l.nodes){for(let e of("function"==typeof l.nodes?l.nodes():l.nodes)||[]){if("function"!=typeof e){let t=r.get(e.replace);t&&u1(302,l.name,e.replace.name,t.extension.name),r.set(e.replace,o)}t.add(e)}}if(l.html){if(l.html.export)for(let[e,t]of l.html.export.entries())n.set(e,t);l.html.import&&Object.assign(i,l.html.import)}l.theme&&function e(t,r){if(t&&r&&!Array.isArray(r)&&"object"==typeof t&&"object"==typeof r){for(let n in r)t[n]=e(t[n],r[n]);return t}return r}(s,l.theme)}Object.keys(s).length>0&&(e.theme=s),t.size&&(e.nodes=[...t]);let o=Object.keys(i).length>0,a=n.size>0;for(let t of((o||a)&&(e.html={},o&&(e.html.import=i),a&&(e.html.export=n)),l))t.init(e);return e.onError||(e.onError=u7),e}}iK("INSERT_HORIZONTAL_RULE_COMMAND");var dn=e.i(8080906);function di(e){return()=>(function(e){if(!function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e)return!1;let r=o9().getTextContent();return t&&(r=r.trim()),""===r}(e,!1))return!1;let t=o9().getChildren(),r=t.length;if(r>1)return!1;for(let e=0;e<r;e++){let r=t[e];if(ob(r))return!1;if(o_(r)){if(!oD(r)||0!==r.__indent)return!1;let t=r.getChildren(),n=t.length;for(let r=0;r<n;r++)if(!lS(t[e]))return!1}}return!0})(e)}function ds(e){let t=window.location.origin,r=r=>{if(r.origin!==t)return;let n=e.getRootElement();if(document.activeElement!==n)return;let i=r.data;if("string"==typeof i){let t;try{t=JSON.parse(i)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let n=t.payload;if(n&&"makeChanges"===n.functionId){let t=n.args;if(t){let[n,i,s,l,o]=t;e.update(()=>{let e=lZ();if(lO(e)){let t=e.anchor,a=t.getNode(),u=0,d=0;if(lS(a)&&n>=0&&i>=0&&(u=n,d=n+i,e.setTextNodeRange(a,u,a,d)),u===d&&""===s||(e.insertRawText(s),a=t.getNode()),lS(a)){u=l,d=l+o;let t=a.getTextContentSize();u=u>t?t:u,d=d>t?t:d,e.setTextNodeRange(a,u,a,d)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function dl(e,t){let r=e.getData("text/plain")||e.getData("text/uri-list");null!=r&&t.insertRawText(r)}let da="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,du=da&&"documentMode"in document?document.documentMode:null,dd=da&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),dc=!(!da||!("InputEvent"in window)||du)&&"getTargetRanges"in new window.InputEvent("input"),df=da&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),dh=da&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,dg=da&&/^(?=.*Chrome).*/i.test(navigator.userAgent),dp=da&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&dd&&!dg;function dm(t,r){r.update(()=>{if(null!==t){let n=uF(t,KeyboardEvent)?null:t.clipboardData,i=lZ();if(null!==i&&!i.isCollapsed()&&null!=n){t.preventDefault();let s=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lZ();return null==r&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(166),lO(r)&&r.isCollapsed()||0===r.getNodes().length?"":function(t,r){if("u"<typeof document||"u"<typeof window&&void 0===e.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),i=o9().getChildren();for(let e=0;e<i.length;e++)!function e(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=null===i||r.isSelected(i),l=o_(r)&&r.excludeFromCopy("html"),o=r;null!==i&&lS(r)&&(o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"self",n=e.getStartEndPoints();if(t.isSelected(e)&&!oH(t)&&null!==n){let[s,l]=n,o=e.isBackward(),a=s.getNode(),u=l.getNode(),d=t.is(a),c=t.is(u);if(d||c){var i;let[n,s]=lP(e),l=a.is(u),d=t.is(o?u:a),c=t.is(o?a:u),f,h=0;l?(h=n>s?s:n,f=n>s?n:s):d?(h=o?s:n,f=void 0):c&&(h=0,f=o?n:s);let g=t.__text.slice(h,f);g!==t.__text&&("clone"===r&&((i=az(t))[s8]=!0,t=i),t.__text=g)}}return t}(i,r,"clone"));let a=o_(o)?o.getChildren():[],u=oB(t,o.getType()),{element:d,after:c}=u&&void 0!==u.exportDOM?u.exportDOM(t,o):o.exportDOM(t);if(!d)return!1;let f=document.createDocumentFragment();for(let n=0;n<a.length;n++){let l=a[n],o=e(t,l,f,i);!s&&o_(r)&&o&&r.extractWithChild(l,i,"html")&&(s=!0)}if(s&&!l){if((aA(d)||aI(d))&&d.append(f),n.append(d),c){let e=c.call(o,d);e&&(aI(d)?d.replaceChildren(e):d.replaceWith(e))}}else n.append(f);return s}(t,i[e],n,r);return n.innerHTML}(t,r)}(r);null!==s&&n.setData("text/html",s),n.setData("text/plain",i.getTextContent())}}})}let dx="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;function dy(e){let{editor:t,ErrorBoundary:r}=e;return function(e,t){let[r,n]=(0,s.useState)(()=>e.getDecorators());return dx(()=>e.registerDecoratorListener(e=>{(0,dn.flushSync)(()=>{n(e)})}),[e]),(0,s.useEffect)(()=>{n(e.getDecorators())},[e]),(0,s.useMemo)(()=>{let n=[],l=Object.keys(r);for(let o=0;o<l.length;o++){let a=l[o],u=(0,i.jsx)(t,{onError:t=>e._onError(t),children:(0,i.jsx)(s.Suspense,{fallback:null,children:r[a]})}),d=e.getElementByKey(a);null!==d&&n.push((0,dn.createPortal)(u,d,a))}return n},[t,r,e])}(t,r)}function d_(e){let{editor:t,ErrorBoundary:r}=e;return!function(e){let t=dr.maybeFromEditor(e);if(t&&t.hasExtensionByName("@lexical/react/ReactProvider")){for(let e of["@lexical/plain-text","@lexical/rich-text"])t.hasExtensionByName(e)&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(320,e);return!0}return!1}(t)?(0,i.jsx)(dy,{editor:t,ErrorBoundary:r}):null}function dv(e){return e.getEditorState().read(di(e.isComposing()))}function dC(e){var t;let{contentEditable:r,placeholder:n=null,ErrorBoundary:s}=e,[l]=nO();return dx(()=>{var e;return uO(uO((e=t).registerCommand(iY,e=>{let t=lZ();return!!lO(t)&&(t.deleteCharacter(e),!0)},0),e.registerCommand(i5,e=>{let t=lZ();return!!lO(t)&&(t.deleteWord(e),!0)},0),e.registerCommand(i6,e=>{let t=lZ();return!!lO(t)&&(t.deleteLine(e),!0)},0),e.registerCommand(i2,e=>{let t=lZ();if(!lO(t))return!1;if("string"==typeof e)t.insertText(e);else{let r=e.dataTransfer;if(null!=r)dl(r,t);else{let r=e.data;r&&t.insertText(r)}}return!0},0),e.registerCommand(i4,()=>{let e=lZ();return!!lO(e)&&(e.removeText(),!0)},0),e.registerCommand(i0,e=>{let t=lZ();return!!lO(t)&&(t.insertLineBreak(e),!0)},0),e.registerCommand(i1,()=>{let e=lZ();return!!lO(e)&&(e.insertLineBreak(),!0)},0),e.registerCommand(sn,e=>{let t=lZ();if(!lO(t))return!1;let r=e.shiftKey;return!!uT(t,!0)&&(e.preventDefault(),uM(t,r,!0),!0)},0),e.registerCommand(st,e=>{let t=lZ();if(!lO(t))return!1;let r=e.shiftKey;return!!uT(t,!1)&&(e.preventDefault(),uM(t,r,!1),!0)},0),e.registerCommand(su,t=>!!lO(lZ())&&(!dh||"ko-KR"!==navigator.language)&&(t.preventDefault(),e.dispatchCommand(iY,!0)),0),e.registerCommand(sc,t=>!!lO(lZ())&&(t.preventDefault(),e.dispatchCommand(iY,!1)),0),e.registerCommand(so,t=>{if(!lO(lZ()))return!1;if(null!==t){if((dh||df||dp)&&dc)return!1;t.preventDefault()}return e.dispatchCommand(i0,!1)},0),e.registerCommand(s_,()=>((function(e){let t=o9();if(lO(void 0)){let e=(void 0).anchor,t=(void 0).focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,"element"),t.set(r.getKey(),r.getChildrenSize(),"element"),ig(void 0)}o7(ig(t.select(0,t.getChildrenSize())))})(),!0),0),e.registerCommand(sx,t=>!!lO(lZ())&&(dm(t,e),!0),0),e.registerCommand(sy,t=>!!lO(lZ())&&(dm(t,e),e.update(()=>{let e=lZ();lO(e)&&e.removeText()}),!0),0),e.registerCommand(i3,t=>!!lO(lZ())&&(t.preventDefault(),e.update(()=>{let e=lZ(),r=uF(t,ClipboardEvent)?t.clipboardData:null;null!=r&&lO(e)&&dl(r,e)},{tag:"paste"}),!0),0),e.registerCommand(sh,e=>!!lO(lZ())&&(e.preventDefault(),!0),0),e.registerCommand(sg,e=>!!lO(lZ())&&(e.preventDefault(),!0),0)),ds(t))},[t=l]),(0,i.jsxs)(i.Fragment,{children:[r,(0,i.jsx)(db,{content:n}),(0,i.jsx)(d_,{editor:l,ErrorBoundary:s})]})}function db(e){let{content:t}=e,[r]=nO(),n=function(e){let[t,r]=(0,s.useState)(()=>dv(e));return dx(()=>{function t(){r(dv(e))}return t(),uO(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(r),i=function(e){let[t]=nO(),r=(0,s.useMemo)(()=>e(t),[t,e]),[n,i]=(0,s.useState)(()=>r.initialValueFn()),l=(0,s.useRef)(n);return uS(()=>{let{initialValueFn:e,subscribe:t}=r,n=e();return l.current!==n&&(l.current=n,i(n)),t(e=>{l.current=e,i(e)})},[r,e]),n}(uw);return n?"function"==typeof t?t(i):t:null}let dj="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect,dS=(0,s.forwardRef)(function(e,t){let{editor:r,ariaActiveDescendant:n,ariaAutoComplete:l,ariaControls:o,ariaDescribedBy:a,ariaErrorMessage:u,ariaExpanded:d,ariaInvalid:c,ariaLabel:f,ariaLabelledBy:h,ariaMultiline:g,ariaOwns:p,ariaRequired:m,autoCapitalize:x,className:y,id:_,role:v="textbox",spellCheck:C=!0,style:b,tabIndex:j,"data-testid":S,...w}=e,[k,N]=(0,s.useState)(r.isEditable()),E=(0,s.useCallback)(e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView?r.setRootElement(e):r.setRootElement(null)},[r]),T=(0,s.useMemo)(()=>(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(let r of t)"function"==typeof r?r(e):null!=r&&(r.current=e)}})(t,E),[E,t]);return dj(()=>(N(r.isEditable()),r.registerEditableListener(e=>{N(e)})),[r]),(0,i.jsx)("div",{"aria-activedescendant":k?n:void 0,"aria-autocomplete":k?l:"none","aria-controls":k?o:void 0,"aria-describedby":a,...null!=u?{"aria-errormessage":u}:{},"aria-expanded":k&&"combobox"===v?!!d:void 0,...null!=c?{"aria-invalid":c}:{},"aria-label":f,"aria-labelledby":h,"aria-multiline":g,"aria-owns":k?p:void 0,"aria-readonly":!k||void 0,"aria-required":m,autoCapitalize:x,className:y,contentEditable:k,"data-testid":S,id:_,ref:T,role:v,spellCheck:C,style:b,tabIndex:j,...w})});function dw(e){return e.getEditorState().read(di(e.isComposing()))}let dk=(0,s.forwardRef)(function(e,t){let{placeholder:r,...n}=e,[s]=nO();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dS,{editor:s,...n,ref:t}),null!=r&&(0,i.jsx)(dN,{editor:s,content:r})]})});function dN(e){let{content:t,editor:r}=e,n=function(e){let[t,r]=(0,s.useState)(()=>dw(e));return dj(()=>{function t(){r(dw(e))}return t(),uO(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(r),[l,o]=(0,s.useState)(r.isEditable());if((0,s.useLayoutEffect)(()=>(o(r.isEditable()),r.registerEditableListener(e=>{o(e)})),[r]),!n)return null;let a=null;return"function"==typeof t?a=t(l):null!==t&&(a=t),null===a?null:(0,i.jsx)("div",{"aria-hidden":!0,children:a})}var dE=s;let dT=(0,dE.createContext)(null),dL={didCatch:!1,error:null};class dM extends dE.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=dL}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,r,n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];null==(t=(r=this.props).onReset)||t.call(r,{args:i,reason:"imperative-api"}),this.setState(dL)}}componentDidCatch(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t)}componentDidUpdate(e,t){let{didCatch:r}=this.state,{resetKeys:n}=this.props;if(r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,n)){var i,s;null==(i=(s=this.props).onReset)||i.call(s,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(dL)}}render(){let{children:e,fallbackRender:t,FallbackComponent:r,fallback:n}=this.props,{didCatch:i,error:s}=this.state,l=e;if(i){let e={error:s,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(r)l=(0,dE.createElement)(r,e);else if(void 0!==n)l=n;else throw s}return(0,dE.createElement)(dT.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},l)}}function dD(e){let{children:t,onError:r}=e;return(0,i.jsx)(dM,{fallback:(0,i.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:r,children:t})}function dA(e){e.undoStack=[],e.redoStack=[],e.current=null}function dO(e,t,r){let n,i,s=(n=Date.now(),i=0,(t,s,l,o,a,u)=>{let d=Date.now();if(u.has(lt))return i=0,n=d,2;let c=function(e,t,r,n,i){if(null===e||0===r.size&&0===n.size&&!i)return 0;let s=t._selection,l=e._selection;if(i)return 1;if(!(lO(s)&&lO(l)&&l.isCollapsed()&&s.isCollapsed()))return 0;let o=function(e,t,r){let n=e._nodeMap,i=[];for(let e of t){let t=n.get(e);void 0!==t&&i.push(t)}for(let[e,t]of r){if(!t)continue;let r=n.get(e);void 0===r||oS(r)||i.push(r)}return i}(t,r,n);if(0===o.length)return 0;if(o.length>1){let r=t._nodeMap,n=r.get(s.anchor.key),i=r.get(l.anchor.key);return n&&i&&!e._nodeMap.has(n.__key)&&lS(n)&&1===n.__text.length&&1===s.anchor.offset?2:0}let a=o[0],u=e._nodeMap.get(a.__key);if(!lS(u)||!lS(a)||u.__mode!==a.__mode)return 0;let d=u.__text,c=a.__text;if(d===c)return 0;let f=s.anchor,h=l.anchor;if(f.key!==h.key||"text"!==f.type)return 0;let g=f.offset,p=h.offset,m=c.length-d.length;return 1===m&&p===g-1?2:-1===m&&p===g+1?3:4*(-1===m&&p===g)}(t,s,o,a,e.isComposing()),f=(()=>{var f;let h,g,p,m,x=null===l||l.editor===e,y=u.has("history-push");if(!y&&x&&u.has(lr))return 0;if(null===t)return 1;let _=s._selection;if(!(o.size>0||a.size>0))return 2*(null===_);let v="number"==typeof r?r:r.peek();return!1===y&&0!==c&&c===i&&d<n+v&&x?0:1!==o.size||(f=Array.from(o)[0],h=t._nodeMap.get(f),g=s._nodeMap.get(f),p=t._selection,m=s._selection,lO(p)&&lO(m)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===m.anchor.type&&"text"===m.focus.type||!lS(h)||!lS(g)||h.__parent!==g.__parent||JSON.stringify(t.read(()=>h.exportJSON()))!==JSON.stringify(s.read(()=>g.exportJSON())))?1:0})();return n=d,i=c,f});return uO(e.registerCommand(i8,()=>((function(e,t){let r=t.redoStack,n=t.undoStack;if(0!==n.length){let i=t.current,s=n.pop();null!==i&&(r.push(i),e.dispatchCommand(sb,!0)),0===n.length&&e.dispatchCommand(sj,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:lt})}})(e,t),!0),0),e.registerCommand(i7,()=>((function(e,t){let r=t.redoStack,n=t.undoStack;if(0!==r.length){let i=t.current;null!==i&&(n.push(i),e.dispatchCommand(sj,!0));let s=r.pop();0===r.length&&e.dispatchCommand(sb,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:lt})}})(e,t),!0),0),e.registerCommand(sv,()=>(dA(t),!1),0),e.registerCommand(sC,()=>(dA(t),e.dispatchCommand(sb,!1),e.dispatchCommand(sj,!1),!0),0),e.registerUpdateListener(r=>{let{editorState:n,prevEditorState:i,dirtyLeaves:l,dirtyElements:o,tags:a}=r,u=t.current,d=t.redoStack,c=t.undoStack,f=null===u?null:u.editorState;if(null!==u&&n===f)return;let h=s(i,n,u,l,o,a);if(1===h)0!==d.length&&(t.redoStack=[],e.dispatchCommand(sb,!1)),null!==u&&(c.push({...u}),e.dispatchCommand(sj,!0));else if(2===h)return;t.current={editor:e,editorState:n}}))}function dI(){return{current:null,redoStack:[],undoStack:[]}}function dF(e){let{delay:t,externalHistoryState:r}=e,[n]=nO();return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=(0,s.useMemo)(()=>t||dI(),[t]);(0,s.useEffect)(()=>dO(e,n,r),[r,e,n])}(n,r,t),null}!function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r]}({build:(e,t)=>{let{delay:r,createInitialHistoryState:n,disabled:i}=t;return u0({delay:r,disabled:i,historyState:n(e)})},config:{createInitialHistoryState:dI,delay:300,disabled:"u"<typeof window},name:"@lexical/history/History",register:(e,t,r)=>{let n=r.getOutput();return uY(()=>n.disabled.value?void 0:dO(e,n.historyState.value,n.delay))}},{createInitialHistoryState:()=>{throw Error("SharedHistory did not inherit parent history")},disabled:!0});var dR=e.i(2331152);let dP=["inline-block","py-[.1rem]","px-[.3rem]","border","border-solid","rounded","border-gray-300","bg-white","font-normal","leading-tight"],dB={tag:[...dP,"relative","z-1000","hover:pr-[1rem]","hover:-mr-[0.7rem]","hover:z-10","hover:border-gray-500","after:z-0",`after:content-['\xd7']`,"after:absolute","after:right-1","after:top-1/2","after:-translate-y-1/2","after:-z-10","after:text-gray-700","after:cursor-pointer","after:opacity-0","hover:after:opacity-100"].join(" "),tagError:"underline decoration-wavy decoration-red-600 underline-offset-[3px]"};class dq extends lp{static getType(){return"tag"}static clone(e){return new dq(e.__text,e.__key)}createDOM(e){let t=super.createDOM(e);return t.setAttribute("data-tag-key",this.__key),uI(t,e.theme.tag),this.applyValidation(t,e),t}updateDOM(e,t,r){let n=super.updateDOM(e,t,r);return this.applyValidation(t,r),n}applyValidation(e,t){let r=(0,ts.validateTag)(this.getTextContent()),n=t.theme.tagError.split(" "),i=r.issues[0];if(!i||this.isSelected()&&i.hideWhileEditing){e.classList.remove(...n),e.removeAttribute("data-error");return}e.classList.add(...n),e.setAttribute("data-error",i.message)}static importJSON(e){return dz().updateFromJSON(e)}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isTextEntity(){return!0}}function dz(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return aE(new dq(e))}function dW(e){let{text:t}=e;return(0,i.jsx)("span",{className:(0,h.cn)(dP),children:t})}var d$=e.i(6617049);function dU(e){o9().getFirstChild()?.remove(),o9().append(oM().append(lj(e)))}var dV=e.i(4411675);let dK=new Set;function dH(){for(let e of dK)e()}function dG(e){return dK.add(e),()=>dK.delete(e)}function dJ(){let e=(0,A.useProjectIdOrName)(),t=e?`logs-recent-queries:${e}`:"",r=(0,s.useMemo)(()=>t?new dV.LSCache(t,[]):null,[t]),n=(0,s.useRef)([]),i=(0,s.useRef)("[]"),l=(0,s.useCallback)(()=>{let e=r?.get()??[],t=JSON.stringify(e);return t!==i.current&&(i.current=t,n.current=e),n.current},[r]),o=(0,s.useSyncExternalStore)(dG,l,l),a=(0,s.useCallback)(e=>{if(!r)return;let t=e.trim();if(!t)return;let n=r.get().filter(e=>e.query!==t),i=[{query:t,timestamp:Date.now()},...n].slice(0,10);r.set(i),dH()},[r]),u=(0,s.useCallback)(()=>{r&&(r.reset(),dH())},[r]);return(0,s.useMemo)(()=>({recentQueries:o,addQuery:a,clearQueries:u}),[o,a,u])}function dZ(e){return"filter"===e.type?`${e.key}:${e.value}`:e.value}function dX(e){let{stringify:t,searchSuggestions:r}=e,n=(0,s.useRef)(new Map),[i,l]=(0,s.useState)({items:[],search:"",limit:void 0}),o=(0,s.useCallback)(e=>r(Array.from(n.current.values()),e),[r]),a=(0,s.useCallback)((e,i)=>{for(let r of e)n.current.set(t(r),r);l(e=>{let s=r(Array.from(n.current.values()),e.search),l=new Set(e.items.map(t)),o=s.filter(e=>!l.has(t(e))),a=i??e.limit,u=[...e.items,...o];return{...e,limit:a,items:void 0!==a?u.slice(0,a):u}})},[t,r]),u=(0,s.useCallback)((e,t)=>{let r=o(e);l({search:e,limit:t,items:void 0!==t?r.slice(0,t):r})},[o]);return{items:i.items,addItems:a,setSearch:u}}function dQ(e,t){return t?(0,eg.matchSorter)(e.filter(e=>dZ(e)!==t),t,{keys:[dZ]}).sort((e,t)=>e.order-t.order):[...e].sort((e,t)=>e.order-t.order)}function dY(e){return e.query}function d0(e,t){return t?(0,eg.matchSorter)(e.filter(e=>e.query!==t),t,{keys:[e=>e.query]}).sort((e,t)=>t.timestamp-e.timestamp):[...e].sort((e,t)=>t.timestamp-e.timestamp)}function d1(e,t){if(!t)return[];let r=(0,ts.parseSearchTag)(t),n=(e,t)=>t.total-e.total;if("filter"===r.type){let i=e.filter(e=>e.key===r.key);return(0,eg.matchSorter)(i.filter(e=>dZ(e)!==t),r.value,{keys:[e=>e.value]}).sort(n)}return(0,eg.matchSorter)(e.filter(e=>dZ(e)!==t),t,{keys:[dZ]}).sort(n)}let d2=["level:","resource:","environment:","route:","requestPath:","status:","requestType:","host:","method:","cache:","branch:","deploymentId:","deployment:","requestId:","sessionId:","traceId:","invocationId:"],d3=[{key:"environment",value:"production"},{key:"environment",value:"preview"},{key:"level",value:"info"},{key:"level",value:"warning"},{key:"level",value:"error"},{key:"level",value:"fatal"},{key:"resource",value:"function"},{key:"resource",value:"middleware"},{key:"resource",value:"cache"},{key:"resource",value:"rewrite"},{key:"resource",value:"redirect"},{key:"method",value:"GET"},{key:"method",value:"POST"},{key:"method",value:"HEAD"},{key:"method",value:"PUT"},{key:"method",value:"DELETE"},{key:"method",value:"OPTIONS"},{key:"method",value:"PATCH"},{key:"status",value:"200"},{key:"status",value:"201"},{key:"status",value:"204"},{key:"status",value:"301"},{key:"status",value:"302"},{key:"status",value:"304"},{key:"status",value:"400"},{key:"status",value:"401"},{key:"status",value:"403"},{key:"status",value:"404"},{key:"status",value:"500"},{key:"status",value:"502"},{key:"status",value:"503"},{key:"status",value:"504"},{key:"requestType",value:"api"},{key:"requestType",value:"ssr"},{key:"requestType",value:"isr"},{key:"requestType",value:"ppr"},{key:"requestType",value:"rsc"},{key:"requestType",value:"cron"},{key:"cache",value:"HIT"},{key:"cache",value:"MISS"},{key:"cache",value:"STALE"},{key:"cache",value:"PRERENDER"}];function d4(){let[e]=nO(),{recentQueries:t}=dJ(),[r,n]=(0,s.useState)(!1),{items:l,addItems:o,setSearch:a}=dX({stringify:dZ,searchSuggestions:dQ}),{items:u,addItems:d,setSearch:c}=dX({stringify:dY,searchSuggestions:d0}),{items:f,addItems:h,setSearch:g}=dX({stringify:dZ,searchSuggestions:d1}),p=(0,s.useCallback)(e=>{a(e),c(e),g(e,4)},[a,c,g]);(0,s.useEffect)(()=>{o(d2.map((e,t)=>{let r=(0,ts.parseSearchTag)(e);if("filter"!==r.type)throw Error(`Invalid default filter suggestion: ${e}`);return{...r,order:t}}))},[o]),(0,s.useEffect)(()=>{d(t.map(e=>({query:e.query,timestamp:e.timestamp})))},[t,d]),(0,s.useEffect)(()=>{h(d3.map(e=>{let{key:t,value:r}=e;return{type:"filter",key:t,value:r,total:0}}))},[h]);let[m,x]=(0,s.useState)(null),y=(0,s.useMemo)(()=>{if(!m||"filter"!==m.type)return null;let e=d$.SEARCH_FILTER_TO_API_ATTRIBUTE.get(m.key);return e?{attributeName:e,attributeNameSearchQuery:m.value||void 0}:null},[m]),{data:_,isLoading:v}=B({attributeName:y?.attributeName||null,attributeNameSearchQuery:(0,nb.useDebouncedValue)(y?.attributeNameSearchQuery,300),keepPreviousData:!1});(0,s.useEffect)(()=>{_?.rows&&h(_.rows.map(e=>({type:"filter",key:d$.API_ATTRIBUTE_TO_SEARCH_FILTER.get(e.attributeName)||e.attributeName||"",value:e.attributeValue,total:e.total})),8)},[_,h]);let C=f.length+u.length+l.length;(0,s.useEffect)(()=>{j(0)},[C]);let[b,j]=(0,s.useState)(0),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{S.current?.scrollIntoView({block:"nearest"})},[b]);let{filterValuesSuggestions:w,recentSuggestions:k,defaultSuggestions:N,selectedSuggestion:E}=(0,s.useMemo)(()=>{let e=l.map(e=>({...e,isSelected:!1})),t=u.slice(0,3).map(e=>({...e,isSelected:!1})),r=f.map(e=>({...e,isSelected:!1})),n=[...t,...r,...e],i=n.length,s=n[(b+i)%(i+1)];return s&&(s.isSelected=!0),{filterValuesSuggestions:r,recentSuggestions:t,defaultSuggestions:e,allSuggestions:n,selectedSuggestion:s}},[l,u,f,b]),T=(0,s.useCallback)(t=>{e.update(()=>{let e="",r="",i=lZ()||o9().selectEnd();if(i?.getNodes().some(e=>"tag"===e.__type))for(let e of i.getNodes())e.remove();if(""===o9().getTextContent())r=" ";else{let t=i.getStartEndPoints();if(t){let[n]=t,i=n.getNode().getTextContent();" "!==i[n.offset-1]&&(e=" ")," "!==i[n.offset]&&(r=" ")}}t.endsWith(":")?i.insertNodes([lj(`${e}${t}`)]):(i.insertNodes([lj(`${e}${t}${r}`)]),ab(d$.TAG_TRIGGER_SEARCH_AFTER_INSERT),aj(()=>n(!1)))})},[e]),L=(0,s.useCallback)(t=>{e.update(()=>{dU(`${t} `),o9().selectEnd(),ab(d$.TAG_TRIGGER_SEARCH_AFTER_INSERT),aj(()=>n(!1))})},[e]);return((0,s.useEffect)(()=>e.registerUpdateListener(()=>{let t=e.read(()=>{let e=lZ();if(!lO(e))return"";if(""!==e.getTextContent())return null;let t=e.anchor.getNode();return"tag"!==t.getType()?"":t.getTextContent()}),r=t?(0,ts.parseSearchTag)(t):null;x(r),p(r?dZ(r):"")}),[e,p]),(0,s.useEffect)(()=>{let t=e=>E?(e?.preventDefault(),"query"in E?L(E.query):T(dZ(E)),!0):(n(!1),!1);return uO(e.registerCommand(so,t,3),e.registerCommand(st,(e,r)=>!!r.read(()=>(function(){let e=lZ();if(!lO(e)||""!==e.getTextContent())return!1;let t=e.focus.getNode(),r=!t.getNextSibling(),n=t.getTextContentSize()===e.focus.offset;return r&&n})())&&t(e),3))},[e,E,T,L,m]),(0,s.useEffect)(()=>uO(e.registerCommand(sl,e=>(e.preventDefault(),j(e=>e+1),!0),1),e.registerCommand(ss,e=>(e.preventDefault(),j(e=>e-1),!0),1)),[e]),(0,s.useEffect)(()=>uO(e.registerCommand(sS,()=>(n(!0),!1),1),e.registerCommand(sw,()=>(n(!1),!1),1),e.registerCommand(sd,()=>(n(!1),!1),1),e.registerCommand(se,e=>(e.altKey||e.ctrlKey||e.metaKey||"Enter"===e.key||n(!0),!1),1),e.registerCommand(iG,()=>(n(!0),!1),1)),[e]),r&&(0!==C||v))?(0,i.jsxs)("div",{className:"absolute top-full left-0 w-full bg-background-100 mt-2 shadow-menu rounded-lg z-10 max-h-[14lh] overflow-x-hidden overflow-y-auto",children:[0!==C||v?C>0?(0,i.jsxs)("div",{className:"p-1",children:[(0,i.jsx)(d6,{suggestions:k,insertRecentQuery:L,selectedItemRef:S,title:"Recent searches"}),(0,i.jsx)(d5,{suggestions:w,insertSuggestionInInput:T,selectedItemRef:S,title:"Suggestions"}),(0,i.jsx)(d5,{suggestions:N,insertSuggestionInInput:T,selectedItemRef:S,title:"Filters"})]}):null:(0,i.jsx)("div",{className:"p-1",children:(0,i.jsx)("div",{className:"px-2 py-2 flex items-center text-gray-alpha-700",children:(0,i.jsx)("div",{className:"",children:"No suggestions found"})})}),v?(0,i.jsx)("div",{className:C>0?"border-t border-gray-alpha-200":"p-1",children:(0,i.jsx)("div",{className:"px-3 py-2 flex items-center text-gray-alpha-700",children:(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ta.Spinner,{color:"var(--accents-5)",size:12})}),(0,i.jsx)("div",{className:"",children:"Loading..."})]})})}):null]}):null}function d5(e){let{suggestions:t,insertSuggestionInInput:r,selectedItemRef:n,title:s}=e;return 0===t.length?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"px-2 py-2 text-sm font-medium text-gray-alpha-700",children:s}),(0,i.jsx)("ul",{className:"",children:t.map(e=>{let t=dZ(e);return(0,i.jsx)("li",{ref:e.isSelected?n:void 0,className:(0,h.cn)("hover:bg-gray-alpha-100 px-2 py-1.5 flex items-center cursor-pointer rounded-md flex-wrap",{"bg-gray-alpha-100":e.isSelected}),onMouseDown:e=>{e.preventDefault(),r(t)},children:(0,i.jsx)("span",{className:"mr-1",children:(0,i.jsx)(dW,{text:t})})},t)})})]})}function d6(e){let{suggestions:t,insertRecentQuery:r,selectedItemRef:n,title:s}=e;return 0===t.length?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"px-2 py-2 text-sm font-medium text-gray-alpha-700",children:s}),(0,i.jsx)("ul",{className:"",children:t.map(e=>{let t=(0,ts.parseSearchQuery)(e.query).map(e=>e.text);return(0,i.jsx)("li",{ref:e.isSelected?n:void 0,className:(0,h.cn)("hover:bg-gray-alpha-100 px-2 py-1.5 flex items-center cursor-pointer rounded-md flex-wrap",{"bg-gray-alpha-100":e.isSelected}),onMouseDown:t=>{t.preventDefault(),r(e.query)},children:t.map(e=>(0,i.jsx)("span",{className:"mr-1",children:(0,i.jsx)(dW,{text:e})},e))},e.query)})})]})}let d9="application/x-vercel-log-search";function d8(){let[e]=nO(),t=(0,s.useRef)(null);return(0,s.useEffect)(()=>uO(e.registerCommand(sx,e=>{let t=lZ();if(!lO(t))return!1;let r=t.getTextContent();return!!r&&e instanceof ClipboardEvent&&(e.clipboardData?.setData("text/plain",r),e.clipboardData?.setData(d9,"true"),e.preventDefault(),!0)},3),e.registerCommand(sy,e=>{let t=lZ();if(!lO(t))return!1;let r=t.getTextContent();return!!r&&e instanceof ClipboardEvent&&(e.clipboardData?.setData("text/plain",r),e.clipboardData?.setData(d9,"true"),t.removeText(),e.preventDefault(),!0)},3),e.registerCommand(i3,e=>{let r=lZ();if(!lO(r))return!1;let n=e instanceof ClipboardEvent?e.clipboardData:null,i=n?.getData("text/plain");if(!i)return!1;let s=i.replace(/\s+/g," ").trim(),l=n?.getData(d9),o=o9().getTextContent(),a=r.getTextContent(),u="tag"===r.anchor.getNode().__type;return l||u&&o!==a?u?(t.current=r.anchor.offset+i.length,!1):(e.preventDefault(),r.insertText(s),!0):(e.preventDefault(),r.insertText(function(e){let t=/^(?:[a-z0-9]+::?)*([a-z0-9]{5}-\d{13}-[a-z0-9]{12})$/i.exec(e),r=e.includes("requestId");if(t&&!r)return`requestId:${t[1]}`;if(e.startsWith('"')&&e.endsWith('"')||/^[a-z0-9]+$/i.test(e))return e;let n=[...e.matchAll(/(?:^|\s)([a-zA-Z]+):(\S+)/g)];return n.length>0&&n.every(e=>d$.SEARCH_FILTER_TO_QUERY_STATE.has(e[1]))?e:`"${e}"`}(s)),!0)},3),e.registerUpdateListener(()=>{let r=t.current;null!==r&&(t.current=null,e.update(()=>{let e=lZ();if(!lO(e))return;let t=e.anchor.getNode();if("tag"!==t.__type)return;let n=Math.min(r,t.getTextContentSize());e.anchor.set(t.__key,n,"text"),e.focus.set(t.__key,n,"text")}))})),[e]),null}function d7(){let e=o9(),t=e.getFirstChild();if(!t||!o_(t))return;let r=e.getTextContent(),n=(0,ts.parseSearchQuery)(r);if(0===n.length)return;let i=t.getChildren();if(function(e,t,r){let n=[],i=0;for(let e of r)e.start>i&&n.push({type:"text",content:t.slice(i,e.start)}),n.push({type:"tag",content:t.slice(e.start,e.end)}),i=e.end;if(i<t.length&&n.push({type:"text",content:t.slice(i)}),e.length!==n.length)return!1;for(let t=0;t<e.length;t++){let r=e[t],i=n[t],s=r instanceof dq,l=r instanceof lp&&!s;if("tag"===i.type&&!s||"text"===i.type&&!l||r.getTextContent()!==i.content)return!1}return!0}(i,r,n))return;let s=lZ(),l=null;if(lO(s)){let e=s.anchor;l=e.offset;let t=e.getNode();if(t instanceof lp){let r=0;for(let n of i){if(n.getKey()===t.getKey()){l=r+e.offset;break}r+=n.getTextContentSize()}}}t.clear();let o=0;for(let e of n){if(e.start>o){let n=r.slice(o,e.start);t.append(lj(n))}let n=r.slice(e.start,e.end);t.append(dz(n)),o=e.end}if(o<r.length){let e=r.slice(o);t.append(lj(e))}if(null!==l){let e=lH(),r=0;for(let n of t.getChildren()){let t=n.getTextContentSize();if(r+t>=l){let t=l-r;(n instanceof lp||n instanceof dq)&&(e.anchor.set(n.getKey(),t,"text"),e.focus.set(n.getKey(),t,"text"));break}r+=t}o7(e)}}function ce(){let[e]=nO();return(0,s.useEffect)(()=>uO(e.registerNodeTransform(lp,d7),e.registerNodeTransform(dq,d7)),[e]),null}function ct(){let[e]=nO();return(0,s.useEffect)(()=>uO(e.registerCommand(i1,()=>!0,1)),[e]),(0,s.useEffect)(()=>e.registerCommand(i0,()=>!0,1),[e]),(0,s.useEffect)(()=>e.registerNodeTransform(li,e=>{e.replace(lj(" "))}),[e]),null}function cr(){let[e]=nO(),{state:t,setState:r}=(0,I.useLogsQueryState)(),n=(0,s.useRef)(!1),{addQuery:i}=dJ();(0,s.useEffect)(()=>{if(n.current){n.current=!1;return}e.update(()=>{let e=t.search||"";dU(""===e||e.endsWith(":")||e.endsWith(" ")?e:`${e} `),ab(ln)})},[t.search,e]);let l=(0,s.useCallback)((e,t)=>{e.read(()=>{let e=o9().getTextContent();r({search:e});let s=e.trim();s&&(0,ts.parseSearchQuery)(s).every(e=>(0,ts.validateTag)(e.text).isValid)&&i(s),t||(n.current=!0)})},[r,i]);return(0,s.useEffect)(()=>uO(e.registerCommand(so,(e,t)=>(l(t.getEditorState()),!1),1),e.registerCommand(sw,(e,t)=>(l(t.getEditorState(),!0),!1),1)),[e,l]),(0,s.useEffect)(()=>e.registerUpdateListener(e=>{let{editorState:t,tags:r}=e;r.has(d$.TAG_TRIGGER_SEARCH_AFTER_INSERT)&&l(t)}),[e,l]),null}function cn(){let[e]=nO(),[t,r]=(0,s.useState)(null),n=(0,s.useCallback)(e=>{let t=e.getAttribute("data-error");if(t){let n=e.getBoundingClientRect();r({message:t,x:n.left+n.width/2,y:n.bottom})}},[]);return((0,s.useEffect)(()=>e.registerUpdateListener(t=>{let{editorState:i}=t;i.read(()=>{let t=lZ();if(!lO(t))return void r(null);let i=t.anchor.getNode(),s=e.getElementByKey(i.getKey());s?.hasAttribute("data-error")?n(s):r(null)})}),[e,n]),(0,s.useEffect)(()=>{let t=e.getRootElement();if(!t)return;let i=e=>{let t=e.target;t.hasAttribute("data-error")&&n(t)},s=e=>{e.target.hasAttribute("data-error")&&r(null)},l=()=>{r(null)};return t.addEventListener("mouseover",i),t.addEventListener("mouseout",s),t.addEventListener("mouseleave",l),()=>{t.removeEventListener("mouseover",i),t.removeEventListener("mouseout",s),t.removeEventListener("mouseleave",l)}},[e,n]),t)?(0,dn.createPortal)((0,i.jsxs)("div",{className:"fixed z-[10000] pointer-events-none -translate-x-1/2",style:{left:t.x,top:t.y},children:[(0,i.jsx)("div",{className:"w-0 h-0 mx-auto border-[6px] border-transparent border-b-gray-1000"}),(0,i.jsx)("div",{className:"-mt-px px-3 py-2 bg-gray-1000 text-gray-100 text-xs leading-normal rounded-md whitespace-nowrap",children:t.message})]}),document.body):null}function ci(){let[e]=nO();return(0,s.useEffect)(()=>{let t=e.getRootElement();if(!t)return;let r=t=>{let r=t.target,n=r.getAttribute("data-tag-key");if(!n)return;let i=r.getBoundingClientRect();t.clientX-i.left>i.width-20&&(t.preventDefault(),t.stopPropagation(),e.update(()=>{let e=o1(n);e&&(e.remove(),ab(d$.TAG_TRIGGER_SEARCH_AFTER_INSERT))}))};return t.addEventListener("click",r),()=>t.removeEventListener("click",r)},[e]),null}let cs={...dB};function cl(e){console.error(e)}function co(){let{isLoading:e}=(0,ti.useGroupLogs)(),t="Search logs...";return(0,i.jsxs)("div",{className:"relative w-full h-lh",children:[(0,i.jsxs)(uj,{initialConfig:{namespace:"LogSearchInput",theme:cs,onError:cl,nodes:[dq]},children:[(0,i.jsx)(dC,{contentEditable:(0,i.jsx)(dk,{"aria-placeholder":t,placeholder:(0,i.jsx)("div",{className:"absolute inset-0 flex items-center text-gray-700 pl-11 pr-4 pointer-events-none",children:t}),className:"w-full h-full pl-11 pr-4 py-2 bg-background-100 shadow-[0_0_0_1px_var(--ds-gray-400)] hover:shadow-[0_0_0_1px_var(--ds-gray-600)] focus:shadow-[0_0_0_1px_var(--ds-gray-600)] rounded-[6px] outline-none transition-all duration-200"}),ErrorBoundary:dD}),(0,i.jsx)(d4,{}),(0,i.jsx)(ce,{}),(0,i.jsx)(d8,{}),(0,i.jsx)(cr,{}),(0,i.jsx)(ct,{}),(0,i.jsx)(dF,{}),(0,i.jsx)(cn,{}),(0,i.jsx)(ci,{})]}),(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center px-4 pointer-events-none",children:e?(0,i.jsx)(ta.Spinner,{size:16,color:"var(--ds-gray-alpha-600)"}):(0,i.jsx)(dR.MagnifyingGlass,{size:16,color:"gray-alpha-600"})})]})}var ca=e.i(8510056),cu=e.i(6870754),cd=e.i(7437286);function cc(){let{state:{page:e},setState:t}=(0,I.useLogsQueryState)(),{data:r,isLoading:n,isValidating:l,size:o,setSize:a}=(0,ti.useGroupLogs)(),u=(0,s.useRef)(null),d=(0,s.useRef)(void 0),c=(0,cd.useIntersectionObserver)(u,{rootMargin:"200px"}),f=r&&r.length>0,h=r?.[r.length-1].hasMoreRows,g=n||o>0&&r&&void 0===r[o-1],{team:m}=(0,_.useAccount)(),x=m?.billing?.plan??"hobby",{maxRetention:y}=(0,eu.useUserRetention)(),v=function(e,t){let r=(0,es.sub)(Date.now(),e).getTime(),n=t?.[t.length-1].rows;if(!n||0===n.length)return!0;let i=new Date(n[n.length-1].timestamp).getTime(),s=new Date(n[0].timestamp).getTime();return!!(i&&i>=r&&s&&s>=r)}(y,r),C=(0,s.useCallback)(()=>{!n&&!l&&f&&h&&v&&t({page:e+1},{replace:!0})},[f,h,n,l,e,t,v]);return(0,s.useEffect)(()=>{a(e)},[e]),(0,s.useEffect)(()=>{c?.isIntersecting&&!d.current&&C(),d.current=c?.isIntersecting},[c?.isIntersecting,C]),(0,i.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,i.jsx)("div",{"data-testid":(0,p.tid)("group-logs","load-more-logs"),ref:u,style:{padding:"var(--geist-gap) 0",visibility:void 0===r?"hidden":"visible",minWidth:"12rem"},children:h&&v&&(!l||g)||void 0===r?(0,i.jsx)(cu.LoadMoreButton,{disabled:!1,loading:g||void 0===r,noGap:!0,onClick:C}):(!1===h||!v)&&(0,i.jsx)("div",{style:{padding:"var(--geist-gap)"},children:(0,i.jsx)("p",{className:`text-copy-14 ${rx.default.screenReaderSelect}`,style:{color:"var(--accents-5)"},tabIndex:0,children:v||"enterprise"===x?"No more logs to show within selected timeline":"The older logs have expired. You can upgrade your plan to store more logs"})})})})}var cf=e.i(5431818),ch=e.i(615673);let cg=(0,s.forwardRef)(function(e,t){let{showSkeleton:r=!1,onScroll:n}=e;return r?(0,i.jsx)(cx,{}):(0,i.jsx)(cp,{onScroll:n,ref:t})}),cp=(0,s.forwardRef)(function(e,t){let{onScroll:r}=e,{setState:n,state:{selectedLogId:l,panelState:o}}=(0,I.useLogsQueryState)(),{data:a,error:u,isLoading:d}=(0,ti.useGroupLogs)(),c=tl(),[f,h]=(0,s.useState)({rows:[],rowsIdSet:new Set});(0,s.useEffect)(()=>{let e=function e(t){if(0===t.length)return[];if(1===t.length)return t[0];if(t.length>2){let r=Math.floor(t.length/2);return e([e(t.slice(0,r)),e(t.slice(r))])}let[r,n]=t,i=[],s=0,l=0;for(;s<r.length&&l<n.length;){let e=r[s],t=n[l],o=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();o<0?(i.push(e),s++):(o>0?i.push(t):(i.push(e),s++),l++)}return i.concat(r.slice(s)).concat(n.slice(l))}((a||[]).map(e=>e.rows??[]));h(t=>{let{rowsIdSet:r}=t;return{rows:e.map(e=>({...e,isNew:!r.has(e.requestId)})),rowsIdSet:new Set(e.map(e=>e.requestId))}})},[a]);let g=(0,s.useMemo)(()=>{if(!c.length||0===f.rows.length)return f.rows;let e=c.map(e=>e.toLowerCase()),t=f.rows.filter(t=>{let r=t.logs.some(t=>e.some(e=>t.message.toLowerCase().includes(e))),n=e.some(e=>t.requestPath.toLowerCase().includes(e)),i=e.some(e=>t.domain.toLowerCase().includes(e));return r||n||i});return t.length>0?t:f.rows},[f.rows,c]),p=a?.some(e=>e.rows&&e.rows.length>0),m=0===f.rows.length&&(void 0===a||d||p),x=(0,s.useCallback)(e=>{l===e.requestId?n({panelState:"closed"===o?"opened":"closed"}):n({selectedLogId:e.requestId})},[n,l,o]);if(u)return(0,i.jsx)(cm,{children:(0,i.jsx)(rk,{error:u})});if(m)return(0,i.jsx)(cx,{});let y=g.length>0;return(0,i.jsx)(cm,{hasLogs:y,children:y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:cf.default.logRowsContainer,onScroll:r,ref:t,children:(0,i.jsx)("div",{className:cf.default.logRowsWrapper,style:{paddingTop:"var(--geist-space)"},children:(0,i.jsx)(r_,{logRows:g,onRowSelect:x,selectedLogId:l})})}),(0,i.jsx)(cc,{})]}):(0,i.jsx)(rN,{})})});function cm(e){let{children:t,hasLogs:r=!1}=e;return(0,i.jsx)("div",{className:(0,g.clsx)(ch.default.container,{[ch.default.hasLogs]:r}),style:{position:"relative",zIndex:2,flex:1},children:t})}function cx(){return(0,i.jsx)("div",{style:{padding:"var(--geist-space) 0"},children:(0,i.jsx)(rb,{})})}var cy=e.i(4819890),c_=e.i(1793900),cv=e.i(198667),cC=e.i(5468328);let cb={data:void 0,error:void 0,isStreaming:!1,hasReceivedData:!1};function cj(e,t){switch(t.type){case"RESET":return cb;case"INIT":return{data:t.data,error:void 0,isStreaming:!0,hasReceivedData:!1};case"UPDATE":return{...e,data:t.data,hasReceivedData:!0};case"DONE":return{...e,isStreaming:!1};case"ERROR":return{...e,isStreaming:!1,error:t.error};case"MUTATE":return{...e,data:void 0,hasReceivedData:!1};default:return e}}let cS=(0,s.createContext)(null);function cw(e){let{children:t}=e,r=function(){var e;let t,{skip:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:n}=(0,O.useProject)((0,A.useProjectIdOrName)()),{team:i,isLoading:l}=(0,_.useAccount)(),o=(0,I.useLogsApiParams)(),a=(0,rM.useServerFlag)("enable-logs-timeseries-streaming",!1),u=o.endDate??new Date,d=(e=o.startDate,(t=u.getTime()-e.getTime())<=(0,tk.default)("2m")?1:t<=(0,tk.default)("5m")?2:t<=(0,tk.default)("10m")?5:t<=(0,tk.default)("30m")?10:t<=(0,tk.default)("50m")?20:t<=(0,tk.default)("75m")?30:t<=(0,tk.default)("2.5h")?60:t<=(0,tk.default)("5h")?120:t<=(0,tk.default)("7.5h")?300:t<=(0,tk.default)("24h")?600:t<=(0,tk.default)("48h")?1200:t<=(0,tk.default)("75h")?1800:t<=(0,tk.default)("150h")?3600:t<=(0,tk.default)("300h")?7200:t<=(0,tk.default)("600h")?14400:t<=(0,tk.default)("1200h")?28800:t<=(0,tk.default)("1800h")?43200:86400),c=u.getTime()-o.startDate.getTime(),f=a&&!o.live&&c>216e5,h=(0,s.useMemo)(()=>{if(r||l||!n)return null;let e=null!==i?i.id:null;return null===e?null:{interval:d,...(0,F.buildLogsFilterParams)({projectId:n.id,ownerId:e,startDate:o.startDate.getTime(),endDate:o.live?void 0:u.getTime(),search:o.search,defaultDeploymentIds:o.deploymentIds,myLogs:o.myLogs,hasTraces:o.hasTraces,useClickHouseLogs:o.useClickHouseLogs,useProgressiveChunking:o.useProgressiveChunking})}},[r,l,n,i,d,o,u]),g=f&&!!h,p=(0,R.useAbortableFetcher)((e,t)=>(0,tf.fetchAPI)(e,{throwOnHTTPError:!0,signal:t}),{data:[]}),m=(0,L.default)(()=>g||!h?null:`${D.API_LOGS}/request-logs/timeseries${(0,M.encode)(h)}`,p,{refreshInterval:5e3*!!o.live,keepPreviousData:!0,revalidateOnFocus:o.live,revalidateOnReconnect:o.live}),[x,y]=(0,s.useReducer)(cj,cb),v=(0,s.useRef)(null),C=(0,s.useMemo)(()=>g&&h?JSON.stringify(h):null,[g,h]);(0,s.useEffect)(()=>{let e=()=>{v.current&&(v.current.close(),v.current=null)};if(!C||!h){e(),y({type:"RESET"});return}let t=h.startDate,r=h.endDate,n=1e3*h.interval;if(!t||!r||!n){e(),y({type:"RESET"});return}let i=Math.floor(t/n)*n,s=Math.ceil(r/n)*n,l=[];for(let e=i;e<=s;e+=n)l.push({name:new Date(e).toISOString(),success:0,error:0});y({type:"INIT",data:{data:l}});let o=new EventSource(`${D.API_LOGS}/request-logs/timeseries/stream${(0,M.encode)(h)}`,{withCredentials:!0});v.current=o;let a=new Map;return o.onmessage=t=>{try{let r=JSON.parse(t.data);if(r.done){e(),y({type:"DONE"});return}if(r.error&&!r.data)return;if(r.data){for(let e of r.data){let t=new Date(e.name).getTime();a.has(t)||a.set(t,{name:e.name,success:e.success,error:e.error})}let e=l.map(e=>{let t=new Date(e.name).getTime();return a.get(t)||e});y({type:"UPDATE",data:{data:e}})}}catch{}},o.onerror=()=>{e(),a.size?y({type:"DONE"}):y({type:"ERROR",error:Error("Failed to stream timeseries data")})},()=>{e()}},[C]);let b=(0,s.useCallback)(async()=>(v.current&&(v.current.close(),v.current=null),y({type:"MUTATE"}),x.data),[x.data]);return g?{data:x.data,error:x.error,isLoading:x.isStreaming&&!x.hasReceivedData,isValidating:x.isStreaming,mutate:b,interval:d}:{...m,interval:d}}();return(0,i.jsx)(cS.Provider,{value:r,children:t})}function ck(){let e=(0,s.useContext)(cS);if(!e)throw Error("useLogsTimeseriesContext must be used within LogsTimeseriesProvider");return e}function cN(e){let{showSkeleton:t}=e,{setState:r,state:n}=(0,I.useLogsQueryState)(),{live:l,startDate:o,endDate:a}=(0,I.useLogsApiParams)(),u=(0,s.useRef)(null),{isLoading:d,mutate:f,isValidating:h}=(0,ti.useGroupLogs)(),{mutate:g}=ck(),p=!!(n.startDate&&n.endDate),m=(0,s.useCallback)(()=>{d||u.current&&Date.now()-u.current<1e3||(u.current=Date.now(),r({refreshedAt:Date.now()}),f(),g())},[d,f,g,r]),x=(0,i.jsx)(c.Button,{"aria-label":"Refresh Logs",disabled:t||d||p,onClick:m,shape:"square",svgOnly:!0,type:"secondary",children:h?(0,i.jsx)(ta.Spinner,{color:"var(--accents-5)",size:16}):(0,i.jsx)(cv.RefreshClockwise,{})});return(0,i.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,i.jsx)(c.Button,{className:l?"!ring-1 ring-blue-700":"",disabled:t,onClick:()=>{!l&&window.scrollY>=80&&window.scrollTo(0,0),l&&r({startDate:o,endDate:a}),l||r({live:!0})},prefix:l?(0,i.jsx)(c_.PauseCircle,{className:"!text-blue-900"}):(0,i.jsx)(cy.PlayCircle,{}),type:"secondary",children:(0,i.jsx)("span",{className:l?"!text-blue-900":"",children:"Live"})}),p?(0,i.jsx)(cC.Tooltip,{text:"Refresh is disabled for fixed time ranges. Use a relative time range or Live mode to see new logs.",children:x}):x]})}var cE=e.i(8556491),cT=e.i(7957424),cL=e.i(1903055),cM=e.i(167223);function cD(){let e=null!==(0,y.useSearchParams)(),{state:{search:t},setState:r}=(0,I.useLogsQueryState)(),[n,l]=(0,s.useState)(""),[o,a]=(0,s.useState)(!1),u=(0,s.useRef)(null),d=(0,s.useRef)(t),c=(0,nb.useDebouncedCallback)(e=>{r({search:e,preset:null})},300);return(0,s.useEffect)(()=>{e&&!o&&d.current!==t&&(l(t||""),d.current=t)},[e,t,o]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,r=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!u.current||t&&r||(e.preventDefault(),u.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,i.jsx)(cM.default,{"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",onBlur:()=>a(!1),onChange:e=>{c(e.target.value),l(e.target.value)},onFocus:()=>a(!0),placeholder:"Search logs…",ref:u,scrollOnClear:!1,value:o?n:t,width:"100%"})]})}function cA(){return(0,i.jsxs)("div",{className:"geist-show-on-mobile",style:{width:"100%"},children:[(0,i.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,i.jsx)(cM.default,{"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",placeholder:"Search logs…",scrollOnClear:!1,width:"100%"})]})}var cO=e.i(9321858),cI=e.i(7230346),cF=e.i(512540);let cR="logsSidebarWidth";function cP(e){let{left:t,right:r,bottom:n}=e,i=cF.default.get(cR);if(i){let{left:e,right:s,bottom:l}=JSON.parse(i);cF.default.set(cR,JSON.stringify({left:t??e,right:r??s,bottom:n??l}))}else cF.default.set(cR,JSON.stringify({left:t??270,right:r??400,bottom:n??400}))}var cB=e.i(6462291),cq=e.i(1609062),cz=e.i(1371552),cW=e.i(6120006),c$=e.i(5425574),cU=e.i(3386654),cV=e.i(279232),cK=(0,cW.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:c$.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:cB.XAxis},{axisType:"yAxis",AxisComp:cU.YAxis}],formatAxisMap:cV.formatAxisMap}),cH=e.i(3276970),cG=e.i(17306),cJ=e.i(7797615);let cZ={error:"var(--ds-red-700)",success:"hsla(var(--ds-gray-500-value), 0.8)"},cX={top:15,right:4,bottom:-10},cQ={y:!0},cY={fill:"var(--ds-gray-300)"},c0={y:5},c1={stroke:"var(--ds-gray-300)"},c2={stroke:"var(--ds-gray-300)"},c3={fontSize:"0.6rem"},c4={error:"Error",success:"Success"};function c5(e){let{value:t,color:r,label:n}=e;return(0,i.jsxs)("div",{className:"flex flex-1 items-center gap-x-2",children:[(0,i.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:r}}),(0,i.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,i.jsx)("span",{children:n})," ",(0,i.jsx)("span",{className:"font-medium tabular-nums",children:(0,cJ.formatNumberCompact)(t)})]})]})}function c6(e){let{interval:t}=ck();return e.payload&&0!==e.payload.length&&e.active?(0,i.jsxs)("div",{className:"items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",children:[(0,i.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:e.payload.map(e=>(0,i.jsx)(c5,{color:cZ[e.dataKey],label:c4[e.dataKey],value:Number(e.value)},e.dataKey))}),(0,i.jsx)("div",{className:"px-1 pt-0.5 text-center text-gray-900",children:(0,eZ.format)(new Date(e.payload[0].payload.name),`HH:mm${t%60==0?"":":ss"} ${t>300?"iii MMM dd":""}`)})]},`ts-${e.label}`):null}function c9(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)(""),[l,o]=(0,s.useState)("dataMin"),[a,u]=(0,s.useState)("dataMax"),{onSelectionChange:d}=(()=>{let{interval:e}=ck(),{setState:t}=(0,I.useLogsQueryState)();return{onSelectionChange:(0,s.useCallback)(r=>{if(1===r.length){let[n]=r;t({startDate:new Date(n.name),endDate:(0,tu.addSeconds)(new Date(n.name),e)});return}let n=r[0],i=r[r.length-1];"name"in n&&"name"in i&&t({startDate:new Date(n.name),endDate:new Date(i.name)})},[t,e])}})(),{startDate:c,endDate:f}=(0,I.useLogsApiParams)(),{data:h,interval:p,isLoading:m}=ck(),x=(0,s.useMemo)(()=>h&&h.data?h.data:(0,cG.range)(c.getTime(),f?.getTime(),1e3*p).map(e=>({name:new Date(e).toISOString(),error:0,success:0})),[h,p,c,f]),y=(0,s.useCallback)(e=>{t(e.activeLabel||"")},[]),_=(0,s.useCallback)(t=>{e&&n(t.activeLabel||"")},[e]),v=(0,s.useCallback)(i=>{let s=r||i.activeLabel||"";if(!e||!s){t(""),n("");return}let[l,a]=[new Date(e).getTime(),new Date(s).getTime()];l>a&&([l,a]=[a,l]),o(l),u(a),t(""),n("")},[e,r]);(0,s.useEffect)(()=>{"number"==typeof l&&"number"==typeof a&&(d(x.slice(l,a+1)),o("dataMin"),u("dataMax"))},[l,a,x,d]);let C=(0,s.useMemo)(()=>(0,g.clsx)({"!cursor-crosshair":!m,"pointer-events-none":m,"opacity-50 transition-opacity duration-500":h&&m}),[m,h]),b=(0,s.useCallback)(e=>{let t=x[e]?.name;return t?p<60?(0,eZ.format)(new Date(t),"HH:mm:ss"):p<=600?(0,eZ.format)(new Date(t),"HH:mm"):(0,eZ.format)(new Date(t),"MMM dd"):""},[x,p]);return(0,i.jsx)(cz.ResponsiveContainer,{height:54,width:"100%",children:(0,i.jsxs)(cK,{className:C,data:x,margin:cX,onMouseDown:y,onMouseMove:_,onMouseUp:v,children:[!m&&(0,i.jsx)(cq.Tooltip,{allowEscapeViewBox:cQ,animationDuration:0,content:c6,cursor:cY,position:c0}),(0,i.jsx)(c$.Bar,{animationDuration:0,dataKey:"error",fill:cZ.error,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),(0,i.jsx)(c$.Bar,{animationDuration:0,dataKey:"success",fill:cZ.success,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),e&&r?(0,i.jsx)(cH.ReferenceArea,{strokeOpacity:.3,x1:e,x2:r}):null,(0,i.jsx)(cB.XAxis,{axisLine:c1,interval:"preserveStartEnd",minTickGap:300,style:c3,tickFormatter:b,tickLine:c2})]})})}var c8=e.i(9166951);function c7(e){let{className:t,tooltipClassName:r}=e,{state:n,setState:s}=(0,I.useLogsQueryState)();return(0,i.jsx)(cC.Tooltip,{className:r,desktopOnly:!0,text:"Show requests from this browser",children:(0,i.jsxs)(c.Button,{"aria-label":"Enable My Logs",className:(0,g.clsx)("*:overflow-visible",n.myLogs&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",t),"data-active":n.myLogs,onClick:()=>{let e=!n.myLogs;s({myLogs:e,preset:null}),w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"my-logs-toggle",action:e?"Enable My Logs":"Disable My Logs"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,i.jsx)(c8.User,{className:(0,g.clsx)(n.myLogs&&"translate-y-[-3px]","transition-transform duration-100")}),(0,i.jsx)("div",{className:(0,g.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",n.myLogs?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var fe=e.i(6097977);function ft(e){let{className:t,tooltipClassName:r}=e,{state:n,setState:s}=(0,I.useLogsQueryState)();return(0,i.jsx)(cC.Tooltip,{className:r,desktopOnly:!0,text:"Show requests that have traces",children:(0,i.jsxs)(c.Button,{"aria-label":"Enable Has Traces",className:(0,g.clsx)("*:overflow-visible",n.hasTraces&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",t),"data-active":n.hasTraces,onClick:()=>{let e=!n.hasTraces;s({hasTraces:e,preset:null}),w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"has-traces-toggle",action:e?"Enable Has Traces":"Disable Has Traces"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,i.jsx)(rg.Traces,{className:(0,g.clsx)(n.hasTraces&&"translate-y-[-3px]","transition-transform duration-100")}),(0,i.jsx)("div",{className:(0,g.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",n.hasTraces?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var fr=e.i(3748432),fn=e.i(7780974),fi=e.i(7589392);function fs(e){var t;let r,{isLoadingEnvs:c,allEnvironments:x,sidebarWidth:k}=e,{state:N,setState:E}=(0,I.useLogsQueryState)(),{selectedLogId:T,panelState:L}=N,{team:M,isLoading:D}=(0,_.useAccount)(),A=(0,v.useIsMobile)(),O=(0,v.useIsTablet)(),{topOffset:F}=(0,Q.usePageConfig)(),R="true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH&&O?0:F,[P,B]=(0,s.useState)(!1),{getExport:q}=(0,fe.useGroupLogsExport)(),z=(0,rM.useServerFlag)("enable-new-logs-search-bar",!1),{data:W}=(0,tt.useSelectedLog)(),$=(0,y.useParams)(),{can:U,isLoading:V}=(0,b.default)(),K=!M||U(j.Action.Read,j.Resource.Logs),H=V||D,{success:G}=(0,f.useToasts)(),[J,Z]=(0,s.useState)(!1),X=M?.billing?.plan==="hobby",Y=M?.billing?.plan==="pro"&&"trialing"===M.billing.status,ee=U(j.Action.Create,j.Resource.Drain)&&!(X||Y),et=(0,s.useCallback)(e=>{w.analytics.track(fn.VercelActivityAction.DrainsModalConverted,{source:"logs-more-options",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy},{send_to:{data_warehouse_legacy:!0}}),$?.teamSlug&&$?.project&&G({text:"Drain successfully added",action:"View project drains",actionHref:`/${$.teamSlug}/${$.project}/settings/drains`})},[$?.teamSlug,$?.project,G]),er="auto"===L?(W?.logs.length||0)>0:"opened"===L;(0,s.useEffect)(()=>{er&&E({panelState:"auto"===L?"opened":L})},[er,L]);let en=(0,s.useCallback)(()=>{E({selectedLogId:void 0})},[E]),ei=(0,s.useRef)(null),es=(0,s.useRef)(null),el=(0,s.useRef)(null),eo=(0,s.useRef)(null),ea=(0,s.useRef)(null),eu=(0,s.useRef)(null),ed=(0,s.useRef)(null),ec=(0,s.useRef)(null),[ef,eh]=(0,s.useState)(k.left),[eg,ep]=(0,s.useState)(k.right),[em,ex]=(0,s.useState)(k.bottom),[ey,e_]=(0,s.useState)(!1),ev=e=>{eh(e),cP({left:e})},eC=e=>{ep(e),cP({right:e})},eS=`${ef}px calc(100% - ${ef}px)`,ek=(t=e=>{let t=null!==ed.current;ed.current=e.currentTarget.scrollLeft,t||requestAnimationFrame(()=>{ea.current&&null!==ed.current&&(ea.current.scrollLeft=ed.current),ed.current=null})},r=(0,s.useRef)(0),e=>{let n=e.currentTarget.scrollLeft;n!==r.current&&(r.current=n,t(e))});(0,s.useEffect)(()=>{function e(){if("true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH){if(es.current){let e=Math.max(R+147,es.current.getBoundingClientRect().top);es.current.style.top=`${e}px`,el.current&&(el.current.style.height=`calc(100vh - ${e}px)`)}}else{if(!eo.current)return;let e=Math.max(R,eo.current.getBoundingClientRect().top),t=e+147;eo.current.style.height=`calc(100vh - ${e}px)`,es.current&&(es.current.style.top=`${t}px`),el.current&&(el.current.style.height=`calc(100vh - ${t}px)`)}}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[R,T]);let eN=function(e,t){let[r,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let r=(0,C.throttle)(()=>{if(!t.current||!e.current)return;let{top:r}=t.current.getBoundingClientRect(),{bottom:i}=e.current.getBoundingClientRect();r<=i?n(!0):n(!1)},200);return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[e,t]),r}(ea,eu),[eE,eT]=(0,s.useState)(null),eL=`max(min(${eg}px, 50vw), 350px)`;return(0,i.jsxs)(fr.ConditionalNavigationMarker,{enabled:!c,phase:"content",label:"LogsMain",children:[(0,i.jsxs)("div",{className:"tailwind-preflight",style:{display:"flex",flexFlow:"column"},children:[K||H||!M?null:(0,i.jsx)(cE.AdditionalPermissionsRequiredModal,{actionLabel:"view Runtime Logs",role:M.membership?.role,team:M,dataTestId:(0,p.tid)("group-logs","no-permissions-card")}),K||V?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{flexGrow:1},children:(0,i.jsxs)("div",{className:(0,h.cn)("block h-full",("true"===n.default.env.NEXT_PUBLIC_TESTMODE||"true"===n.default.env.NEXT_PUBLIC_TESTSERVER||"1"!==n.default.env.NEXT_PUBLIC_DASH)&&"@md-page:grid"),style:{gridTemplateColumns:eS},children:["true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?(0,i.jsx)(eb,{allEnvironments:x,isLoadingEnvs:c}):(0,i.jsxs)("div",{className:"geist-hide-on-mobile",ref:ei,style:{borderRight:"1px solid var(--accents-2)",position:"relative",zIndex:1},children:[(0,i.jsx)(ca.DraggableBorder,{element:ei,onReset:()=>{ev(270)},onWidthChange:e=>{let t=Math.min(e,window.innerWidth/3);ev(t=t<230?0:t)},position:"right"}),(0,i.jsx)("div",{ref:eo,style:{position:"sticky",top:R,height:"100%",background:"var(--geist-background)",contain:"layout"},children:(0,i.jsx)("div",{className:"flex flex-col overflow-auto h-full p-3",tabIndex:-1,children:(0,i.jsx)(eb,{allEnvironments:x,isLoadingEnvs:c})})})]}),(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",position:"relative",height:"100%",zIndex:2},children:[(0,i.jsxs)("div",{className:(0,g.clsx)("flex flex-col items-stretch justify-start flex-initial sticky z-[3]",cI.default.logHeader,"true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?"bg-[var(--ds-background-200)]":"bg-[var(--ds-background-100)]"),style:{position:"sticky",top:R},children:[(0,i.jsxs)("div",{style:{padding:"var(--geist-gap-half) var(--geist-gap-half) 0 var(--geist-gap-half)"},children:[(0,i.jsxs)("div",{className:"flex flex-col @md-page:flex-col @lg-page:flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,i.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial grow",children:["true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?null:(0,i.jsx)(fl,{className:"hidden shrink-0 @lg-page:block",onClick:()=>0===ef?ev(270):ev(0)}),(0,i.jsx)(c7,{tooltipClassName:"hidden @lg-page:block shrink-0"}),(0,i.jsx)(ft,{tooltipClassName:"hidden @lg-page:block shrink-0"}),(0,i.jsx)(s.Suspense,{fallback:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(cA,{}),(0,i.jsx)(nL,{})]}),children:A?(0,i.jsx)(cD,{}):z?(0,i.jsx)(co,{}):(0,i.jsx)(nT,{})})]}),(0,i.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,i.jsx)(ew,{className:"@md-page:hidden relative",onClick:()=>B(!0)}),"true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?null:(0,i.jsx)(fl,{className:"hidden shrink-0 @md-page:block @lg-page:hidden",onClick:()=>0===ef?ev(270):ev(0)}),(0,i.jsx)(c7,{className:"shrink-0",tooltipClassName:"@lg-page:hidden"}),(0,i.jsx)(ft,{className:"shrink-0",tooltipClassName:"@lg-page:hidden"}),(0,i.jsx)("div",{className:"flex-1 @lg-page:hidden"}),(0,i.jsx)(cN,{showSkeleton:V}),(0,i.jsxs)(a.MenuContainer,{position:"bottom-end",children:[(0,i.jsx)(o.MenuButton,{"aria-label":"Query Actions",shape:"square",size:"small",style:{height:"40px",width:"40px"},svgOnly:!0,type:"secondary",children:(0,i.jsx)(m.MoreVertical,{})}),(0,i.jsxs)(l.Menu,{width:"160px",children:[H?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.MenuItem,{disabled:!ee,onClick:()=>{Z(!0),w.analytics.track(fn.VercelActivityAction.DrainsModalOpened,{source:"logs-more-options"},{send_to:{data_warehouse_legacy:!0}})},children:"Add Drain"}),(0,i.jsx)(u.MenuDivider,{})]}),(0,i.jsx)(d.MenuItem,{onClick:()=>{w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as CSV"}),eT("csv")},children:"Export to CSV"}),(0,i.jsx)(d.MenuItem,{onClick:()=>{w.analytics.track(S.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as JSON"}),eT("json")},children:"Export to JSON"})]})]})]})]}),(0,i.jsx)(c9,{}),(0,i.jsx)(ry,{ref:ea})]}),(0,i.jsx)("div",{className:(0,g.clsx)(cI.default.logGradient,{[cI.default.show]:eN})})]}),(0,i.jsx)(cg,{onScroll:ek,ref:eu,showSkeleton:V}),(0,i.jsxs)("div",{className:"fixed bottom-0 hidden transform-gpu border-t border-gray-300 bg-background-100 @md-page:block",ref:ec,style:{left:"true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?"var(--sidebar-width)":`${ef}px`,right:eL,height:er?400===em?"min(400px, 35vh)":`max(min(70vh, ${em}px), 240px)`:49,boxShadow:"var(--ds-shadow-large)",transition:ey?"none":"height 0.2s",display:T?"block":"none",zIndex:3},children:[er?(0,i.jsx)(ca.DraggableBorder,{element:ec,onStartDrag:()=>{e_(!0)},onStopDrag:()=>{e_(!1)},onWidthChange:e=>{ex(e),cP({bottom:e})},position:"top"}):null,(0,i.jsx)(rq,{collapsed:!er,onToggleCollapse:()=>{E({panelState:er?"closed":"opened"})}})]})]}),T?(0,i.jsxs)("div",{className:"fixed bottom-0 right-0 hidden translate-x-0 translate-y-0 transform-gpu overflow-y-auto border-t border-t-gray-400 bg-background-100 @md-page:block z-[2]",ref:es,style:{width:eL,boxShadow:"var(--ds-shadow-large)",top:"true"!==n.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==n.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===n.default.env.NEXT_PUBLIC_DASH?203:247},children:[(0,i.jsx)(ca.DraggableBorder,{element:es,onReset:()=>{eC(400)},onWidthChange:e=>{eC(Math.min(Math.max(e,400),window.innerWidth/2))},position:"left"}),(0,i.jsx)("div",{className:"hidden overflow-y-auto @md-page:flex",ref:el,children:(0,i.jsx)(rI.TraceViewerPanel,{className:"z-0 border-none",children:(0,i.jsx)(r2,{onClose:en,selectedLogId:T})})})]}):null]})}),(0,i.jsx)(ej,{active:P,allEnvironments:x,isLoadingEnvs:c,onDismiss:()=>B(!1)}),(0,i.jsx)(r1,{onClose:en,selectedLogId:T}),$?.teamSlug&&ee?(0,i.jsx)(fi.DrainModals,{isOpen:J,closeModal:()=>Z(!1),teamSlug:$.teamSlug,projectIdOrSlug:$.project,onDrainCreated:et,drain:null,drainType:"logs"}):null]}):null]}),eE?(0,i.jsx)(cO.GroupExportModal,{format:eE,getExport:q,onClose:()=>{eT(null)}}):null]})}function fl(e){let{className:t,onClick:r}=e;return(0,i.jsx)(c.Button,{"aria-label":"filter sidebar",className:t,onClick:r,shape:"square",svgOnly:!0,type:"secondary",children:(0,i.jsx)(x.Filter,{})})}e.s(["GroupLogs",0,function(e){let{sidebarWidth:t,...r}=e,{project:n}=(0,y.useParams)()??{},l=(0,O.useProject)(n),{trackLogPageVisit:o}=U(),{data:{environments:a},isLoading:u}=(0,cT.useAllEnvironments)(l.data?.id??"");return(0,s.useEffect)(()=>{o()},[o]),(0,s.useEffect)(()=>{let e=document.documentElement.style.overscrollBehaviorY,t=document.body.style.overscrollBehaviorY;return document.documentElement.style.overscrollBehaviorY="none",document.body.style.overscrollBehaviorY="none",()=>{document.documentElement.style.overscrollBehaviorY=e,document.body.style.overscrollBehaviorY=t}},[]),(0,cL.default)(l.error),(0,i.jsx)(Q.PageConfigProvider,{...r,children:(0,i.jsx)(rA.GroupLogsProvider,{children:(0,i.jsx)(cw,{children:(0,i.jsx)(fs,{allEnvironments:a,isLoadingEnvs:u,sidebarWidth:t})})})})}],6687520)}]);

//# debugId=fbdf3b4b-3ec8-3573-0c62-f0461a53cb39
//# sourceMappingURL=12e40e605d7051a9.js.map