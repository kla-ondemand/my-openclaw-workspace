;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5648ac54-16e5-b565-c57f-75e36cebc0ff")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4643311,e=>{e.v({badge:"disclosure-module__kAv1ia__badge",button:"disclosure-module__kAv1ia__button",collapseContent:"disclosure-module__kAv1ia__collapseContent",collapseGroup:"disclosure-module__kAv1ia__collapseGroup",icon:"disclosure-module__kAv1ia__icon",iconWrapper:"disclosure-module__kAv1ia__iconWrapper",open:"disclosure-module__kAv1ia__open"})},7580732,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),s=e.i(9722978),a=e.i(1752298),l=e.i(7807066),n=e.i(6226725),i=e.i(2037703),o=e.i(692265),u=e.i(4643311);let d=e=>{let{defaultExpanded:d=!1,title:c,contentClassName:m,count:f,id:g,onToggle:h,onExpand:p,children:v,className:b,buttonClassName:x,onClearFilter:y,..._}=e,[j,I]=(0,r.useState)(d);(0,r.useEffect)(()=>{I(d)},[d]);let T=(0,i.useCollapse)(),C=(0,o.useId)("collapse-section-"),E=(0,o.useId)("collapse-button-"),[w,{height:N}]=(0,a.default)(),S=(0,r.useCallback)(()=>I(!j),[j]),L=(0,r.useMemo)(()=>T?0===T.selected.size?j:T.selected.has(c):j,[T,j,c]),P=(0,r.useCallback)(()=>{"function"==typeof h&&h(),L||"function"!=typeof p||p(),T?T.onChange(L?"":c):S()},[T,L,c,h,S,p]);return(0,t.jsxs)("div",{className:(0,s.clsx)(u.default.collapse,{[u.default.context]:T},b),id:g,..._,children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:(0,t.jsx)("button",{"aria-controls":C,"aria-disabled":L?d:void 0,"aria-expanded":L,"aria-label":c,className:(0,s.clsx)("geist-reset",u.default.button,{[u.default.open]:L},x),id:E,onClick:P,children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start flex-initial",children:[(0,t.jsx)("span",{className:u.default.iconWrapper,children:(0,t.jsx)("span",{className:(0,s.clsx)(u.default.icon,{[u.default.open]:L}),children:(0,t.jsx)(l.ChevronRight,{"aria-hidden":"true",size:16})})}),(0,t.jsx)("span",{className:u.default.text,children:c})]}),f?(0,t.jsxs)("span",{"aria-label":`Clear ${c} filter`,className:u.default.badge,onClick:e=>{e.stopPropagation(),y?.()},onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),y?.())},role:"button",tabIndex:0,children:[(0,t.jsx)(n.CrossCircle,{color:"gray-700"}),(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:f})]}):null]})})}),(0,t.jsx)("div",{"aria-labelledby":E,className:u.default.collapseContent,id:C,role:"region",style:{height:L?0!==N?N:void 0:0,visibility:L?"visible":"hidden"},children:(0,t.jsx)("div",{className:m,ref:w,children:v})})]})};d.displayName="Disclosure";let c=(0,r.memo)(d);e.s(["Disclosure",0,c])},7033605,7209054,294613,8063555,6094744,6617049,4465448,3813596,e=>{"use strict";var t=e.i(8660982),r=e.i(1233856),s=e.i(5677444),a=e.i(409142),l=e.i(4205214),n=e.i(787358),i=e.i(4333930),o=e.i(9318476),u=e.i(8004707),d=e.i(1438473);let c=[{label:"Vercel Function",value:"function",icon:(0,l.jsx)(i.FunctionSquare,{size:16})},{label:"Middleware",value:"middleware",icon:(0,l.jsx)(n.FunctionMiddleware,{size:16})},{label:"Cache",value:"cache",icon:(0,l.jsx)(o.EdgeCache,{size:16})},{label:"Rewrites",value:"rewrite",icon:(0,l.jsx)(u.ArrowGlobe,{size:16}),optional:!0},{label:"Redirects",value:"redirect",icon:(0,l.jsx)(d.ArrowRight,{size:16}),optional:!0}],m=c.filter(e=>!e.optional).map(e=>e.value),f=[{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"}],g=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"HEAD",value:"HEAD"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"}],h=[{label:"API Endpoint",value:"api"},{label:"Server-side Rendering",value:"ssr"},{label:"Incremental Static Regeneration",value:"isr"},{label:"Partial Prerendering",value:"ppr"},{label:"Server Components",value:"rsc"},{label:"Cron Job",value:"cron"}],p=[{name:"level",attributeName:"level",suggestions:f.map(e=>e.value)},{name:"resource",attributeName:"source",suggestions:c.filter(e=>!e.optional).map(e=>e.value)},{name:"requestType",attributeName:"requestTags",suggestions:h.map(e=>e.value)},{name:"function",attributeName:"route",suggestions:["function name"]},{name:"requestPath",attributeName:"requestPath",suggestions:["request path"]},{name:"host",attributeName:"domain",suggestions:["domain name"]},{name:"deployment",attributeName:"deploymentDomain",suggestions:["deployment name"]},{name:"method",attributeName:"requestMethod",suggestions:g.map(e=>e.value)},{name:"status",attributeName:"statusCode",suggestions:["status code"]},{name:"cache",attributeName:"cache",suggestions:["cache value"]},{name:"environment",attributeName:"environment",suggestions:[{label:"Production",value:"production"},{label:"Preview",value:"preview"}].map(e=>e.value)},{name:"branch",attributeName:"branch",suggestions:["branch name"]},{name:"requestId",attributeName:"requestId",suggestions:["Request ID - a partial of the requestId is required to search, ex:abcde-1678961364403-a1b2c3d4f5e6"]},{name:"sessionId",attributeName:"sessionId",suggestions:["id of your tracing session"]},{name:"traceId",attributeName:"traceId",suggestions:["id of the trace"]},{name:"deploymentId",attributeName:"deploymentId",suggestions:["id of the deployment"]},{name:"invocationId",attributeName:"invocationId",suggestions:["id of the invocation"]}],v=p.filter(e=>"deploymentId"!==e.name&&"deployment"!==e.name);e.s(["DEFAULT_SOURCES",0,m,"FILTERS",0,p,"FILTERS_WITHOUT_DEPLOYMENT",0,v,"GROUP_LEVEL_OPTIONS",0,f,"REQUEST_METHOD_OPTIONS",0,g,"REQUEST_TAGS_OPTIONS",0,h,"SOURCE_OPTIONS",0,c],7209054);var b=e.i(516467),x=e.i(3793583),y=e.i(7917902),_=e.i(268049);let j={hobby:{hours:1},pro:{days:1},enterprise:{days:3}},I={hobby:{hours:1},pro:{days:30},enterprise:{days:30}},T={days:14},C={days:30};function E(e,t,r){return r?C:(e?I:j)[t??"hobby"]}function w(e,t,r){let s=E(e,t,r);return(0,_.milliseconds)(s)>(0,_.milliseconds)(T)?T:s}e.s(["getMaxRetention",0,E,"getMaxTimeRange",0,w],294613);var N=e.i(854682);let S=()=>{let{team:e,isLoading:r}=(0,y.useAccount)(),{ready:s,impersonating:a,hasObservabilityPlusAccessOnCurrentProject:l}=(0,N.useHasObservabilityPlus)(),n=!!s&&l,i=e?.billing?.plan??"hobby";return(0,t.useMemo)(()=>{let t=E(n,i,a),s=w(n,i,a),l={past30Minutes:{minutes:30},pastHour:{hours:1},past12Hours:{hours:12},pastDay:{days:1},past3Days:{days:3},pastWeek:{days:7},past2Weeks:{days:14},maximum:s};return{isLoading:r,billingPlan:i,maxRetention:t,maxTimeRange:s,getNewDates:e=>{let t=new Date;return[(0,x.sub)(t,l[e]),t]},findClosestTimeline:(e,t)=>{let r,s,a,n=[];for(let e of Object.values(l))n.push((0,x.sub)(t,e));let i=isNaN(a=+(0,b.toDate)(e))?NaN:(n.forEach((e,t)=>{let l=(0,b.toDate)(e);if(isNaN(+l)){r=NaN,s=NaN;return}let n=Math.abs(a-l);(null==r||n<s)&&(r=t,s=n)}),r),o=Object.keys(l);return void 0===i?"pastHour":o[i]},teamId:e?.id,hasExtendedTimeline:n}},[i,n,a,r,e?.id])};e.s(["useUserRetention",0,S],8063555);var L=e.i(2144405);let[P,q]=(0,e.i(6695099).default)(function(e){let t="true"!==L.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==L.default.env.NEXT_PUBLIC_TESTSERVER&&"1"===L.default.env.NEXT_PUBLIC_DASH?56:46;return{functionFilterDefaultExpanded:!1,isDeploymentEditable:!0,...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r})),topOffset:t}});function U(e){let t=[],r="",s=!1;for(let a=0;a<e.length;a++){let l=e[a];'"'===l&&(s=!s),","!==l||s?r+=l:r.length>0&&(t.push(r),r="")}return r.length>0&&t.push(r),t}e.s(["PageConfigProvider",0,P,"usePageConfig",0,q],6094744);let A=[["levels","level","level"],["sources","resource","source"],["environments","environment","environment"],["routes","route","route"],["requestPaths","requestPath","requestPath"],["statusCodes","status","statusCode"],["requestTags","requestType","requestTags"],["domains","host","domain"],["requestMethods","method","requestMethod"],["caches","cache","cache"],["branches","branch","branch"],["deploymentIds","deploymentId","deploymentId"],["deploymentDomains","deployment","deploymentDomain"],["requestIds","requestId","requestId"],["sessionIds","sessionId","sessionId"],["traceIds","traceId","traceId"],["invocationIds","invocationId","invocationId"]],D=new Map(A.map(e=>{let[t,r]=e;return[t,r]})),R=new Map(A.map(e=>{let[t,r]=e;return[r,t]})),M=new Map(A.map(e=>{let[t,r,s]=e;return[r,s]})),k=new Map(A.map(e=>{let[t,r,s]=e;return[s,r]}));function O(e){if(e.startsWith('"'))return{type:"quote",value:e};if(e.includes(":")){let t=e.indexOf(":");return{type:"filter",key:e.slice(0,t),value:e.slice(t+1)}}return{type:"search",value:e}}function F(e){let t=[],r=!1,s=-1,a=0;for(;a<e.length;){let l=e[a];if('"'===l)r?r=!1:s<0&&(r=!0,s=a);else if(" "===l){if(r){a++;continue}s>=0&&(t.push({text:e.slice(s,a),start:s,end:a}),s=-1)}else s<0&&(s=a);a++}return s>=0&&t.push({text:e.slice(s,e.length),start:s,end:e.length}),t}function V(e){let t=[];for(let[r,s]of Object.entries(e)){if("searchQuery"===r&&s&&t.push(s),"sources"===r&&Array.isArray(s)&&s.length===m.length&&s.every(e=>m.includes(e)))continue;let e=D.get(r);if(!e)continue;let a=Array.isArray(s)?s.join(","):s,l=`${e}:${a}`;a&&t.push(l)}return t.join(" ")}function G(e){let t=F(e),r=[],s={};for(let{text:e}of t){let t=O(e);if("filter"===t.type){let e=R.get(t.key);e&&t.value&&(s[e]=U(t.value))}else r.push(e)}return{...r.length>0&&{searchQuery:r.join(" ")},...s}}e.s(["API_ATTRIBUTE_TO_SEARCH_FILTER",0,k,"QUERY_STATE_TO_SEARCH_FILTER",0,D,"SEARCH_FILTER_TO_API_ATTRIBUTE",0,M,"SEARCH_FILTER_TO_QUERY_STATE",0,R,"TAG_TRIGGER_SEARCH_AFTER_INSERT",0,"trigger-search-after-insert"],6617049),e.s(["parseSearchQuery",0,F,"parseSearchTag",0,O,"queryStateToSearchQuery",0,V,"searchQueryToQueryState",0,G,"validateTag",0,function(e){let t=[];if(e.includes('"')&&(e.slice(1,-1).includes('"')&&t.push({type:"unexpected-quote",message:"Unexpected quote in the middle of the tag"}),e.startsWith('"')?e.endsWith('"')||t.push({type:"bad-quote-tag",message:"Missing closing quote",hideWhileEditing:!0}):t.push({type:"bad-quote-tag",message:"Quoted strings must start with a quote"})),!(e.startsWith('"')&&e.endsWith('"'))&&e.includes(":")){let r=e.indexOf(":"),s=e.slice(0,r),a=e.slice(r+1);R.has(s)||t.push({type:"unknown-filter",message:`Unknown filter "${s}"`}),""===a&&t.push({type:"empty-filter-value",message:"Filter value is empty",hideWhileEditing:!0})}return{isValid:0===t.length,issues:t}}],4465448);let B=()=>{let e=(0,s.useParams)(),{deploymentIdQuery:r}=q(),l=(0,t.useMemo)(()=>r&&"string"==typeof e?.id?[`dpl_${e.id}`]:[],[r,e]),n=(0,t.useMemo)(()=>({timeline:{defaultValue:"past30Minutes",onChangeRemoveKeys:["startDate","endDate","page","live"]},startDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},endDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},live:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e,onChangeRemoveKeys:["page","timeline","startDate","endDate","paused"]},paused:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},page:{defaultValue:1,formatToUrl:e=>e.toString(),parseFromUrl:e=>Number(e)},selectedLogId:{defaultValue:""},refreshedAt:{defaultValue:void 0},caches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},levels:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentDomains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentIds:{defaultValue:l,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},routes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>U(e)},requestPaths:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>U(e)},requestMethods:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},domains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},sources:{defaultValue:m,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestTags:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},searchQuery:{defaultValue:""},search:{defaultValue:""},statusCodes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},environments:{defaultValue:[],formatToUrl:e=>e.length>0?e.join(","):"",parseFromUrl:e=>e.split(",")},branches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},myLogs:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},sessionIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},hasTraces:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},traceIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},invocationIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},panelState:{defaultValue:"auto"},preset:{defaultValue:null},useClickHouseLogs:{defaultValue:void 0},useProgressiveChunking:{defaultValue:void 0}}),[l]),{set:i,state:o}=(0,a.useSearchParamsState)(n),u=(0,t.useRef)(!1);(0,t.useEffect)(()=>{if(u.current)return;let e=(()=>{if(o.sources.length!==m.length)return!0;let e=[...o.sources].sort(),t=[...m].sort();return!e.every((e,r)=>e===t[r])})(),t=(()=>{if(o.deploymentIds.length!==l.length)return!0;let e=[...o.deploymentIds].sort(),t=[...l].sort();return!e.every((e,r)=>e===t[r])})();(o.levels.length>0||o.deploymentDomains.length>0||o.routes.length>0||o.requestPaths.length>0||o.requestMethods.length>0||o.domains.length>0||o.requestTags.length>0||""!==o.searchQuery||o.statusCodes.length>0||o.environments.length>0||o.branches.length>0||o.requestIds.length>0||o.sessionIds.length>0||o.traceIds.length>0||o.invocationIds.length>0||o.caches.length>0||e||t)&&!o.search&&(u.current=!0,i({search:V({levels:o.levels,deploymentDomains:o.deploymentDomains,deploymentIds:t?o.deploymentIds:[],routes:o.routes,requestPaths:o.requestPaths,requestMethods:o.requestMethods,domains:o.domains,requestTags:o.requestTags,searchQuery:o.searchQuery,statusCodes:o.statusCodes,environments:o.environments,branches:o.branches,requestIds:o.requestIds,sessionIds:o.sessionIds,traceIds:o.traceIds,invocationIds:o.invocationIds,caches:o.caches,sources:e?o.sources:[]}),levels:[],deploymentDomains:[],deploymentIds:l,routes:[],requestPaths:[],requestMethods:[],domains:[],requestTags:[],searchQuery:"",statusCodes:[],environments:[],branches:[],requestIds:[],sessionIds:[],traceIds:[],invocationIds:[],caches:[],sources:m}))},[o,i,l]);let d=(0,t.useCallback)(()=>{let e=(()=>{if(o.sources.length!==m.length)return!0;let e=[...o.sources].sort(),t=[...m].sort();return!e.every((e,r)=>e===t[r])})(),t=(()=>{if(o.deploymentIds.length!==l.length)return!0;let e=[...o.deploymentIds].sort(),t=[...l].sort();return!e.every((e,r)=>e===t[r])})();return""!==o.search||e||t||o.myLogs||o.hasTraces||void 0!==o.startDate||void 0!==o.endDate||"past30Minutes"!==o.timeline||o.live},[o,l]);return(0,t.useMemo)(()=>({state:o,setState:i,hasActiveFilters:d}),[o,i,d])};e.s(["useLogsApiParams",0,()=>{let{state:e}=B(),{getNewDates:s}=S(),a=(0,t.useMemo)(()=>{if(e.startDate&&e.endDate)return{startDate:e.startDate,endDate:e.endDate};let[t,a]=s(e.timeline);return{startDate:(0,r.endOfDuration)(t,{minutes:1}),endDate:(0,r.endOfDuration)(a,{minutes:1})}},[e.startDate,e.endDate,e.timeline,e.refreshedAt,s]);return(0,t.useMemo)(()=>({...e,...a}),[e,a])},"useLogsQueryState",0,B,"useLogsSearchState",0,function(){let{state:e,setState:r}=B(),s=(0,t.useMemo)(()=>e.search?G(e.search):{},[e.search]),a=(0,t.useCallback)(e=>{r({search:e})},[r]),l=(0,t.useCallback)((t,s)=>{r({search:V({...e.search?G(e.search):{},[t]:s})})},[e.search,r]),n=(0,t.useCallback)(t=>{r({search:V({...e.search?G(e.search):{},[t]:[]})})},[e.search,r]);return{search:e.search,filters:s,setSearch:a,setFilter:l,clearFilter:n}}],7033605),e.s(["useAbortableFetcher",0,function(e,r){let s=(0,t.useRef)(null),a=(0,t.useRef)(e),l=(0,t.useRef)(r);return a.current=e,l.current=r,(0,t.useCallback)(async e=>{s.current?.abort(),s.current=new AbortController;try{return await a.current(e,s.current.signal)}catch(e){if(e instanceof Error&&"AbortError"===e.name)return l.current;throw e}},[])}],3813596)},710731,e=>{e.v({badge:"generic-filter-module__Jtj5jG__badge",button:"generic-filter-module__Jtj5jG__button",card:"generic-filter-module__Jtj5jG__card",checkbox:"generic-filter-module__Jtj5jG__checkbox",onlyInstance:"generic-filter-module__Jtj5jG__onlyInstance",option:"generic-filter-module__Jtj5jG__option",optionsContainer:"generic-filter-module__Jtj5jG__optionsContainer",skeleton:"generic-filter-module__Jtj5jG__skeleton",tooltip:"generic-filter-module__Jtj5jG__tooltip",tooltipContainer:"generic-filter-module__Jtj5jG__tooltipContainer",truncateText:"generic-filter-module__Jtj5jG__truncateText"})},6209667,e=>{"use strict";var t=e.i(4205214),r=e.i(6357175),s=e.i(8660982),a=e.i(5255926),l=e.i(8835183),n=e.i(3869281),i=e.i(5468328),o=e.i(2988836),u=e.i(9031150),d=e.i(7797615),c=e.i(710731),m=e.i(9722978);let f=(0,s.memo)(function(e){let{options:a,onChange:n,onSearch:i=()=>{},searchId:o,searchLabel:m="Search",searchPlaceholder:f="Searchâ€¦",isCountLoading:h=!1,isFirstLoading:b=!1,isLoading:x=!1,hideSearch:y=!1,selectedOptions:_=[],showSelectedOptionsAtTop:j,totalAvailableOptions:I}=e,[T,C]=(0,s.useState)(),E=(0,r.useDebouncedCallback)(i,300),w=(0,s.useRef)(null),N=(0,s.useRef)(void 0),S=(0,s.useMemo)(()=>{let e=[],t=[];return j&&_.length?(a.forEach(r=>{_.includes(r.value)?e.push(r):t.push(r)}),[...e,...t]):a},[a,_,j]);return((0,s.useEffect)(()=>{let e=N.current;j&&e&&_!==e&&w.current&&_.findIndex(t=>!e.includes(t))>=0&&(w.current.scrollTop=0),N.current=_},[_,j]),x||0!==I||0!==_.length||T)?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[y?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:o,children:m}),(0,t.jsx)(l.SearchInput,{className:c.default.searchInput,clearable:!0,id:o,loading:x,onChange:e=>{E(e.target.value),C(e.target.value)},placeholder:f,value:T,width:"100%"})]}),(0,t.jsxs)("div",{className:c.default.optionsContainer,ref:w,tabIndex:-1,children:[S.map(e=>(0,t.jsx)(g,{additionalInfo:e.additionalInfo,checked:_.includes(e.value),count:e.count,icon:e.icon,isCountLoading:h,label:e.label,onChange:()=>{(0,u.awaitPaint)().then(()=>{n(_.includes(e.value)?_.filter(t=>t!==e.value):[..._,e.value])})},value:e.value},e.value)),b?(0,t.jsx)(p,{selectedCount:_.length}):null]}),I&&I>25?(0,t.jsxs)("p",{className:"text-label-12",style:{color:"var(--accents-5)",textAlign:"center"},children:[(0,d.abbreviateNumber)(I-25)," more to search"]}):null]}):(0,t.jsx)(v,{})});function g(e){let{count:r,label:l,value:u,onChange:f,checked:g,icon:h,isCountLoading:p,additionalInfo:v}=e,[b,x]=(0,s.useState)(!1),y=(0,s.useRef)(null),_="string"==typeof l?l:u;return(0,t.jsx)("div",{onMouseEnter:()=>{y.current&&x(y.current.offsetWidth<y.current.scrollWidth)},className:(0,m.default)("flex flex-col items-stretch justify-center flex-initial",c.default.option),children:(0,t.jsx)(i.Tooltip,{className:c.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!b,lowerDelay:!0,maxWidth:"100%",position:"right",tabIndex:null,text:_,tooltipClassName:c.default.tooltip,useParentForBoundingRect:!0,children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start flex-initial",children:(0,t.jsx)(n.Checkbox,{checked:g,className:c.default.checkbox,fullWidth:!0,id:u,onChange:f,textOverflow:!1,value:u,children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[h?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:h}):null,(0,t.jsx)("span",{className:c.default.truncateText,ref:y,children:l}),v?(0,t.jsx)(i.Tooltip,{text:v,children:(0,t.jsx)(o.InformationFillSmall,{})}):null,p?(0,t.jsx)(a.Skeleton,{height:20,style:{marginLeft:"auto"},width:30}):null,p||"number"!=typeof r?null:(0,t.jsx)("span",{className:c.default.badge,style:{marginLeft:"auto"},children:(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:(0,d.abbreviateNumber)(r).toUpperCase()})})]})})})})})}function h(){return(0,t.jsxs)("div",{className:(0,m.default)("flex flex-row items-stretch justify-start gap-2 flex-initial",c.default.skeleton),children:[(0,t.jsx)(a.Skeleton,{height:20,width:20}),(0,t.jsx)(a.Skeleton,{height:23,width:170})]})}function p(e){let{selectedCount:r}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:r>3?0:3-r},(e,r)=>(0,t.jsx)(h,{},r))})}function v(e){let{comment:r}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex flex-col items-center justify-center gap-1 flex-initial",c.default.card),children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:r||"No options."})})}e.s(["LogFilter",0,f,"generateFilterOption",0,e=>{let{attributeValue:t,total:r}=e;return{label:t,value:t,count:r}}])},7827812,e=>{"use strict";e.s(["LOGS_PAGE_SIZE",()=>g,"useGroupLogs",()=>v,"useGroupLogsInternal",()=>p]);var t=e.i(7222834),r=e.i(8042625),s=e.i(4244280),a=e.i(7917902),l=e.i(7432042),n=e.i(8660982),i=e.i(1138941),o=e.i(6060673),u=e.i(7033605),d=e.i(9224004),c=e.i(8306707),m=e.i(4597921),f=e.i(3813596);let g=50,h={hobby:(0,l.default)("65 seconds"),pro:(0,l.default)("205 seconds"),enterprise:(0,l.default)("905 seconds")};function p(){let{data:e}=(0,o.useProject)((0,i.useProjectIdOrName)()),{user:l,team:d,isLoading:g}=(0,a.useAccount)(),p=(0,m.useServerFlag)("logs-live-mode-refresh-interval",2e3),v=(0,u.useLogsApiParams)(),b=(0,f.useAbortableFetcher)(async(e,t)=>{let r=await fetch(e,{signal:t});if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}return r.json()},{rows:[],hasMoreRows:!1}),x=(0,t.default)((t,a)=>{if(a&&!a.hasMoreRows)return null;if(g||!e)return;let n=null!==d?d.id:null,i=null!==l?l?.uid:null,o=d?.billing?h[d.billing.plan]:h.enterprise,u=n||i;if(null===u)return;let m=v.live?void 0:v.endDate?.getTime(),f=t;t>0&&a?.rows&&a.rows.length>0&&(m=new Date(a.rows[a.rows.length-1].timestamp).getTime()-1,f=0);let p=v.requestIds.length>0?Math.min(...v.requestIds.map(e=>Number(e.split("-")[1])))-o:v.startDate.getTime(),b=v.requestIds.length>0?Math.max(...v.requestIds.map(e=>Number(e.split("-")[1])))+o:m,x=(0,r.encode)({page:f,...(0,c.buildLogsFilterParams)({projectId:e.id,ownerId:u,startDate:p,endDate:b,search:v.search,defaultDeploymentIds:v.deploymentIds,myLogs:v.myLogs,hasTraces:v.hasTraces,useClickHouseLogs:v.useClickHouseLogs,useProgressiveChunking:v.useProgressiveChunking})});return`${s.API_LOGS}/request-logs${x}`},b,{refreshInterval:v.live?p:0,dedupingInterval:v.live?800:void 0,keepPreviousData:!0,revalidateAll:v.live,revalidateOnFocus:v.live,revalidateFirstPage:v.live}),y=(0,n.useMemo)(()=>x.data?.flatMap(e=>e.rows??[])||[],[x.data]);return(0,n.useMemo)(()=>({...x,logRows:y}),[x,y])}function v(){let e=(0,d.useLogs)();return{logRows:e.logRows,...e.swr}}},9224004,e=>{"use strict";e.s(["GroupLogsProvider",()=>f,"useLogs",()=>g],9224004);var t=e.i(4205214),r=e.i(8660982),s=e.i(7827812),a=e.i(349746),l=e.i(7033605),n=e.i(5851942),i=e.i(5677444),o=e.i(9171423),u=e.i(134877),d=e.i(8042625),c=e.i(7620661);let m=(0,r.createContext)(null);function f(e){let{children:f}=e,{selectedLogId:g}=(0,l.useLogsApiParams)(),h=(0,s.useGroupLogsInternal)(),p=(0,a.useSelectedLogInternal)(g,h.logRows),v=(e=>{let[t,s]=(0,r.useState)({}),a=(0,r.useRef)(new Map),l=(0,i.useParams)(),n=l?.teamSlug||"";if((0,r.useEffect)(()=>{if(!n||!e)return;let t=a.current;t.has(e)||(t.set(e,void 0),(async()=>{let r=await (0,o.fetchApi)(`/api/observability/traces/${e}${(0,d.encode)({teamId:n,project:l?.project})}`);if(!r||"string"==typeof r||"error"in r||(0,u.isAPIError)(r))return t.delete(e);t.set(e,r),s({})})())},[n,e,l]),e)return a.current.get(e)})(p.data?.traceId&&p.data?.sessionId?p.data.traceId:void 0),b=(0,c.useTracingQuickLinks)({includeRequest:!1}),x=(0,r.useMemo)(()=>({logRows:h.logRows,selectedLog:p.data,selectedTrace:v,isLoadingSelected:p.isLoading,error:p.error,swr:h}),[h,p.data,v,p.isLoading,p.error]);return(0,t.jsx)(m.Provider,{value:x,children:(0,t.jsx)(n.TraceViewerProvider,{getQuickLinks:b,children:f})})}function g(){let e=(0,r.useContext)(m);if(!e)throw Error("useLogs must be used within a LogsProvider");return e}m.displayName="LogsContext"},349746,e=>{"use strict";e.s(["useSelectedLog",()=>f,"useSelectedLogInternal",()=>m]);var t=e.i(850302),r=e.i(8042625),s=e.i(4244280),a=e.i(7917902),l=e.i(8660982),n=e.i(1138941),i=e.i(6060673),o=e.i(8306707),u=e.i(9224004),d=e.i(7033605),c=e.i(3813596);function m(e,u){let{team:m,isLoading:f}=(0,a.useAccount)(),{data:g}=(0,i.useProject)((0,n.useProjectIdOrName)()),{useClickHouseLogs:h,useProgressiveChunking:p}=(0,d.useLogsApiParams)(),v=(0,l.useRef)(null),b=(0,c.useAbortableFetcher)(async(t,r)=>{let s=await fetch(t,{signal:r});if(!s.ok){let e=await s.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}let a=await s.json(),l=a.rows?.[0];return l&&l.events.length>0&&e&&(v.current={logId:e,log:l}),l},void 0),x=(0,l.useMemo)(()=>{if(v.current&&v.current.logId===e)return v.current.log},[e,v.current?.logId]),y=(0,l.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),_=(0,l.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),j=(0,l.useMemo)(()=>!x&&(!y||!(y.events.length>0))&&y&&0===y.events.length,[y,x]),I=(0,t.default)(()=>{if(y&&!j||f||!e)return null;let t=g?.id;if(!m||!t)return null;let a=m.id,l=(0,o.extractTimestampOfLogId)(e);if(void 0===l)return null;let n=(0,r.encode)({ownerId:a,projectId:t,startDate:l,endDate:l,requestId:[e],useClickHouseLogs:h,useProgressiveChunking:p});return`${s.API_LOGS}/request-logs${n}`},b,{revalidateOnFocus:!1,refreshInterval:500*!!j});return e?{data:I.data??x??y??_,error:I.error,isLoading:I.isLoading}:{data:void 0,error:void 0,isLoading:!1}}function f(){let e=(0,u.useLogs)();return{data:e.selectedLog,error:e.error,isLoading:e.isLoadingSelected}}},4569709,e=>{e.v({draggable:"draggable-border-module__CfqrMq__draggable",dragging:"draggable-border-module__CfqrMq__dragging",fakeBorder:"draggable-border-module__CfqrMq__fakeBorder",horizontal:"draggable-border-module__CfqrMq__horizontal",leftBorder:"draggable-border-module__CfqrMq__leftBorder",root:"draggable-border-module__CfqrMq__root",vertical:"draggable-border-module__CfqrMq__vertical"})},8510056,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),s=e.i(9722978),a=e.i(4569709);e.s(["DraggableBorder",0,function(e){let{element:l,onWidthChange:n,position:i,onReset:o,onStartDrag:u,onStopDrag:d}=e,c=(0,r.useRef)(0),m=(0,r.useRef)(0),[f,g]=(0,r.useState)(!1),h="bottom"===i||"top"===i;return(0,r.useEffect)(()=>{let e=e=>{if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!f)return;let t=m.current;if(h){let r=e.clientY-c.current;t+="top"===i?-r:r}else"left"===i?t+=c.current-e.clientX:t+=e.clientX-c.current;n(t)},t=()=>{g(!1),d&&d()};return document.addEventListener("dragover",e),document.addEventListener("drop",t,{capture:!0}),()=>{document.removeEventListener("dragover",e),document.removeEventListener("drop",t)}},[f,n,i,h,d]),(0,t.jsxs)("div",{className:(0,s.clsx)(a.default.root,{[a.default.horizontal]:h,[a.default.vertical]:!h}),style:{[i]:"right"===i?"-10px":"-8px"},children:[(0,t.jsx)("div",{className:a.default.draggable,draggable:!0,onClick:e=>{o&&2===e.detail&&o()},onDrag:()=>{g(!0)},onDragEnd:()=>{g(!1),d&&d()},onDragStart:e=>{g(!0),u&&u(),l.current&&(c.current=h?e.clientY:e.clientX,m.current=h?l.current.offsetHeight:l.current.offsetWidth)},role:"none"}),(0,t.jsx)("div",{className:(0,s.clsx)(a.default.fakeBorder,{[a.default.dragging]:f,[a.default.leftBorder]:"left"===i}),draggable:!1})]})}])},9321858,6097977,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),s=e.i(3285452),a=e.i(3671642),l=e.i(5323212),n=e.i(6891161),i=e.i(8735244);let o=[1e3,5e3,1e4,5e4,1e5];e.s(["GroupExportModal",0,function(e){let{onClose:u,getExport:d,format:c}=e,[m,f]=(0,r.useState)(1e3),[g,h]=(0,r.useState)(!1),p=async()=>{h(!0),await d(c,m),h(!1),u()};return(0,t.jsxs)(n.Modal.Modal,{active:!0,onClickOutside:u,children:[(0,t.jsx)(n.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("header",{children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between flex-initial",children:[(0,t.jsxs)("h2",{className:"text-heading-24",children:["Export Logs (",c.toUpperCase(),")"]}),g?(0,t.jsx)(i.Spinner,{size:20}):null]})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Export to ",c]}),(0,t.jsx)(a.Label,{id:"select-line-limit",value:"Result Limit",withInput:!0,children:(0,t.jsx)(l.Select,{id:"select-line-limit",onChange:e=>{f(Number(e.target.value))},prefix:(0,t.jsx)(s.ArrowDown,{}),value:m,children:o.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:u,type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Modal.Action,{disabled:g,onClick:p,type:"secondary",children:"Export"})]})]})}],9321858);var u=e.i(455575),d=e.i(8042625),c=e.i(277234),m=e.i(4244280),f=e.i(7917902),g=e.i(6818658),h=e.i(3196486),p=e.i(1138941),v=e.i(6060673),b=e.i(7033605);function x(e,t){let r=window.URL.createObjectURL(new Blob([e])),s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(s),s.click(),document.getElementById("select-line-limit").removeChild(s)}function y(e,t){let r=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(s),s.click(),document.getElementById("select-line-limit").removeChild(s)}e.s(["downloadCsv",0,x,"downloadJson",0,y,"useGroupLogsExport",0,function(){let{user:e,team:t,isLoading:r}=(0,f.useAccount)(),s=(0,u.useToasts)(),{startDate:a,endDate:l,search:n,myLogs:i,hasTraces:o,useClickHouseLogs:_}=(0,b.useLogsApiParams)(),{data:j}=(0,v.useProject)((0,p.useProjectIdOrName)());return{getExport:async(u,f)=>{if(r||!j)return;let p=null!==t?t.id:null,v=null!==e?e.uid:null,b=(0,d.encode)({projectId:j.id,ownerId:p||v,startDate:a.getTime(),endDate:l?.getTime(),search:n||void 0,myLogs:i?"true":void 0,hasTraces:o?"true":void 0,useClickHouseLogs:_,format:u,pageSize:f}),I=`${m.API_GROUP_LOGS_EXPORT}${b}`,T=await (0,c.fetchAPI)(I);if(T.error)return void s.error("Something went wrong, please try again later");if("csv"===u){let e=new Promise(e=>{x(T.data,"logs_result.csv"),setTimeout(()=>{e(!0)},500)});await e.then(()=>s.success("csv file downloaded"))}else{let e=new Promise(e=>{y(JSON.stringify(T.data),"logs_result.json"),setTimeout(()=>{e(!0)},500)});await e.then(()=>s.success("json file downloaded"))}(0,h.sendToSnowflake)(g.Topic.VercelAppV0LogQueryResultsExported,{team_id:p||void 0,user_id:v||"",project_id:j.id,export_type:u,num_results_downloaded:f},"vercel-app")}}}],6097977)}]);

//# debugId=5648ac54-16e5-b565-c57f-75e36cebc0ff
//# sourceMappingURL=03334b9ede126a99.js.map